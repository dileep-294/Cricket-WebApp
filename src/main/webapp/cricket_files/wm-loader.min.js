!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/compiler"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@wm/core",["exports","rxjs","@angular/compiler","@angular/core","@angular/common/http"],t):t((e.wm=e.wm||{},e.wm.core={}),e.rxjs,e.ng.compiler,e.ng.core,e.ng.common.http)}(this,function(e,t,n,i,o){"use strict";var r,a,s,l;(r=e.FormWidgetType||(e.FormWidgetType={})).AUTOCOMPLETE="autocomplete",r.CHECKBOX="checkbox",r.CHECKBOXSET="checkboxset",r.CHIPS="chips",r.COLORPICKER="colorpicker",r.CURRENCY="currency",r.DATE="date",r.DATETIME="datetime",r.NUMBER="number",r.PASSWORD="password",r.RADIOSET="radioset",r.RATING="rating",r.RICHTEXT="richtext",r.SELECT="select",r.TOGGLE="toggle",r.SLIDER="slider",r.SWITCH="switch",r.TEXT="text",r.TEXTAREA="textarea",r.TIME="time",r.TIMESTAMP="timestamp",r.TYPEAHEAD="typeahead",r.UPLOAD="upload",(a=e.DataType||(e.DataType={})).INTEGER="integer",a.BIG_INTEGER="big_integer",a.SHORT="short",a.FLOAT="float",a.BIG_DECIMAL="big_decimal",a.DOUBLE="double",a.LONG="long",a.BYTE="byte",a.STRING="string",a.CHARACTER="character",a.TEXT="text",a.DATE="date",a.TIME="time",a.TIMESTAMP="timestamp",a.DATETIME="datetime",a.LOCALDATETIME="localdatetime",a.BOOLEAN="boolean",a.LIST="list",a.CLOB="clob",a.BLOB="blob",(s=e.MatchMode||(e.MatchMode={})).BETWEEN="between",s.GREATER="greaterthanequal",s.LESSER="lessthanequal",s.NULL="null",s.EMPTY="empty",s.NULLOREMPTY="nullorempty",s.EQUALS="exact",(l=e.DEFAULT_FORMATS||(e.DEFAULT_FORMATS={})).DATE="yyyy-MM-dd",l.TIME="HH:mm:ss",l.TIMESTAMP="timestamp",l.DATETIME="yyyy-MM-ddTHH:mm:ss",l.LOCALDATETIME="yyyy-MM-ddTHH:mm:ss",l.DATETIME_ORACLE="yyyy-MM-dd HH:mm:ss",l.DATE_TIME="yyyy-MM-dd HH:mm:ss";var c=function(e,t,n){var i="";return e.forEach(function(e,o){if(o&&o.endsWith(".event")){var r=o.split(".")[0];i=" "+i+" ("+r+')="'+(t?t+".":"")+"triggerUploadEvent($event, '"+r+"', '"+n+"', row)\" "}}),i},p=c,u=function(e,t,i){i=i.replace("bind:","");var o=e.attrs.find(function(e){return"datasetboundexpr"===e.name});"dataset"!==t.name||o||e.attrs.push(new n.Attribute("datasetboundexpr",i,t.sourceSpan,t.valueSpan))},d=u,m=function(e,t,n,i,o){void 0===i&&(i=""),void 0===o&&(o="item");var r,a,s,l=new RegExp("("+t+")(\\[0\\])?(.data\\[\\$i\\])?(.content\\[\\$i\\])?(\\[\\$i\\])?","g"),c={"wm-list":["itemclass","disableitem","dataset"]};n&&(r=new RegExp("(Widgets."+n+".currentItem)\\b","g"),a=new RegExp("(Widgets."+n+".currentItemWidgets)\\b","g"),s=new RegExp("(Widgets.(.*).(formWidgets|filterWidgets))\\b","g")),(_.isArray(e)?e:c[e.name]?[e]:e.children||[]).forEach(function(e){if(e.name){var p=e.name,d=new RegExp("bind:\\s*\\(*"+t+"\\)*\\.length\\)*");e.attrs.forEach(function(n){var m=n.value&&n.value.trim();_.startsWith(m,"bind:")&&((!c[p]||c[p]&&c[p].indexOf(n.name)>-1)&&_.includes(m,t)&&m!=="bind:"+t&&!d.test(m)&&(m=m.replace("bind:",""),u(e,n,m),m="bind:"+(m=m.replace(l,o))),r&&r.test(m)&&((m.includes(".formWidgets")||m.includes(".filterWidgets"))&&(m=m.replace(s,"Widgets")),u(e,n,m),m=m.replace(r,o)),a&&a.test(m)&&(m=m.replace(a,i+"currentItemWidgets")),n.value=m)}),m(e.children,t,n,i,o)}})},h=new Map([["display-name","caption"],["display-name.bind","caption.bind"],["title","hint"],["title.bind","hint.bind"],["show","show"],["show.bind","show.bind"],["disabled","disabled"],["disabled.bind","disabled.bind"],["hyperlink","hyperlink"],["hyperlink.bind","hyperlink.bind"],["target","target"],["conditionalclass.bind","conditionalclass.bind"],["conditionalstyle.bind","conditionalstyle.bind"]]),f=window.requestAnimationFrame,g=[],v=function(e){g.length||f(function(){g.forEach(function(e){return e()}),g.length=0}),g.push(e)},y=function(e,t,n){var i=function(t){return e.classList.remove(t)};(t=t||"").split(" ").forEach(function(e){e.length&&(n?i(e):v(function(){return i(e)}))})},b=function(e,t,n){var i=function(t){return e.classList.add(t)};(t=t||"").split(" ").forEach(function(e){e.length&&(n?i(e):v(function(){return i(e)}))})},w=function(e,t,n,i){var o=function(){return e.style[t]=n};i?o():v(o)},P=function(e,t,n,i){var o=function(){return e instanceof Element&&e.setAttribute(t,n)};i?o():v(o)};function O(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})}function R(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function E(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function T(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T(arguments[t]));return e}var C={};function I(){return window._WM_APP_PROPERTIES?window._WM_APP_PROPERTIES:C}var A,D,N=function(){function e(e){this.generator=function(e){var t;return R(this,function(n){switch(n.label){case 0:t=1,n.label=1;case 1:return[4,""+e+t++];case 2:return n.sent(),[3,1];case 3:return[2]}})}(e)}return e.prototype.nextUid=function(){return this.generator.next().value},e}(),x=function(e){return"string"==typeof e},M=function(e){return void 0!==e},k=function(e,t){return void 0===e?t:e},L=k,F=function(e,t){return void 0===e?t:void 0===t?e:e+t},B=F,G=function(e,t){return k(e,0)-k(t,0)},j=G,V=function(){},U=V,W=new Map,q=new Map,H=new Map,z=function(e,t){return"object"!=typeof e&&"object"!=typeof t&&(e!=e&&t!=t||e===t)},Y=z,K=function(e,t){var n=t.length,i=n>10;switch(n){case 10:if(i=!z(e[9],t[9]))break;case 9:if(i=!z(e[8],t[8]))break;case 8:if(i=!z(e[7],t[7]))break;case 7:if(i=!z(e[6],t[6]))break;case 6:if(i=!z(e[5],t[5]))break;case 5:if(i=!z(e[4],t[4]))break;case 4:if(i=!z(e[3],t[3]))break;case 3:if(i=!z(e[2],t[2]))break;case 2:if(i=!z(e[1],t[1]))break;case 1:if(i=!z(e[0],t[0]))break}return i},Q=K,X=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var r,a=t.get(n);if(a&&!K(a.args,i))return a.result;return a={args:i,result:r=e.transform.apply(e,S(i))},t.set(n,a),r},Z=X,J=/[^ a-zA-Z0-9]/g,ee=function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},te=ee,ne=function(){function e(e,t,n){this.ast=e,this.declarations=[],this.stmts=[],this.pipes=[],this.vIdx=0,this.exprType=t,this.pipeNameVsIsPureMap=n}return e.prototype.createVar=function(){var e="v"+this.vIdx++;return this.declarations.push(e),e},e.prototype.processImplicitReceiver=function(){return"ctx"},e.prototype.processLiteralPrimitive=function(){var e=this.cAst;return x(e.value)?'"'+e.value.replace(/"/g,'"').replace(J,ee)+'"':e.value},e.prototype.processLiteralArray=function(){var e,t,n=this.cAst,i=this.cStmts,o=this.createVar(),r=[];try{for(var a=E(n.expressions),s=a.next();!s.done;s=a.next()){var l=s.value;r.push(this.build(l,i))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return i.push(o+"=["+r.join(",")+"]"),o},e.prototype.processLiteralMap=function(){var e,t,n=this.cAst,i=this.cStmts,o=this.createVar(),r=[];try{for(var a=E(n.values),s=a.next();!s.done;s=a.next()){var l=s.value;r.push(this.build(l,i))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return i.push(o+"={"+n.keys.map(function(e,t){return"'"+e.key+"':"+r[t]})+"}"),o},e.prototype.processPropertyRead=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.receiver,t),i=this.createVar();return t.push(i+"="+n+"&&"+n+"."+e.name),i},e.prototype.processKeyedRead=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.key,t),i=this.build(e.obj,t),o=this.createVar();return t.push(o+"="+i+"&&"+i+"["+n+"]"),o},e.prototype.processPrefixNot=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.expression,t);return t.push(n+"=!"+n),n},e.prototype.handleBinaryPlus_Minus=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.left,t),i=this.build(e.right,t),o=this.createVar(),r="+"===e.operation?"_plus":"_minus";return t.push(o+"="+r+"("+n+","+i+")"),o},e.prototype.handleBinaryAND_OR=function(){var e=this.cAst,t=this.cStmts,n=[],i=[],o=[],r=this.build(e.left,i),a=this.build(e.right,o),s=this.createVar();return"&&"===e.operation?n.push(i.join(";"),";"+s+"=false",";if("+r+"){",o.join(";"),";"+s+"="+a+";","}"):n.push(i.join(";"),";"+s+"="+r,";if(!"+r+"){",o.join(";"),";"+s+"="+a+";","}"),t.push(n.join("")),s},e.prototype.handleBinaryDefault=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.left,t),i=this.build(e.right,t),o=this.createVar();return t.push(o+"="+n+e.operation+i),o},e.prototype.processBinary=function(){var e=this.cAst.operation;return"+"===e||"-"===e?this.handleBinaryPlus_Minus():"&&"===e||"||"===e?this.handleBinaryAND_OR():this.handleBinaryDefault()},e.prototype.processConditional=function(){var e=this.cAst,t=this.cStmts,n=this.build(e.condition,t),i=this.createVar(),o=[],r=[],a=[],s=this.build(e.trueExp,r),l=this.build(e.falseExp,a);return o.push("if("+n+"){",r.join(";"),";"+i+"="+s+";","}else{",a.join(";"),";"+i+"="+l+";","}"),t.push(o.join(" ")),i},e.prototype.processMethodCall=function(){var e,t,i=this.cAst,o=this.cStmts,r=[];try{for(var a=E(i.args),s=a.next();!s.done;s=a.next()){var l=s.value;r.push(this.build(l,o))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}var c=this.build(i.receiver,o),p=this.createVar(),u=i.receiver instanceof n.ImplicitReceiver;return o.push(p+"= "+c+"&&"+c+"."+i.name+"&&"+c+"."+i.name+(u?".bind(_ctx)":"")+"("+r.join(",")+")"),p},e.prototype.processChain=function(){var e=this;return this.cAst.expressions.map(function(t){return e.build(t)}).join(";")},e.prototype.processPropertyWrite=function(){var e,t,i=this.cAst,o=this.cStmts;t=i.receiver instanceof n.ImplicitReceiver?"_ctx."+i.name:(e=this.build(i.receiver,o))+(e.length?".":"")+i.name;var r=this.build(i.value,o);o.push(t+"="+r)},e.prototype.processPipe=function(){var e,t,n=this.cAst,i=this.cStmts,o=this.createVar(),r=[],a=[],s=[],l=this.build(n.exp,i);try{for(var c=E(n.args),p=c.next();!p.done;p=c.next()){var u=p.value;r.push(this.build(u,s))}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}var d="_p"+this.pipes.length;return this.pipes.push([n.name,d]),r.unshift(l),a.push(s.length?s.join(";")+";":"",this.pipeNameVsIsPureMap.get(n.name)?o+"=getPPVal("+d+',_ppc,"'+d+'",'+r+")":o+"="+d+".transform("+r+")"),i.push(a.join("")),o},e.prototype.build=function(e,t){return this.cAst=e,this.cStmts=t||this.stmts,e instanceof n.ImplicitReceiver?this.processImplicitReceiver():e instanceof n.LiteralPrimitive?this.processLiteralPrimitive():e instanceof n.LiteralArray?this.processLiteralArray():e instanceof n.LiteralMap?this.processLiteralMap():e instanceof n.PropertyRead?this.processPropertyRead():e instanceof n.PropertyWrite?this.processPropertyWrite():e instanceof n.KeyedRead?this.processKeyedRead():e instanceof n.PrefixNot?this.processPrefixNot():e instanceof n.Binary?this.processBinary():e instanceof n.Conditional?this.processConditional():e instanceof n.MethodCall?this.processMethodCall():e instanceof n.Chain?this.processChain():e instanceof n.BindingPipe?this.processPipe():void 0},e.prototype.extendCtxWithLocals=function(){var e=this.createVar();this.stmts.push(e+"=Object.assign({}, locals)","Object.setPrototypeOf("+e+", _ctx)","ctx="+e)},e.prototype.fnBody=function(){return this.declarations.push("ctx"),'"use strict";\nvar '+this.declarations.join(",")+";\n"+this.stmts.join(";")},e.prototype.fnArgs=function(){var e,t,n=["_plus","_minus","_isDef"];if(this.exprType===D.Binding){n.push("getPPVal","_ppc");try{for(var i=E(this.pipes),o=i.next();!o.done;o=i.next()){var r=T(o.value,2)[1];n.push(r)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}return n.push("_ctx","locals"),n.join(",")},e.prototype.addReturnStmt=function(e){this.stmts.push("return "+e+";")},e.prototype.cleanup=function(){this.ast=this.cAst=this.stmts=this.cStmts=this.declarations=this.pipes=this.pipeNameVsIsPureMap=void 0},e.prototype.compile=function(){this.extendCtxWithLocals(),this.addReturnStmt(this.build(this.ast));var e,t=new Function(this.fnArgs(),this.fnBody());return this.exprType===D.Binding?(e=t.bind(void 0,F,G,M,X)).usedPipes=this.pipes.slice(0):e=t.bind(void 0,F,G,M),this.cleanup(),e},e}(),ie=function(){return{transform:V}},oe=ie;function re(e){var t,i;if(!A)return console.log("set pipe provider"),V;if(!x(e))return V;if((e=e.trim()).endsWith(";")&&(e=e.slice(0,-1)),!e.length)return V;var o=W.get(e);if(o)return o;var r,a=new n.Parser(new n.Lexer).parseBinding(e,"");if(a.errors.length)r=o=V;else{var s=A.getPipeNameVsIsPureMap();if((o=new ne(a.ast,D.Binding,s).compile()).usedPipes.length){var l=[],c=!1;try{for(var p=E(o.usedPipes),u=p.next();!u.done;u=p.next()){var d=T(u.value,1)[0],m=A.meta(d),h=void 0;m?(m.pure&&(c=!0,h=H.get(d)),h||(h=A.getInstance(d)),m.pure&&H.set(d,h)):h=ie,l.push(h)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}l.unshift(c?new Map:void 0),r=o.bind.apply(o,S([void 0],l))}else r=o.bind(void 0,void 0)}return W.set(e,r),r}function ae(e){if(!x(e))return V;if(!(e=e.trim()).length)return V;var t=q.get(e);if(t)return t;var i=new n.Parser(new n.Lexer).parseAction(e,"");return i.errors.length?V:(t=new ne(i.ast,D.Action).compile(),q.set(e,t),t)}!function(e){e[e.Binding=0]="Binding",e[e.Action=1]="Action"}(D||(D={}));var se=new Map,le=new N("watch-id-"),ce={};Object.freeze(ce);var pe,ue,de,me=!1,he=function(e,t){var n;return void 0===t&&(t=50),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];window.__zone_symbol__clearTimeout(n),n=window.__zone_symbol__setTimeout(function(){return e.apply(void 0,S(i))},t)}},fe=function(e,t,n,i,o,r){void 0===o&&(o=le.nextUid()),void 0===r&&(r=!1),-1!==e.indexOf("[$i]")&&(e=e.replace(/\[\$i]/g,"[0]"));var a=re(e);return se.set(o,{fn:a.bind(e,t,n),listener:i,expr:e,last:ce,doNotClone:r}),function(){return ge(o)}},ge=function(e){return se.delete(e)},ve=!1,ye=window.requestAnimationFrame,be=function(e){if(!me||e){var t,n=1;do{t=!1,se.forEach(function(e){var n,i=e.fn,o=e.listener,r=e.last;try{n=i()}catch(t){console.warn("error in executing expression: '"+e.expr+"'")}_.isEqual(n,r)||(t=!0,ve=!0,e.last=n,_.isObject(n)&&!e.doNotClone&&!1!==n.__cloneable__&&(e.last=_.clone(n)),o(n,r),we())}),n++}while(t&&n<5);t&&5===n&&console.warn("Number of watch cycles gone above set limit of: 5 ")}},we=function(){return ve=!1};window.watchRegistry=se;var Pe,_e,Oe=he(function(){de=!0,ue.run(function(){return be()})},100),Re=(Pe=!1,function(e){if(pe)if(e)ue.run(function(){return pe.tick()}),Pe=!1;else{if(Pe)return;Pe=!0,ye(function(){ue.run(function(){return pe.tick()}),Pe=!1})}}),Ee=function(){return function(){}}();!function(e){e.LIST_RECORDS="listRecords",e.UPDATE_RECORD="updateRecord",e.INSERT_RECORD="insertRecord",e.DELETE_RECORD="deleteRecord",e.INVOKE="invoke",e.UPDATE="update",e.NOTIFY="notify",e.IS_API_AWARE="isApiAware",e.SUPPORTS_CRUD="supportsCRUD",e.SUPPORTS_DISTINCT_API="supportsDistinctAPI",e.IS_PAGEABLE="isPageable",e.GET_OPERATION_TYPE="getOperationType",e.GET_RELATED_PRIMARY_KEYS="getRelatedTablePrimaryKeys",e.GET_ENTITY_NAME="getEntityName",e.SET_INPUT="setinput",e.GET_RELATED_TABLE_DATA="getRelatedTableData",e.GET_DISTINCT_DATA_BY_FIELDS="getDistinctDataByFields",e.GET_AGGREGATED_DATA="getAggregatedData",e.GET_MATCH_MODE="getMatchMode",e.DOWNLOAD="download",e.GET_NAME="getName",e.GET_PROPERTIES_MAP="getPropertiesMap",e.GET_PRIMARY_KEY="getPrimaryKey",e.GET_BLOB_URL="getBlobURL",e.SUPPORTS_SERVER_FILTER="supportsServerFilter",e.GET_OPTIONS="getOptions",e.SEARCH_RECORDS="searchRecords",e.GET_REQUEST_PARAMS="getRequestParams",e.GET_PAGING_OPTIONS="getPagingOptions",e.FETCH_DISTINCT_VALUES="fetchDistinctValues",e.GET_UNIQUE_IDENTIFIER="getUniqueIdentifier",e.GET_CONTEXT_IDENTIFIER="getContextIdentifier",e.IS_UPDATE_REQUIRED="isUpdateRequired",e.ADD_ITEM="addItem",e.SET_ITEM="setItem",e.REMOVE_ITEM="removeItem",e.IS_BOUND_TO_LOCALE="isBoundToLocale",e.GET_DEFAULT_LOCALE="getDefaultLocale",e.CANCEL="cancel"}(_e||(_e={}));var Te={Operation:_e},Se=function(){return function(){}}(),Ce=function(){return function(){}}(),Ie=function(){return function(){}}(),Ae=function(){return function(){}}(),De=function(){return function(){}}(),Ne=function(){return function(){}}(),xe=function(){return function(){}}(),Me=function(){return function(){}}(),ke=function(){return function(){}}(),Le=function(){return function(){}}(),Fe=this,Be=window.navigator.userAgent,Ge={SNAKE_CASE:/[A-Z]/g,ANDROID:/Android/i,IPHONE:/iPhone/i,IPOD:/iPod/i,IPAD:/iPad/i,ANDROID_TABLET:/android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i,MOBILE:/Mobile/i,WINDOWS:/Windows Phone/i,SUPPORTED_IMAGE_FORMAT:/\.(bmp|gif|jpe|jpg|jpeg|tif|tiff|pbm|png|ico)$/i,SUPPORTED_FILE_FORMAT:/\.(txt|js|css|html|script|properties|json|java|xml|smd|xmi|sql|log|wsdl|vm|ftl|jrxml|yml|yaml|md|less|jsp)$/i,SUPPORTED_AUDIO_FORMAT:/\.(mp3|ogg|webm|wma|3gp|wav|m4a)$/i,SUPPORTED_VIDEO_FORMAT:/\.(mp4|ogg|webm|wmv|mpeg|mpg|avi)$/i,PAGE_RESOURCE_PATH:/^\/pages\/.*\.(js|css|html|json)$/,MIN_PAGE_RESOURCE_PATH:/.*(page.min.html)$/,VALID_EMAIL:/^[a-zA-Z][\w.+]+@[a-zA-Z_]+?\.[a-zA-Z.]{1,4}[a-zA-Z]$/,VALID_WEB_URL:/^(http[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9=:?\/\.\-]+(\.[a-zA-Z]{2,5}[\.]{0,1})?/,VALID_WEBSOCKET_URL:/^(ws[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9=:?\/\.\-]+(\.[a-zA-Z]{2,5}[\.]{0,1})?/,VALID_RELATIVE_URL:/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,REPLACE_PATTERN:/\$\{([^\}]+)\}/g,ZIP_FILE:/\.zip$/i,EXE_FILE:/\.exe$/i,NO_QUOTES_ALLOWED:/^[^'|"]*$/,NO_DOUBLE_QUOTES_ALLOWED:/^[^"]*$/,VALID_HTML:/<[a-z][\s\S]*>/i,VALID_PASSWORD:/^[0-9a-zA-Z-_.@&*!#$%]+$/,SPECIAL_CHARACTERS:/[^A-Z0-9a-z_]+/i,APP_SERVER_URL_FORMAT:/^(http[s]?:\/\/)(www\.){0,1}[a-zA-Z0-9\.\-]+([:]?[0-9]{2,5}|\.[a-zA-Z]{2,5}[\.]{0,1})\/+[^?#&=]+$/,JSON_DATE_FORMAT:/\d{4}-[0-1]\d-[0-3]\d(T[0-2]\d:[0-5]\d:[0-5]\d.\d{1,3}Z$)?/},je=["int",e.DataType.INTEGER,e.DataType.FLOAT,e.DataType.DOUBLE,e.DataType.LONG,e.DataType.SHORT,e.DataType.BYTE,e.DataType.BIG_INTEGER,e.DataType.BIG_DECIMAL],Ve=new Date,$e=function(e){return void 0!==e},Ue=function(e){return null!==e&&"object"==typeof e},We=function(e,t){return!(!e||"false"===e)||!!t&&e===t};var qe=function(){return window.navigator.appVersion.indexOf("Trident/")>-1||window.navigator.userAgent.indexOf("MSIE")>-1},He=function(){return Ge.ANDROID.test(Be)},ze=function(){return Ge.ANDROID_TABLET.test(Be)},Ye=function(){return Ge.IPHONE.test(Be)},Ke=function(){return Ge.IPOD.test(Be)},Qe=function(){return Ge.IPAD.test(Be)},Xe=function(){return Ye()||Ke()||Qe()},Ze=function(){return He()||Xe()||ze()||$("#wm-mobile-display:visible").length>0},Je=function(){return"MOBILE"===I().platformType&&"APPLICATION"===I().type},et=function(){var e=window.navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/);return e?e[1]:""},tt=function(){return He()&&4===parseInt(et(),10)},nt=function(e){var t=e.indexOf("?");return t>-1?(e=encodeURI(e.substring(0,t))+e.substring(t),e=it(e)):e=encodeURI(e),e},it=function(e){var t,n,i="";return(n=e.indexOf("?"))>-1&&(n+=1,(t=e.substring(n))&&(t.split("&").forEach(function(e){var t,n=_.includes(e,"=")?e.indexOf("="):e&&e.length,o=e.substr(0,n),r=e.substr(n+1);if(r||_.includes(e,"=")){try{t=decodeURIComponent(r)}catch(e){t=r}i+=o+"="+encodeURIComponent(t)+"&"}else i+=o+"&"}),i=i.slice(0,-1),e=e.replace(t,i))),e},ot=function(e){return e?e.charAt(0).toUpperCase()+e.substring(1):""},rt=function(e){return e===e.toUpperCase()?e:e.replace(Ge.SNAKE_CASE,function(e,t){return(t?" ":"")+e})},at=function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},st=function(e){var t;return-1!==(t=e.indexOf("."))&&(e=at(e,t+1,e.charAt(t+1).toUpperCase()),e=at(e,t," ")),e},lt=function(e){return e=_.camelCase(e),e=ot(e),e=rt(e),e=st(e)},ct=function(e){return e.split("-").join(" ")},pt=function(e,t){void 0===t&&(t=",");var n,i=[];return _.isArray(e)||(i=_.split(e,t)),n=_.map(i,lt),_.isArray(e)?n:n.join(t)},ut=function(e){var t=document.createElement("a");return t.href=e,""!==t.protocol&&(!!dt(location.href,"https://")&&("https:"!==t.protocol&&"wss:"!==t.protocol))},dt=function(e,t,n){return!!e&&new RegExp("^"+t,n?"i":"").test(e)},mt=function(e,t){var n;return n=_.attempt(function(){var n=Object.keys(e).map(function(e){return"var "+e+" = data['"+e+"'];"}).join(" ");return new Function("data",n+" return  "+t)(e)}),_.isError(n)&&(n=_.get(e,t)),n},ht=function(e){return Ge.SUPPORTED_IMAGE_FORMAT.test(e)},ft=function(e){return Ge.SUPPORTED_AUDIO_FORMAT.test(e)},gt=function(e){return Ge.SUPPORTED_VIDEO_FORMAT.test(e)},vt=function(e){return Ge.VALID_WEB_URL.test(e)},yt=function(e){return vt(e),e};function bt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=1,o=arguments.length,r=new Array(o-i);i<o;i++)r[i-1]=arguments[i];if(_.isFunction(e))return e.apply(null,r)}var wt=function(e,t,n){if(t)return"timestamp"===n?moment(t).valueOf():e.transform(t,n)},Pt=function(e){if(_.isDate(e))return e;if(isNaN(e)||(e=parseInt(e,10)),moment(e).isValid()&&""!==e&&null!=e){var t=new Date(e);return _.isString(e)&&(t=new Date(moment(e).format())),"CURRENT_DATE"===e||isNaN(t.getDay())?Ve:t}},_t=function(e,t,n,i,o,r,a,s){void 0===s&&(s=!1);var l=e,c=function(e){if(!t||!t.contains(e.target)&&t!==e.target)if(n.contains(e.target)){if($(e.target).is("input")&&!o)return;l.removeEventListener(i,c,s)}else 0===a&&l.removeEventListener(i,c,s),r()};l.addEventListener(i,c,s);return function(){l.removeEventListener(i,c,s)}},Ot=function(e){return _.cloneDeep(e)},Rt=function(e,t,n){var i=_.get(document.forms,[e,t,"files"]);return n?_.map(i,_.identity):i&&i[0]};function Et(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var Tt,St,Ct=function(){return Et()+"-"+Et()+"-"+Et()},It=function(e,t){var n;return!e||!t||(n=e&&e.split(",").map(Function.prototype.call,String.prototype.trim),_.intersection(n,t.userRoles).length)},At=function(e){if(e)try{var t=parseInt(e,10);return Ue(e)||!isNaN(t)?e:JSON.parse(e)}catch(e){return}},Dt=function(e){var t=new X2JS({emptyNodeForm:"content",attributePrefix:"",enableToStringFunc:!1}).xml2js(e);return t&&(t=_.get(t,Object.keys(t)[0])),t},Nt=function(e,t,n){if(e&&t){if(!n)return _.get(e,t);var i,o=t.split("."),r=[];if(o.forEach(function(e){if(!o.length)return i=!0,!1;for(var t,n=e.match(/\w+/g);n.length;)t=n.shift(),r.push({key:t,value:n.length?[]:{}})}),!i)return r.forEach(function(t){var n=e[t.key];Ue(n)||(n=At(n))||(n=t.value),e[t.key]=n,e=n}),e}},xt=function(t){var n;return t?n=(n=(n=t&&t.substring(t.lastIndexOf(".")+1))&&n.toLowerCase())===e.DataType.LOCALDATETIME?e.DataType.DATETIME:n:e.DataType.STRING},Mt=function(e){return-1!==je.indexOf(xt(e).toLowerCase())},kt=function(e){return!(!Ue(e)||_.isArray(e))&&0===Object.keys(e).length},Lt=function(e){return _.isEqual(_.keys({content:[],first:!0,last:!0,number:0,numberOfElements:10,size:20,sort:null,totalElements:10,totalPages:1}),_.keys(e).sort())},Ft=function(e,t,n){var i=Ge.REPLACE_PATTERN;if(e)return n&&(i=/\{([^\}]+)\}/g),e.replace(i,function(e,n){return _.get(t,n)})},Bt=function(t){return _.includes(t,".")&&(t=_.toLower(xt(t))),_.includes([e.DataType.DATE,e.DataType.TIME,e.DataType.TIMESTAMP,e.DataType.DATETIME,e.DataType.LOCALDATETIME],t)},Gt=function(e){return moment(e).isValid()?(Xe()&&(e=moment(moment(e).valueOf()).format("YYYY/MM/DD HH:mm:ss")),e):(isNaN(e)?new Date(e).getTime()||(e=moment(moment().format("YYYY-MM-DD")+" "+e,"YYYY-MM-DD HH:mm:ss A")):e=parseInt(e,10),new Date(moment(e).valueOf()))},jt=function(e){return e=Gt(e),new Date(e)},Vt=function(e,t){if(e instanceof Blob)return e;var n=At(e);return e=n&&n instanceof Object?new Blob([JSON.stringify(n)],{type:t||"application/json"}):new Blob([e],{type:t||"text/plain"})},$t=function(e,t,n){var i=_.isArray(n)?n:_.split(n,",");return i=_.map(i,_.trim),_.isEqualWith(e,t,function(e,t){return _.every(i,function(n){var i,o,r;return-1===_.indexOf(n,":")?i=o=_.trim(n):(r=_.split(n,":"),i=_.trim(r[0]),o=_.trim(r[1])),_.get(e,i)===_.get(t,o)})})},Ut=function(e){return document.querySelector(e)},Wt=Ut,qt=function(e){return!!Ut('link[href="'+e+'"]')},Ht=qt,zt=function(e){var t=Ut('link[href="'+e+'"]');t&&t.remove()},Yt=function(e,t){if(!qt(e)){var n=document.createElement("link");return n.href=e,t&&t.name&&n.setAttribute(t.name,t.value),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),document.head.appendChild(n),n}},Kt=function(e){void 0===e&&(e=[]),Array.isArray(e)||(e=[e]),e.forEach(Yt)},Qt=function(e){return!!Ut('script[src="'+e+'"], script[data-src="'+e+'"]')},Xt=Qt,Zt=function(e){return O(Fe,void 0,void 0,function(){var t;return R(this,function(n){return!(t=e.trim()).length||Qt(t)?[2,Promise.resolve()]:[2,mn("text",t,!1,function(e){var t=document.createElement("script");t.textContent=e,document.head.appendChild(t)})]})})},Jt=function(e){return void 0===e&&(e=[]),O(Fe,void 0,void 0,function(){var t,n,i,o,r,a;return R(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,7]),i=E(e),o=i.next(),s.label=1;case 1:return o.done?[3,4]:(r=o.value,[4,Zt(r)]);case 2:s.sent(),s.label=3;case 3:return o=i.next(),[3,1];case 4:return[3,7];case 5:return a=s.sent(),t={error:a},[3,7];case 6:try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}return[7];case 7:return[2,Promise.resolve()]}})})},en={},tn=function(e,t){var n=window.sessionStorage.getItem(en.id);(n=n?JSON.parse(n):{})[e]=t,window.sessionStorage.setItem(en.id,JSON.stringify(n))},nn=function(e){var t=window.sessionStorage.getItem(en.id);if(t)return(t=JSON.parse(t))[e]},on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},rn=function(e){return _.isArray(e)},an=function(e){return"string"==typeof e},sn=function(e){return"number"==typeof e},ln=function(e){return new Promise(function(t,n){resolveLocalFileSystemURL(e,function(i){i.file(function(i){var o=new FileReader;o.onloadend=function(){var n=new Blob([o.result],{type:i.type});t({blob:n,filepath:e})},o.onerror=n,o.readAsArrayBuffer(i)})},n)})},cn=function(){return!!window.cordova},pn=/Spotcues/i.test(window.navigator.userAgent),un={INT_MAX_VALUE:2147483647},dn=function(e,t){void 0===t&&(t="_self"),cn()&&_.startsWith(e,"#")?location.hash=e:window.open(e,t)},mn=function(e,t,n,i,o){return void 0===n&&(n=!1),$.ajax({type:"get",dataType:e,url:t,async:!n}).done(function(e){return i&&i(e)}).fail(function(e){return o&&o(e)})},hn=function(e){return e instanceof Promise?e:Promise.resolve(e)},fn=function(e,t,n,i){void 0===i&&(i=function(){return Promise.resolve(!1)});var o=0,r=function(){if(o++,_.isFunction(e))return e()};return n=_.isNumber(n)&&n>0?n:0,t=_.isNumber(t)&&t>0?t:0,new Promise(function(e,a){var s=function(){var l=arguments;setTimeout(function(){hn(i()).then(function(t){!1!==t&&(!n||o<=n)?hn(r()).then(e,s):a(l)},function(){return a(l)})},t)};hn(r()).then(e,s)})},gn=function(){var e={promise:null,reject:null,resolve:null,onAbort:function(){},isAborted:!1};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e.promise.abort=function(){bt(e.onAbort),e.reject("aborted"),e.isAborted=!0},e},vn=function(e,t){document.styleSheets[0].insertRule(e+" { "+t+" }")},yn=function(e){var t={},n=e.indexOf("?");-1!==n&&_.split(e.substring(n+1,e.length),"&").forEach(function(e){e=_.split(e,"="),t[e[0]]=e[1]});return t},bn=function(e){var t=(e=e.replace("#/","/")).indexOf("?");return-1!==t&&(e=e.substring(0,t)),e},wn=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Pn=function(){var e={promise:null,resolve:on,reject:on};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},_n=function(e,t,n,i){if(n=n||Pn(),0===(i=i||0)&&(e=_.filter(e,function(e){return!(_.isUndefined(e)||_.isNull(e))})),e&&i<e.length)try{hn(e[i].apply(void 0,t)).then(function(){return _n(e,t,n,i+1)},n.reject)}catch(e){n.reject(e)}else n.resolve();return n.promise},On=function(e,t){return e.execute(Te.Operation.GET_UNIQUE_IDENTIFIER)===t.execute(Te.Operation.GET_UNIQUE_IDENTIFIER)&&_.isEqual(e.execute(Te.Operation.GET_CONTEXT_IDENTIFIER),t.execute(Te.Operation.GET_CONTEXT_IDENTIFIER))},Rn=function(e,t){return e.execute(Te.Operation.GET_CONTEXT_IDENTIFIER)===t},En=function(e,n){var i=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop,o=new t.Subject,r=function(t,r){dt(t[r],"bind:")&&i(fe(t[r].replace("bind:",""),e,{},function(e,i){e===i&&_.isUndefined(e)||_.isUndefined(e)&&!_.isUndefined(i)||(_.includes(["blob","file"],t.type)||(e=Ot(e)),"dataBinding"===t.target?(n.rules=[],_.forEach(e,function(e,i){n.rules.push({target:i,value:e,matchMode:t.matchMode||"startignorecase",required:!1,type:""})})):t[r]=e,o.next({filterExpressions:n,newVal:e}))}))},a=function(e){e.rules&&_.forEach(e.rules,function(e,t){e.rules?a(e):("between"===e.matchMode&&r(e,"secondvalue"),r(e,"value"))})};return a(n),o},Tn=function(e,t){for(var n=Object.getPrototypeOf(e);Object.getPrototypeOf(n).constructor!==Object;)if(t===(n=Object.getPrototypeOf(n)))return;Object.setPrototypeOf(n,t)},Sn=function(e){if(_.isString(e))return _.startsWith(e,"file:///")||/^data:image\/([a-z]{2,});base64,/.test(e)?e:e.replace(new RegExp("([^:]/)(/)+","g"),"$1")};$.cachedScript=(Tt=new Map,St=new Set,function(e){if(function(e){return St.has(e)}(e))return Promise.resolve();if(function(e){return Tt.has(e)}(e))return Tt.get(e);!function(e){var t,n,i=new Promise(function(e,i){t=e,n=i});i.resolve=t,i.reject=n,Tt.set(e,i)}(e);var t={dataType:"script",cache:!0,url:e};return $.ajax(t).done(function(){return function(e){St.add(e),Tt.get(e).resolve(),Tt.delete(e)}(e)}),Tt.get(e)});var Cn={DATE:"yyyy-MM-dd",TIME:"hh:mm a",TIMESTAMP:"yyyy-MM-dd hh:mm:ss a",DATETIME:"yyyy-MM-dd hh:mm:ss a"},In=function(e){return Cn[_.toUpper(e)]},An=function(e){var t=e.querySelectorAll("label.control-label"),n=e.querySelectorAll("[focus-target]");if(n.length||(n=e.querySelectorAll("input, select, textarea")),t.length&&n.length){var i=$(n[0]).closest("[widget-id]").attr("widget-id");i&&(P(n[0],"id",i),P(t[0],"for",i))}},Dn=function(e,t,n,i){var o=i?_.parseInt(i.css("height")):_.parseInt(e.css("height")),r=$(window).height()+window.scrollY,a=t.getBoundingClientRect(),s=a.top+window.scrollY;if(r-(s+a.height)<o){var l=s-o;n._ngZone.onStable.subscribe(function(){e.css("top",l+"px")})}},Nn=function(e){if(!e.closest(".app-popover").length){var t=document.querySelectorAll(".app-popover-wrapper");_.forEach(t,function(e){e.widget.isOpen&&(e.widget.isOpen=!1)})}},xn=Re,Mn=function(e,t){var n=t.link,i=t.action,o=t.target;if(i&&(e.itemActionFn||(e.itemActionFn=ae(i)),e.itemActionFn(e.userDefinedExecutionContext,Object.create(t))),n)if(!n.startsWith("#/")||o&&"_self"!==o)dn(n,o);else{var r=yn(n);n=bn(n),(_.get(e,"route")||_.get(e,"menuRef.route")).navigate([n],{queryParams:r})}},kn=function(e,t){var n=_.startsWith(e,"Variables."),i=_.startsWith(e,"Widgets."),o=e.split(".");if(n)return _.get(t.viewParent.Variables,o[1]);if(i){var r,a=_.get(t.viewParent.Widgets,o[1]),s=a.$attrs.get("datasetboundexpr");return r=!a.datasource&&s?s:a.binddataset,kn(r,a)}},Ln=function(e,t){if(/^Widgets\..*\.currentItem/g.test(e)){var n=e.split("."),i=_.get(t.viewParent.Widgets,n[1]),o=i.$attrs.get("datasetboundexpr");if(!i.datasource&&o)return e=e.replace(/^Widgets\..*\.currentItem/g,o+"[$i]"),Ln(e,t);e=e.replace(/^Widgets\..*\.currentItem/g,i.binddataset+"[$i]")}return e},Fn=function(e){var t=e.closest(".app-prefab");return t.length||(t=e.closest(".app-partial")),t.length||(t=e.closest(".app-page")),t.length&&t.parent()[0].tagName},Bn={REQUIRED:"required",MAXCHARS:"maxchars",MINVALUE:"minvalue",MAXVALUE:"maxvalue",REGEXP:"regexp",MINDATE:"mindate",MAXDATE:"maxdate",MINTIME:"mintime",MAXTIME:"maxtime",EXCLUDEDATES:"excludedates",EXCLUDEDAYS:"excludedays"},Gn=Object.freeze({isDefined:$e,isObject:Ue,toBoolean:We,isIE:qe,isAndroid:He,isAndroidTablet:ze,isIphone:Ye,isIpod:Ke,isIpad:Qe,isIos:Xe,isMobile:Ze,isMobileApp:Je,getAndroidVersion:et,isKitkatDevice:tt,encodeUrl:nt,encodeUrlParams:it,initCaps:ot,spaceSeparate:rt,replaceAt:at,periodSeparate:st,prettifyLabel:lt,deHyphenate:ct,prettifyLabels:pt,isInsecureContentRequest:ut,stringStartsWith:dt,getEvaluatedExprValue:mt,isImageFile:ht,isAudioFile:ft,isVideoFile:gt,isValidWebURL:vt,getResourceURL:yt,triggerFn:bt,getFormattedDate:wt,getDateObj:Pt,addEventListenerOnElement:_t,getClonedObject:Ot,getFiles:Rt,generateGUId:Ct,validateAccessRoles:It,getValidJSON:At,xmlToJson:Dt,findValueOf:Nt,extractType:xt,isNumberType:Mt,isEmptyObject:kt,isPageable:Lt,replace:Ft,isDateTimeType:Bt,getValidDateObject:Gt,getNativeDateObject:jt,getBlob:Vt,isEqualWithFields:$t,loadStyleSheet:Yt,loadStyleSheets:Kt,loadScript:Zt,loadScripts:Jt,_WM_APP_PROJECT:en,setSessionStorageItem:tn,getSessionStorageItem:nn,noop:on,isArray:rn,isString:an,isNumber:sn,convertToBlob:ln,hasCordova:cn,isSpotcues:pn,AppConstants:un,openLink:dn,fetchContent:mn,toPromise:hn,retryIfFails:fn,getAbortableDefer:gn,createCSSRule:vn,getUrlParams:yn,getRouteNameFromLink:bn,isAppleProduct:wn,defer:Pn,executePromiseChain:_n,isDataSourceEqual:On,validateDataSourceCtx:Rn,processFilterExpBindNode:En,extendProto:Tn,removeExtraSlashes:Sn,getDisplayDateTimeFormat:In,addForIdAttributes:An,adjustContainerPosition:Dn,closePopover:Nn,detectChanges:xn,triggerItemAction:Mn,getDatasourceFromExpr:kn,extractCurrentItemExpr:Ln,findRootContainer:Fn,VALIDATOR:Bn,"\u02750":Wt,"\u02751":Ht,"\u02752":zt,"\u02753":Xt}),jn=function(){function e(e){void 0===e&&(e=!0),this._subject=new t.Subject,this._isInitialized=!1,this._eventsBeforeInit=[],e&&this.start()}return e.prototype.notify=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._isInitialized?this._subject.next({name:e,data:t}):this._eventsBeforeInit.push({name:e,data:t})},e.prototype.start=function(){var e=this;this._isInitialized||(this._isInitialized=!0,this._eventsBeforeInit.forEach(function(t){return e._subject.next(t)}))},e.prototype.subscribe=function(e,t){var n;return e&&t?(n=this._subject.subscribe(function(n){n&&Ue(n)&&n.name===e&&t.apply(void 0,n.data)}),function(){n.unsubscribe()}):on},e.prototype.destroy=function(){this._subject.complete()},e}(),Vn=function(){function e(){this.MATCH_MODES={STARTS_WITH_IGNORE_CASE:"startignorecase",STARTS_WITH:"start",ENDS_WITH_IGNORE_CASE:"endignorecase",ENDS_WITH:"end",CONTAINS:"anywhere",CONTAINS_IGNORE_CASE:"anywhereignorecase",IS_EQUAL_WITH_IGNORE_CASE:"exactignorecase",IS_EQUAL:"exact"},this.VALIDATOR=Bn}return e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),$n=function(){function e(){_.assign(this,Gn)}return e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Un=function(){function e(){_.assign(this,{INTEGER:"integer",BIG_INTEGER:"big_integer",SHORT:"short",FLOAT:"float",BIG_DECIMAL:"big_decimal",DOUBLE:"double",LONG:"long",BYTE:"byte",STRING:"string",CHARACTER:"character",TEXT:"text",DATE:"date",TIME:"time",TIMESTAMP:"timestamp",DATETIME:"datetime",BOOLEAN:"boolean",LIST:"list",CLOB:"clob",BLOB:"blob"})}return e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Wn=function(){function e(){_.assign(this,{TEXT:"text",NUMBER:"number",TEXTAREA:"textarea",PASSWORD:"password",CHECKBOX:"checkbox",SLIDER:"slider",RICHTEXT:"richtext",CURRENCY:"currency",SWITCH:"switch",SELECT:"select",CHECKBOXSET:"checkboxset",RADIOSET:"radioset",DATE:"date",TIME:"time",TIMESTAMP:"timestamp",UPLOAD:"upload",RATING:"rating",DATETIME:"datetime",AUTOCOMPLETE:"autocomplete",CHIPS:"chips",COLORPICKER:"colorpicker"})}return e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),qn=[],Hn=function(){function e(e){var t=this;this.http=e,this.scripts={},qn.forEach(function(e){t.scripts[e.name]={loaded:!1,src:e.src}})}return e.prototype.load=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t&&t.length?Promise.resolve().then(function(){return e.pathMappings||e.loadPathMappings()}).then(function(){return Promise.all(t.map(function(t){return e.loadScript(t)}))}):Promise.resolve()},e.prototype.loadPathMappings=function(){var e=this,t=(en.cdnUrl||en.ngDest)+"path_mapping.json";return this.http.get(t).toPromise().then(function(t){e.pathMappings=t},function(){e.pathMappings={}})},e.prototype.loadScript=function(e){var t=this;return new Promise(function(n,i){if(t.scripts[e]&&t.scripts[e].loaded)n({script:e,loaded:!0});else{t.scripts[e]||(t.scripts[e]={loaded:!1,src:e});var o=document.createElement("script");o.type="text/javascript",o.async=!1;var r=t.scripts[e].src;(r=t.pathMappings[r]||r).startsWith("http")?o.src=r:o.src=(en.cdnUrl||en.ngDest)+r,o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t.scripts[e].loaded=!0,n({script:e,loaded:!0}))}:o.onload=function(){t.scripts[e].loaded=!0,n({script:e,loaded:!0})},o.onerror=function(t){return n({script:e,loaded:!1,status:"Loaded"})},document.getElementsByTagName("head")[0].appendChild(o)}})},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.HttpClient}]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(o.HttpClient))},token:e,providedIn:"root"}),e}(),zn=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:i.NgModule,args:[{declarations:[],imports:[o.HttpClientModule],providers:[],bootstrap:[]}]}],e}();e.getFormWidgetTemplate=function(t,n,i,o){var r;void 0===o&&(o={});var a=i.get("updateon"),s=a?'updateon="'+a+'"':"";switch(t){case e.FormWidgetType.AUTOCOMPLETE:case e.FormWidgetType.TYPEAHEAD:r='<div wmSearch type="autocomplete" debouncetime="'+i.get("debouncetime")+'" '+n+"></div>";break;case e.FormWidgetType.CHECKBOX:r="<div wmCheckbox "+n+"></div>";break;case e.FormWidgetType.CHECKBOXSET:r="<ul wmCheckboxset "+n+"></ul>";break;case e.FormWidgetType.CHIPS:r='<ul wmChips role="input" debouncetime="'+i.get("debouncetime")+'" '+n+"></ul>";break;case e.FormWidgetType.COLORPICKER:r="<div wmColorPicker "+n+"></div>";break;case e.FormWidgetType.CURRENCY:r="<div wmCurrency "+n+"></div>";break;case e.FormWidgetType.DATE:r='<div wmDate dataentrymode="'+i.get("dataentrymode")+'" '+n+"></div>";break;case e.FormWidgetType.DATETIME:r='<div wmDateTime dataentrymode="'+i.get("dataentrymode")+'" '+n+"></div>";break;case e.FormWidgetType.NUMBER:r="<div wmNumber "+n+' type="number" aria-label="Only numbers" '+s+"></div>";break;case e.FormWidgetType.PASSWORD:r="<wm-input "+n+' type="password" aria-label="Enter password" '+s+"></wm-input>";break;case e.FormWidgetType.RADIOSET:r="<ul wmRadioset "+n+"></ul>";break;case e.FormWidgetType.RATING:r="<div wmRating "+n+"></div>";break;case e.FormWidgetType.RICHTEXT:r='<div wmRichTextEditor role="textbox" '+n+"></div>";break;case e.FormWidgetType.SELECT:r="<wm-select "+n+"></wm-select>";break;case e.FormWidgetType.TOGGLE:r="<div wmCheckbox "+n+' type="toggle" role="checkbox" aria-label="Toggle button"></div>';break;case e.FormWidgetType.SLIDER:r="<div wmSlider "+n+"></div>";break;case e.FormWidgetType.SWITCH:r="<div wmSwitch "+n+"></div>";break;case e.FormWidgetType.TEXT:var l=o.inputType||"inputtype";r="<wm-input "+n+' type="'+(i.get(l)||"text")+'" aria-describedby="Enter text" '+s+"></wm-input>";break;case e.FormWidgetType.TEXTAREA:r="<wm-textarea "+n+' role="textbox" aria-describedby="Place your text" '+s+"></wm-textarea>";break;case e.FormWidgetType.TIME:r='<div wmTime dataentrymode="'+i.get("dataentrymode")+'" '+n+"></div>";break;case e.FormWidgetType.TIMESTAMP:r='<div wmDateTime dataentrymode="'+i.get("dataentrymode")+'" '+n+' role="input"></div>';break;case e.FormWidgetType.UPLOAD:var p=o.counter,u=o.pCounter,d=o.uploadProps,m=c(i,p,d&&d.name);r=d?'<form name="'+d.formName+'" '+n+'>\n                            <input focus-target class="file-upload" type="file" name="'+d.name+'" '+m+"/>\n                        </form>":'<a class="form-control-static" href="{{'+p+'.href}}" target="_blank" *ngIf="'+p+".filetype === 'image' && "+p+'.href">\n                        <img style="height:2em" class="wi wi-file" [src]="'+p+'.href"/></a>\n                        <a class="form-control-static" target="_blank" href="{{'+p+'.href}}" *ngIf="'+p+".filetype !== 'image' && "+p+'.href">\n                        <i class="wi wi-file"></i></a>\n                        <input '+n+' class="app-blob-upload" [ngClass]="{\'file-readonly\': '+p+'.readonly}" '+m+'\n                        [required]="'+p+'.required" type="file" name="'+(i.get("key")||i.get("name"))+'_formWidget" [readonly]="'+p+'.readonly"\n                        [class.hidden]="!'+u+'.isUpdateMode" [accept]="'+p+'.permitted">';break;default:r="<wm-input "+n+' aria-describedby="Enter text" type="text" '+s+"></wm-input>"}return r},e.getRequiredFormWidget=function(t){switch(t){case e.FormWidgetType.AUTOCOMPLETE:case e.FormWidgetType.TYPEAHEAD:return"wm-search";case e.FormWidgetType.CHIPS:return"wm-chips";case e.FormWidgetType.COLORPICKER:return"wm-colorpicker";case e.FormWidgetType.CURRENCY:return"wm-currency";case e.FormWidgetType.DATE:return"wm-date";case e.FormWidgetType.DATETIME:return"wm-datetime";case e.FormWidgetType.TIME:case e.FormWidgetType.TIMESTAMP:return"wm-time";case e.FormWidgetType.RATING:return"wm-rating";case e.FormWidgetType.RICHTEXT:return"wm-richtexteditor";case e.FormWidgetType.SLIDER:return"wm-slider";default:return"wm-text"}},e.updateTemplateAttrs=m,e.getNgModelAttr=function(e){return e.has("formControlName")||e.has("formControlName.bind")?"":"ngModel"},e.getRowActionAttrs=function(e){var t="";return e.forEach(function(e,n){var i=h.get(n);i&&(t+=i+'="'+e+'" ')}),t},e.\u02750=p,e.\u02751=d,e.CURRENCY_INFO={USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"\u20ac",name:"Euro",symbol_native:"\u20ac",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"\u062f.\u0625.\u200f",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"\u060b",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lek\xeb"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"\u0564\u0580.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"\u043c\u0430\u043d.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"\u09f3",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"\u043b\u0432.",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"\u062f.\u0628.\u200f",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN\xa5",name:"Chinese Yuan",symbol_native:"CN\xa5",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"\u20a1",name:"Costa Rican Col\xf3n",symbol_native:"\u20a1",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican col\xf3ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"K\u010d",name:"Czech Republic Koruna",symbol_native:"K\u010d",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"\u062f.\u062c.\u200f",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"\u062c.\u0645.\u200f",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"\xa3",name:"British Pound Sterling",symbol_native:"\xa3",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH\u20b5",name:"Ghanaian Cedi",symbol_native:"GH\u20b5",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"\u20aa",name:"Israeli New Sheqel",symbol_native:"\u20aa",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"\u20b9",name:"Indian Rupee",symbol_native:"\u099f\u0995\u09be",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"\u062f.\u0639.\u200f",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"\ufdfc",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Kr\xf3na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic kr\xf3nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"\u062f.\u0623.\u200f",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"\xa5",name:"Japanese Yen",symbol_native:"\uffe5",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"\u17db",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"\u20a9",name:"South Korean Won",symbol_native:"\u20a9",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"\u062f.\u0643.\u200f",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"\u0442\u04a3\u0433.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB\xa3",name:"Lebanese Pound",symbol_native:"\u0644.\u0644.\u200f",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"\u062f.\u0644.\u200f",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"\u062f.\u0645.\u200f",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"\u20a6",name:"Nigerian Naira",symbol_native:"\u20a6",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan C\xf3rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan c\xf3rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"\u0928\u0947\u0930\u0942",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"\u0631.\u0639.\u200f",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"\u20b1",name:"Philippine Peso",symbol_native:"\u20b1",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"\u20a8",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"z\u0142",name:"Polish Zloty",symbol_native:"z\u0142",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"\u20b2",name:"Paraguayan Guarani",symbol_native:"\u20b2",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"\u0631.\u0642.\u200f",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"\u0434\u0438\u043d.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"\u0440\u0443\u0431.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"\u0631.\u0633.\u200f",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY\xa3",name:"Syrian Pound",symbol_native:"\u0644.\u0633.\u200f",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"\u0e3f",name:"Thai Baht",symbol_native:"\u0e3f",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"\u062f.\u062a.\u200f",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Pa\u02bbanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan pa\u02bbanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"\u20b4",name:"Ukrainian Hryvnia",symbol_native:"\u20b4",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bol\xedvar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bol\xedvars"},VND:{symbol:"\u20ab",name:"Vietnamese Dong",symbol_native:"\u20ab",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"\u0631.\u064a.\u200f",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}},e.appendNode=function(e,t,n){var i=function(){return t.appendChild(e)};n?i():v(i)},e.insertBefore=function(e,t,n){var i=function(){return t.parentNode.insertBefore(e,t)};n?i():v(i)},e.insertAfter=function(e,t,n){var i=function(){return t.parentNode.insertBefore(e,t.nextSibling)};n?i():v(i)},e.removeNode=function(e,t){var n=function(){return e.remove()};t?n():v(n)},e.removeClass=y,e.addClass=b,e.switchClass=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=""),y(e,n,i),b(e,t,i)},e.toggleClass=function(e,t,n,i){n?b(e,t,i):y(e,t,i)},e.setCSS=w,e.setCSSFromObj=function(e,t,n){Object.keys(t||{}).forEach(function(i){return w(e,i,t[i],n)})},e.setProperty=function(e,t,n,i){var o=function(){return e[t]=n};i?o():v(o)},e.setAttr=P,e.setHtml=function(e,t,n){var i=function(){return e.innerHTML=t};n?i():v(i)},e.removeAttr=function(e,t,n){var i=function(){return e.removeAttribute(t)};n?i():v(i)},e.createElement=function(e,t,n){var i=document.createElement(e);return t&&Object.keys(t).forEach(function(e){P(i,e,t[e],n)}),i},e.toDimension=function(e){return e==+e?e+"px":e},e.EventNotifier=jn,e.setPipeProvider=function(e){A=e},e.$parseExpr=re,e.$parseEvent=ae,e.\u02752=L,e.\u02753=B,e.\u02754=j,e.\u02755=U,e.\u02756=Y,e.\u02757=Q,e.\u02758=Z,e.\u02759=te,e.\u027510=oe,e.isDefined=$e,e.isObject=Ue,e.toBoolean=We,e.isIE=qe,e.isAndroid=He,e.isAndroidTablet=ze,e.isIphone=Ye,e.isIpod=Ke,e.isIpad=Qe,e.isIos=Xe,e.isMobile=Ze,e.isMobileApp=Je,e.getAndroidVersion=et,e.isKitkatDevice=tt,e.encodeUrl=nt,e.encodeUrlParams=it,e.initCaps=ot,e.spaceSeparate=rt,e.replaceAt=at,e.periodSeparate=st,e.prettifyLabel=lt,e.deHyphenate=ct,e.prettifyLabels=pt,e.isInsecureContentRequest=ut,e.stringStartsWith=dt,e.getEvaluatedExprValue=mt,e.isImageFile=ht,e.isAudioFile=ft,e.isVideoFile=gt,e.isValidWebURL=vt,e.getResourceURL=yt,e.triggerFn=bt,e.getFormattedDate=wt,e.getDateObj=Pt,e.addEventListenerOnElement=_t,e.getClonedObject=Ot,e.getFiles=Rt,e.generateGUId=Ct,e.validateAccessRoles=It,e.getValidJSON=At,e.xmlToJson=Dt,e.findValueOf=Nt,e.extractType=xt,e.isNumberType=Mt,e.isEmptyObject=kt,e.isPageable=Lt,e.replace=Ft,e.isDateTimeType=Bt,e.getValidDateObject=Gt,e.getNativeDateObject=jt,e.getBlob=Vt,e.isEqualWithFields=$t,e.loadStyleSheet=Yt,e.loadStyleSheets=Kt,e.loadScript=Zt,e.loadScripts=Jt,e._WM_APP_PROJECT=en,e.setSessionStorageItem=tn,e.getSessionStorageItem=nn,e.noop=on,e.isArray=rn,e.isString=an,e.isNumber=sn,e.convertToBlob=ln,e.hasCordova=cn,e.isSpotcues=pn,e.AppConstants=un,e.openLink=dn,e.fetchContent=mn,e.toPromise=hn,e.retryIfFails=fn,e.getAbortableDefer=gn,e.createCSSRule=vn,e.getUrlParams=yn,e.getRouteNameFromLink=bn,e.isAppleProduct=wn,e.defer=Pn,e.executePromiseChain=_n,e.isDataSourceEqual=On,e.validateDataSourceCtx=Rn,e.processFilterExpBindNode=En,e.extendProto=Tn,e.removeExtraSlashes=Sn,e.getDisplayDateTimeFormat=In,e.addForIdAttributes=An,e.adjustContainerPosition=Dn,e.closePopover=Nn,e.detectChanges=xn,e.triggerItemAction=Mn,e.getDatasourceFromExpr=kn,e.extractCurrentItemExpr=Ln,e.findRootContainer=Fn,e.VALIDATOR=Bn,e.FIRST_TIME_WATCH=ce,e.isFirstTimeChange=function(e){return e===ce},e.debounce=he,e.muteWatchers=function(){me=!0},e.unMuteWatchers=function(){me=!1,be()},e.$watch=fe,e.$unwatch=ge,e.setNgZone=function(e){return ue=e},e.setAppRef=function(e){pe=e},e.isChangeFromWatch=function(){return ve},e.resetChangeFromWatch=we,e.$invokeWatchers=function(e,t){if(e)be(t);else{if(de)return void(de=!1);Oe()}},e.$appDigest=Re,e.IDGenerator=N,e.IDataSource=Ee,e.DataSource=Te,e.App=Se,e.AbstractDialogService=Ce,e.AbstractHttpService=Ie,e.AbstractI18nService=Ae,e.AbstractToasterService=De,e.AbstractSpinnerService=Ne,e.UserDefinedExecutionContext=xe,e.AbstractNavigationService=Me,e.AppDefaults=ke,e.DynamicComponentRefProvider=Le,e.ConstantService=Vn,e.UtilsService=$n,e.FieldTypeService=Un,e.FieldWidgetService=Wn,e.ScriptStore=qn,e.ScriptLoaderService=Hn,e.CoreModule=zn,e.getWmProjectProperties=I,e.setWmProjectProperties=function(e){Object.setPrototypeOf(C,e)},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("@wm/swipey",["exports"],t):t(e.swipey={})}(this,function(e){"use strict";var t=function(){function e(){this._isGesturesEnabled=!0}return e.prototype.bindEvents=function(){return window.PointerEvent?["pointer"]:["touch"]},e.prototype.bounds=function(e,t){return{}},e.prototype.context=function(){return{}},e.prototype.direction=function(){return $.fn.swipey.DIRECTIONS.HORIZONTAL},e.prototype.setGesturesEnabled=function(e){this._isGesturesEnabled=e},e.prototype.isGesturesEnabled=function(){return this._isGesturesEnabled},e.prototype.goToLower=function(e){this._$ele.swipeAnimation("gotoLower",e)},e.prototype.goToUpper=function(e){this._$ele.swipeAnimation("gotoUpper",e)},e.prototype.onAnimation=function(e,t){},e.prototype.onUpper=function(){},e.prototype.onLower=function(){},e.prototype.threshold=function(){return 30},e.prototype.init=function(e,t){this._$ele=e,e.swipeAnimation({animation:this.animation(),target:t,bounds:this.bounds.bind(this),bindEvents:this.bindEvents(),context:this.context.bind(this),direction:this.direction(),enableGestures:this.isGesturesEnabled.bind(this),onAnimation:this.onAnimation.bind(this),onLower:this.onLower.bind(this),onUpper:this.onUpper.bind(this),threshold:this.threshold(),disableMouse:!0})},e}();e.SwipeAnimation=t,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/compiler")):"function"==typeof define&&define.amd?define("@wm/transpiler",["exports","@angular/compiler"],t):t((e.wm=e.wm||{},e.wm.transpiler={}),e.ng.compiler)}(this,function(e,t){"use strict";function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}var o=[{from:"@angular/forms",name:"FormsModule",as:"ngFormsModule"}],r=[{from:"@angular/forms",name:"ReactiveFormsModule",as:"ngReactiveFormsModule"}],a=[{from:"ngx-bootstrap/dropdown",name:"BsDropdownModule",as:"ngxBsDropdownModule",forRoot:!0}],s=[{from:"ngx-bootstrap/datepicker",name:"DatepickerModule",as:"ngx_DatepickerModule",forRoot:!0}],l=[{from:"@wm/components/basic/progress",name:"ProgressModule"}],c=i(l,[{from:"@wm/mobile/components/basic",name:"BasicModule",as:"WM_MobileBasicModule",platformType:"MOBILE"}]),p=[{from:"@wm/components/page",name:"PageModule"},{from:"@wm/mobile/components/page",name:"PageModule",as:"WM_MobilePageModule",platformType:"MOBILE"}],u=i([{from:"@wm/components/basic",name:"BasicModule"}],c),d=i(o,[{from:"@wm/components/input",name:"InputModule"}]),m=i([{from:"ngx-bootstrap/modal",name:"ModalModule",as:"ngx_ModalModule"}],d,[{from:"@wm/components/dialogs",name:"DialogModule"}]),h=i(o,[{from:"ngx-bootstrap/pagination",name:"PaginationModule",as:"ngxPaginationModule",forRoot:!0}],[{from:"@wm/components/data/pagination",name:"PaginationModule"}]),f=i(o,[{from:"ngx-bootstrap/typeahead",name:"TypeaheadModule",as:"ngxTypeaheadModule",forRoot:!0}],[{from:"@wm/components/basic/search",name:"SearchModule"}]),g=[{from:"@wm/components/containers/accordion",name:"AccordionModule"}],v=i(m,[{from:"@wm/components/dialogs/alert-dialog",name:"AlertDialogModule"}]),y=i(u,a,d,[{from:"@wm/components/navigation/menu",name:"MenuModule"}]),b=i(y,[{from:"@wm/components/navigation/breadcrumb",name:"BreadcrumbModule"}]),w=i(o,s,[{from:"@wm/components/input/calendar",name:"CalendarModule"}]),P=i([{from:"ngx-bootstrap/carousel",name:"CarouselModule",as:"ngxCarouselModule",forRoot:!0}],[{from:"@wm/components/advanced/carousel",name:"CarouselModule"}]),O=i(u,[{from:"@wm/components/chart",name:"ChartModule"}]),R=i(f,[{from:"@wm/components/input/chips",name:"ChipsModule"}]),E=i(o,[{from:"ngx-color-picker",name:"ColorPickerModule",as:"ngx_ColorPickerModule"}],[{from:"@wm/components/input/color-picker",name:"ColorPickerModule"}]),T=i(m,[{from:"@wm/components/dialogs/confirm-dialog",name:"ConfirmDialogModule"}]),S=i(d,[{from:"@wm/components/input/currency",name:"CurrencyModule"}]),C=i(m,[{from:"@wm/components/dialogs/design-dialog",name:"DesignDialogModule"}]),I=i(o,[{from:"ngx-bootstrap/datepicker",name:"BsDatepickerModule",as:"ngx_BsDatepickerModule"}],[{from:"ngx-bootstrap/timepicker",name:"TimepickerModule",as:"ngx_TimepickerModule",forRoot:!0}],a,s,[{from:"@wm/mobile/components/input/epoch",name:"EpochModule",as:"WM_MobileEpochModule",platformType:"MOBILE"}],[{from:"@wm/components/input/epoch",name:"EpochModule"}]),A=i([{from:"@wm/mobile/components/input/file-upload",name:"FileUploadModule",as:"WM_MobileFileUploadModule",platformType:"MOBILE"}],[{from:"@wm/components/input/file-upload",name:"FileUploadModule"}]),D=i(u,m,[{from:"@wm/components/dialogs/iframe-dialog",name:"IframeDialogModule"}]),N=[{from:"@wm/components/containers/layout-grid",name:"LayoutGridModule"}],x=i(m,[{from:"@wm/components/dialogs/login-dialog",name:"LoginDialogModule"}]),M=i(a,y,u,[{from:"@wm/components/data/card",name:"CardModule"}]),k=[{from:"@wm/components/page/left-panel",name:"LeftPanelModule"},{from:"@wm/mobile/components/page/left-panel",name:"LeftPanelModule",as:"WM_MobileLeftPanelModule",platformType:"MOBILE"}],L=i(h,d,[{from:"@wm/components/data/list",name:"ListModule"}]),F=i(k,f,p,[{from:"@wm/mobile/components/page/mobile-navbar",name:"MobileNavbarModule"}]),B=i(u,p,F,[{from:"@wm/mobile/components/data/media-list",name:"MediaListModule"}]),G=i([{from:"ngx-bootstrap/popover",name:"PopoverModule",as:"ngxPopoverModule",forRoot:!0}],u,[{from:"@wm/components/navigation/popover",name:"PopoverModule"}]),j=i(y,[{from:"@wm/components/containers/panel",name:"PanelModule"}]),V=i(m,[{from:"@wm/components/dialogs/partial-dialog",name:"PartialDialogModule"}]),$=[{from:"@wm/components/prefab",name:"PrefabModule"}],U=[{from:"@wm/mobile/components/containers/segmented-control",name:"SegmentedControlModule"}],W=i(o,[{from:"@wm/components/input/slider",name:"SliderModule"}]),q=[{from:"@wm/components/containers/tabs",name:"TabsModule"}],H=i(o,r,h,y,u,d,[{from:"ngx-bootstrap/tooltip",name:"TooltipModule",as:"ngxTooltipModule",forRoot:!0}],L,[{from:"@wm/components/data/table",name:"TableModule"}]),z=i(o,[{from:"@wm/components/containers/wizard",name:"WizardModule"}]),Y=i(H,[{from:"@wm/components/data/live-table",name:"LiveTableModule"}]),K=i(o,r,u,d,p,C,[{from:"@wm/components/data/form",name:"FormModule"}]),Q=new Map([["wm-accordion",g],["wm-accordionpane",g],["wm-anchor",u],["wm-alertdialog",v],["wm-audio",u],["wm-barcodescanner",[{from:"@wm/mobile/components/device/barcode-scanner",name:"BarcodeScannerModule"}]],["wm-button",d],["wm-buttongroup",d],["wm-breadcrumb",b],["wm-camera",[{from:"@wm/mobile/components/device/camera",name:"CameraModule"}]],["wm-calendar",w],["wm-card",M],["wm-card-actions",M],["wm-card-content",M],["wm-card-footer",M],["wm-carousel",P],["wm-carousel-content",P],["wm-carousel-template",P],["wm-chart",O],["wm-checkbox",d],["wm-checkboxset",d],["wm-chips",R],["wm-colorpicker",E],["wm-confirmdialog",T],["wm-content",[{from:"@wm/components/page",name:"PageModule"}]],["wm-currency",S],["wm-date",I],["wm-datetime",I],["wm-dialog",C],["wm-footer",[{from:"@wm/components/page/footer",name:"FooterModule"}]],["wm-form",K],["wm-form-action",K],["wm-form-field",K],["wm-filter-field",K],["wm-fileupload",A],["wm-gridrow",N],["wm-gridcolumn",N],["wm-header",[{from:"@wm/components/page/header",name:"HeaderModule"}]],["wm-html",u],["wm-icon",u],["wm-iframe",u],["wm-iframedialog",D],["wm-label",u],["wm-layoutgrid",N],["wm-left-panel",k],["wm-list",L],["wm-livetable",Y],["wm-login",[{from:"@wm/components/advanced/login",name:"LoginModule"}]],["wm-logindialog",x],["wm-marquee",[{from:"@wm/components/advanced/marquee",name:"MarqueeModule"}]],["wm-menu",y],["wm-media-list",B],["wm-mobile-navbar",F],["wm-mobile-tabbar",[{from:"@wm/mobile/components/page/tab-bar",name:"TabBarModule"}]],["wm-nav",y],["wm-navbar",[{from:"@wm/components/navigation/navbar",name:"NavbarModule"}]],["wm-nav-item",y],["wm-network-info-toaster",u],["wm-number",d],["wm-page",p],["wm-page-content",p],["wm-pagedialog",V],["wm-pagination",h],["wm-panel",j],["wm-panel-footer",j],["wm-picture",u],["wm-popover",G],["wm-progress-bar",l],["wm-prefab",$],["wm-prefab-container",$],["wm-progress-circle",l],["wm-radioset",d],["wm-rating",[{from:"@wm/components/input/rating",name:"RatingModule"}]],["wm-richtexteditor",[{from:"@wm/components/basic/rich-text-editor",name:"RichTextEditorModule"}]],["wm-right-panel",[{from:"@wm/components/page/right-panel",name:"RightPanelModule"}]],["wm-select",d],["wm-search",f],["wm-segmented-content",U],["wm-segmented-control",U],["wm-slider",W],["wm-spinner",u],["wm-switch",d],["wm-table",H],["wm-tabs",q],["wm-tabpane",q],["wm-text",d],["wm-textarea",d],["wm-time",I],["wm-tile",[{from:"@wm/components/containers/tile",name:"TileModule"}]],["wm-top-nav",[{from:"@wm/components/page/top-nav",name:"TopNavModule"}]],["wm-tree",[{from:"@wm/components/basic/tree",name:"TreeModule"}]],["wm-video",u],["wm-wizard",z],["wm-wizardstep",z]]),X={COMMENTS_FORMAT:/\/\*((?!\*\/).|\n)+\*\//g,SELECTOR_FORMAT:/[^\{\}]*\{/gi,SELECTOR_EXCLUDE_FORMAT:/(@keyframes|@media|@font-face|@comment[0-9]+|from|to|[0-9]+%)\b/i},Z={accessroles:"*accessroles","ng-if":"*ngIf",showindevice:"showInDevice","ng-class":"[ngClass]","data-ng-class":"[ngClass]","data-ng-src":"src","ng-src":"src","data-ng-href":"href","ng-href":"href","ng-disabled":"disabled","data-ng-disabled":"disabled","ng-model":'[ngModelOptions]="{standalone: true}" [(ngModel)]'},J=function(e){return e?(e=e.trim()).startsWith("bind:")?e.substr(5):void 0:null},ee=function(e){return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},te=new Map,ne=new t.HtmlParser,ie=function(){return""},oe=function(e){var t,n=Z[e.name],i=e.valueSpan?e.value:void 0;if(n)return"accessroles"===e.name?[n,"'"+i+"'"]:[n,ee(i)];if("o"===(t=e.name)[0]&&"n"===t[1]&&"-"===t[2])return function(e){return[e.name.substr(3)+".event",e.value]}(e);var o=J(e.value);return o?function(e,t){return[e.name+".bind",ee(t)]}(e,o):[e.name,ee(i)]},re=function(e){var t=e.split(".");if("Variables"===t[0]||"Widgets"===t[0])return t[0]+"."+t[1]},ae=function(e){var t="";return e.forEach(function(n,i){t+=" "+i,n&&(n=n.trim(),"[ngClass]"===i&&n.startsWith("{")&&(n=n.replace(/"/g,"'")),"show.bind"===i&&"true"===e.get("deferload")&&(n=n+'" *lazyLoad="'+("&apos;"+n.replace(/&apos/g,"&quot").replace(/&quot/g,"\\&quot")+"&apos;")),t+='="'+n+'"')}),t},se=["padding","borderwidth","margin"],le="unset",ce=function(e){Array.from(e.keys()).forEach(function(t){if(se.includes(t)){var n={},i=e.get(t);e.delete(t),function(e,t,n){var i,o,r,a,s,l=t,c="";function p(t,n){n===le&&(n=""),e[l+t+c]=n}"borderwidth"===t&&(c="width",l="border"),-1!==(i=n).indexOf(le)?(o=(i=i.split(" "))[0],r=i[1]||i[0],a=i[2]||i[0],s=i[3]||i[1]||i[0],p("top",o),p("right",r),p("bottom",a),p("left",s)):("borderwidth"===t&&(l="borderwidth"),e[l]=n)}(n,t,i),Object.keys(n).forEach(function(t){n[t]&&e.set(t,n[t])})}})},pe=function(e,o,r){var a,s,l,c=te.get(e.name);c&&(a=c.pre||ie,s=c.post||ie,l=c.template||ie);var p,u,d,m="";if(r||(r=[]),e instanceof t.Element){var h=void 0;c&&(u=function(e,t,n){if(!e.requires)return[];var i=e.requires;return"string"==typeof i&&(i=[i]),Array.isArray(i)?i.map(function(i){for(var o=n.length-1;o>=0;o--)if("tableName"===n[o].name)return e[n[o].value];for(o=t.length-1;o>=0;o--)if(t[o].nodeName===i)return t[o].provide}):[]}(c,r,e.attrs),d=new Map,l.apply(void 0,i([e,d],u))),p=function(e){var t=new Map;if(e.forEach(function(e){var i=n(oe(e),2),o=i[0],r=i[1];t.set(o,r)}),t.get("dataset.bind")){var i=re(t.get("dataset.bind"));i&&t.set("datasource.bind",i)}return t}(e.attrs),ce(p);var f=e.name.replace(":svg:svg","svg").replace(":svg:","svg:");if(c){if(m=a.apply(void 0,i([p,d],u)),c.provide){if(h={nodeName:e.name,provide:_.isFunction(c.provide)?c.provide.apply(c,i([p,d],u)):c.provide},"wm-table"===e.name){var g=te.get("wm-table-column");g[_.find(e.attrs,function(e){return"name"===e.name}).value]=h.provide,te.set("wm-table-column",g)}r.push(h)}}else m="<"+f+" "+ae(p)+">";e.children.forEach(function(e){return m+=pe(e,o,r)}),c?(h&&r.splice(r.indexOf(h),1),m+=s.apply(void 0,i([p,d],u))):e.endSourceSpan&&!t.getHtmlTagDefinition(e.name).isVoid&&(m+="</"+f+">")}else e instanceof t.Text&&(m+=e.value);if(o(Q.get(e.name)),c&&c.imports){("function"==typeof c.imports?c.imports(p):c.imports).forEach(function(e){o(Q.get(e))})}return m};e.getBoundToExpr=J,e.getDataSource=re,e.getFormMarkupAttr=function(e){if(e.get("datavalue.bind")){var t=re(e.get("datavalue.bind"));e.set("datavaluesource.bind",t)}return ae(e)},e.getAttrMarkup=ae,e.processNode=pe,e.transpile=function(e){var t,n;if(void 0===e&&(e=""),e.length){var i=[],o=ne.parse(e,"");if(!o.errors.length){var r="";try{for(var a=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(o.rootNodes),s=a.next();!s.done;s=a.next()){var l=s.value;r+=pe(l,function(e){e&&(i=i.concat(e))})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i=_.uniqWith(i,_.isEqual),{markup:r,requiredWMComponents:i=_.sortBy(i,["from","name"])}}}},e.register=function(e,t){return te.set(e,t())},e.scopeComponentStyles=function(e,t,n){void 0===n&&(n=""),e=e.toLowerCase();var i={},o=0;if(n.startsWith("/*DISABLE_SCOPING*/"))return n;for(var r in n=(n=n.replace(X.COMMENTS_FORMAT,function(e){var t="@comment"+o+++"{";return i[t]=e,t})).replace(X.SELECTOR_FORMAT,function(n){if(!X.SELECTOR_EXCLUDE_FORMAT.test(n)){var i=n.match(/\S/).index,o="";i>0&&(o=n.substring(0,i),n=n.substring(i)),!n.startsWith("/*")&&n.trim().length>0&&(n=n.split(",").map(function(i){var o=n.indexOf(" ");if((i=i.trim()).startsWith(".wm-app")){if(!(o>0))return n;i=i.substring(o+1)}return 0===t||"PAGE"===t?i=".wm-app app-page-"+e+" "+i:1===t||"PREFAB"===t?i=".wm-app app-prefab-"+e+" "+i:2!==t&&"PARTIAL"!==t||(i=".wm-app app-partial-"+e+" "+i),i}).join(",")),n=o+n}return n}),i)n=n.replace(r,i[r]);return n},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("@wm/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@wm/http",["exports","@angular/common","@angular/core","rxjs","@wm/core","@angular/common/http"],t):t((e.wm=e.wm||{},e.wm.http={}),e.ng.common,e.ng.core,e.rxjs,e.wm.core,e.ng.common.http)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}var c=function(e){function t(t){var n=e.call(this)||this;return n.httpClient=t,n.nonBodyTypeMethods=["GET","DELETE","HEAD","OPTIONS","JSONP"],n.sessionTimeoutObservable=new i.Subject,n.sessionTimeoutQueue=[],n}return s(t,e),t.prototype.handleSessionTimeout=function(e,t){this.sessionTimeoutQueue.push({requestInfo:e,sub401:t}),this.on401()},t.prototype.generateRequest=function(e){var t,n,i=new r.HttpHeaders,o=new r.HttpParams,a=e.headers,s=e.params,c=e.responseType,p=e.withCredentials;e.isDirectCall||(i=i.append("X-Requested-With","XMLHttpRequest")),a&&Object.entries(a).forEach(function(e){var t=l(e,2),n=t[0],o=t[1];return i=i.append(n,o)}),s&&Object.entries(s).forEach(function(e){var t=l(e,2),n=t[0],i=t[1];return o=o.append(n,i)});var u={headers:i,params:o,responseType:c,withCredentials:p};return _.includes(this.nonBodyTypeMethods,e.method&&e.method.toUpperCase())&&void 0===e.data?(t=u,n=null):(t=e.data,n=u),new r.HttpRequest(e.method,e.url,t,n)},t.prototype.getErrMessage=function(e){var t={404:this.getLocale().MESSAGE_404_ERROR||"Requested resource not found",401:this.getLocale().MESSAGE_401_ERROR||"Requested resource requires authentication",403:this.getLocale().LABEL_FORBIDDEN_MESSAGE||"The requested resource access/action is forbidden."}[e.status],n=e.error;return t=(n=o.getValidJSON(n)||n)&&n.errors?this.parseErrors(n.errors)||t||"Service Call Failed":t||"Service Call Failed"},t.prototype.sendCallAsObservable=function(e){var t=this.generateRequest(e);return this.httpClient.request(t)},t.prototype.send=function(e){var t=this,n=this.generateRequest(e);return new Promise(function(e,i){t.httpClient.request(n).toPromise().then(function(t){e(t)},function(n){if(t.isPlatformSessionTimeout(n))n._401Subscriber.asObservable().subscribe(function(t){e(t)},function(e){i(e)});else{var o=t.getErrMessage(n);i({error:o,details:n})}})})},t.prototype.setLocale=function(e){this.localeObject=e},t.prototype.getLocale=function(){return this.localeObject},t.prototype.parseErrors=function(e){var t=this,n="";return e&&e.error&&e.error.length&&e.error.forEach(function(e,i){n+=t.parseError(e)+(i>0?"\n":"")}),n},t.prototype.parseError=function(e){return e.message?o.replace(e.message,e.parameters,!0):e.parameters&&e.parameters[0]||""},t.prototype.getHeader=function(e,t){return e.headers.get(t)},t.prototype.isPlatformSessionTimeout=function(e){return 401===e.status&&"Session Not Found"===this.getHeader(e,"x-wm-login-errormessage")},t.prototype.get=function(e,t){return(t=t||{}).url=e,t.method="get",this.send(t).then(function(e){return e.body})},t.prototype.post=function(e,t,n){return(n=n||{}).url=e,n.method="post",n.data=t,this.send(n)},t.prototype.put=function(e,t,n){return(n=n||{}).url=e,n.method="put",n.data=t,this.send(n)},t.prototype.patch=function(e,t,n){return(n=n||{}).url=e,n.method="patch",n.data=t,this.send(n)},t.prototype.delete=function(e,t){return(t=t||{}).url=e,t.method="delete",this.send(t)},t.prototype.head=function(e,t){return(t=t||{}).url=e,t.method="head",this.send(t)},t.prototype.jsonp=function(e,t){return(t=t||{}).url=e,t.method="jsonp",this.send(t)},t.prototype.upload=function(e,t,n){var i=new r.HttpRequest("POST",e,t,{reportProgress:!0});return this.httpClient.request(i)},t.prototype.registerOnSessionTimeout=function(e){this.sessionTimeoutObservable.asObservable().subscribe(e)},t.prototype.on401=function(){this.sessionTimeoutObservable.next()},t.prototype.pushToSessionFailureQueue=function(e){this.sessionTimeoutQueue.push({callback:e})},t.prototype.executeSessionFailureRequests=function(){var e=this.sessionTimeoutQueue,t=this;t.sessionTimeoutQueue=[],e.forEach(function(e){_.isFunction(e.callback)?e.callback():(e.requestInfo.headers.headers.delete("x-wm-xsrf-token"),t.httpClient.request(e.requestInfo).subscribe(function(t){t&&t.type&&e.sub401&&e.sub401.next(t)},function(t){e.sub401.error(t)}))})},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:r.HttpClient}]},t}(o.AbstractHttpService),p=function(){function e(){this.headers=[]}return e.prototype.wmToAngularRequest=function(e){var t;return(t=(t=new r.HttpRequest(e.method,e.url)).clone()).body=e.body,t.method=e.method,t.responseType=e.responseType,t.urlWithParams=e.url,t.withCredentials=e.withCredentials,e.headers.forEach(function(e,n){t.headers=t.headers.append(n,e)}),t},e.prototype.angularToWmRequest=function(t){var n=new e,i=new Map;return n.body=t.body,n.method=t.method,n.responseType=t.responseType,n.url=t.urlWithParams,n.withCredentials=t.withCredentials,t.headers.keys().forEach(function(e){i.set(e,t.headers.headers.get(e.toLowerCase())[0])}),n.headers=i,n},e}(),u=function(e){function t(){return e.call(this)||this}return s(t,e),t.prototype.wmToAngularResponse=function(e){var t;return(t=(t=new r.HttpResponse).clone()).body=e.body,t.error=e.error,t.message=e.message,t.url=e.url,t.ok=e.ok,t.status=e.status,t.statusText=e.statusText,e.headers.forEach(function(e,n){t.headers=t.headers.append(n,e)}),t},t.prototype.angularToWmResponse=function(e){var n,i=new Map;return(n=new t).body=e.body,n.error=e.error,n.message=e.message,n.url=e.url,n.ok=e.ok,n.status=e.status,n.statusText=e.statusText,e.headers.keys().forEach(function(t){i.set(t,e.headers.headers.get(t.toLowerCase())[0])}),n.headers=i,n},t}(p),d=function(){function e(){}return e.forRoot=function(){return{ngModule:t.CommonModule,providers:[{provide:o.AbstractHttpService,useClass:c}]}},e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.HttpClientModule],declarations:[]}]}],e}();e.HttpServiceModule=d,e.HttpServiceImpl=c,e.WmHttpRequest=p,e.WmHttpResponse=u,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/oAuth",["exports","@angular/core","rxjs","@wm/core"],t):t((e.wm=e.wm||{},e.wm.oAuth={}),e.ng.core,e.rxjs,e.wm.core)}(this,function(e,t,n,i){"use strict";var o=".access_token",r=function(e){var t,n,i,o=e.urlParams;if(i={url:"services/oauth2/:providerId/authorizationUrl",method:"GET"},e.config)for(var r in i.url=(e.config.url||"")+i.url,i.method=e.config.method||i.method,i.headers=i.headers||{},e.config.headers)t=e.config.headers[r],i.headers[r]=t;if(o)for(n in o)o.hasOwnProperty(n)&&(t=o[n],_.isUndefined(t)||null===t||(i.url=i.url.replace(new RegExp(":"+n,"g"),t)));return e.params&&(i.params=e.params),_.isUndefined(e.data)||(i.data=e.data),e.dataParams&&(i.data.params=e.dataParams),e.headers&&(i.headers=e.headers),i.byPassResult=e.byPassResult,i.isDirectCall=e.isDirectCall,i.isExtURL=e.isExtURL,i.preventMultiple=e.preventMultiple,i.responseType=e.responseType,i},a={},s={STUDIO:"WM_STUDIO_",RUN:"WM_RUN_"},l="width=400,height=600",c=function(e){var t=p(e);sessionStorage.removeItem(t)};function p(e){return s.RUN+i._WM_APP_PROJECT.id+"_"+e+o}function u(e,t){var n=p(e);sessionStorage.setItem(n,t)}function d(e,t,n,i){var r=e+o,s=localStorage.getItem(r);i&&i.origin!==window.location.origin||s&&(n(e),localStorage.removeItem(r),u(e,s),window.removeEventListener("message",a[e]),setTimeout(function(){delete a[e],t&&t(s)}))}function m(e,t,n,i,r,a){localStorage.setItem("dummy_key","dummy_key"),localStorage.removeItem("dummy_key");var s=moment.duration(moment().format("HH:mm"),"HH:mm").subtract(i),l=g(e,!0);l?(r.accesstoken_retrieved=!0,u(e,l),localStorage.removeItem(e+o),a(e),t&&t()):s.minutes()>1&&t&&!r.accesstoken_retrieved?t("error"):setTimeout(function(){m(e,t,n,i,r,a)},3e3)}function h(e,t,n,i,o){window.open(e,"_blank",l),m(t,n,i,moment.duration(moment().format("HH:mm"),"HH:mm"),{accesstoken_retrieved:!1},o)}function f(e,t,n,r){var s;i.hasCordova()?(window.open(e,"_system"),window.OAuthInMobile(t).then(function(e){var i=t+o;e?(localStorage.setItem(i,e),d(t,n,r,null)):n("error")})):(s=window.open(e,"_blank",l),function(e,t,n){a[e]=d.bind(void 0,e,t,n),window.addEventListener("message",a[e],!1)}(t,n,r),function e(t,n,i){t&&a[n]&&(t.closed?(window.removeEventListener("message",a[n]),delete a[n],i&&i("error")):setTimeout(e.bind(void 0,t,n,i),3e3))}(s,t,n))}var g=function(e,t){var n=p(e);return t?localStorage.getItem(e+o):sessionStorage.getItem(n)},v=function(e,t,n,o,a,s,l){var c="WEB";if(!e)return window.WaveLens?c="WAVELENS":i.hasCordova()&&(c="MOBILE"),function(e,t){var n=r({target:"oauthConfiguration",action:"getAuthorizationUrl",urlParams:{projectId:i._WM_APP_PROJECT.id,providerId:e.providerId},params:{requestSourceType:e.requestSourceType}});return t.send(n)}({providerId:t,requestSourceType:c},a).then(function(e){s({name:t,url:e.body,invoke:function(){i.isIE()?h(e,t,n,o,l):f(e.body,t,n,l)}})});i.isIE()?h(e,t,n,o,l):f(e,t,n,l)},y=function(){function e(e){this.httpService=e,this.providers=new n.Subject,this.providersConfig=[]}return e.prototype.getOAuthProvidersAsObservable=function(){return this.providers.asObservable()},e.prototype.addProviderConfig=function(e){_.find(this.providersConfig,{name:e.name})||this.providersConfig.push(e),this.providers.next(this.providersConfig)},e.prototype.removeProviderConfig=function(e){_.remove(this.providersConfig,function(t){return t.name===e}),this.providers.next(this.providersConfig)},e.prototype.perfromOAuthorization=function(e,t,n,i){v(e,t,n,i,this.httpService,this.addProviderConfig.bind(this),this.removeProviderConfig.bind(this))},e.prototype.getAccessToken=function(e,t){return g(e,t)},e.prototype.removeAccessToken=function(e){c(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:i.AbstractHttpService}]},e}(),b=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[y]}},e.decorators=[{type:t.NgModule,args:[{}]}],e}();e.OAuthModule=b,e.OAuthService=y,e.parseConfig=r,e.removeAccessToken=c,e.getAccessToken=g,e.performAuthorization=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/security",["exports","@angular/core","@angular/common","@angular/router","@wm/core"],t):t((e.wm=e.wm||{},e.wm.security={}),e.ng.core,e.ng.common,e.ng.router,e.wm.core)}(this,function(e,t,n,i,o){"use strict";var r=function(){function e(e,t,n,i,o){this.injector=e,this.$http=t,this.routerService=n,this.activatedRoute=i,this._location=o,this.requestQueue={}}return e.prototype.isLoaded=function(){return this.config},e.prototype.get=function(){return this.config},e.prototype.load=function(){var e=this;return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(function(t,n){e.$http.send({url:"./services/security/info",method:"GET"}).then(function(n){e.config=n.body,e.lastLoggedInUser=o.getClonedObject(e.loggedInUser),e.loggedInUser=e.config.userInfo,t(n.body)}).catch(function(e){n(e)}).finally(function(){e.loadPromise=null})}),this.loadPromise)},e.prototype.getWebConfig=function(e,t){this.get()?o.triggerFn(e,this.get()):this.load().then(function(t){o.triggerFn(e,t)},t)},e.prototype.getConfig=function(e,t){function n(e,t,n){_.forEach(this.requestQueue[e],function(e){return o.triggerFn(e[t],n)}),this.requestQueue[e]=null}this.get()?o.triggerFn(e,this.get()):(this.requestQueue.config=this.requestQueue.config||[],this.requestQueue.config.push({success:e,error:t}),this.requestQueue.config.length>1||o.hasCordova()&&!o.isSpotcues||this.getWebConfig(function(e){e.homePage=o.getWmProjectProperties().homePage,e.userInfo,this.config=e,this.lastLoggedInUser=o.getClonedObject(this.loggedInUser),this.loggedInUser=e.userInfo,n.call(this,"config","success",this.get())}.bind(this),function(e){n.call(this,"config","error",e)}.bind(this)))},e.prototype.getLastLoggedInUsername=function(){return this.lastLoggedInUser&&this.lastLoggedInUser.userName},e.prototype.getCurrentRoutePage=function(){var e=this._location.path(),t=e.indexOf("?");return t=-1===t?e.length:t-1,e.substr(1,t)},e.prototype.getCurrentRouteQueryParam=function(e){var t;return this.activatedRoute.queryParams.subscribe(function(n){t=n[e]}),t},e.prototype.isNoPageLoaded=function(){return!_.isEmpty(this.getCurrentRoutePage())},e.prototype.getPageByLoggedInUser=function(){var e=this;return new Promise(function(t){var n;e.getConfig(function(i){i.securityEnabled&&i.authenticated?(n=i.userInfo.landingPage||o.getWmProjectProperties().homePage,e.isXsrfEnabled()):n=o.getWmProjectProperties().homePage,t(n)},function(){t(o.getWmProjectProperties().homePage)})})},e.prototype.loadPageByUserRole=function(e){var t=this;return this.getPageByLoggedInUser().then(function(n){(t.isNoPageLoaded()||e)&&(t.getCurrentRoutePage()===n?window.location.reload():t.routerService.navigate(["/"+n]))})},e.prototype.navigateOnLogin=function(){this.loadPageByUserRole(!0)},e.prototype.getRedirectPage=function(e,t){var n,i=o.getWmProjectProperties().homePage,r=_.get(e,"loginConfig.pageName"),a=t||this.getCurrentRoutePage();return a!==i&&a!==r||(n=this.getCurrentRouteQueryParam("redirectTo"),a=_.isEmpty(n)?void 0:n),a},e.prototype.getRedirectedRouteQueryParams=function(){var e={};return this.activatedRoute.queryParams.subscribe(function(t){_.forEach(t,function(t,n){e[n]=t})}),e},e.prototype.getQueryString=function(e){var t=[];return _.forEach(e,function(e,n){t.push(n+"="+e)}),_.join(t,"&")},e.prototype.appLogin=function(e,t,n){var i=this,r="";return _.each(e,function(e,t){r+=(r?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),this.$http.send({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"j_spring_security_check",data:r}).then(function(e){var n=e.body?e.body.wm_xsrf_token:"";n&&o.hasCordova()&&localStorage.setItem("wm_xsrf_token",n||""),i.injector.get(o.App).notify("userLoggedIn",{}),o.triggerFn(t,e)},n)},e.prototype.isAuthenticated=function(e,t){this.getConfig(function(t){o.triggerFn(e,t.authenticated)},t)},e.prototype.appLogout=function(e,t){var n=this;return this.$http.send({target:"Security",url:"j_spring_security_logout",method:"POST",responseType:"text",byPassResult:!0}).then(function(t){_.set(n.get(),"authenticated",!1),_.set(n.get(),"userInfo",null),n.injector.get(o.App).notify("userLoggedOut",{}),o.triggerFn(e,t)},t)},e.prototype.getCookieByName=function(e){return"cookie"},e.prototype.isXsrfEnabled=function(){return o.hasCordova()?localStorage.getItem("wm_xsrf_token"):this.getCookieByName("wm_xsrf_token")},e.prototype.onUserLogin=function(){var e=this;return new Promise(function(t,n){e.getConfig(function(n){if(n.securityEnabled)if(n.authenticated)t();else var i=e.injector.get(o.App).subscribe("userLoggedIn",function(){t(),i()});else t()},n)})},e.prototype.getLoggedInUser=function(){var e=this;return new Promise(function(t,n){e.getConfig(function(e){e&&e.userInfo?t(e.userInfo):n()},n)})},e.prototype.authInBrowser=function(){return Promise.reject("This authInBrowser should not be called")},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.Injector},{type:o.AbstractHttpService},{type:i.Router},{type:i.ActivatedRoute},{type:n.Location}]},e}(),a=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[r]}},e.decorators=[{type:t.NgModule,args:[{}]}],e}();e.SecurityModule=a,e.SecurityService=r,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/platform-browser"),require("@angular/core"),require("rxjs"),require("@wm/security"),require("@swipey"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/base",["exports","@angular/common","@angular/platform-browser","@angular/core","rxjs","@wm/security","@swipey","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.base={}),e.ng.common,e.ng.platformBrowser,e.ng.core,e.rxjs,e.wm.security,e.swipey,e.wm.core)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var h=function(){return function(){}}(),f=function(){return function(){}}(),g=new i.InjectionToken("Context Provider Reference"),v=new Set([s.FormWidgetType.SELECT,s.FormWidgetType.CHECKBOXSET,s.FormWidgetType.RADIOSET,s.FormWidgetType.SWITCH,s.FormWidgetType.AUTOCOMPLETE,s.FormWidgetType.CHIPS,s.FormWidgetType.TYPEAHEAD,s.FormWidgetType.RATING]),y=function(e,t){var n;return t?(t.replace(/\[(\w+)\]/g,".$1").split(".").forEach(function(t){n=n&&n[t]||(_.isNull(e)?e:e[t])}),n):e},b=function(e,t,n){var i,o=t.field,r=t.expression,a=t.bindExpression;return i=a?function(e){var t,n,i,o,r,a,s,l,c,p="";for(e=e.replace(/\$\[data\[\$i\]/g,"$[__1"),i=0;i<e.length;i++)if(t=e[i],n=e[i+1],"$"===t&&"["===n){for(a=1,c=!1,s=!1,o=i+2;o<e.length;o++)if(" "!==(r=e[o])&&(c||(s='"'===e[o]||"'"===e[o],c=!0),"["===r?a++:"]"===r&&a--,!a)){l=e.substring(i+2,o),p+=s?"__1["+l+"]":l;break}i=o}else p+=t;return p}(i=a.replace("bind:","")):r||o,a||r?s.$parseExpr(i)(n,Object.assign({},e,{__1:e})):_.get(e,o)},w=function(e){return v.has(e)},P=function(e,t,n){return s.isValidWebURL(e)?e:(e||(e=n||"resources/images/imagelists/default-image.png"),e=t?s.encodeUrl(e):e,s.stringStartsWith(e,"services/prefabs"),e)},O=function(e){return""===e||"none"===e?e:"url("+P(e)+")"};function R(e,t,n){return{provide:t,useExisting:i.forwardRef(function(){return e}),multi:n}}function E(e){return R(e,h)}var T,S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join("_")},C={number:["number","integer","big_integer","short","float","big_decimal","double","long","byte"],string:["string","text"],character:["character"],date:["date","time","timestamp","datetime"]},I={number:["exact","notequals","lessthan","lessthanequal","greaterthan","greaterthanequal","null","isnotnull"],string:["anywhereignorecase","anywhere","startignorecase","start","endignorecase","end","exactignorecase","exact","notequalsignorecase","notequals","null","isnotnull","empty","isnotempty","nullorempty"],character:["exactignorecase","exact","notequalsignorecase","notequals","null","isnotnull","empty","isnotempty","nullorempty"],date:["exact","lessthan","lessthanequal","greaterthan","greaterthanequal","null","notequals","isnotnull"]},A={boolean:["exact","null","isnotnull"],clob:[],blob:[]},D=function(e){var t=[];return _.isArray(e)?(e.forEach(function(e){t=t.concat(D(e))}),t):_.isObject(e)?(_.forEach(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):void 0},N=function(e,t){var n,i,o=e.toAdd||e,r=e.toRemove||t;return _.isObject(e)?(n=_.isArray(o)?o:D(o||[]),i=r?_.isArray(r)?r:D(r):[]):(n=o?[o]:[],i=r?[r]:[]),{toAdd:n,toRemove:i}},x=function(e,t,n,i){var o,r,a,l,c,p;i||(i={}),_.forEach(e,function(e,u){_.includes(u,".")&&(l=_.split(u,"."),r=l[0],a=l[1],p=!0),i.noModifyTitle?o=u:_.isString(u)?(o=s.prettifyLabel(u),o=s.deHyphenate(o),o=n?s.initCaps(n)+" "+o:o):o=u,u=n?n+"."+u:u,c=p?(c=_.split(o," ")).length>1?c[c.length-2]+" "+c[c.length-1]:c[0]:o;var d=i.setBindingField?{displayName:c,field:u,relatedTable:r,relatedField:a||o}:{displayName:c,relatedTable:r,relatedField:a||o};if(!_.isObject(e)||_.isArray(e)&&!e[0]){if(i.upperBound&&i.columnCount===i.upperBound)return;t.terminals.push(d),i.columnCount+=1}else i.columnCount!==i.upperBound&&t.objects.push(d),_.isArray(e)&&e[0]?x(e[0],t,u+"[0]",i):x(e,t,u,i)})};(T=e.APPLY_STYLES_TYPE||(e.APPLY_STYLES_TYPE={}))[T.CONTAINER=0]="CONTAINER",T[T.SCROLLABLE_CONTAINER=1]="SCROLLABLE_CONTAINER",T[T.INNER_SHELL=2]="INNER_SHELL",T[T.SHELL=3]="SHELL";var M={backgroundattachment:"backgroundAttachment",backgroundcolor:"backgroundColor",backgroundgradient:"backgroundGradient",backgroundimage:"backgroundImage",backgroundposition:"backgroundPosition",backgroundrepeat:"backgroundRepeat",backgroundsize:"backgroundSize",bordercolor:"borderColor",borderradius:"borderRadius",borderstyle:"borderStyle",borderwidth:"borderWidth",borderbottomwidth:"borderBottomWidth",borderleftwidth:"borderLeftWidth",borderrightwidth:"borderRightWidth",bordertopwidth:"borderTopWidth",color:"color",cursor:"cursor",display:"display",fontsize:"fontSize",fontfamily:"fontFamily",fontstyle:"fontStyle",fontunit:"fontunit",fontvariant:"fontVariant",fontweight:"fontWeight",height:"height",horizontalalign:"textAlign",lineheight:"lineHeight",margin:"margin",marginbottom:"marginBottom",marginleft:"marginLeft",marginright:"marginRight",margintop:"marginTop",opacity:"opacity",overflow:"overflow",padding:"padding",paddingbottom:"paddingBottom",paddingleft:"paddingLeft",paddingright:"paddingRight",paddingtop:"paddingTop",picturesource:"backgroundImage",textalign:"textAlign",textdecoration:"textDecoration",verticalalign:"verticalAlign",visibility:"visibility",whitespace:"whiteSpace",width:"width",wordbreak:"wordbreak",zindex:"zIndex"},k=function(e){return!!M[e]},L={height:!0,overflow:!0,padding:!0,paddingbottom:!0,paddingleft:!0,paddingright:!0,paddingtop:!0},F={textalign:!0},B={textalign:!0,width:!0};function G(t,n,i,o){var r=Object.create(null);o&&o.forEach(function(e){return r[e]=!0}),n.registerStyleChangeListener(function(o,a){if(!(r[o]||i===e.APPLY_STYLES_TYPE.SHELL&&L[o])){if(i===e.APPLY_STYLES_TYPE.INNER_SHELL){if(!L[o])return;"height"===o&&s.setCSS(t,"overflow",a?"auto":"")}if(i!==e.APPLY_STYLES_TYPE.CONTAINER||!F[o]){if(i===e.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER){if(B[o])return;"height"===o&&s.setCSS(t,"overflow",a?"auto":"")}"fontsize"===o||"fontunit"===o?s.setCSS(t,"fontSize",""===n.fontsize?"":n.fontsize+(n.fontunit||"px")):"backgroundimage"===o?s.setCSS(t,"backgroundImage",n.picturesource||O(a)):M[o]&&s.setCSS(t,M[o],a)}}})}var j,V=function(){var e=new Map;for(var t in s.FormWidgetType)e.set("wm-form-field-"+s.FormWidgetType[t],new Map);return e}(),U=function(e){return V.get(e)},W=function(e,t){V.set(e,t),window.WM_LOADED_COMPONENTS=m(window.WM_LOADED_COMPONENTS||[],[e])};(j=e.PROP_TYPE||(e.PROP_TYPE={}))[j.BOOLEAN=1]="BOOLEAN",j[j.NUMBER=2]="NUMBER",j[j.STRING=3]="STRING";var q={type:e.PROP_TYPE.STRING},H={type:e.PROP_TYPE.NUMBER},z={type:e.PROP_TYPE.BOOLEAN},Y={},K=function(){W("wm-container",new Map([["animation",q],["class",q],["conditionalclass",Y],["conditionalstyle",Y],["content",q],["name",q],["show",p({value:!0},z)]]))},Q=new Map,X=new s.IDGenerator("widget-id"),Z=new Map([["tap","click"]]),J={BLOCK:"block",INLINE_BLOCK:"inline-block",INLINE:"inline"},ee=new Set(["readonly","autofocus","disabled","startchecked","multiple","selected","required","controls","autoplay","loop","muted","show"]),te=function(e){return ee.has(e)},ne=new Set(["width","height","iconheight","iconwidth","popoverwidth","popoverheight","imagewidth","imageheight"]),ie=function(e){return ne.has(e)},oe=function(t,n,i){var o=t.widgetId,r=t[n];s.isChangeFromWatch()||s.$unwatch(S(o,n)),s.resetChangeFromWatch();var a=U(t.getWidgetSubType()).get(n);if(a){var l=a.type;l&&(i=function(t,n,i){return i===e.PROP_TYPE.BOOLEAN?s.toBoolean(n,te(t)&&t):i===e.PROP_TYPE.NUMBER?+n:n}(n,i,l))}if(i!==r||s.isObject(i)||s.isObject(r)){if(ie(n))i=s.toDimension(i);else if(_.startsWith(i,"resources/")){var c=t;void 0===c._parentPrefab_&&(c._parentPrefab_=t.$element.closest('[prefabname][prefabname!="__self__"]').attr("prefabname")||""),c._parentPrefab_&&(i="./app/prefabs/"+c._parentPrefab_+"/"+i)}t[n]=i,k(n)?t.notifyStyleChange(n,i,r):("conditionalclass"===n&&(i=N(i,r)),a&&t.notifyPropertyChange(n,i,r)),s.$appDigest()}},re={set:function(e,t,n){return oe(e,t,n),!0},get:function(e,t){var n=e[t];return _.isFunction(n)?n.bind(e):n}},ae=window.requestAnimationFrame,se=[],le=function(){function e(){}return e.create=function(e,t,n){if(window.Proxy)return new Proxy(e,re);var i,o=Object.create(e);return i=function(){for(var t in e)_.isFunction(e[t])&&"constructor"!==t&&"super"!==t&&!_.startsWith(t,"ng")&&(e[t]=e[t].bind(e))},se.length||ae(function(){se.forEach(function(e){return e()}),se.length=0}),se.push(i),Object.keys(M).forEach(function(t){Object.defineProperty(o,t,{get:function(){return e[t]},set:function(n){return oe(e,t,n)}})}),n&&n.forEach(function(t,n){Object.defineProperty(o,n,{get:function(){return e[n]},set:function(t){return oe(e,n,t)}})}),o},e}(),ce=function(){function e(e,t,r){var a=this;this.inj=e,this.styleChange=new o.ReplaySubject,this.propertyChange=new o.Subject,this.readyState=new o.Subject,this.destroy=new o.Subject,this.eventHandlers=new Map,this.toBeSetupEventsQueue=[],this.__cloneable__=!1,this.$attrs=new Map;var l=e.get(i.ElementRef);this.nativeElement=l.nativeElement,this.widgetType=t.widgetType,this.widgetSubType=t.widgetSubType||t.widgetType,this.viewParent=e.view.component,this.displayType=t.displayType||J.BLOCK,this.context=e.view.context,this.widget=this.createProxy(),this.eventManager=e.get(n.EventManager),this.nativeElement.widget=this.widget,this.appLocale=e.get(s.App).appLocale||{},this.initContext(),t.hostClass&&s.addClass(this.nativeElement,t.hostClass),this.widgetId=this.generateWidgetId(),s.setAttr(this.nativeElement,"widget-id",this.widgetId,!0),this.registerStyleChangeListener(this.onStyleChange,this),this.registerPropertyChangeListener(this.onPropertyChange,this),r?(this.delayedInit=!0,r.then(function(){a.initWidget(),a.setInitProps()})):this.initWidget()}return Object.defineProperty(e.prototype,"$element",{get:function(){return $(this.nativeElement)},enumerable:!0,configurable:!0}),e.prototype.getNativeElement=function(){return this.nativeElement},e.prototype.getWidgetType=function(){return this.widgetType},e.prototype.getWidgetSubType=function(){return this.widgetSubType},e.prototype.getWidget=function(){return this.widget},e.prototype.setProperty=function(e,t){this.widget[e]=t},e.prototype.getViewParent=function(){return this.viewParent},e.prototype.notifyStyleChange=function(e,t,n){this.styleChange.next({key:e,nv:t,ov:n})},e.prototype.notifyPropertyChange=function(e,t,n){this.propertyChange.next({key:e,nv:t,ov:n})},e.prototype.registerStyleChangeListener=function(e,t){t&&(e=e.bind(t)),this.styleChange.subscribe(function(t){var n=t.key,i=t.nv,o=t.ov;return e(n,i,o)})},e.prototype.registerReadyStateListener=function(e,t){t&&(e=e.bind(t)),this.readyState.isStopped?e():this.readyState.subscribe(function(){return e()})},e.prototype.registerPropertyChangeListener=function(e,t){t&&(e=e.bind(t)),this.propertyChange.subscribe(function(t){var n=t.key,i=t.nv,o=t.ov;return e(n,i,o)})},e.prototype.registerDestroyListener=function(e,t){t&&(e=e.bind(t)),this.destroy.subscribe(function(){},function(){},function(){return e()})},e.prototype.getDisplayType=function(){return this.displayType},e.prototype.createProxy=function(){return le.create(this,this.widgetSubType,U(this.widgetSubType))},e.prototype.initContext=function(){var e=this.inj.view.context,t=this.inj.get(g,{});this.viewParent!==e?this.context=e:this.context={},t&&(this.context=Object.assign.apply(Object,m([{}],t,[this.context])))},e.prototype.setWidgetProperty=function(e,t){this.widget[e]=t},e.prototype.getAttr=function(e){return this.$attrs.get(e)},e.prototype.getAppInstance=function(){return this.inj.get(s.App)},e.prototype.generateWidgetId=function(){return X.nextUid()},e.prototype.onPropertyChange=function(e,t,n){if("show"===e)this.nativeElement.hidden=!t;else if("hint"===e)s.setAttr(this.nativeElement,"title",t);else if("class"===e)s.switchClass(this.nativeElement,t,n);else if("name"===e||"tabindex"===e)s.setAttr(this.nativeElement,e,t),"name"===e&&t&&function(e,t,n,i){s.isDefined(e.Widgets)&&(i&&(e.Widgets[i]=void 0),n&&(e.Widgets[n]=t))}(this.viewParent,this.widget,t,n);else if("conditionalclass"===e)o=t.toAdd,r=t.toRemove,a=this.nativeElement,r&&r.length&&s.removeClass(a,_.join(r," ")),o&&o.length&&s.addClass(a,_.join(o," "));else if("autoplay"===e){var i="wm-audio"===this.widgetType?"audio":"video";this.nativeElement.querySelector(i).load()}else"conditionalstyle"===e?function(e,t,n){t&&_.isObject(t)&&Object.keys(t||{}).forEach(function(e){s.setCSS(n,e,"")});e&&_.isObject(e)&&s.setCSSFromObj(n,e)}(t,n,this.nativeElement):"animation"===e&&s.addClass(this.nativeElement,"animated "+t);var o,r,a},e.prototype.onStyleChange=function(e,t,n){},e.prototype.registerWidget=function(e){var t,n,i,o,r;this.registerDestroyListener((t=this.widget,n=this.viewParent,i=this.widgetId,o=e,r=!1,Q.set(i,t),o&&s.isDefined(n.Widgets)&&(r=!0,n.Widgets[o]=t),function(){Q.delete(i),r&&(n.Widgets[o]=void 0)}))},e.prototype.getMappedEventName=function(e){return Z.get(e)||e},e.prototype.handleEvent=function(e,t,n,i,o){this.eventManager.addEventListener(e,t,function(e){if(i.$event=e,"delayed"!==o)return n();setTimeout(function(){return n()},150)})},e.prototype.processEventAttr=function(e,t,n){var i=this,o=s.$parseEvent(t),r=this.context;r.widget=this.widget;var a=o.bind(void 0,this.viewParent,r),l=function(){var e;s.$invokeWatchers(!0);try{if(!((e=a())instanceof Promise))return e;e.then(function(e){return e},function(e){return e})}catch(e){console.error(e)}};this.eventHandlers.set(this.getMappedEventName(e),{callback:l,locals:r}),this[_.camelCase("on-"+e)]=l,this.toBeSetupEventsQueue.push(function(){i.handleEvent(i.nativeElement,i.getMappedEventName(e),l,r,n)})},e.prototype.processBindAttr=function(e,t){var n=this;this.initState.delete(e),this.registerDestroyListener(s.$watch(t,this.viewParent,this.context,function(t){return n.widget[e]=t},S(this.widgetId,e),"datasource"===e))},e.prototype.removePropertyBinding=function(e){s.$unwatch(S(this.widgetId,e))},e.prototype.invokeEventCallback=function(e,t){var n=this.eventHandlers.get(e);if(n){var i=n.callback,o=n.locals||{};if(i)return i(Object.assign(o,t))}},e.prototype.processAttr=function(e,t){var n=e.split("."),i=n[0],o=n[1],r=n[2],a=n.length;"bind"===o?("show"===i&&(this.nativeElement.hidden=!0),this.processBindAttr(i,t)):"event"===o?this.processEventAttr(i,t,r):1===a&&("class"===e?s.removeClass(this.nativeElement,t):"tabindex"!==e&&"name"!==e||s.removeAttr(this.nativeElement,e),this.initState.set(i,t))},e.prototype.processAttrs=function(){var e,t,n=this.inj.elDef;try{for(var i=u(n.element.attrs),o=i.next();!o.done;o=i.next()){var r=d(o.value,3),a=r[1],s=r[2];this.$attrs.set(a,s),this.processAttr(a,s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.initWidget=function(){var e=this;this.initState=new Map;var t=U(this.widgetSubType);t.forEach(function(t,n){s.isDefined(t.value)&&e.initState.set(n,t.value)}),this.widgetProps=t,this.processAttrs(),this.registerWidget(this.initState.get("name"))},e.prototype.setInitProps=function(){var e=this;this.initState.get("name")&&(this.widget.name=this.initState.get("name")),this.initState.forEach(function(t,n){(e.widgetProps.get(n)||k(n))&&"name"!==n&&(e.widget[n]=t)}),this.initState.clear(),this.initState=void 0,this.readyState.next(),this.readyState.complete()},e.prototype.hasEventCallback=function(e){return this.eventHandlers.has(e)},e.prototype.focus=function(){var e=this.$element[0].querySelector("[focus-target]");e||(e=this.$element[0]),e.focus()},e.prototype.execute=function(e,t){},e.prototype.ngOnInit=function(){this.delayedInit||this.setInitProps()},e.prototype.ngAfterViewInit=function(){var e,t;if(this.toBeSetupEventsQueue.length)try{for(var n=u(this.toBeSetupEventsQueue),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.toBeSetupEventsQueue.length=0},e.prototype.ngAfterContentInit=function(){},e.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.widget=Object.create(null),this.styleChange.complete(),this.propertyChange.complete(),this.destroy.complete()},e}(),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t}(ce),ue="app-container",de={widgetType:"wm-container",hostClass:ue},me=function(t){function n(n){var i=t.call(this,n,de)||this;return s.addClass(i.nativeElement,ue),G(i.nativeElement,i,e.APPLY_STYLES_TYPE.CONTAINER),i}return c(n,t),n.initializeProps=K(),n.decorators=[{type:i.Directive,args:[{selector:"[wmContainer]",providers:[E(n)]}]}],n.ctorParameters=function(){return[{type:i.Injector}]},n}(pe),he=function(){function e(){}return e.prototype.transform=function(e,t,n){return P(e,t,n)},e.decorators=[{type:i.Pipe,args:[{name:"image"}]}],e}(),fe=function(){function e(e,t,n){this.templateRef=t,this.viewContainer=n,this.viewParent=e.view.component,this.context=e.view.context}return Object.defineProperty(e.prototype,"lazyLoad",{set:function(e){var t=this;this.unSubscribeFn=s.$watch(e,this.viewParent,this.context,function(e){!t.embeddedView&&e&&(t.embeddedView=t.viewContainer.createEmbeddedView(t.templateRef,t.context),t.unSubscribeFn())})},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.unSubscribeFn()},e.decorators=[{type:i.Directive,args:[{selector:"[lazyLoad]"}]}],e.ctorParameters=function(){return[{type:i.Injector},{type:i.TemplateRef},{type:i.ViewContainerRef}]},e.propDecorators={lazyLoad:[{type:i.Input}]},e}(),ge=function(){W("wm-message",new Map([["animation",q],["caption",p({value:"Message"},q)],["class",q],["hideclose",p({value:!1},z)],["name",q],["show",p({value:!0},z)],["type",p({value:"success"},q)]]))},ve={widgetType:"wm-message",hostClass:"alert app-message"},ye=function(e){function t(t){var n=e.call(this,t,ve)||this;return n.messageClass="",n.messageIconClass="",n.type="",G(n.nativeElement,n),n}return c(t,e),t.prototype.showMessage=function(e,t){e&&(this.caption=e),t&&this.setWidgetProperty("type",t),this.setWidgetProperty("show",!0)},t.prototype.hideMessage=function(){this.setWidgetProperty("show",!1)},t.prototype.dismiss=function(e){this.hideMessage(),this.invokeEventCallback("close",{$event:e})},t.prototype.onMessageTypeChange=function(e){var t,n;switch(e){case"success":t="alert-success",n="wi wi-done";break;case"error":t="alert-danger",n="wi wi-cancel";break;case"warn":case"warning":t="alert-warning",n="wi wi-bell";break;case"info":t="alert-info",n="wi wi-info";break;case"loading":t="alert-info alert-loading",n="fa fa-spinner fa-spin"}s.switchClass(this.nativeElement,t,this.messageClass),this.messageClass=t,this.messageIconClass=n},t.prototype.onPropertyChange=function(t,n,i){"type"===t?this.onMessageTypeChange(n):e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=ge(),t.decorators=[{type:i.Component,args:[{selector:"[wmMessage]",template:'<i [title]="type + \'Alert\'" class="icon {{type}} {{messageIconClass}}"></i>\n<span [innerHtml]="caption | trustAs: \'html\'"></span>\n<button title="Close" type="button" class="btn-transparent close" [hidden]="hideclose" (click)="dismiss($event)" aria-label="Close">\n    <span aria-hidden="true">&times;</span>\n</button>',providers:[E(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t}(pe),be=function(){W("wm-partial",new Map([["name",q]]))},we={widgetType:"wm-partial",hostClass:"app-partial clearfix"},Pe=function(e){function t(t){return e.call(this,t,we)||this}return c(t,e),t.initializeProps=be(),t.decorators=[{type:i.Directive,args:[{selector:"[wmPartial]",providers:[E(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t}(pe),_e=function(){function e(e){this.widgetRef=e,this.widgetRef.partialParams={},this.widgetRef.pageParams=this.widgetRef.partialParams,this.widgetRef.params$=new o.Subject}return e.prototype.registerParams=function(e,t,n,i){var o=this;this.widgetRef.partialParams[e]=t,!t&&n?this.widgetRef.registerDestroyListener(s.$watch(n,this.widgetRef.getViewParent(),_.get(this.widgetRef,"context"),function(t){o.widgetRef.partialParams[e]=t,o.widgetRef.params$.next()})):this.widgetRef.params$.next()},e.decorators=[{type:i.Directive,args:[{selector:"[partialContainer]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.Self},{type:i.Inject,args:[h]}]}]},e}(),Oe=function(){function e(e,t,n){this.bindValue=e,this.type=t,this.partialParamsProvider=n}return e.prototype.ngOnInit=function(){this.partialParamsProvider.registerParams(this.name,this.value,this.bindValue,this.type)},e.decorators=[{type:i.Directive,args:[{selector:"[wmParam]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.Attribute,args:["value.bind"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["type"]}]},{type:_e}]},e.propDecorators={name:[{type:i.Input}],value:[{type:i.Input}]},e}(),Re=function(){function e(e){this.redraw=function(){return e.redraw()}}return e.decorators=[{type:i.Directive,args:[{selector:"[redrawable]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:i.Self},{type:i.Inject,args:[h]}]}]},e}(),Ee=function(){function e(e,t,n){var i=n.getDisplayType();t&&t.split(",").forEach(function(t){s.addClass(e.nativeElement,"visible-"+t+"-"+i)})}return e.decorators=[{type:i.Directive,args:[{selector:"[showInDevice]"}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:String,decorators:[{type:i.Attribute,args:["showInDevice"]}]},{type:ce,decorators:[{type:i.Inject,args:[h]}]}]},e}(),Te=function(){function e(e,t,n){this._isEnabled=!1,this._lastScrollY=-1,this._waitRefreshTill=-1,this.pendingIscrolls=[],this._$el=$(t.nativeElement),this.app=n}return e.prototype.ngOnInit=function(){var e=this;this.cancelSubscription=this.app.subscribe("no-iscroll",function(t){e.pendingIscrolls.push(t)})},e.prototype.ngDoCheck=function(){this._isEnabled?this._smoothScrollInstance?this.refreshIScroll():this._smoothScrollInstance=this.applySmoothScroll():this._smoothScrollInstance&&this._smoothScrollInstance.destroy&&this._smoothScrollInstance.destroy()},e.prototype.ngOnDestroy=function(){this._smoothScrollInstance&&this._smoothScrollInstance.destroy&&this._smoothScrollInstance.destroy(),this.cancelSubscription&&this.cancelSubscription()},Object.defineProperty(e.prototype,"wmSmoothscroll",{set:function(e){this._isEnabled=!0===e||"true"===e,this._isEnabled?this._smoothScrollInstance||(this._smoothScrollInstance=this.applySmoothScroll()):this.ngOnDestroy()},enumerable:!0,configurable:!0}),e.prototype.applySmoothScroll=function(e,t){var n=this;if(!s.isMobileApp()||s.isKitkatDevice())return null;var i={scrollbars:!0,preventDefault:!1,momentum:!0,bounce:!1,mouseWheel:!0,disablePointer:!0,disableTouch:!1,disableMouse:!1},o=this._$el[0];if(!o.children.length)return null;this._$el.addClass("smoothscroll-wrapper"),o.onscroll=function(e){e.target.iscroll&&e.target.scrollTop&&(e.target.iscroll.scrollTo(e.target.iscroll.x,e.target.iscroll.y-e.target.scrollTop),e.target.scrollTop=0)},t&&"INPUT"===t.tagName&&t.focus(),e&&(i.fadeScrollbars=!0);var r=new IScroll(o,i);return e&&(_.forEach(e,function(e,t){_.forEach(e,function(e){r.on(t,e)})}),r.on("scrollStart",function(){this._scrolling=!0}),r.on("scrollEnd",function(){this._scrolling=!1}),r.refresh()),r.indicatorRefresh=function(){var e,t=n._$el[0].iscroll.indicators;if(t.length)for(e=0;e<t.length;e++)t[e].refresh()},this._$el[0].iscroll=r,_.forEach(this.pendingIscrolls,function(e,t){if(e.isSameNode(n._$el[0]))return n.app.notify("iscroll-update",{el:e}),void n.pendingIscrolls.splice(t,1)}),this.app.notify("iscroll-update",{}),{iScroll:r,destroy:function(){r.destroy(),$(r.scroller).css({"transition-timing-function":"","transition-duration":"",transform:""}),r=null,delete o.iscroll}}},e.prototype.refreshIScroll=function(){var e=this._smoothScrollInstance.iScroll;if(!(e._scrolling||this._waitRefreshTill>Date.now())){if(e.wrapper&&!_.includes(e.wrapper.children[0].classList,"smoothscroll-container")&&e.wrapper.scrollHeight>e.wrapper.clientHeight){var t=e._events,n=document.activeElement;$(e.wrapper.children).wrapAll('<div class="smoothscroll-container"></div>'),this._smoothScrollInstance.destroy(),this._smoothScrollInstance=this.applySmoothScroll(t,n)}this._lastScrollY!==this._$el[0].iscroll.maxScrollY?(Se(this._smoothScrollInstance.iScroll),this._lastScrollY=this._$el[0].iscroll.maxScrollY):this._smoothScrollInstance.iScroll.refresh(),this._waitRefreshTill=Date.now()+500}},e.decorators=[{type:i.Directive,args:[{selector:"[wmSmoothscroll]"}]}],e.ctorParameters=function(){return[{type:i.Injector},{type:i.ElementRef},{type:s.App}]},e.propDecorators={wmSmoothscroll:[{type:i.Input}]},e}(),Se=function(e){var t=!e&&$(".smoothscroll-container");e&&e.wrapper&&e.wrapper.contains(document.activeElement)&&$(document.activeElement).offset().top+document.activeElement.clientHeight>.9*window.innerHeight&&document.activeElement.scrollIntoView({behavior:"auto",block:"end",inline:"end"}),e?(e.indicatorRefresh&&e.indicatorRefresh(),e.refresh&&e.refresh()):t.length&&t.parent().each(function(e,t){t.iscroll.indicatorRefresh(),t.iscroll.refresh()})};window.addEventListener("resize",s.debounce(Se,200));var Ce,Ie=function(){function e(e){this.elRef=e}return Object.defineProperty(e.prototype,"textContent",{set:function(e){var t=e;null==e&&(t=""),this.elRef.nativeElement.textContent=t},enumerable:!0,configurable:!0}),e.decorators=[{type:i.Directive,args:[{selector:"[textContent]"}]}],e.ctorParameters=function(){return[{type:i.ElementRef}]},e.propDecorators={textContent:[{type:i.Input}]},e}(),Ae=function(e){return _.isDate(e)||isNaN(e)||(e=parseInt(e,10)),moment(e).valueOf()||moment((new Date).toDateString()+" "+e).valueOf()},De=function(){function e(e){this.datePipe=e}return e.prototype.transform=function(e,t){var n;return"null"===e||""===e?"":s.isDefined(e)&&(n=Ae(e))?"timestamp"===t?n:this.datePipe.transform(n,t):""},e.decorators=[{type:i.Pipe,args:[{name:"toDate"}]}],e.ctorParameters=function(){return[{type:t.DatePipe}]},e}(),Ne=function(){function e(e){this.decimalPipe=e}return e.prototype.transform=function(e,t){if(t&&!String(t).match(/^(\d+)?\.((\d+)(-(\d+))?)?$/)&&(t="1."+t+"-"+t),!_.isNaN(+e))return this.decimalPipe.transform(e,t)},e.decorators=[{type:i.Pipe,args:[{name:"toNumber"}]}],e.ctorParameters=function(){return[{type:t.DecimalPipe}]},e}(),xe=function(){function e(e){this.decimalPipe=e}return e.prototype.transform=function(e,t,n){var i=(s.CURRENCY_INFO[t]||{}).symbol||t||"",o=new Ne(this.decimalPipe).transform(e,n);return o?i+o:""},e.decorators=[{type:i.Pipe,args:[{name:"toCurrency"}]}],e.ctorParameters=function(){return[{type:t.DecimalPipe}]},e}(),Me=function(){function e(){}return e.prototype.transform=function(e,t){return _.isUndefined(e)||null===e||""===e?e:(t||"")+e},e.decorators=[{type:i.Pipe,args:[{name:"prefix"}]}],e}(),ke=function(){function e(){}return e.prototype.transform=function(e,t){return _.isUndefined(e)||null===e||""===e?e:e+(t||"")},e.decorators=[{type:i.Pipe,args:[{name:"suffix"}]}],e}(),Le=function(){function e(){}return e.prototype.transform=function(e){var t;if(s.isDefined(e))return(t=Ae(e))?moment(t).fromNow():void 0},e.decorators=[{type:i.Pipe,args:[{name:"timeFromNow"}]}],e}(),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.decorators=[{type:i.Pipe,args:[{name:"numberToString"}]}],t}(Ne),Be=function(){function e(){}return e.prototype.transform=function(e){return Number(e)||void 0},e.decorators=[{type:i.Pipe,args:[{name:"stringToNumber"}]}],e}(),Ge=function(){function e(){}return e.prototype.transform=function(e,t,n){return e?_.isObject(t)?_.filter(e,t):_.filter(e,function(e){return _.includes(e[t],n)}):[]},e.decorators=[{type:i.Pipe,args:[{name:"filter"}]}],e}(),je=function(){function e(){}return e.prototype.transform=function(e,t){for(var n=0;e>=1024;)e/=1024,n++;return e.toFixed(+t)+" "+["bytes","KB","MB","GB","TB","PB"][n]},e.decorators=[{type:i.Pipe,args:[{name:"filesize"}]}],e}(),Ve=function(){function e(){}return e.prototype.transform=function(e){return"fa "+({zip:"fa-file-zip-o",pdf:"fa-file-pdf-o",rar:"fa-file-archive-o",txt:"fa-file-text-o",ppt:"fa-file-powerpoint-o",pot:"fa-file-powerpoint-o",pps:"fa-file-powerpoint-o",pptx:"fa-file-powerpoint-o",potx:"fa-file-powerpoint-o",ppsx:"fa-file-powerpoint-o",mpg:"fa-file-movie-o",mp4:"fa-file-movie-o",mov:"fa-file-movie-o",avi:"fa-file-movie-o",mp3:"fa-file-audio-o",docx:"fa-file-word-o",js:"fa-file-code-o",md:"fa-file-code-o",html:"fa-file-code-o",css:"fa-file-code-o",xlsx:"fa-file-excel-o",png:"fa-file-image-o",jpg:"fa-file-image-o",jpeg:"fa-file-image-o",file:"fa-file-o",default:"fa-file-o"}[e]||"fa-file-o")},e.decorators=[{type:i.Pipe,args:[{name:"fileIconClass"}]}],e}(),$e=function(){function e(){}return e.prototype.transform=function(e){return{success:"wi wi-done text-success",error:"wi wi-cancel text-danger"}[e.toLowerCase()]},e.decorators=[{type:i.Pipe,args:[{name:"stateClass"}]}],e}(),Ue=function(){function e(){}return e.prototype.transform=function(e){return{"audio/aac":".aac","application/x-abiword":".abw","application/vnd.android.package-archive":".apk","video/x-msvideo":".avi","application/vnd.amazon.ebook":".azw","application/octet-stream":".bin","image/bmp":".bmp","application/x-bzip":".bz","application/x-bzip2":".bz2","application/x-csh":".csh","text/css":".css","text/csv":".csv","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.ms-fontobject":".eot","application/epub+zip":".epub","application/ecmascript":".es","image/gif":".gif","text/html":".html","image/x-icon":".ico","text/calendar":".ics","application/java-archive":".jar","image/jpeg":[".jpeg",".jpg"],"application/javascript":".js","application/json":".json","audio/midi":".mid","audio/x-midi":".midi","video/mpeg":".mpeg","application/vnd.apple.installer+xml":"mpkg","application/vnd.oasis.opendocument.presentation":".odp","application/vnd.oasis.opendocument.spreadsheet":".ods","application/vnd.oasis.opendocument.text":".odt","audio/ogg":".oga","video/ogg":".ogv","application/ogg":".ogx","font/otf":".otf","image/png":".png","application/pdf":".pdf","application/vnd.ms-powerpoint":".ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/x-rar-compressed":".rar","application/rtf":".rtf","application/x-sh":".sh","image/svg+xml":".svg","application/x-shockwave-flash":".swf","application/x-tar":".tar","image/tiff":".tiff","application/typescript":".ts","font/ttf":".ttf","text/plain":".txt","application/vnd.visio":".vsd","audio/wav":".wav","audio/webm":".weba","video/webm":".webm","image/webp":".webp","font/woff":".woff","font/woff2":".woff2","application/xhtml+xml":".xhtml","application/vnd.ms-excel":".xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/xml":".xml","application/vnd.mozilla.xul+xml":".xul","application/zip":".zip","video/3gpp":".3gp","audio/3gpp":".3gp","video/3gpp2":".3g2","audio/3gpp2":".3g2","application/x-7z-compressed":".7z"}[e]},e.decorators=[{type:i.Pipe,args:[{name:"fileExtensionFromMime"}]}],e}(),We=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e,t){return"resource"===t||t===i.SecurityContext.RESOURCE_URL?e?this.domSanitizer.bypassSecurityTrustResourceUrl(e):"":"html"===t||t===i.SecurityContext.HTML?null==e?"":this.domSanitizer.sanitize(i.SecurityContext.HTML,e):void 0},e.decorators=[{type:i.Pipe,args:[{name:"trustAs"}]}],e.ctorParameters=function(){return[{type:n.DomSanitizer}]},e}(),qe=[],He=[],ze=function(){function e(){this.dialogRefsCollection=new Map,this.appConfirmDialog="_app-confirm-dialog"}return e.prototype.register=function(e,t,n){e&&(this.dialogRefsCollection.get(e)?this.dialogRefsCollection.get(e).set(n,t):this.dialogRefsCollection.set(e,new Map([[n,t]])))},e.prototype.getDialogRefsCollection=function(){return this.dialogRefsCollection},e.prototype.deRegister=function(e,t){e&&this.dialogRefsCollection.get(e)&&this.dialogRefsCollection.get(e).delete(t)},e.prototype.getDialogRef=function(e,t){var n,i=this.dialogRefsCollection.get(e);return t?(n=i.get(t))||(t.pageName||t.partialName||t.prefabName?console.error('No dialog with the name "'+e+'" found in the given scope.'):i.forEach(function(t,i){i&&"Common"===i.partialName?n=t:console.error('No dialog with the name "'+e+'" found in the App scope.')})):1===i.size?n=i.entries().next().value[1]:console.error("There are multiple instances of this dialog name. Please provide the Page/Partial/App instance in which the dialog exists."),n},e.prototype.open=function(e,t,n){var i=this.getDialogRef(e,t);i&&i.open(n)},e.prototype.close=function(e,t){var n=this.getDialogRef(e,t);n&&n.close()},e.prototype.closeAllDialogs=function(){_.forEach(qe.reverse(),function(e){e.close()})},e.prototype.showAppConfirmDialog=function(e){this.open(this.getAppConfirmDialog(),void 0,e)},e.prototype.closeAppConfirmDialog=function(){this.close(this.getAppConfirmDialog())},e.prototype.getAppConfirmDialog=function(){return this.appConfirmDialog},e.prototype.setAppConfirmDialog=function(e){this.appConfirmDialog=e},e.prototype.addToOpenedDialogs=function(e){qe.push(e)},e.prototype.getLastOpenedDialog=function(){return qe[qe.length-1]},e.prototype.removeFromOpenedDialogs=function(e){-1!==qe.indexOf(e)&&qe.splice(qe.indexOf(e),1)},e.prototype.getOpenedDialogs=function(){return qe},e.prototype.addToClosedDialogs=function(e){He.push(e)},e.prototype.removeFromClosedDialogs=function(e){-1!==He.indexOf(e)&&He.splice(He.indexOf(e),1)},e.prototype.getDialogRefFromClosedDialogs=function(){return He[He.length-1]},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}(),Ye=[me,fe,ye,Pe,_e,Oe,Re,Ee,Te,Ie],Ke=[De,Ve,Ue,Ge,je,Ne,xe,Me,ke,Le,Fe,$e,Be,We,he],Qe=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[De,Ge,We,he,t.Location,{provide:s.AbstractDialogService,useClass:ze}]}},e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.SecurityModule],declarations:m(Ye,Ke),exports:m(Ye,Ke)}]}],e}(),Xe=function(){},Ze=Xe;(Ce=e.Live_Operations||(e.Live_Operations={})).INSERT="insert",Ce.UPDATE="update",Ce.DELETE="delete",Ce.READ="read";var Je="All Fields",et={EMPTY_KEY:"EMPTY_NULL_FILTER",EMPTY_VALUE:"No Value",LABEL_KEY:"key",LABEL_VALUE:"value",NULL_EMPTY:["null","empty"],NULL:"null",EMPTY:"empty"};function tt(e){return _.includes([s.FormWidgetType.AUTOCOMPLETE,s.FormWidgetType.TYPEAHEAD,s.FormWidgetType.CHIPS],e)}var nt=function(e,t,n){var i=s.debounce(function(){_.isFunction(n)&&n(t)},300);i();var o=t?_.isObject(t)?t:JSON.parse(t):{},r=e.registerDestroyListener?e.registerDestroyListener.bind(e):_.noop,a=s.processFilterExpBindNode(e,o).subscribe(function(e){t=JSON.stringify(e.filterExpressions),i()});r(function(){return a.unsubscribe()})},it=function(e,t){var n,i={};return t["is-related"]?(i.tableName=t["lookup-type"],n=t["lookup-field"],i.distinctField=n,i.aliasColumn=n.replace(".","$"),i.filterExpr=t.filterexpressions?_.isObject(t.filterexpressions)?t.filterexpressions:JSON.parse(t.filterexpressions):{}):(i.tableName=e.execute(s.DataSource.Operation.GET_ENTITY_NAME),n=t.field||t.key,i.distinctField=n,i.aliasColumn=n),i};function ot(e,t,n){var i;return new Promise(function(o,r){!w(t[n])||t.isDataSetBound&&"filterwidget"!==n||(i=it(e,t),e.execute(s.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:i.distinctField,entityName:i.tableName,pagesize:t.limit,filterExpr:t.filterexpressions?JSON.parse(t.filterexpressions):{}}).then(function(e){o({field:t,data:e.data,aliasColumn:i.aliasColumn})},r))})}function rt(e,t){if(tt(e[t.widget]))return e.datafield=t.aliasColumn||et.LABEL_KEY,e.searchkey=t.distinctField||et.LABEL_KEY,void(e.displaylabel=e.displayfield=t.aliasColumn||et.LABEL_VALUE);e.datafield=et.LABEL_KEY,e.displayfield=et.LABEL_VALUE}function at(e,t,n){var i=[s.FormWidgetType.SELECT,s.FormWidgetType.RADIOSET],o={},r=[];n.isEnableEmptyFilter&&_.includes(i,e[n.widget])&&!e["is-range"]&&!e.multiple&&(o[et.LABEL_KEY]=et.EMPTY_KEY,o[et.LABEL_VALUE]=n.EMPTY_VALUE||et.EMPTY_VALUE,r.push(o)),_.each(t,function(e){var t=e[n.aliasColumn],i={};null!==t&&""!==t&&(i[et.LABEL_KEY]=t,i[et.LABEL_VALUE]=t,r.push(i))}),rt(e,n),e.dataset=r}function st(e,t,n){if(e&&t&&!t.isDataSetBound)if(tt(t[n.widget])){var i=it(e,t);t.dataoptions=i,rt(t,Object.assign(n||{},i)),t.datasource=e}else nt(t.viewParent,t.filterexpressions,function(i){t.filterexpressions=i,ot(e,t,n.widget).then(function(e){at(e.field,e.data,{aliasColumn:e.aliasColumn,widget:n.widget,isEnableEmptyFilter:ut(n.enableemptyfilter),EMPTY_VALUE:n.EMPTY_VALUE})})})}function lt(e){return s.isDefined(e)&&""!==e&&null!==e}function ct(e,t){var n;return lt(e)&&lt(t)?n=[e,t]:lt(e)?n=e:lt(t)&&(n=t),n}function pt(e,t){var n;return lt(e)&&lt(t)?n=s.MatchMode.BETWEEN:lt(e)?n=s.MatchMode.GREATER:lt(t)&&(n=s.MatchMode.LESSER),n}function ut(e){return e&&_.intersection(e.split(","),et.NULL_EMPTY).length>0}function dt(e){var t,n=_.split(e,",");return 2===_.intersection(n,et.NULL_EMPTY).length?t=s.MatchMode.NULLOREMPTY:_.includes(n,et.NULL)?t=s.MatchMode.NULL:_.includes(n,et.EMPTY)&&(t=s.MatchMode.EMPTY),t}var mt=function(e){return _.isUndefined(e)||_.isNull(e)?[]:(_.isString(e)&&(e=e.split(",").map(Function.prototype.call,String.prototype.trim)),_.isArray(e)||(e=[e]),e)};var ht,ft=moment.localeData(),gt=s.getClonedObject(ft._calendar),vt=ft._calendarDay||{lastDay:"[Yesterday]",lastWeek:"[Last] dddd",nextDay:"[Tomorrow]",nextWeek:"dddd",sameDay:"[Today]",sameElse:"L"},yt="alphabet",bt="Others",wt={HOUR:"hour",DAY:"day",WEEK:"week",MONTH:"month",YEAR:"year"},Pt="yyyy-MM-dd",_t="w 'Week',  yyyy",Ot="MMM, yyyy",Rt="YYYY",Et="hh:mm a",Tt=function(e,t,n){if(!t)return _.cloneDeep(e);var i=t.split(","),o=[],r=[];return i.forEach(function(e){var t=e.split(":");o.push(n?n+"."+t[0]:t[0]),r.push(t[1])}),_.orderBy(e,o,r)},St=function(e){return _.isString(e)&&(e=_.split(e,",").map(function(e){return e.trim()})),e},Ct=function(e,t,n,i,o,r,a,s){n===wt.DAY&&(ft._calendar=vt),e=_.orderBy(e,function(e){var n=_.get(a?e[a]:e,t);if(n)return _.toLower(n)});var l=_.groupBy(e,xt.bind(void 0,t,n,a,o,r,s));return ft._calendar=gt,l},It=Ct,At=function(e,t,n,i){return"timestamp"===t?e:s.getFormattedDate(i,e,t||n)},Dt=function(e,t,n,i,o){var r,a=moment(e),s=n,l=moment(),c=function(){return"["+At(this.valueOf(),s,Pt,i)+"]"};switch(t){case wt.HOUR:s=s||o.timeFormat,a.isValid()||(a=moment((new Date).toDateString()+" "+e)).isValid()&&(ft._calendar.sameDay=function(){return"["+At(this.valueOf(),s,Et,i)+"]"}),a=a.startOf("hour"),ft._calendar.sameElse=c,r=a.calendar(l);break;case wt.WEEK:r=At(a.valueOf(),s,_t,i);break;case wt.MONTH:r=At(a.valueOf(),s,Ot,i);break;case wt.YEAR:r=a.format(Rt);break;case wt.DAY:s=s||o.dateFormat,a=a.startOf("day"),ft._calendar.sameElse=c,r=a.calendar(l)}return"Invalid date"===r?bt:r},Nt=Dt,xt=function(e,t,n,i,o,r,a){var s=_.get(n?a[n]:a,e);return _.isUndefined(s)||_.isNull(s)||""===s.toString().trim()?bt:(t===yt&&(s=s.substr(0,1)),_.includes(_.values(wt),t)&&(s=Dt(s,t,i,o,r)),s)},Mt=xt,kt=function(){return function(){}}(),Lt="default",Ft="label",Bt=function(e,t,n){_.forEach(e,function(e){e.isGroup&&(e.field===n?e.columns.push(t):Bt(e.columns,t,n))})},Gt=function(e){return"true"===e||"false"!==e&&(/^\d+$/.test(e)?+e:e)},jt={integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],big_integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],short:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],float:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],big_decimal:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],number:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],double:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],long:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],byte:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],string:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],character:["text","number","textarea","password","richtext","select","checkboxset","radioset","switch","currency","autocomplete","chips"],text:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],date:["date","text","number","select","checkboxset","radioset","autocomplete","chips"],time:["time","text","number","select","checkboxset","radioset","autocomplete","chips"],timestamp:["timestamp","text","number","select","checkboxset","radioset","autocomplete","chips"],datetime:["datetime","text","select","checkboxset","radioset","autocomplete","chips"],boolean:["checkbox","radioset","toggle","select"],list:["select","radioset","checkboxset","switch","autocomplete","chips"],clob:["text","textarea","richtext"],blob:["upload"],file:["upload"],custom:["text","number","textarea","password","checkbox","toggle","slider","richtext","currency","switch","select","checkboxset","radioset","date","time","timestamp","rating","datetime","autocomplete","chips","colorpicker"]},Vt=function(e){if(e)return/^(\/|#\/|#)(?!\W).*/.test(e)?"#/"+(e=_.first(e.match(/[\w]+.*/g))||""):_.startsWith(e,"www.")?"//"+e:e},$t=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.nodes=[],i.nodes$=new o.Subject,i._resetNodes=_.debounce(i.resetNodes,50),i.securityService=i.inj.get(r.SecurityService),i.binditemlabel=i.nativeElement.getAttribute("itemlabel.bind"),i.binditemicon=i.nativeElement.getAttribute("itemicon.bind"),i.binditemaction=i.nativeElement.getAttribute("itemaction.bind"),i.binditembadge=i.nativeElement.getAttribute("itembadge.bind"),i.binditemchildren=i.nativeElement.getAttribute("itemchildren.bind"),i.binditemid=i.nativeElement.getAttribute("itemid.bind"),i.binditemlink=i.nativeElement.getAttribute("itemlink.bind"),i.binditemtarget=i.nativeElement.getAttribute("itemtarget.bind"),i.binduserrole=i.nativeElement.getAttribute("userrole.bind"),i.bindisactive=i.nativeElement.getAttribute("isactive.bind"),i}return c(t,e),t.prototype.getNode=function(e,t){var n=this.viewParent.pageScope||this.viewParent,i=b(t,{expression:"itemchildren",bindExpression:this.binditemchildren},n)||_.get(t,e.childrenField),o={action:b(t,{expression:"itemaction",bindExpression:this.binditemaction},n)||_.get(t,e.actionField),badge:b(t,{expression:"itembadge",bindExpression:this.binditembadge},n)||_.get(t,e.badgeField),children:Array.isArray(i)?this.getNodes(i):[],class:_.get(t,e.classField),disabled:t.disabled,icon:b(t,{expression:"itemicon",bindExpression:this.binditemicon},n)||_.get(t,e.iconField),id:b(t,{expression:"itemid",bindExpression:this.binditemid},n)||_.get(t,e.idField),label:b(t,{expression:"itemlabel",bindExpression:this.binditemlabel},n)||_.get(t,e.labelField),link:Vt(b(t,{expression:"itemlink",bindExpression:this.binditemlink},n)||_.get(t,e.linkField)),target:Vt(b(t,{expression:"itemtarget",bindExpression:this.binditemtarget},n)||_.get(t,e.targetField)),role:b(t,{expression:"userrole",bindExpression:this.binduserrole},n),isactive:this.bindisactive?b(t,{expression:"isactive",bindExpression:this.bindisactive},n):_.get(t,e.isactiveField),value:this.datafield?"All Fields"===this.datafield?t:s.findValueOf(t,this.datafield):t};return _.omitBy(o,_.isUndefined)},t.prototype.resetItemFieldMap=function(){this._itemFieldMap=null},t.prototype.getItemFieldsMap=function(){return this._itemFieldMap||(this._itemFieldMap={idField:this.itemid||"itemid",iconField:this.itemicon||"icon",labelField:this.itemlabel||"label",linkField:this.itemlink||"link",targetField:this.itemtarget||"target",badgeField:this.itembadge||"badge",childrenField:this.itemchildren||"children",classField:this.itemclass||"class",actionField:this.itemaction||"action",isactiveField:this.isactive||"isactive"}),this._itemFieldMap},t.prototype.prepareNodeDataSet=function(e){return(e=mt(e)).map(function(e){return s.isObject(e)?e:{label:e,value:e}})},t.prototype.getNodes=function(e){var t=this;void 0===e&&(e=this.dataset||{});var n=Tt(this.prepareNodeDataSet(e),this.orderby)||[];if(n.length){var i=this.userrole,o=this.getItemFieldsMap();n=n.reduce(function(e,n){return s.validateAccessRoles(n[i],t.securityService.loggedInUser)&&e.push(t.getNode(o,n)),e},[])}return n},t.prototype.resetNodes=function(){this.resetItemFieldMap(),this.nodes=this.getNodes(),s.$appDigest(),this.nodes$.next()},t.prototype.onPropertyChange=function(t,n,i){switch(t){case"dataset":case"itemicon":case"itemlabel":case"itemlink":case"itemtarget":case"itemclass":case"itemchildren":case"isactive":case"orderby":this._resetNodes()}e.prototype.onPropertyChange.call(this,t,n,i)},t}(pe),Ut=function(e){function t(t,n,i){var o=e.call(this)||this;o.$el=t,o.app=n,o.onPullToRefresh=i,o.count=0;return o.$el.prepend('<div class="refresh-container"></div>'),o.infoContainer=o.$el.find(".refresh-container"),s.isIos()&&o.infoContainer.addClass("ios-refresh-container"),o.init(o.$el),o}return c(t,e),t.prototype.threshold=function(){return 10},t.prototype.direction=function(){return $.fn.swipey.DIRECTIONS.VERTICAL},t.prototype.subscribe=function(){var e=this;this.cancelSubscription=this.app.subscribe("toggle-variable-state",function(t){t.active&&e.animationInProgress?(e.count++,e.wait()):e.count>0&&e.count--,!e.count&&e.animationInProgress&&e.stopAnimation()})},t.prototype.bounds=function(e,t){var n=this.$el[0].iscroll;return t<0||n&&!isNaN(n.y)&&0!==n.y?{lower:void 0,upper:void 0}:(this.spinner||(this.spinner=s.isIos()?new qt(this.infoContainer):new Wt(this.infoContainer),this.subscribe()),{lower:0,center:0,upper:s.isIos()?0:150,strict:!s.isIos()})},t.prototype.context=function(){var e=this;return this.infoContainer.show(),s.isIos()&&this.infoContainer.addClass("entry"),{spin:function(t){e.spinner.setRotation(2*t)}}},t.prototype.animation=function(){return s.isIos()?{css:{transform:"translate3d(0, ${{$D + $d}}px, 0)",spin:"${{spin($d)}}"}}:{target:this.infoContainer,css:{transform:"translate3d(0, ${{$D + $d}}px, 0)",spin:"${{spin($d)}}",opacity:"${{min(($D + $d) / 100, 1)}}"}}},t.prototype.onAnimation=function(){var e=this;this.animationInProgress=!0,this.spinner.start(),this.onPullToRefresh&&this.onPullToRefresh(),setTimeout(function(){e.runAnimation||e.stopAnimation()})},t.prototype.stopAnimation=function(){var e=this;setTimeout(function(){e.runAnimation=!1,e.animationInProgress=!1,e.spinner.stop(),e.infoContainer.hide(),s.setCSS(e.infoContainer[0],"transform","none"),s.isIos()||s.setCSS(e.infoContainer[0],"opacity",0),e.infoContainer.removeClass("entry")},800)},t.prototype.wait=function(){this.runAnimation=!0},t}(a.SwipeAnimation),Wt=function(){function e(e,t){this.$el=e,this.options=t||{}}return e.prototype.polarToCartesian=function(e,t,n,i){var o=(i-90)*Math.PI/180;return{x:e+n*Math.cos(o),y:t+n*Math.sin(o)}},e.prototype.describeArc=function(e,t,n,i,o){var r=this.polarToCartesian(e,t,n,o),a=this.polarToCartesian(e,t,n,i),s=o-i<=180?"0":"1";return["M",r.x,r.y,"A",n,n,0,s,0,a.x,a.y,"L",a.x,a.y].join(" ")},e.prototype.init=function(){if(!this.initialized){var e=$('<svg><path id="arc1"/></svg>'),t=$('<div class="android-spinner"></div>');t.append(e),this.$el.append(t),this.cx=t.outerWidth()/2,this.cy=t.outerHeight()/2,this.r=.6*this.cx,this.path=t.find("path"),this.initialized=!0,this.container=t}},e.prototype.setRotation=function(e){this.init(),this.path.attr("d",this.describeArc(this.cx,this.cy,this.r,0,e))},e.prototype.start=function(){var e=this;this.init();var t=this,n=this.options.time||1800,i=0;this.container.addClass("spin"),this.intervalId=setInterval(function(){var n;n=(i+=10)>720?i=0:i>360?720-i:i,t.path.attr("d",e.describeArc(t.cx,t.cy,t.r,0,n))},10*n/360)},e.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0),this.container.removeClass("spin")},e}(),qt=function(){function e(e){this.$el=e}return e.prototype.init=function(){if(!this.svg){var e=$('<div class="ios-spinner"><svg></svg></div>'),t=e.find("svg");this.$el.append(e);for(var n=e.width(),i=0;i<12;i++)t[0].innerHTML+='<line y1="'+.15*n+'" y2="'+.3*n+'"\n                                    transform="translate('+.5*n+", "+.5*n+") rotate("+30*i+')">\n                                </line>';e.append(t),this.svg=t}},e.prototype.setRotation=function(e){this.init(),this.svg.css("transform","rotateZ( "+30*Math.round(e/30)+"deg)")},e.prototype.start=function(){var e=this;this.init();var t=0;this.intervalId=setInterval(function(){t+=10,e.setRotation(t)},20)},e.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=0)},e}(),Ht=this;!function(e){e.LEFT_PANEL="page-left-panel",e.RIGHT_PANEL="page-right-panel",e.SWIPE_ELEM="page-left-panel-icon",e.CONTENT="app-content-column",e.HEADER="page-header",e.SEARCH="app-search"}(ht||(ht={}));var zt=function(e){return"[data-role='"+e+"']"},Yt=function(e,t){$(e).off("click.deviceview").on("click.deviceview",t)},Kt=function(e,t){if(s.isMobile()){if(e)try{e.widget.collapse()}catch(e){}t&&s.setCSS(t,"display","none")}},Qt=function(e,t){Yt(zt(ht.SWIPE_ELEM),function(){e&&(e.widget.toggle(),e.classList.contains("visible")&&t&&s.setCSS(t,"display","none"))})},Xt=Qt,Zt=function(e){Yt(e,Kt)},Jt=Zt,en=function(e,t){"none"===$(e).css("display")?(Kt(t),s.setCSS(e,"display","inline-table")):Kt(t,e)},tn=en,nn=function(e,t){$(e).each(function(e,n){var i=$('<a class="app-header-action"><i class="wi wi-search"></i></a>');$(n).before(i),Yt(i,function(){return en(n,t)})})},on=nn;e.\u0275h=Ee,e.\u0275j=Ie,e.\u0275a=me,e.\u0275b=K,e.\u0275c=fe,e.\u0275d=ge,e.\u0275g=Oe,e.\u0275f=_e,e.\u0275e=be,e.\u0275i=Te,e.WmComponentsModule=Qe,e.ALLFIELDS=Je,e.LIVE_CONSTANTS=et,e.performDataOperation=function(t,n,i){return new Promise(function(o,r){if(t.execute(s.DataSource.Operation.SUPPORTS_CRUD)){var a=void 0;switch(i.operationType){case e.Live_Operations.UPDATE:a=s.DataSource.Operation.UPDATE_RECORD;break;case e.Live_Operations.INSERT:a=s.DataSource.Operation.INSERT_RECORD;break;case e.Live_Operations.DELETE:a=s.DataSource.Operation.DELETE_RECORD}t.execute(a,n).then(function(e){return function(e,t,n){e.error?n(e):t(e)}(e,o,r)},r)}else t.execute(s.DataSource.Operation.IS_API_AWARE)?(t.execute(s.DataSource.Operation.SET_INPUT,n),t.execute(s.DataSource.Operation.INVOKE,{skipNotification:!0}).then(o,r)):o(n)})},e.refreshDataSource=function(e,t){return new Promise(function(n,i){e?e.execute(s.DataSource.Operation.LIST_RECORDS,{filterFields:t.filterFields||{},orderBy:t.orderBy,page:t.page||1}).then(n,i):i()})},e.fetchRelatedFieldData=function(e,t,n){var i,o,r=n.relatedField,a=n.datafield;e&&(i=e.execute(s.DataSource.Operation.GET_RELATED_PRIMARY_KEYS,r),t.datafield=a,t._primaryKey=_.isEmpty(i)?void 0:i[0],t.compareby=i&&i.join(","),o=a===Je?void 0:a,t.displayfield=o=t.displayfield||o||t._primaryKey,tt(t[n.widget])?(t.dataoptions={relatedField:r,filterExpr:t.filterexpressions?t.filterexpressions:{}},t.datasource=e,t.searchkey=t.searchkey||o,t.displaylabel=t.displayfield=t.displaylabel||o):nt(t.viewParent,t.filterexpressions,function(n){t.filterexpressions=n,e.execute(s.DataSource.Operation.GET_RELATED_TABLE_DATA,{relatedField:r,pagesize:t.limit,orderBy:t.orderby?_.replace(t.orderby,/:/g," "):"",filterFields:{},filterExpr:t.filterexpressions?t.filterexpressions:{}}).then(function(e){t.dataset=e.data,t.displayfield=t.displayfield||_.head(_.keys(_.get(e,"[0]")))},Xe)}))},e.interpolateBindExpressions=nt,e.getDistinctFieldProperties=it,e.getDistinctValues=ot,e.fetchDistinctValues=function(e,t,n){_.isEmpty(t)||t.forEach(function(t){st(e,t,n)})},e.getDistinctValuesForField=st,e.getRangeFieldValue=ct,e.getRangeMatchMode=pt,e.getEnableEmptyFilter=ut,e.getEmptyMatchMode=dt,e.createArrayFrom=mt,e.applyFilterOnField=function(e,t,n,i,o){void 0===o&&(o={});var r=t.field||t.key,a=_.filter(n,{"filter-on":r});i=t["is-range"]?ct(t.minValue,t.maxValue):s.isDefined(i)?i:t.value,!e||o.isFirst&&(_.isUndefined(i)||""===i)||_.forEach(a,function(n){var r,a,l,c=n.field||n.key,p=t["lookup-field"]||t._primaryKey,u=n["edit-widget-type"]||n.widgettype,d={},m=n["filter-on"];w(u)&&!n.isDataSetBound&&m!==c&&(t&&t["is-related"]&&(m+="."+p),s.isDefined(i)?(l=t["is-range"]?pt(t.minValue,t.maxValue):ut(o.enableemptyfilter)&&i===et.EMPTY_KEY?dt(o.enableemptyfilter):s.MatchMode.EQUALS,r=_.isObject(i)&&!_.isArray(i)?i[p]:i,d[m]={value:r,matchMode:l}):d={},a=c,tt(u)&&n.dataoptions?n.dataoptions.filterFields=d:e.execute(s.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:a,filterFields:d,pagesize:n.limit}).then(function(e){at(n,e.data,{aliasColumn:a,widget:o.widget||"widgettype",isEnableEmptyFilter:ut(o.enableemptyfilter),EMPTY_VALUE:o.EMPTY_VALUE})},Xe))})},e.transformData=function(e,t){var n,i,o,r,a,s,l;return e=e||[],_.isArray(e)?_.isString(e[0])&&(i=[],_.forEach(e,function(e){(n={})[t.split(".").join("-")]=e,i.push(n)}),e=i):(_.isString(e)&&(o=t.substring(t.indexOf(".")+1,t.length).split("."),r=[],a=o.length,l=s={},o.forEach(function(t,n){r.forEach(function(e){l=s[e]}),l[t]=n===a-1?e:{},r.push(t)}),e=s),e=[e]),e},e.\u02750=Ze,e.getOrderedDataset=Tt,e.transformDataWithKeys=function(e){var t=[];if(_.isObject(e[0])||_.isObject(e)&&!(e instanceof Array)){var n=Object.keys(e[0]||e);_.forEach(n,function(e,n){t.push({key:e,label:e,value:e,index:n+1})})}return t},e.extractDataAsArray=function(e){return _.isUndefined(e)||_.isNull(e)||""===_.trim(e)?[]:(_.isString(e)&&(e=_.split(e,",").map(function(e){return e.trim()})),_.isArray(e)||(e=[e]),e)},e.convertDataToObject=St,e.transformFormData=function(e,t,n,i,o){var r=[];if(t)return t=St(t),_.isUndefined(o)&&(o=1),_.isString(t)?(t=t.split(",").map(function(e){return e.trim()})).forEach(function(e,t){r.push({key:e,value:e,label:s.isDefined(e)&&null!==e?e.toString():"",index:o+t})}):_.isArray(t)&&!_.isObject(t[0])?t.forEach(function(e,t){r.push({key:e,value:e,label:s.isDefined(e)&&null!==e?e.toString():"",index:o+t})}):t instanceof Array||!_.isObject(t)?(n||(n=Je),t.forEach(function(t,a){var l=n===Je?o+a:y(t,n);if(!_.isUndefined(l)&&!_.isNull(l)){var c=b(t,{field:i.displayField,expression:i.displayExpr,bindExpression:i.bindDisplayExpr},e),p={key:l,label:s.isDefined(c)&&null!==c?c.toString():"",value:n===Je?t:l,dataObject:t,index:o+a};(i.displayImgSrc||i.bindDisplayImgSrc)&&(p.imgSrc=b(t,{expression:i.displayImgSrc,bindExpression:i.bindDisplayImgSrc},e)),r.push(p)}})):_.forEach(t,function(e,n){r.push({key:_.trim(n),value:n,label:s.isDefined(e)&&null!==e?e.toString():"",index:o,dataObject:t})}),r},e.getUniqObjsByDataField=function(e,t,n,i){var o,r=t===Je;return o=r?_.uniqWith(e,_.isEqual):_.uniqBy(e,"key"),!n||i?o:_.filter(o,function(e){return r?_.trim(e.label):_.trim(e.key)&&_.trim(e.label)})},e.setItemByCompare=function(e,t,n){_.forEach(e,function(e){if(s.isEqualWithFields(e.value,t,n))return e.selected=!0,!1})},e.groupData=function(e,t,n,i,o,r,a,l,c){var p={};if(_.includes(n,"(")){var u=s.$parseEvent(n);p=_.groupBy(t,function(t){return u(e.viewParent,{row:t.dataObject||t})})}else p=Ct(t,n,i,o,r,a,l,c);return function(e,t,n){var i=[];return _.forEach(_.keys(e),function(o,r){var a=Tt(e[o],n,"dataObject");i.push({key:o,data:_.sortBy(a,function(e){return e._groupIndex=r+1,_.get(e,t)||_.get(e.dataObject,t)})})}),i}(p,n,o)},e.filterDate=At,e.toggleAllHeaders=function(e){var t=$(e.nativeElement).find(".item-group");t.find(".group-list-item").toggle();var n=t.find("li.list-group-header .app-icon");n&&_.forEach(n,function(e){(e=$(e)).hasClass("wi-chevron-down")?e.removeClass("wi-chevron-down").addClass("wi-chevron-up"):e.removeClass("wi-chevron-up").addClass("wi-chevron-down")})},e.handleHeaderClick=function(e){var t=$(e.target).closest(".item-group"),n=t.find("li.list-group-header .app-icon");n.hasClass("wi-chevron-down")?n.removeClass("wi-chevron-down").addClass("wi-chevron-up"):n.removeClass("wi-chevron-up").addClass("wi-chevron-down"),t.find(".group-list-item").toggle()},e.configureDnD=function(e,t,n,i){var o=Object.assign({containment:e,delay:100,opacity:.8,helper:"clone",zIndex:1050,tolerance:"pointer",start:n,update:i},t);e.sortable(o)},e.DataSetItem=kt,e.\u02751=It,e.\u02752=Nt,e.\u02753=Mt,e.EDIT_MODE={QUICK_EDIT:"quickedit",INLINE:"inline",FORM:"form",DIALOG:"dialog"},e.setHeaderConfig=Bt,e.setHeaderConfigForTable=function(e,t,n){n?Bt(e,t,n):e.push(t)},e.getRowOperationsColumn=function(){return{field:"rowOperations",type:"custom",displayName:"Actions",width:"120px",readonly:!0,sortable:!1,searchable:!1,resizable:!1,selectable:!1,show:!0,operations:[],opConfig:{},pcDisplay:!0,mobileDisplay:!0,include:!0,isRowOperation:!0}},e.getFieldLayoutConfig=function(e,t,n){var i="",o="";return"top"===(t=t||"top")?n&&"android"===n||!s.isMobileApp()||s.isAndroid()?i=o="col-xs-12":s.isMobileApp()&&(i="col-xs-4",o="col-xs-8"):e&&_.forEach(_.split(e," "),function(e){var t,n,r=_.split(e,"-"),a=r[0];t=parseInt(r[1],10),i+=" col-"+a+"-"+t,o+=" col-"+a+"-"+(n=(n=12-t)<=0?12:n)}),{captionCls:i,widgetCls:o}},e.getDefaultViewModeWidget=function(e){return _.includes(["checkbox","toggle","rating"],e)?Lt:Ft},e.parseValueByType=function(e,t,n){return n?n===s.FormWidgetType.NUMBER||n===s.FormWidgetType.SLIDER||n===s.FormWidgetType.CURRENCY?isNaN(Number(e))?null:Number(e):n===s.FormWidgetType.CHECKBOX||n===s.FormWidgetType.TOGGLE?Gt(e):e:s.isNumberType(t)?isNaN(Number(e))?null:Number(e):t===s.DataType.BOOLEAN?Gt(e):e},e.getFieldTypeWidgetTypesMap=function(){return jt},e.getDataTableFilterWidget=function(e){var t=jt[e]&&jt[e][0];return e===s.DataType.BOOLEAN&&(t=s.FormWidgetType.SELECT),_.includes([s.FormWidgetType.TEXT,s.FormWidgetType.NUMBER,s.FormWidgetType.SELECT,s.FormWidgetType.AUTOCOMPLETE,s.FormWidgetType.DATE,s.FormWidgetType.TIME,s.FormWidgetType.DATETIME],t)?t:s.FormWidgetType.TEXT},e.getEditModeWidget=function(e){return e["related-entity-name"]&&e["primary-key"]?s.FormWidgetType.SELECT:jt[e.type]&&jt[e.type][0]||s.FormWidgetType.TEXT},e.getDefaultValue=function(e,t,n){return n?n===s.FormWidgetType.NUMBER||n===s.FormWidgetType.SLIDER||n===s.FormWidgetType.CURRENCY?isNaN(Number(e))?null:Number(e):n===s.FormWidgetType.CHECKBOX||n===s.FormWidgetType.TOGGLE?Gt(e):e:s.isNumberType(t)?isNaN(Number(e))?null:Number(e):t===s.DataType.BOOLEAN?Gt(e):e},e.getObjValueByKey=y,e.getEvaluatedData=b,e.isActiveNavItem=function(e,t){return!(!e||!t)&&(t=-1===t.indexOf("?")?t:t.substring(0,t.indexOf("?")),e=-1===e.indexOf("?")?e:e.substring(0,e.indexOf("?")),new RegExp("^(#/|#)"+t+"$").test(e))},e.getOrderByExpr=function(e){e=e||[];var t=[];return _.forEach(e,function(e){t.push(e.property+" "+e.direction.toLowerCase())}),_.join(t,",")},e.isDataSetWidget=w,e.getImageUrl=P,e.getBackGroundImageUrl=O,e.provideAs=R,e.provideAsWidgetRef=E,e.provideAsDialogRef=function(e){return R(e,f)},e.NAVIGATION_TYPE={ADVANCED:"Advanced",BASIC:"Basic",CLASSIC:"Classic",INLINE:"Inline",NONE:"None",ONDEMAND:"On-Demand",PAGER:"Pager",SCROLL:"Scroll"},e.getWatchIdentifier=S,e.getMatchModeTypesMap=function(e){return e&&(I.number.push("in","notin","between"),I.date.push("between"),I.string.push("in","notin"),I.character.push("in","notin")),_.forEach(C,function(e,t){_.forEach(e,function(e){A[e]=I[t]})}),A.default=_.union(I.number,I.string,I.character,I.date,I.date),A},e.getMatchModeMsgs=function(e){return{start:e.LABEL_STARTS_WITH,startignorecase:e.LABEL_STARTS_WITH_IGNORECASE,end:e.LABEL_ENDS_WITH,endignorecase:e.LABEL_ENDS_WITH_IGNORECASE,anywhere:e.LABEL_CONTAINS,anywhereignorecase:e.LABEL_CONTAINS_IGNORECASE,exact:e.LABEL_IS_EQUAL_TO,exactignorecase:e.LABEL_IS_EQUAL_TO_IGNORECASE,notequals:e.LABEL_IS_NOT_EQUAL_TO,notequalsignorecase:e.LABEL_IS_NOT_EQUAL_TO_IGNORECASE,lessthan:e.LABEL_LESS_THAN,lessthanequal:e.LABEL_LESS_THAN_OR_EQUALS_TO,greaterthan:e.LABEL_GREATER_THAN,greaterthanequal:e.LABEL_GREATER_THAN_OR_EQUALS_TO,null:e.LABEL_IS_NULL,isnotnull:e.LABEL_IS_NOT_NULL,empty:e.LABEL_IS_EMPTY,isnotempty:e.LABEL_IS_NOT_EMPTY,nullorempty:e.LABEL_IS_NULL_OR_EMPTY,in:e.LABEL_IN,notin:e.LABEL_NOT_IN,between:e.LABEL_BETWEEN}},e.getConditionalClasses=N,e.prepareFieldDefs=function(e,t){var n,i={objects:[],terminals:[]};if(e||(e=[]),t||(t={}),t.setBindingField=!0,t.columnCount=0,n=function(e){var t;return _.isArray(e)?_.isObject(e[0])?(t=s.getClonedObject(e[0]),_.forEach(e,function(e,n){if(n+1>=10)return!1;_.assignWith(t,e,function(e,t){return null==e?t:e})})):t=e[0]:t=e,t}(e),x(n,i,"",t),!t||t&&!t.filter)return i.terminals;switch(t.filter){case"all":return i;case"objects":return i.objects;case"terminals":return i.terminals}return i},e.BaseComponent=ce,e.DatasetAwareNavComponent=$t,e.StylableComponent=pe,e.MessageComponent=ye,e.PullToRefresh=Ut,e.PartialDirective=Pe,e.RedrawableDirective=Re,e.EVENTS_MAP=Z,e.DISPLAY_TYPE=J,e.isBooleanAttr=te,e.isDimensionProp=ie,e.DEBOUNCE_TIMES={PAGINATION_DEBOUNCE_TIME:250},e.updateDeviceView=function(e,t){void 0===t&&(t=!1);var n=e.querySelector(zt(ht.LEFT_PANEL)),i=e.querySelector(zt(ht.RIGHT_PANEL)),o=e.querySelector(zt(ht.HEADER)),r=o&&o.querySelector("."+ht.SEARCH);!function(e,t,n,i){void 0===i&&(i=!1),i||Yt(t,Kt.bind(Ht,e,n))}(n,e.querySelector("."+ht.CONTENT),r,t),n?Qt(n,r):$(o).find(zt(ht.SWIPE_ELEM)).remove(),i&&Zt(i),r&&nn(r,n)},e.\u02754=Xt,e.\u02755=Jt,e.\u02756=tn,e.\u02757=on,e.propNameCSSKeyMap=M,e.isStyle=k,e.styler=G,e.WidgetRef=h,e.DialogRef=f,e.Context=g,e.getWidgetPropsByType=U,e.register=W,e.registerFormWidget=function(e,t){var n="wm-form-field-"+e,i=V.get(n);i&&t.forEach(function(e,t){return i.set(t,e)})},e.PROP_STRING=q,e.PROP_NUMBER=H,e.PROP_BOOLEAN=z,e.PROP_ANY=Y,e.DialogServiceImpl=ze,e.ToDatePipe=De,e.ToNumberPipe=Ne,e.ToCurrencyPipe=xe,e.PrefixPipe=Me,e.SuffixPipe=ke,e.TimeFromNowPipe=Le,e.NumberToStringPipe=Fe,e.StringToNumberPipe=Be,e.FilterPipe=Ge,e.FileSizePipe=je,e.FileIconClassPipe=Ve,e.StateClassPipe=$e,e.FileExtensionFromMimePipe=Ue,e.TrustAsPipe=We,e.ImagePipe=he,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/compiler"),require("@wm/core"),require("@wm/transpiler")):"function"==typeof define&&define.amd?define("@wm/buildTask",["exports","@angular/compiler","@wm/core","@wm/transpiler"],t):t((e.wm=e.wm||{},e.wm.buildTask={}),e.ng.compiler,e.wm.core,e.wm.transpiler)}(this,function(e,t,n,i){"use strict";var o=new n.IDGenerator("wm_carousel_ref_"),r=function(e){return e.attrs.find(function(e){return"type"===e.name&&"dynamic"===e.value})},a=r;i.register("wm-carousel",function(){return{pre:function(e,t){var n=o.nextUid();return t.set("carousel_ref",n),'<div class="app-carousel carousel"><carousel wmCarousel #'+n+'="wmCarousel"  '+i.getAttrMarkup(e)+' interval="0" [ngClass]="'+n+'.navigationClass">'},post:function(){return"</carousel></div>"},template:function(e){if(r(e)){var t=e.attrs.find(function(e){return"dataset"===e.name}),o=e.attrs.find(function(e){return"name"===e.name});if(!t)return;var a=i.getBoundToExpr(t.value);if(!a)return;n.updateTemplateAttrs(e,a,o.value)}},provide:function(e,t){var n=new Map;return n.set("carousel_ref",t.get("carousel_ref")),n}}});i.register("wm-carousel-content",function(){return{pre:function(e){return"<slide wmCarouselTemplate  "+i.getAttrMarkup(e)+">"},post:function(){return"</slide>"}}}),i.register("wm-carousel-template",function(){return{requires:["wm-carousel"],pre:function(e,t,n){var o=n.get("carousel_ref");return'<div *ngIf="!'+o+'.fieldDefs">{{'+o+".nodatamessage}}</div>\n                    <slide wmCarouselTemplate  "+i.getAttrMarkup(e)+' *ngFor="let item of '+o+'.fieldDefs; let i = index;">\n                        <ng-container [ngTemplateOutlet]="tempRef" [ngTemplateOutletContext]="{item:item, index:i}"></ng-container>\n                    </slide>\n                    <ng-template #tempRef let-item="item" let-index="index">'},post:function(){return"</ng-template>"}}});i.register("wm-login",function(){return{pre:function(e){return"<div wmLogin "+i.getAttrMarkup(e)+' eventsource.bind="Actions.loginAction">'},post:function(){return"</div>"},provide:function(){var e=new Map;return e.set("isLogin",!0),e}}});i.register("wm-marquee",function(){return{pre:function(e){return'<marquee onmouseover="this.stop();" onmouseout="this.start();" wmMarquee role="marquee" aria-live="off" '+i.getAttrMarkup(e)+">"},post:function(){return"</marquee>"}}});i.register("wm-anchor",function(){return{pre:function(e){return'<a wmAnchor role="link" data-identifier="anchor" '+i.getAttrMarkup(e)+">"},post:function(){return"</a>"}}});i.register("wm-audio",function(){return{pre:function(e){return"<div wmAudio "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-html",function(){return{pre:function(e){return"<div wmHtml "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-icon",function(){return{pre:function(e){return'<span wmIcon aria-hidden="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</span>"}}});i.register("wm-iframe",function(){return{pre:function(e){return"<div wmIframe "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-label",function(){return{pre:function(e){return"<label wmLabel "+i.getAttrMarkup(e)+">"},post:function(){return"</label>"}}});i.register("wm-picture",function(){return{pre:function(e){return'<img wmPicture alt="image" wmImageCache="'+(e.get("offline")||"true")+'" '+i.getAttrMarkup(e)+">"}}});i.register("wm-spinner",function(){return{pre:function(e){return'<div wmSpinner role="loading" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});var s=function(e,t){return e.attrs.find(function(e){return e.name===t})},l=function(e,t){var n=s(e,t);if(n)return n.value},c=l,p=function(e){return new RegExp("bind:("+e+"|"+e+"\\[\\$i])\\.","g")},u=p;i.register("wm-progress-bar",function(){return{template:function(e){var t=l(e,"dataset"),n=i.getBoundToExpr(t);if(n){var o=l(e,"type"),r=l(e,"datavalue"),a=p(n);o&&o.includes(n)&&(o=o.replace(a,""),s(e,"type").value=o),r&&r.includes(n)&&(r=r.replace(a,""),s(e,"datavalue").value=r)}},pre:function(e){return"<div wmProgressBar "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-progress-circle",function(){return{pre:function(e){return"<div wmProgressCircle "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-richtexteditor",function(){return{pre:function(e){return'<div wmRichTextEditor role="textbox" '+i.getFormMarkupAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-search",function(){return{pre:function(e){return"<div wmSearch "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-tree",function(){return{pre:function(e){return"<div wmTree redrawable "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-card",function(){return{pre:function(e){return"<div wmCard "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-card-content",function(){return{pre:function(e){return"<div wmCardContent partialContainer "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-card-actions",function(){return{pre:function(e){return"<div wmCardActions "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-card-footer",function(){return{pre:function(e){return"<div wmCardFooter "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-chart",function(){return{pre:function(e){return"<div wmChart redrawable "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-accordion",function(){return{pre:function(e){return'<div wmAccordion role="tablist" aria-multiselectable="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-accordionpane",function(){return{pre:function(e){return'<div wmAccordionPane partialContainer wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-container",function(){return{pre:function(e){return'<div wmContainer partialContainer wmSmoothscroll="'+(e.get("smoothscroll")||"false")+'" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-gridcolumn",function(){return{pre:function(e){return"<div wmLayoutGridColumn "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-gridrow",function(){return{pre:function(e){return"<div wmLayoutGridRow "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-layoutgrid",function(){return{pre:function(e){return"<div wmLayoutGrid "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-panel",function(){return{pre:function(e){return'<div wmPanel partialContainer aria-label="panel" wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}}),i.register("wm-panel-footer",function(){return{pre:function(e){return'<div wmPanelFooter aria-label="panel footer" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-segmented-control",function(){return{pre:function(e){return"<div wmSegmentedControl "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-segment-content",function(){return{pre:function(e){return"<li wmSegmentContent partialContainer wmSmoothscroll="+(e.get("smoothscroll")||"true")+' wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</li>"}}});i.register("wm-tabs",function(){return{pre:function(e){return"<div wmTabs "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-tabpane",function(){return{pre:function(e){return"<div wmTabPane  partialContainer "+i.getAttrMarkup(e)+' wm-navigable-element="true" role="tabpanel">'},post:function(){return"</div>"}}});i.register("wm-tile",function(){return{pre:function(e){return'<div wmTile aria-describedby="Tile" wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-wizard",function(){return{pre:function(e){return'<div wmWizard role="tablist" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});var d=new n.IDGenerator("wizard_step_id_");i.register("wm-wizardstep",function(){return{pre:function(e){var t=d.nextUid();return"<form wmWizardStep #"+t+'="wmWizardStep" '+i.getAttrMarkup(e)+'>\n                       <ng-template [ngIf]="'+t+'.isInitialized">'},post:function(){return"</ng-template></form>"}}});i.register("wm-barcodescanner",function(){return{pre:function(e){return"<button wmBarcodescanner "+i.getAttrMarkup(e)+">"},post:function(){return"</button>"}}});i.register("wm-camera",function(){return{pre:function(e){return"<button type='button' wmCamera "+i.getAttrMarkup(e)+">"},post:function(){return"</button>"}}});i.register("wm-alertdialog",function(){return{pre:function(e){return'<div wmAlertDialog role="alertdialog" wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-confirmdialog",function(){return{pre:function(e){return'<div wmConfirmDialog wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-dialogactions",function(){return{pre:function(e){return'<ng-template #dialogFooter><div wmDialogFooter data-identfier="actions" '+i.getAttrMarkup(e)+">"},post:function(){return"</div></ng-template>"}}});i.register("wm-dialog",function(){return{pre:function(e){return"<div wmDialog "+i.getAttrMarkup(e)+' wm-navigable-element="true"><ng-template #dialogBody>'},post:function(){return"</ng-template></div>"}}}),i.register("wm-view",function(){return{pre:function(e){return""},post:function(){return""}}});i.register("wm-iframedialog",function(){return{pre:function(e){return'<div wmIframeDialog wm-navigable-element="true" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-logindialog",function(){return{pre:function(e){return"<div wmDialog wmLoginDialog "+i.getAttrMarkup(e)+' eventsource.bind="Actions.loginAction" wm-navigable-element="true"><ng-template #dialogBody>'},post:function(){return"</ng-template></div>"}}});i.register("wm-pagedialog",function(){return{pre:function(e,t){var n=e.get("content");e.delete("content");var o=e.get("content.bind");e.delete("content.bind");var r=e.get("load.event");e.delete("load.event");var a="",s="";r&&(a='load.event="'+r+'"'),o?s='content.bind="'+o+'"':n&&(s='content="'+n+'"');var l="";return s&&(t.set("hasPartialContent",!0),l+="<ng-template><div wmContainer partialContainer "+s+' width="100%" height="100%" '+a+">"),"<div wmPartialDialog "+i.getAttrMarkup(e)+">"+l},post:function(e,t){var n="";return t.get("hasPartialContent")&&(n="</div></ng-template>"),n+"</div>"}}});var m="quickedit",h="form",f="dialog",g={integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],big_integer:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],short:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],float:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],big_decimal:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],number:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],double:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],long:["number","text","select","checkboxset","radioset","rating","slider","currency","autocomplete","chips"],byte:["number","text","select","checkboxset","radioset","slider","currency","autocomplete","chips"],string:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],character:["text","number","textarea","password","richtext","select","checkboxset","radioset","switch","currency","autocomplete","chips"],text:["text","number","textarea","password","richtext","select","checkboxset","radioset","date","time","timestamp","switch","currency","autocomplete","chips","colorpicker"],date:["date","text","number","select","checkboxset","radioset","autocomplete","chips"],time:["time","text","number","select","checkboxset","radioset","autocomplete","chips"],timestamp:["timestamp","text","number","select","checkboxset","radioset","autocomplete","chips"],datetime:["datetime","text","select","checkboxset","radioset","autocomplete","chips"],boolean:["checkbox","radioset","toggle","select"],list:["select","radioset","checkboxset","switch","autocomplete","chips"],clob:["text","textarea","richtext"],blob:["upload"],file:["upload"],custom:["text","number","textarea","password","checkbox","toggle","slider","richtext","currency","switch","select","checkboxset","radioset","date","time","timestamp","rating","datetime","autocomplete","chips","colorpicker"]},v=new Set([n.FormWidgetType.SELECT,n.FormWidgetType.CHECKBOXSET,n.FormWidgetType.RADIOSET,n.FormWidgetType.SWITCH,n.FormWidgetType.AUTOCOMPLETE,n.FormWidgetType.CHIPS,n.FormWidgetType.TYPEAHEAD,n.FormWidgetType.RATING]),y=function(e){var t=g[e]&&g[e][0];return e===n.DataType.BOOLEAN&&(t=n.FormWidgetType.SELECT),[n.FormWidgetType.TEXT,n.FormWidgetType.NUMBER,n.FormWidgetType.SELECT,n.FormWidgetType.AUTOCOMPLETE,n.FormWidgetType.DATE,n.FormWidgetType.TIME,n.FormWidgetType.DATETIME].includes(t)?t:n.FormWidgetType.TEXT},b=new n.IDGenerator("formfield_"),w=new Map([[n.FormWidgetType.SELECT,["Select Min value","Select Max value","Select value"]],[n.FormWidgetType.DATETIME,["Select Min date time","Select Max date time","Select date time"]],[n.FormWidgetType.TIME,["Select Min time","Select Max time","Select time"]],[n.FormWidgetType.DATE,["Select Min date","Select Max date","Select date"]],[n.FormWidgetType.TEXTAREA,["","","Enter value"]],[n.FormWidgetType.RICHTEXT,["","","Enter value"]],[n.FormWidgetType.COLORPICKER,["Select Color","Select Color","Select Color"]],[n.FormWidgetType.CHIPS,["","","Type here..."]],[n.FormWidgetType.PASSWORD,["Enter Min value","Enter Max value","Enter value"]],[n.FormWidgetType.NUMBER,["Enter Min value","Enter Max value","Enter value"]],[n.FormWidgetType.TEXT,["Enter Min value","Enter Max value","Enter value"]],[n.FormWidgetType.CURRENCY,["Enter Min value","Enter Max value","Enter value"]],[n.FormWidgetType.AUTOCOMPLETE,["","","Search"]]]),P=function(e,t,n){var i=1===n?"maxplaceholder":"placeholder",o=e.get(i);o||""===o||(o=w.get(t)&&w.get(t)[n])&&e.set(i,o)},_=function(e,t){var i=e.get("name"),o=(e.get("key")||i||"").trim(),r=t.isMaxWidget?'formControlName="'+o+'_max"':t.isInList?'[formControlName]="'+t.counter+'._fieldName"':'formControlName="'+o+'"',a=t.isMaxWidget?"#formWidgetMax":"#formWidget",s=i?t.isMaxWidget?'name="'+i+'_formWidgetMax"':'name="'+i+'_formWidget"':"",l='[class.hidden]="!'+t.pCounter+".isUpdateMode && "+t.counter+".viewmodewidget !== 'default'\" "+r+" "+t.eventsTmpl+" "+a+" "+s;return n.getFormWidgetTemplate(t.widgetType,l,e,{counter:t.counter,pCounter:t.pCounter})},O=function(e,t,i,o,r,a){if(!("true"===e.get("is-range")))return _(e,{widgetType:t,eventsTmpl:i,counter:o,pCounter:r,isInList:a});var s=n.isMobileApp()?"col-xs-6":"col-sm-6";return'<div class="'+s+'">'+_(e,{widgetType:t,eventsTmpl:i,counter:o,pCounter:r})+'</div>\n                <div class="'+s+'">'+_(e,{widgetType:t,eventsTmpl:i,counter:o,pCounter:r,isMaxWidget:!0})+"</div>"},R=O,E=function(e,t,i){if("true"===e.get("is-related"))return i+".getDisplayExpr()";if(t===n.FormWidgetType.PASSWORD)return"'********'";var o,r=i+".value";return t===n.FormWidgetType.DATETIME||t===n.FormWidgetType.TIMESTAMP?r+=" | toDate:"+i+".formWidget.datepattern || 'yyyy-MM-dd hh:mm:ss a'":t===n.FormWidgetType.TIME?r+=" | toDate:"+i+".formWidget.timepattern || 'hh:mm a'":t===n.FormWidgetType.DATE?r+=" | toDate:"+i+".formWidget.datepattern ||  'yyyy-MMM-dd'":t===n.FormWidgetType.RATING||t===n.FormWidgetType.UPLOAD?"":(o=t,v.has(o)&&"All Fields"===e.get("datafield")?i+".getDisplayExpr()":i+".getCaption()")},T=E,S=function(e){return{requires:["wm-form","wm-liveform","wm-livefilter","wm-list"],pre:function(t,o,r,a,s,l){var c=b.nextUid(),p=r||a||s,u=p&&p.get("form_reference")||"form",d=t.get("widget")||n.FormWidgetType.TEXT,m=e?"form-field":"filter-field",h=e?'<p *ngIf="'+c+"._control?.invalid && "+c+"._control?.touched && "+u+'.isUpdateMode"\n                                   class="help-block text-danger"\n                                   [textContent]="'+c+'.validationmessage"></p>':"",f=d===n.FormWidgetType.UPLOAD?"":function(e){var t=new Map;return e.has("focus.event")||e.set("focus.event",""),e.has("blur.event")||e.set("blur.event",""),e.forEach(function(n,i){i.endsWith(".event")&&("focus.event"===i?n="_onFocusField($event);"+n:"blur.event"===i&&(n="_onBlurField($event);"+n),t.set(i,n),e.delete(i))}),i.getFormMarkupAttr(t)}(t),g=n.isMobileApp()?"col-xs-12":"col-sm-12",v=u===(l&&l.get("parent_form_reference"));return t.set("__widgetType",d),t.delete("widget"),o.set("counter",c),"true"===t.get("is-range")?(P(t,d,0),P(t,d,1)):P(t,d,2),'<div data-role="'+m+'" [formGroup]="'+u+'.ngform" wmFormField #'+c+'="wmFormField" widgettype="'+d+'" '+i.getFormMarkupAttr(t)+'>\n                        <div class="live-field form-group app-composite-widget clearfix caption-{{'+u+'.captionposition}}" widget="'+d+'">\n                            <label [hidden]="!'+c+'.displayname" class="app-label control-label formfield-label {{'+u+'._captionClass}}" [title]="'+c+'.displayname"\n                                        [ngStyle]="{width: '+u+".captionsize}\" [ngClass]=\"{'text-danger': "+c+"._control?.invalid && "+c+"._control?.touched && "+u+".isUpdateMode,\n                                         required: "+u+".isUpdateMode && "+c+'.required}" [textContent]="'+c+'.displayname"> </label>\n                            <div [ngClass]="'+c+".displayname ? "+u+"._widgetClass : '"+g+'\'">\n                                 <label class="form-control-static app-label"\n                                       [hidden]="'+u+".isUpdateMode || "+c+".viewmodewidget === 'default' || "+c+".widgettype === 'upload'\" [innerHTML]=\""+E(t,d,c)+'"></label>\n                                '+O(t,d,f,c,u,v)+'\n                                <span aria-hidden="true" *ngIf="'+c+'.showPendingSpinner" class="form-field-spinner fa fa-circle-o-notch fa-spin form-control-feedback"></span>\n                                <p *ngIf="!('+c+"._control?.invalid && "+c+"._control?.touched) && "+u+'.isUpdateMode"\n                                   class="help-block" [textContent]="'+c+'.hint"></p>\n                                '+h+"\n                            </div>\n                        </div>"},post:function(){return"</div>"},provide:function(e,t){var n=new Map;return n.set("form_reference",t.get("counter")),n},imports:function(e){var t=n.getRequiredFormWidget(e.get("__widgetType")||e.get("type"));return e.delete("__widgetType"),[t,"wm-form"]}}},C=S;i.register("wm-form-field",S.bind(this,!0)),i.register("wm-filter-field",S.bind(this,!1));var I=function(e){return{pre:function(t){return'<div wmFormAction name="'+(t.get("name")||t.get("key"))+'" '+i.getAttrMarkup(t)+" "+e+">"},post:function(){return"</div>"}}};i.register("wm-form-action",I.bind(this,"")),i.register("wm-filter-action",I.bind(this,' update-mode="true" '));var A=new n.IDGenerator("form_"),D=new Set(["wm-text","wm-textarea","wm-checkbox","wm-slider","wm-richtexteditor","wm-currency","wm-switch","wm-select","wm-checkboxset","wm-radioset","wm-date","wm-time","wm-timestamp","wm-upload","wm-rating","wm-datetime","wm-search","wm-chips","wm-colorpicker","wm-table"]),N=function(e){void 0===e&&(e=[]),e.forEach(function(e){if(D.has(e.name)){var n=e.attrs.find(function(e){return"key"===e.name||"name"===e.name});n=n&&n.value,e.attrs.push(new t.Attribute("formControlName",n,1,1)),e.attrs.push(new t.Attribute("wmFormWidget","",1,1))}N(e.children)})},x=function(e){return void 0===e&&(e=""),{requires:["wm-livetable","wm-login"],template:function(e){N(e.children)},pre:function(t,n,o,r){var a,s,l=r&&r.get("isLogin")?"app-login":"",c=A.nextUid(),p=t.get("dependson")?'dependson="'+t.get("dependson")+'"':"",u="page"===t.get("formlayout")?"app-device-liveform panel liveform-inline":"";t.delete("dependson");var d='<form wmForm role="'+l+'" '+e+" #"+c+' ngNativeValidate [formGroup]="'+c+'.ngform" [noValidate]="'+c+".validationtype !== 'html'\"\n                    class=\""+u+'" [class]="'+c+'.captionAlignClass" [autocomplete]="'+c+".autocomplete ? 'on' : 'off'\" captionposition="+t.get("captionposition");if(n.set("counter",c),function(e){if(e.get("formdata.bind")){var t=i.getDataSource(e.get("formdata.bind"));t&&e.set("formdatasource.bind",t)}}(t),"dialog"===t.get("formlayout")){s=o?o.get("liveform_dialog_id"):"liveform_dialog_id_"+c,t.set("dialogId",s);var m=new Map;return["title","title.bind","iconclass","iconclass.bind","width"].forEach(function(e){t.get(e)&&m.set(e,t.get(e))}),t.set("width","100%"),a=i.getAttrMarkup(t),'<div data-identifier="liveform" init-widget class="app-liveform liveform-dialog" '+p+' dialogid="'+s+'">\n                            <div wmDialog class="app-liveform-dialog" name="'+s+'" role="form" '+i.getAttrMarkup(m)+' modal="true">\n                            <ng-template #dialogBody>\n                            '+d+" "+a+">"}var h="",f="";if("page"===t.get("formlayout")){var g="device_liveform_header_"+c,v=new Map;v.set("title",t.get("title")),v.set("backbtnclick.event",t.get("backbtnclick.event")),f='<ng-template #buttonRef let-btn="btn">\n                                            <button  wmButton name="{{btn.key}}" class="navbar-btn btn-primary btn-transparent" iconclass.bind="btn.iconclass" show.bind="btn.show"\n                                                     (click)="'+c+'.invokeActionEvent($event, btn.action)" type.bind="btn.type" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey" disabled.bind="btn.disabled"\n                                                     tabindex.bind="btn.tabindex" [class.hidden]="btn.updateMode ? !'+c+".isUpdateMode : "+c+'.isUpdateMode"></button>\n                                        </ng-template>',h='<header wmMobileNavbar name="'+g+'" '+i.getAttrMarkup(v)+'>\n                                            <ng-container *ngFor="let btn of '+c+'.buttonArray" [ngTemplateOutlet]="buttonRef" [ngTemplateOutletContext]="{btn:btn}">\n                                            </ng-container>\n                                        </header>\n                                        <div class="form-elements panel-body" >'}return d+" "+(a=i.getAttrMarkup(t))+" "+p+">\n                       "+f+" "+h},post:function(e){return"dialog"===e.get("formlayout")?"</form></ng-template></div></div>":"page"===e.get("formlayout")?"</div></form>":"</form>"},provide:function(e,t){var n=new Map;return n.set("form_reference",t.get("counter")),n}}};i.register("wm-form",x),i.register("wm-liveform",function(){return x("wmLiveForm")}),i.register("wm-livefilter",function(){return x("wmLiveFilter")});i.register("wm-calendar",function(){return{pre:function(e){return'<div wmCalendar redrawable style="width:100%" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-chips",function(){return{pre:function(e){return'<ul wmChips role="listbox" '+i.getAttrMarkup(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</ul>"}}});i.register("wm-colorpicker",function(){return{pre:function(e){return"<div wmColorPicker "+i.getAttrMarkup(e)+' role="input" '+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-currency",function(){return{pre:function(e){return"<div wmCurrency "+i.getAttrMarkup(e)+' role="input" '+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-buttongroup",function(){return{pre:function(e){return'<div wmButtonGroup role="group" aria-labelledby="button group" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-button",function(){return{pre:function(e){return"<button wmButton "+i.getAttrMarkup(e)+">"},post:function(){return"</button>"}}});i.register("wm-checkbox",function(){return{pre:function(e){return'<div wmCheckbox role="input" '+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-checkboxset",function(){return{pre:function(e){return"<ul wmCheckboxset "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</ul>"}}});i.register("wm-composite",function(){return{pre:function(e){return'<div wmComposite role="group" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-number",function(){return{pre:function(e){return"<div wmNumber "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-radioset",function(){return{pre:function(e){return'<ul wmRadioset role="radiogroup" '+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</ul>"}}});i.register("wm-select",function(){return{pre:function(e){return"<wm-select "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</wm-select>"}}});i.register("wm-switch",function(){return{pre:function(e){return"<div wmSwitch "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-text",function(){return{pre:function(e){return"<wm-input "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</wm-input>"}}});i.register("wm-textarea",function(){return{pre:function(e){return"<wm-textarea "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</wm-textarea>"}}});i.register("wm-datetime",function(){return{pre:function(e){return"<div wmDateTime "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-date",function(){return{pre:function(e){return"<div wmDate "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-time",function(){return{pre:function(e){return"<div wmTime "+i.getFormMarkupAttr(e)+' role="input" '+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-fileupload",function(){return{pre:function(e){if(e.get("select.event")){var t=i.getDataSource(e.get("select.event"));e.set("datasource.bind",t)}return"<div wmFileUpload "+i.getAttrMarkup(e)+' role="input">'},post:function(){return"</div>"}}});i.register("wm-rating",function(){return{pre:function(e){return"<div wmRating "+i.getFormMarkupAttr(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});i.register("wm-slider",function(){return{pre:function(e){return"<div wmSlider "+i.getAttrMarkup(e)+" "+n.getNgModelAttr(e)+">"},post:function(){return"</div>"}}});function M(e,n,i,o){var r=e.attrs.find(function(e){return e.name===n});r&&i.attrs.push(new t.Attribute(o,r.value,r.sourceSpan,r.valueSpan))}i.register("wm-media-list",function(){return{template:function(e){var n,i=e.attrs.find(function(e){return"dataset"===e.name}),o=function(e){void 0===e&&(e=[]),e.forEach(function(e){e.name&&"wm-list"!==e.name&&(e.attrs.forEach(function(e){e.value.startsWith("bind:"+n+".data[$i]")?e.value=e.value.replace(n+".data[$i]","item"):e.value.startsWith("bind:"+n)&&(e.value=e.value.replace(n,"item"))}),o(e.children))})};i&&i.value.startsWith("bind:")&&(n=i.value.replace("bind:","")),n&&o(e.children);var r=e.children.find(function(e){return e instanceof t.Element&&"wm-media-template"===e.name});null!=r&&(M(r,"width",e,"thumbnailwidth"),M(r,"height",e,"thumbnailheight"))},pre:function(e){return"<div wmMediaList "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-media-template",function(){return{pre:function(){return'<ng-template #mediaListTemplate let-item="item" let-index="index">'},post:function(){return"</ng-template>"}}});i.register("wm-list",function(){return{requires:["wm-form","wm-liveform"],template:function(e){var t=e.attrs.find(function(e){return"dataset"===e.name}),o=e.attrs.find(function(e){return"name"===e.name});if(t){var r=i.getBoundToExpr(t.value);r&&n.updateTemplateAttrs(e,r,o.value,"itemRef.")}},pre:function(e,t,n,o){var r=n||o;return t.set("form_reference",r&&r.get("form_reference")),"<div wmList wmLiveActions "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"},provide:function(e,t){var n=new Map;return n.set("parent_form_reference",t.get("form_reference")),n}}}),i.register("wm-listtemplate",function(){return{pre:function(){return'<ng-template #listTemplate let-item="item" let-$index="$index" let-itemRef="itemRef" let-$first="$first" let-$last="$last"  let-currentItemWidgets="currentItemWidgets" >'},post:function(){return"</ng-template>"}}}),i.register("wm-list-action-template",function(){return{template:function(e){e.attrs.find(function(e){return"position"===e.name}).value;e.children.filter(function(e){return e instanceof t.Element&&"wm-button"===e.name}).forEach(function(n){var i,o,r,a;i="position",o=n,r="swipe-position",(a=e.attrs.find(function(e){return e.name===i}))&&o.attrs.push(new t.Attribute(r,a.value,a.sourceSpan,a.valueSpan))})},pre:function(e,t){return"left"===e.get("position")?'<ng-template #listLeftActionTemplate>\n                            <li class="app-list-item-action-panel app-list-item-left-action-panel actionMenu" '+i.getAttrMarkup(e)+">":"right"===e.get("position")?'<ng-template #listRightActionTemplate>\n                            <li class="app-list-item-action-panel app-list-item-right-action-panel actionMenu" '+i.getAttrMarkup(e)+">":void 0},post:function(){return"</li></ng-template>"}}});var k=new n.IDGenerator("liveform_dialog_id_");i.register("wm-livetable",function(){return{pre:function(e,t){var n=k.nextUid();return t.set("counter",n),'<div wmLiveTable role="table" '+i.getAttrMarkup(e)+' dialogid="'+n+'">'},post:function(){return"</div>"},provide:function(e,t){var n=new Map;return n.set("liveform_dialog_id",t.get("counter")),n}}});i.register("wm-message",function(){return{pre:function(e){return'<p wmMessage aria-label="Notification Alerts" '+i.getAttrMarkup(e)+">"},post:function(){return"</p>"}}});i.register("wm-breadcrumb",function(){return{pre:function(e){return"<ol wmBreadcrumb "+i.getAttrMarkup(e)+">"},post:function(){return"</ol>"}}});i.register("wm-menu",function(){return{pre:function(e){return"<div wmMenu dropdown "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-nav-item",function(){return{pre:function(e){return'<li wmNavItem role="presentation" '+i.getAttrMarkup(e)+">"},post:function(){return"</li>"}}});i.register("wm-nav",function(){return{pre:function(e){return'<ul wmNav data-element-type="wmNav" data-role="page-header" '+i.getAttrMarkup(e)+">"},post:function(){return"</ul>"}}});i.register("wm-navbar",function(){return{pre:function(e){return'<nav wmNavbar data-element-type="wmNavbar" role="navigation" '+i.getAttrMarkup(e)+">"},post:function(){return"</nav>"}}});i.register("wm-popover",function(){return{requires:["wm-table"],pre:function(e,t,n){var o;if("inline"!==e.get("contentsource")){var r=e.get("content"),a=e.get("content.bind"),s="";r?s='content="'+r+'"':a&&(s='content.bind="'+a+'"'),o="<div wmContainer #partial partialContainer "+s+">",t.set("hasPopoverContent",!0)}var l="<wm-popover wmPopover "+i.getAttrMarkup(e)+">";return l+="<ng-template "+(n?'let-row="row"':"")+'><button class="popover-start"></button>',o&&(l+=""+(o||"")),l},post:function(e,t){var n="";return t.get("hasPopoverContent")&&(n+="</div>"),n+'<button class="popover-end"></button></ng-template></wm-popover>'}}});var L=function(e,n){return e&&e.children.find(function(e){return e instanceof t.Element&&e.name===n})},F=function(e){return new t.Element(e,[],[],G,G,G)},B=function(e,n,i){var o=new t.Attribute(n,i,G,G);e.attrs.push(o)},G={};i.register("wm-page",function(){return{template:function(e){var i=L(L(e,"wm-content"),"wm-page-content");if(i){var o=F("ng-container");if(B(o,"*ngIf","compilePageContent"),o.children=o.children.concat(i.children),o.children.push(new t.Text("{{onPageContentReady()}}",null)),i.children=[o],n.isMobileApp()){var r=F("div");B(r,"wmPageContentLoader",""),B(r,"*ngIf","!showPageContent"),i.children.push(r)}}},pre:function(e){return'<div wmPage data-role="pageContainer" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-pagination",function(){return{pre:function(e){return'<nav wmPagination data-identifier="pagination" aria-label="Page navigation" '+i.getAttrMarkup(e)+">"},post:function(){return"</nav>"}}});i.register("wm-content",function(){return{pre:function(e){return'<main wmContent data-role="page-content" role="main" '+i.getAttrMarkup(e)+">"},post:function(){return"</main>"}}});i.register("wm-footer",function(){return{pre:function(e){return'<footer wmFooter partialContainer data-role="page-footer" role="contentinfo" '+i.getAttrMarkup(e)+">"},post:function(){return"</footer>"}}});i.register("wm-header",function(){return{pre:function(e){return'<header wmHeader partialContainer data-role="page-header" role="banner" '+i.getAttrMarkup(e)+">"},post:function(){return"</header>"}}});i.register("wm-left-panel",function(){return{pre:function(e){return'<aside wmLeftPanel partialContainer data-role="page-left-panel" role="complementary" wmSmoothscroll="'+(e.get("smoothscroll")||"true")+'" '+i.getAttrMarkup(e)+">"},post:function(){return"</aside>"}}});i.register("wm-mobile-navbar",function(){return{pre:function(e){return"<header wmMobileNavbar "+i.getAttrMarkup(e)+">"},post:function(){return"</header>"}}});i.register("wm-right-panel",function(){return{pre:function(e){return'<aside wmRightPanel partialContainer data-role="page-right-panel" role="complementary" '+i.getAttrMarkup(e)+">"},post:function(){return"</aside>"}}});i.register("wm-page-content",function(){return{pre:function(e){return'<div wmPageContent wmSmoothscroll="'+(e.get("smoothscroll")||"true")+'" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-mobile-tabbar",function(){return{pre:function(e){return"<div wmMobileTabbar "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-top-nav",function(){return{pre:function(e){return'<section wmTopNav partialContainer data-role="page-topnav" role="region" '+i.getAttrMarkup(e)+">"},post:function(){return"</section>"}}});var j={};i.register("wm-partial",function(){return{template:function(e){var n,i=(n="ng-container",new t.Element(n,[],[],j,j,j));!function(e,n,i){var o=new t.Attribute(n,i,j,j);e.attrs.push(o)}(i,"*ngIf","compileContent"),i.children=i.children.concat(e.children),e.children.length=0,e.children.push(i)},pre:function(e){return'<section wmPartial data-role="partial" role="region" '+i.getAttrMarkup(e)+">"},post:function(){return"</section>"}}});i.register("wm-param",function(){return{pre:function(e){return"<div wmParam hidden "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-prefab",function(){return{pre:function(e){return'<section wmPrefab data-role="perfab" '+i.getAttrMarkup(e)+">"},post:function(){return"</section>"}}});var V={};i.register("wm-prefab-container",function(){return{template:function(e){var n,i=(n="ng-container",new t.Element(n,[],[],V,V,V));!function(e,n,i){var o=new t.Attribute(n,i,V,V);e.attrs.push(o)}(i,"*ngIf","compileContent"),i.children=i.children.concat(e.children),e.children.length=0,e.children.push(i)},pre:function(e){return"<div wmPrefabContainer "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-table-action",function(){return{pre:function(e){return'<div name="'+(e.get("name")||e.get("key"))+'" wmTableAction '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});i.register("wm-table-column-group",function(){return{pre:function(e){return"<div wmTableColumnGroup "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});var $=new n.IDGenerator("data_table_form_"),U=new Set(["wm-text","wm-textarea","wm-checkbox","wm-slider","wm-currency","wm-switch","wm-select","wm-checkboxset","wm-radioset","wm-date","wm-time","wm-timestamp","wm-rating","wm-datetime","wm-search","wm-chips","wm-colorpicker"]),W=function(e){void 0===e&&(e=[]),e.forEach(function(e){U.has(e.name)&&e.attrs.push(new t.Attribute("[ngModelOptions]","{standalone: true}",1,1)),W(e.children)})},q=function(e,t,o){var r,a={},s=e.get("binding"),l=e.get("edit-widget-type")||((r={type:e.get("type"),"related-entity-name":e.get("related-entity-name"),"primary-key":e.get("primary-key")})["related-entity-name"]&&r["primary-key"]?n.FormWidgetType.SELECT:g[r.type]&&g[r.type][0]||n.FormWidgetType.TEXT),c="",p="",u="";l===n.FormWidgetType.UPLOAD?(a.uploadProps={formName:$.nextUid(),name:s},a.counter=o):(c=t?"#inlineWidgetNew":"#inlineWidget",p=t?'formControlName="'+s+'_new"':'formControlName="'+s+'"',u="wmFormWidget"),a.inputType="editinputtype";var d=t?"#inlineWidgetTmplNew":"#inlineWidgetTmpl",m=c+" "+u+' key="'+s+'" data-field-name="'+s+'" '+p+" "+(l===n.FormWidgetType.UPLOAD?"":function(e){var t="";return e.forEach(function(e,n){n.endsWith(".event")&&(t+=n+'="'+e+'" ')}),t}(e))+" "+function(e){var t=new Map;return["disabled","disabled.bind"].forEach(function(n){e.get(n)&&(t.set(n,e.get(n)),e.delete(n))}),i.getAttrMarkup(t)}(e);return"<ng-template "+d+' let-row="row" let-getControl="getControl" let-getValidationMessage="getValidationMessage">\n                <div data-col-identifier="'+s+'" >\n                     '+n.getFormWidgetTemplate(l,m,e,a)+'\n                     <span placement="top" container="body" tooltip="{{getValidationMessage()}}" class="text-danger wi wi-error"\n                        *ngIf="getValidationMessage() && getControl() && getControl().invalid && getControl().touched">\n                     </span>\n                     <span class="sr-only" *ngIf="getValidationMessage()">{{getValidationMessage()}}</span>\n                 </div>\n            </ng-template>'};i.register("wm-table-column",function(){return{requires:["wm-table"],template:function(e,n){if(e.children.length){if(1===e.children.length&&e.children[0]instanceof t.Text&&0===e.children[0].value.trim().length)return;n.set("customExpression",!0),W(e.children)}},pre:function(e,t,o){var r="",a="",s="",l="";if(o){var c=o.get("table_reference");r="multicolumn"===o.get("filtermode")&&"false"!==e.get("searchable")?function(e,t){var o,r,a=e.get("filterwidget")||y(e.get("type")||n.DataType.STRING),s=e.get("binding"),l=e.get("type")||"string",c=e.get("filterdataset.bind");"autocomplete"===e.get("filterwidget")&&(c&&(o='dataset.bind="'+c+'" datasource.bind="'+i.getDataSource(c)+'"'),r="submit.event=\"changeFn('"+s+"')\"");var p='#filterWidget formControlName="'+s+'_filter" '+o+" "+r+" change.event=\"changeFn('"+s+"')\"\n                        disabled.bind=\"isDisabled('"+s+"')\"";return'<ng-template #filterTmpl let-changeFn="changeFn" let-isDisabled="isDisabled">\n    <div class="input-group '+a+'" data-col-identifier="'+s+'">\n        '+n.getFormWidgetTemplate(a,p,e,{inputType:"filterinputtype"})+'\n        <span class="input-group-addon filter-clear-icon" *ngIf="'+t+".showClearIcon('"+s+'\')">\n            <button class="btn-transparent btn app-button" aria-label="Clear button" type="button" (click)="'+t+".clearRowFilter('"+s+'\')">\n                <i class="app-icon wi wi-clear" aria-hidden="true"></i>\n            </button>\n         </span>\n        <span class="input-group-addon" dropdown container="body">\n            <button class="btn-transparent btn app-button" type="button" dropdownToggle><i class="app-icon wi wi-filter-list"></i></button>\n            <ul class="matchmode-dropdown dropdown-menu" *dropdownMenu>\n                   <li *ngFor="let matchMode of '+t+".matchModeTypesMap['"+l+'\']"\n                        [ngClass]="{active: matchMode === ('+t+".rowFilter['"+s+"'].matchMode || "+t+".matchModeTypesMap['"+l+'\'][0])}">\n                        <a href="javascript:void(0);" (click)="'+t+".onFilterConditionSelect('"+s+'\', matchMode)" [innerText]="'+t+'.matchModeMsgs[matchMode]"></a>\n                    </li>\n             </ul>\n        </span>\n    </div></ng-template>'}(e,c):"";var p=o.get("editmode"),u=p!==f&&p!==h&&"true"!==e.get("readonly");a=u?q(e,!1,c):"",s=u&&p===m&&"false"!==o.get("shownewrow")?q(e,!0):"",l=' [formGroup]="'+c+'.ngform" '}var d=e.get("formatpattern"),g='<ng-template #customExprTmpl let-row="row" let-colDef="colDef" let-editRow="editRow" let-deleteRow="deleteRow" let-addNewRow="addNewRow">',v="",b="";return t.get("customExpression")?(e.set("customExpression","true"),v=g+'<div data-col-identifier="'+e.get("binding")+'">'):(d&&"None"!==d||n.isDateTimeType(e.get("type")))&&(b=function(e){var t="row.getProperty('"+e.get("binding")+"')",i=e.get("formatpattern"),o="";switch(!n.isDateTimeType(e.get("type"))||i&&"None"!==i||(e.set("formatpattern","toDate"),e.delete("datepattern"),i="toDate"),i){case"toDate":o="{{"+t+" | toDate: colDef.datepattern}}";break;case"toCurrency":e.get("currencypattern")&&(o="{{"+t+" | toCurrency: '"+e.get("currencypattern"),e.get("fractionsize")?o+="': "+e.get("fractionsize")+"}}":o+="'}}");break;case"numberToString":e.get("fractionsize")&&(o="{{"+t+" | numberToString: '"+e.get("fractionsize")+"'}}");break;case"stringToNumber":o="{{"+t+" | stringToNumber}}";break;case"timeFromNow":o="{{"+t+" | timeFromNow}}";break;case"prefix":e.get("prefix")&&(o="{{"+t+" | prefix: '"+e.get("prefix")+"'}}");break;case"suffix":e.get("suffix")&&(o="{{"+t+" | suffix: '"+e.get("suffix")+"'}}")}return o}(e))&&(t.set("customExpression",!0),e.set("customExpression","true"),v=g+'<div data-col-identifier="'+e.get("binding")+'" title="'+b+'">'+b),"<div wmTableColumn "+i.getAttrMarkup(e)+" "+l+">\n                    "+r+"\n                    "+a+"\n                    "+s+"\n                    "+v},post:function(e,t){var n="";return t.get("customExpression")&&(n="</div></ng-template>"),n+"</div>"},imports:function(e){var t=e.get("edit-widget-type"),i=e.get("filterwidget")||y(e.get("type")||n.DataType.STRING);return[n.getRequiredFormWidget(t),n.getRequiredFormWidget(i),"wm-table"]}}});i.register("wm-table-row",function(){return{pre:function(e){return"<div wmTableRow "+i.getAttrMarkup(e)+">\n                    "+function(e){var t="anchor"===e.get("widget-type")?"a":"button";return'<ng-template #rowExpansionActionTmpl let-row="row">\n               <'+t+" "+("anchor"===e.get("widget-type")?"wmAnchor":"wmButton")+"\n                    "+n.getRowActionAttrs(e)+'\n                    class="'+e.get("class")+' row-expansion-button"\n                    iconclass="'+e.get("collapseicon")+'"\n                    type="button"></'+t+">\n            </ng-template>"}(e)+'\n                    <ng-template #rowExpansionTmpl let-row="row" let-rowDef="rowDef" let-containerLoad="containerLoad">\n                        <div wmContainer partialContainer content.bind="rowDef.content" load.event="containerLoad(widget)"\n                            [ngStyle]="{\'height\': rowDef.height, \'overflow-y\': \'auto\'}">\n                         <div *ngFor="let param of rowDef.partialParams | keyvalue" wmParam hidden\n                            [name]="param.key" [value]="param.value"></div>'},post:function(){return"</div></ng-template></div>"}}});i.register("wm-table-row-action",function(){return{pre:function(e){return"<div wmTableRowAction "+i.getAttrMarkup(e)+">\n                        "+function(e){var t=e.get("action"),i=t?' click.event.delayed="'+t+'" ':"",o=t&&t.includes("editRow(")?'<button type="button" aria-label="Save edit icon" class="save row-action-button btn app-button btn-transparent save-edit-row-button hidden" title="Save">\n                <i class="wi wi-done" aria-hidden="true"></i>\n            </button>\n            <button type="button" aria-label="Cancel edit icon" class="cancel row-action-button btn app-button btn-transparent cancel-edit-row-button hidden" title="Cancel">\n                <i class="wi wi-cancel" aria-hidden="true"></i>\n            </button>':"",r=t?t.includes("editRow(")?"edit edit-row-button":t.includes("deleteRow(")?"delete delete-row-button":"":"",a=e.get("tabindex")?'tabindex="'+e.get("tabindex")+'"':"",s="anchor"===e.get("widget-type")?"a":"button";return'<ng-template #rowActionTmpl let-row="row">\n               <'+s+" "+("anchor"===e.get("widget-type")?"wmAnchor":"wmButton")+' data-action-key="'+e.get("key")+'"\n                    '+n.getRowActionAttrs(e)+'\n                    class="row-action row-action-button '+e.get("class")+" "+r+'"\n                    iconclass="'+e.get("iconclass")+'"\n                    '+i+"\n                    "+a+'\n                    type="button"></'+s+">\n                "+o+"\n            </ng-template>"}(e)},post:function(){return"</div>"}}});var H=new n.IDGenerator("table_");i.register("wm-table",function(){return{template:function(e,t){if(e.children.length){var o=e.children.some(function(e){return"wm-table-column"===e.name||"wm-table-column-group"===e.name});t.set("isdynamictable",o?"false":"true")}else t.set("isdynamictable","true");var r=e.attrs.find(function(e){return"dataset"===e.name}),a=e.attrs.find(function(e){return"name"===e.name});if(r){var s=i.getBoundToExpr(r.value);s&&n.updateTemplateAttrs(e,s,a.value,"","row")}},pre:function(e,t){var n=H.nextUid();return t.set("counter",n),e.set("isdynamictable",t.get("isdynamictable")),'<div wmTable="'+n+'" wmTableFilterSort wmTableCUD #'+n+' data-identifier="table" role="table" '+i.getAttrMarkup(e)+">"},post:function(){return"</div>"},provide:function(e,t){var n=new Map;return n.set("table_reference",t.get("counter")),n.set("filtermode",e.get("filtermode")),n.set("editmode",e.get("editmode")),n.set("shownewrow",e.get("shownewrow")),n}}});i.register("wm-video",function(){return{pre:function(e){return"<div wmVideo "+i.getAttrMarkup(e)+">"},post:function(){return"</div>"}}});Object.keys(i).forEach(function(t){e[t]=i[t]}),e.initComponentsBuildTask=function(){},e.\u02750=a,e.\u02751=c,e.\u02752=u,e.\u02753=R,e.\u02754=T,e.\u02755=C,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("angular2-text-mask"),require("rxjs"),require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input",["exports","angular2-text-mask","rxjs","@angular/common","@angular/core","@angular/forms","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input={}),e.angular2TextMask,e.rxjs,e.ng.common,e.ng.core,e.ng.forms,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var m=function(){a.register("wm-button",new Map([["animation",a.PROP_STRING],["badgevalue",a.PROP_STRING],["caption",a.PROP_STRING],["class",a.PROP_STRING],["conditionalclass",a.PROP_ANY],["conditionalstyle",a.PROP_ANY],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconposition",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["name",a.PROP_STRING],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["type",a.PROP_STRING]]))},h={widgetType:"wm-button",hostClass:"btn app-button",displayType:a.DISPLAY_TYPE.INLINE_BLOCK},f=function(e){function t(t){var n=e.call(this,t,h)||this;return a.styler(n.nativeElement,n),n}return c(t,e),t.initializeProps=m(),t.decorators=[{type:o.Component,args:[{selector:"button[wmButton]",template:'<img data-identifier="img" alt="button image" class="button-image-icon" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}"/>\n<i class="app-icon {{iconclass}}" aria-hidden="true" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin, fontSize:iconwidth}" *ngIf="iconclass"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption | trustAs:\'html\'}} {{appLocale.LABEL_ICON}}</span>\n<span class="btn-caption" [innerHTML]="caption | trustAs:\'html\'"></span>\n<ng-content select=".caret"></ng-content>\n<span *ngIf="badgevalue" class="badge pull-right" [textContent]="badgevalue"></span>',providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={type:[{type:o.HostBinding,args:["type"]}],tabindex:[{type:o.HostBinding,args:["tabIndex"]}],disabled:[{type:o.HostBinding,args:["disabled"]}],shortcutkey:[{type:o.HostBinding,args:["attr.accesskey"]}],iconposition:[{type:o.HostBinding,args:["attr.icon-position"]}]},t}(a.StylableComponent),g=function(){a.register("wm-buttongroup",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["vertical",a.PROP_BOOLEAN]]))},v={widgetType:"wm-buttongroup",hostClass:"btn-group app-button-group"},y=function(e){function t(t){var n=e.call(this,t,v)||this;return a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.CONTAINER),n}return c(t,e),t.prototype.handleClick=function(e){var t=$(e.target).closest(".app-button");this.$element.find(".app-button").removeClass("selected"),t.addClass("selected")},t.initializeProps=g(),t.decorators=[{type:o.Directive,args:[{selector:"[wmButtonGroup]",providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={vertical:[{type:o.HostBinding,args:["class.btn-group-vertical"]}],handleClick:[{type:o.HostListener,args:["click",["$event"]]}]},t}(a.StylableComponent),b=function(e){function t(t,n,i){var o=e.call(this,t,n,i)||this;return o.inj=t,o.binddatavalue=o.$element.attr("datavalue.bind"),o}return c(t,e),t.prototype.updateBoundVariable=function(e){var t=this.binddatavalue;this.datavaluesource&&this.datavaluesource.execute(s.DataSource.Operation.IS_API_AWARE)||this.datavaluesource&&!this.datavaluesource.twoWayBinding||!t||t.startsWith("Widgets.")||t.startsWith("itemRef.currentItemWidgets")||(t=t.replace(/\[\$i\]/g,"[0]"),_.has(this.context,t.split(".")[0])?_.set(this.context,t,e):_.set(this.viewParent,t,e))},t.prototype.invokeOnChange=function(e,t){t&&this.datavalue!==this.prevDatavalue&&(this.updateBoundVariable(e),this.invokeEventCallback("change",{$event:t,newVal:e,oldVal:this.prevDatavalue})),this.prevDatavalue=e},t.prototype.updatePrevDatavalue=function(e){this.prevDatavalue=e},t}(a.StylableComponent),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onChange=function(){},t._onTouched=function(){},t}return c(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this._formControl=this.inj.get(r.FormControlName,null)},t.prototype.registerOnChange=function(e){this._onChange=e},t.prototype.registerOnTouched=function(e){this._onTouched=e},t.prototype.writeValue=function(e){this.isDestroyed||this._formControl&&(this.datavalue=e,this.onPropertyChange("datavalue",e),this.updatePrevDatavalue(e))},t.prototype.invokeOnChange=function(t,n,i){this._onChange(t),i&&e.prototype.invokeOnChange.call(this,t,n)},t.prototype.invokeOnTouched=function(e){this._onTouched(),e&&this.invokeEventCallback("blur",{$event:e})},t.prototype.invokeOnFocus=function(e){this.invokeEventCallback("focus",{$event:e})},t}(b),P=new Map([["caption",a.PROP_STRING],["class",a.PROP_STRING],["conditionalclass",a.PROP_ANY],["conditionalstyle",a.PROP_ANY],["checkedvalue",p({value:!0},a.PROP_STRING)],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["name",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["uncheckedvalue",p({value:!1},a.PROP_STRING)]]),O=function(){a.register("wm-checkbox",P),a.registerFormWidget(s.FormWidgetType.CHECKBOX,P),a.registerFormWidget(s.FormWidgetType.TOGGLE,P)},R={widgetType:"wm-checkbox",hostClass:"app-checkbox checkbox"},E=function(e,t){if(null===e)return t;if(!0===e||"true"===e)return!0;if(!1===e||"false"===e)return!1;var n=parseInt(e,10);return isNaN(n)?e:n},T=function(e){function t(t,n,i,o){var r=e.call(this,t,R)||this;return r._caption="&nbsp",r._checkedvalue=E(n,!0),r._uncheckedvalue=E(i,!1),s.toggleClass(r.nativeElement,"app-toggle","toggle"===o),r}return c(t,e),Object.defineProperty(t.prototype,"datavalue",{get:function(){return s.isDefined(this.proxyModel)?this.proxyModel?this._checkedvalue:this._uncheckedvalue:void 0},set:function(e){this.proxyModel=s.isDefined(e)&&""!==e?e===this._checkedvalue:void 0,this.updatePrevDatavalue(this.datavalue)},enumerable:!0,configurable:!0}),t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("caption"===t?s.isDefined(n)&&""!==n?this._caption=n:this._caption="&nbsp;":"checkedvalue"===t?this._checkedvalue=E(n,!0):"uncheckedvalue"===t?this._uncheckedvalue=E(n,!1):"datavalue"===t?this.datavalue=E(n):e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.handleEvent=function(t,n,i,o){if("change"!==n&&"blur"!==n){var r="tap"===n?this.nativeElement.querySelector("label"):this.checkboxEl.nativeElement;e.prototype.handleEvent.call(this,r,n,i,o)}},t.prototype.handleChange=function(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),a.styler(this.nativeElement.querySelector("label"),this)},t.initializeProps=O(),t.decorators=[{type:o.Component,args:[{selector:"[wmCheckbox]",template:'<label [ngClass]="{\'unchecked\': !proxyModel, \'disabled\': (disabled || readonly), \'required\': (required && _caption)}" role="button">\n    <input type="checkbox" aria-describedby="checkbox"\n           #checkbox\n           [attr.name]="name"\n           focus-target\n           [(ngModel)]="proxyModel"\n           [readonly]="readonly"\n           [required]="required"\n           [disabled]="disabled || readonly"\n           [attr.accesskey]="shortcutkey"\n           [tabindex]="tabindex"\n           (blur)="invokeOnTouched($event)"\n           (ngModelChange)="handleChange($event)">\n    <span class="caption" [innerHtml]="_caption"></span>\n    <img alt="Checkbox Image" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" class="switch"/>\n</label>\n<input type="hidden" class="ng-hide model-holder" [disabled]="disabled" [value]="proxyModel">\n',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:void 0,decorators:[{type:o.Attribute,args:["checkedvalue"]}]},{type:void 0,decorators:[{type:o.Attribute,args:["uncheckedvalue"]}]},{type:void 0,decorators:[{type:o.Attribute,args:["type"]}]}]},t.propDecorators={ngModel:[{type:o.ViewChild,args:[r.NgModel]}],checkboxEl:[{type:o.ViewChild,args:["checkbox",{read:o.ElementRef}]}]},t}(w),S=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.datasetItems=[],o.acceptsArray=!1,o.dataset$=new n.Subject,o.datavalue$=new n.Subject,o.allowempty=!0,o._debounceDatavalueUpdation=_.debounce(function(e){!s.isDefined(o._modelByKey)||_.isArray(o._modelByKey)&&!o._modelByKey.length?(o.toBeProcessedDatavalue=e,o._modelByValue=void 0):s.isDefined(o.toBeProcessedDatavalue)&&(s.isDefined(o._modelByValue)||(o._modelByValue=!o.multiple&&_.isArray(o.toBeProcessedDatavalue)?o.toBeProcessedDatavalue[0]:o.toBeProcessedDatavalue),o.toBeProcessedDatavalue=void 0),o.initDisplayValues()},150),o.binddisplayexpression=o.nativeElement.getAttribute("displayexpression.bind"),o.binddisplayimagesrc=o.nativeElement.getAttribute("displayimagesrc.bind"),o.binddisplaylabel=o.nativeElement.getAttribute("displaylabel.bind"),o._debouncedInitDatasetItems=s.debounce(function(){o.initDatasetItems(),s.$appDigest()},150),o}return c(t,e),Object.defineProperty(t.prototype,"modelByKey",{get:function(){return this._modelByKey},set:function(e){this.selectByKey(e),this.invokeOnChange(this._modelByValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datavalue",{get:function(){return this._modelByValue},set:function(e){this.multiple&&(e=a.extractDataAsArray(e)),this._modelByValue=e,this.selectByValue(e),this.datavalue$.next(e),this.invokeOnChange(e,void 0,!0)},enumerable:!0,configurable:!0}),t.prototype.selectByKey=function(e){var t=this;if(this.resetDatasetItems(),this.datasetItems.length){if(this.multiple&&!_.isArray(e)&&(e=[e]),this._modelByKey=e,this.multiple)this._modelByValue=[],e.forEach(function(e){var n=_.find(t.datasetItems,function(t){return _.toString(t.key)===_.toString(e)});n&&(n.selected=!0,t._modelByValue=d(t._modelByValue,[n.value]))});else{this._modelByValue="";var n=_.find(this.datasetItems,function(t){return _.toString(t.key)===_.toString(e)});n&&(n.selected=!0,this._modelByValue=n.value)}this.initDisplayValues()}},t.prototype.selectByValue=function(e){var t=this;if(this.resetDatasetItems(),!(!s.isDefined(e)||""===e||_.isNull(e)||e instanceof Array&&!e.length)||(this._modelByKey=void 0,this.allowempty&&s.isDefined(e)))if(this.acceptsArray&&!_.isArray(e)&&(e=this.allowempty?[e]:a.extractDataAsArray(e)),this.datasetItems.length||!s.isDefined(e)){var n=this.datafield===a.ALLFIELDS?"dataObject":"key";if(_.isArray(e))this._modelByKey=[],e.forEach(function(e){var i=_.find(t.datasetItems,function(i){return"dataObject"===n&&t.compareby&&t.compareby.length?s.isEqualWithFields(i[n],e,t.compareby):_.isObject(i.value)?_.isEqual(i.value,e):_.toString(i.value).toLowerCase()===_.toString(e).toLowerCase()});i&&(i.selected=!0,t._modelByKey.push(i.key))});else{this._modelByKey=void 0;var i=_.find(this.datasetItems,function(i){return"dataObject"===n&&t.compareby&&t.compareby.length?s.isEqualWithFields(i[n],e,t.compareby):_.isObject(i.value)?_.isEqual(i.value,e):_.toString(i.value).toLowerCase()===_.toString(e).toLowerCase()});i&&(i.selected=!0,this._modelByKey=i.key)}this._debounceDatavalueUpdation(e)}else this.toBeProcessedDatavalue=e},t.prototype.initDisplayValues=function(){var e=[];this.datasetItems.forEach(function(t){t.selected&&e.push(t.label)}),this.displayValue=this.multiple?e:e[0]},t.prototype.initDatasetItems=function(){if(!this.dataset||_.isEmpty(this.dataset))return this.datasetItems=[],void this.dataset$.next(this.datasetItems);var e=a.getOrderedDataset(a.convertDataToObject(this.dataset),this.orderby);if(this.usekeys)this.datasetItems=a.transformDataWithKeys(e);else{var t=a.transformFormData(this.viewParent,e,this.datafield,{displayField:this.displayfield||this.displaylabel,displayExpr:this.displayexpression,bindDisplayExpr:this.binddisplayexpression||this.binddisplaylabel,bindDisplayImgSrc:this.binddisplayimagesrc,displayImgSrc:this.displayimagesrc});this.datasetItems=d(a.getUniqObjsByDataField(t,this.datafield,this.displayfield||this.displaylabel,s.toBoolean(this.allowempty)))}this.postDatasetItemsInit()},t.prototype.postDatasetItemsInit=function(){if(this.datasetItems.length&&!this._defaultQueryInvoked){var e=s.isDefined(this.toBeProcessedDatavalue)?this.toBeProcessedDatavalue:this.datavalue;this.selectByValue(e)}this.dataset$.next(this.datasetItems)},t.prototype.resetDatasetItems=function(){this.datasetItems.forEach(function(e){return e.selected=!1})},t.prototype.onPropertyChange=function(t,n,i){switch(e.prototype.onPropertyChange.call(this,t,n,i),t){case"dataset":case"datafield":case"displayfield":case"displaylabel":case"displayexpression":case"orderby":case"usekeys":this._debouncedInitDatasetItems()}},t}(w),C=new Map([["class",a.PROP_STRING],["collapsible",a.PROP_BOOLEAN],["compareby",a.PROP_STRING],["datafield",a.PROP_STRING],["dataset",p({value:"Option 1, Option 2, Option 3"},a.PROP_ANY)],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["dateformat",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["displayValue",a.PROP_STRING],["groupby",a.PROP_STRING],["itemclass",p({value:""},a.PROP_STRING)],["layout",p({value:"stacked"},a.PROP_STRING)],["listclass",p({value:""},a.PROP_STRING)],["match",a.PROP_STRING],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["show",p({value:!0},a.PROP_BOOLEAN)],["showcount",a.PROP_BOOLEAN],["showindevice",p({displayType:"inline-block",value:"all"},a.PROP_STRING)],["tabindex",p({value:0},a.PROP_NUMBER)],["usekeys",a.PROP_BOOLEAN]]),I=function(){a.register("wm-checkboxset",C),a.registerFormWidget(s.FormWidgetType.CHECKBOXSET,new Map(C))},A={widgetType:"wm-checkboxset",hostClass:"app-checkboxset list-group"},D=function(e){function t(t,n,i,o){var r=e.call(this,t,A)||this;return r.groupby=n,r.appDefaults=i,r.datePipe=o,r.layout="",a.styler(r.nativeElement,r),r.multiple=!0,r.handleHeaderClick=s.noop,r}return c(t,e),t.prototype.onCheckboxLabelClick=function(e,t){if($(e.target).is("input")){var n=this.nativeElement.querySelectorAll("input:checked"),i=[];_.forEach(n,function(e){i.push(e.value)}),this.modelByKey=i,this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)}},t.prototype.handleEvent=function(t,n,i,o){"click"===n?this.eventManager.addEventListener(t,n,function(e){if($(e.target).is("input"))return o.$event=e,i()}):_.includes(["change"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.getGroupedData=function(){return this.datasetItems.length?a.groupData(this,a.convertDataToObject(this.datasetItems),this.groupby,this.match,this.orderby,this.dateformat,this.datePipe,"dataObject",this.appDefaults):[]},t.prototype.datasetSubscription=function(){var e=this,t=this.dataset$.subscribe(function(){e.groupedData=e.getGroupedData()});this.registerDestroyListener(function(){return t.unsubscribe()})},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("layout"===t?s.switchClass(this.nativeElement,n,i):"groupby"===t||"match"===t?(this.datasetSubscription(),this.groupedData=this.getGroupedData()):e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.groupby&&(this.datasetSubscription(),this.groupedData=this.getGroupedData()),this.groupby&&this.collapsible&&(this.handleHeaderClick=a.handleHeaderClick,this.toggleAllHeaders=a.toggleAllHeaders.bind(void 0,this))},t.initializeProps=I(),t.decorators=[{type:o.Component,args:[{selector:"[wmCheckboxset]",exportAs:"wmCheckboxset",template:'<ng-template [ngIf]="!groupby" [ngIfElse]="groupedListTemplate">\n    <li [ngClass]="[\'checkbox\', \'app-checkbox\', itemclass]"\n        [class.active]="item.selected"\n        *ngFor="let item of datasetItems; let i = index"\n        (click)="onCheckboxLabelClick($event, item.key)">\n        <label class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" [title]="item.label">\n            <input [name]="\'checkboxset_\' + widgetId" type="checkbox" aria-label="checkbox group"\n                   [tabindex]="tabindex"\n                   [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                   [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n            <span class="caption" [textContent]="item.label"></span>\n        </label>\n    </li>\n</ng-template>\n<input [disabled]="disabled || readonly" hidden class="model-holder">\n<div *ngIf="readonly || disabled" class="readonly-wrapper"></div>\n\n\x3c!-- This template will be displayed when groupby is specified. --\x3e\n<ng-template #groupedListTemplate>\n    <li *ngFor="let groupObj of groupedData" class="app-list-item-group">\n        <ul class="item-group">\n            <li class="list-group-header" (click)="handleHeaderClick($event)" [title]="groupObj.key" [ngClass]="{\'collapsible-content\': collapsible}">\n                <h4 class="group-title">{{groupObj.key}}\n                    <div class="header-action">\n                        <i class="app-icon wi action wi-chevron-up" *ngIf="collapsible" title="{{appLocale.LABEL_COLLAPSE}}/{{appLocale.LABEL_EXPAND}}"></i>\n                        <span *ngIf="showcount" class="label label-default" [textContent]="groupObj.data.length"></span>\n                    </div>\n                </h4>\n            </li>\n            <li *ngFor="let item of groupObj.data; let i = index;"\n                [ngClass]="[\'checkbox\', \'app-checkbox\', \'group-list-item\', itemclass]"\n                [class.active]="item.selected"\n                (click)="onCheckboxLabelClick($event, item)">\n                <label class="app-checkboxset-label" [ngClass]="{\'disabled\':disabled || readonly}" [title]="item.label">\n                    <input [name]="\'checkboxset_\' + widgetId" type="checkbox" aria-label="checkbox group"\n                           [tabindex]="tabindex"\n                           [disabled]="disabled || readonly" [attr.data-attr-index]="i"\n                           [value]="item.key" [tabindex]="tabindex" [checked]="item.selected"/>\n                    <span class="caption" [textContent]="item.label"></span>\n                </label>\n            </li>\n        </ul>\n    </li>\n</ng-template>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:String,decorators:[{type:o.Attribute,args:["groupby"]}]},{type:s.AppDefaults},{type:a.ToDatePipe}]},t}(S),N=function(){a.register("wm-form-group",new Map([["captionposition",a.PROP_STRING],["name",a.PROP_STRING],["required",a.PROP_BOOLEAN],["show",p({value:!0},a.PROP_BOOLEAN)]]))},x={widgetType:"wm-form-group",hostClass:"form-group app-composite-widget clearfix"},M={left:"caption-left",right:"caption-right",top:"caption-top"},k=function(e){function t(t){var n=e.call(this,t,x)||this;return a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.CONTAINER),n}return c(t,e),t.prototype.onPropertyChange=function(t,n,i){"captionposition"===t?s.switchClass(this.nativeElement,M[n],M[i]):"required"===t?(this.required=n,this.assignRequiredToSubComponents()):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.assignRequiredToSubComponents=function(){var e=this;this.required&&this.componentRefs&&setTimeout(function(){e.componentRefs.forEach(function(e){return e.widget.required=!0})},50)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),s.addForIdAttributes(this.nativeElement),this.assignRequiredToSubComponents()},t.initializeProps=N(),t.decorators=[{type:o.Directive,args:[{selector:"div[wmComposite]",providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={componentRefs:[{type:o.ContentChildren,args:[a.WidgetRef,{descendants:!0}]}]},t}(a.StylableComponent),L=new Map([["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["localefilter",a.PROP_STRING],["minvalue",a.PROP_NUMBER],["maxvalue",a.PROP_NUMBER],["name",a.PROP_STRING],["numberfilter",a.PROP_STRING],["placeholder",p({value:"Enter number"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["regexp",a.PROP_STRING],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["step",p({value:1},a.PROP_NUMBER)],["tabindex",p({value:0},a.PROP_NUMBER)],["updateon",a.PROP_STRING]]),F=function(){a.register("wm-number",L),a.registerFormWidget(s.FormWidgetType.NUMBER,new Map(L))},B=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.ngModelOptions={updateOn:""};var o=i.nativeElement.getAttribute("updateon")||"blur";return o="default"===o?"change":o,i.ngModelOptions.updateOn=o,i}return c(t,e),t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("class"===t?this.inputEl.nativeElement&&s.switchClass(this.inputEl.nativeElement,n,i):"datavalue"===t?this.updatePrevDatavalue(n):e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.handleChange=function(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)},t.prototype.handleEvent=function(t,n,i,o){"change"!==n&&"blur"!==n&&e.prototype.handleEvent.call(this,this.inputEl.nativeElement,n,i,o)},t.prototype.handleBlur=function(e){this.invokeOnTouched(e)},t.prototype.flushViewChanges=function(e){this.ngModel.update.next(e),s.$appDigest()},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this.class&&s.addClass(this.inputEl.nativeElement,this.class),a.styler(this.inputEl.nativeElement,this)},t}(w),G=function(e){function t(t,n,o,r){var a=e.call(this,t,n)||this;return a.decimalPipe=r,a.isDefaultQuery=!0,a.selectedLocale=o.getSelectedLocale(),a.DECIMAL=i.getLocaleNumberSymbol(a.localefilter||a.selectedLocale,i.NumberSymbol.Decimal),a.GROUP=i.getLocaleNumberSymbol(a.localefilter||a.selectedLocale,i.NumberSymbol.Group),a.numberfilter="1.0-16",a.resetValidations(),a}return c(t,e),Object.defineProperty(t.prototype,"datavalue",{get:function(){return this.proxyModel},set:function(e){if(_.includes([null,void 0,""],e)){var t=this.inputEl.nativeElement;return this.displayValue=t.value=this.proxyModel=null,this.resetValidations(),void this._onChange()}this.isDefaultQuery&&(e=this.transformNumber(e));var n=this.parseNumber(e.toString());this.isValid(n)?(this.proxyModel=n,this.updateDisplayText(),this.handleChange(n)):(this.displayValue=e.toString(),this.proxyModel=null,this.handleChange(null))},enumerable:!0,configurable:!0}),t.prototype.resetValidations=function(){this.isInvalidNumber=!1,this.numberNotInRange=!1},t.prototype.isValid=function(e){return _.isNaN(e)||!_.isFinite(e)?(this.isInvalidNumber=!0,!1):e!==this.getValueInRange(e)?(this.numberNotInRange=!0,!0):(this.resetValidations(),!0)},t.prototype.getValueInRange=function(e){return!_.isNaN(this.minvalue)&&e<this.minvalue?this.minvalue:!_.isNaN(this.maxvalue)&&e>this.maxvalue?this.maxvalue:e},t.prototype.transformNumber=function(e){return this.decimalPipe.transform(e,this.numberfilter,this.localefilter||this.selectedLocale)},t.prototype.resetCursorPosition=function(e){var t=this.inputEl.nativeElement,n=t.value.length-e;n=n<0?0:n,t.setSelectionRange(n,n)},t.prototype.parseNumber=function(e){var t=e.split(this.DECIMAL);if(!t.length)return null;if(t.length>2)return NaN;if(""===t[1])return NaN;var n=Number(t[0].split(this.GROUP).join("")),i=Number("0."+(t[1]||0));return Number.isNaN(n)||Number.isNaN(i)?NaN:n>=0?n+i:n-i},t.prototype.updateDisplayText=function(){var e=this.inputEl.nativeElement,t=e.selectionStart,n=e.value;this.displayValue=e.value=this.transformNumber(this.proxyModel),"default"!==this.updateon||this.isDefaultQuery||this.resetCursorPosition(n.length-t)},t.prototype.countDecimals=function(e){return e%1!=0?e.toString().split(".")[1].length:0},t.prototype.onArrowPress=function(e,t){if(e.preventDefault(),!this.readonly&&0!==this.step){var n,i=this.proxyModel;if(this.numberNotInRange){var o=this.parseNumber(this.inputEl.nativeElement.value);_.isNaN(o)||(n=this.getValueInRange(o),i=o,this.resetValidations())}else _.isUndefined(i)||_.isNull(i)?(i=n=this.getValueInRange(this.minvalue||0),this.resetValidations()):n=this.getValueInRange(i+("UP"===t?this.step:-this.step));if("UP"===t&&i<=n||"DOWN"===t&&i>=n){var r=Math.max(this.countDecimals(i),this.countDecimals(this.step));this.proxyModel=_.round(n,r),this.updateDisplayText(),this.handleChange(this.proxyModel)}}},t.prototype.validate=function(e){return this.isInvalidNumber?{invalidNumber:{valid:!1}}:this.numberNotInRange?{numberNotInRange:{valid:!1}}:null},t.prototype.validateInputEntry=function(e){if(this.isDefaultQuery=!1,!e.ctrlKey&&!_.includes(["Backspace","ArrowRight","ArrowLeft","Tab","Enter"],e.key)){var t=new RegExp("^[\\d\\s-,.e+"+this.GROUP+this.DECIMAL+"]$","i"),n=e.target.value;return!!t.test(e.key)&&((!_.includes(n,this.DECIMAL)||e.key!==this.DECIMAL)&&((!_.intersection(_.toArray(n),["e","E"]).length||!_.includes("eE",e.key))&&((!_.includes(n,"+")&&!_.includes(n,"-")||"+"!==e.key&&"-"!==e.key)&&void 0)))}},t.prototype.onEnter=function(e){this.datavalue=e.target.value},t}(B),j={widgetType:"wm-number",hostClass:"app-input-wrapper"},V=function(e){function t(t,n,i){return e.call(this,t,j,n,i)||this}return c(t,e),t.initializeProps=F(),t.decorators=[{type:o.Component,args:[{selector:"[wmNumber]",template:'<input class="form-control app-textbox app-number-input"\n       inputmode="numeric"\n       focus-target\n       [attr.name]="name"\n       role="input"\n       type="text"\n       [ngModel]="displayValue"\n       [readonly]="readonly"\n       [disabled]="disabled"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (ngModelChange)="datavalue=$event"\n       (blur)="handleBlur($event)"\n       [ngModelOptions]="ngModelOptions"\n       [required]="required"\n       (keypress)="validateInputEntry($event)"\n       (keydown.enter)="onEnter($event)"\n       (keydown.ArrowUp)="onArrowPress($event, \'UP\')"\n       (keydown.ArrowDown)="onArrowPress($event, \'DOWN\')"\n       #input>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAs(t,r.NG_VALIDATORS,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:s.AbstractI18nService},{type:i.DecimalPipe}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(G),U=new Map([["class",a.PROP_STRING],["compareby",a.PROP_STRING],["datafield",a.PROP_STRING],["dataset",p({value:"Option 1, Option 2, Option 3"},a.PROP_ANY)],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["displayValue",a.PROP_STRING],["itemclass",p({value:""},a.PROP_STRING)],["layout",p({value:"stacked"},a.PROP_STRING)],["listclass",p({value:""},a.PROP_STRING)],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["show",p({value:!0},a.PROP_BOOLEAN)],["showindevice",p({displayType:"inline-block",value:"all"},a.PROP_STRING)],["tabindex",p({value:0},a.PROP_NUMBER)],["usekeys",a.PROP_BOOLEAN]]),W=function(){a.register("wm-radioset",U),a.registerFormWidget(s.FormWidgetType.RADIOSET,new Map(U))},q={widgetType:"wm-radioset",hostClass:"app-radioset list-group"},H=function(e){function t(t){var n=e.call(this,t,q)||this;return n.layout="",a.styler(n.nativeElement,n),n.multiple=!1,n}return c(t,e),t.prototype.onRadioLabelClick=function(e,t){$(e.target).is("input")&&(this.modelByKey=t,this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0))},t.prototype.handleEvent=function(t,n,i,o){"click"===n?this.eventManager.addEventListener(t,n,function(e){if($(e.target).is("input"))return o.$event=e,i()}):_.includes(["change"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("layout"===t?s.switchClass(this.nativeElement,n,i):e.prototype.onPropertyChange.call(this,t,n,i))},t.initializeProps=W(),t.decorators=[{type:o.Component,args:[{selector:"[wmRadioset]",exportAs:"wmRadioset",template:'<li [ngClass]="[\'radio\', \'app-radio\', itemclass]"\n    [class.active]="item.selected"\n    *ngFor="let item of datasetItems;let i = index"\n    (click)="onRadioLabelClick($event, item.key)">\n    <label class="app-radioset-label"\n           [ngClass]="{\'disabled\':disabled || readonly}"\n           [title]="item.label">\n        <input [name]="\'radioset_\' + widgetId" type="radio" [attr.aria-checked]="item.selected" [attr.data-attr-index]="i"\n               [value]="item.key" [disabled]="disabled || readonly" [tabindex]="tabindex" [checked]="item.selected"/>\n        <span class="caption" [textContent]="item.label"></span>\n    </label>\n</li>\n\n<input [disabled]="disabled || readonly" hidden class="model-holder">\n<div *ngIf="readonly || disabled" aria-readonly="true" class="readonly-wrapper"></div>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t}(S),z=new Map([["autofocus",a.PROP_BOOLEAN],["class",p({value:""},a.PROP_STRING)],["compareby",a.PROP_STRING],["datafield",a.PROP_STRING],["dataset",a.PROP_ANY],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["displayValue",a.PROP_STRING],["hint",a.PROP_STRING],["multiple",p({value:!1},a.PROP_BOOLEAN)],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["placeholder",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["usekeys",a.PROP_BOOLEAN]]),Y=function(){a.register("wm-select",z),a.registerFormWidget(s.FormWidgetType.SELECT,new Map(z)),a.registerFormWidget(s.FormWidgetType.TYPEAHEAD,new Map(z))},K={widgetType:"wm-select",hostClass:"app-select-wrapper"},Q=function(e){function t(t){var n=e.call(this,t,K)||this;return n.acceptsArray=!0,n}return c(t,e),Object.defineProperty(t.prototype,"datasource",{set:function(e){e&&e.execute&&e.execute(s.DataSource.Operation.IS_BOUND_TO_LOCALE)&&(this.datavalue=e.execute(s.DataSource.Operation.GET_DEFAULT_LOCALE))},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),a.styler(this.selectEl.nativeElement,this)},t.prototype.handleEvent=function(t,n,i,o){_.includes(["blur","change"],n)||e.prototype.handleEvent.call(this,this.selectEl.nativeElement,n,i,o)},t.prototype.onSelectValueChange=function(e){if(this.readonly)return this.placeholder?this.selectEl.nativeElement.value=this.placeholder:this.selectEl.nativeElement.value="",void(this.datavalue=this.prevDatavalue);this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)},t.prototype.onPropertyChange=function(t,n,i){"class"!==t&&"tabindex"!==t&&("readonly"===t&&(!0===n?s.setAttr(this.selectEl.nativeElement,"readonly","readonly"):s.removeAttr(this.selectEl.nativeElement,"readonly")),e.prototype.onPropertyChange.call(this,t,n,i))},t.initializeProps=Y(),t.decorators=[{type:o.Component,args:[{selector:"wm-select",template:'<select role="input" aria-haspopup="true" aria-expanded="false" #select\n        focus-target\n        [ngClass]="[\'app-select form-control\', class]"\n        [disabled]="disabled"\n        [required]="required"\n        [tabindex]="tabindex"\n        [(ngModel)]="modelByKey"\n        [multiple]="multiple"\n        (change)="onSelectValueChange($event)"\n        (blur)="invokeOnTouched($event)"\n        [attr.name]="name"\n        [autofocus]="autofocus"\n>\n  <option selected value="undefined" [textContent]="placeholder" [hidden]="!placeholder" ></option>\n  <option\n          *ngFor="let item of datasetItems"\n          [value]="item.key" [selected]="item.selected" [textContent]="item.label"></option>\n</select>\n',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={selectEl:[{type:o.ViewChild,args:["select",{read:o.ElementRef}]}]},t}(S),X=new Map([["class",a.PROP_STRING],["compareby",a.PROP_STRING],["datafield",a.PROP_STRING],["dataset",p({value:"yes, no, maybe"},a.PROP_ANY)],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["hint",a.PROP_STRING],["iconclass",a.PROP_STRING],["name",a.PROP_STRING],["orderby",a.PROP_STRING],["required",a.PROP_BOOLEAN],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)]]),Z=function(){a.register("wm-switch",X),a.registerFormWidget(s.FormWidgetType.SWITCH,new Map(X)),a.registerFormWidget(s.FormWidgetType.TOGGLE,new Map(X))},J={widgetType:"wm-switch",hostClass:"app-switch"},ee=function(e){function t(t){var n=e.call(this,t,J)||this;n.options=[],n._debounceSetSelectedValue=s.debounce(function(e){n.setSelectedValue(),n.updateHighlighter(e),e&&s.$appDigest()},200);var i=n.dataset$.subscribe(function(){return n.updateSwitchOptions()});n.registerDestroyListener(function(){return i.unsubscribe()});var o=n.datavalue$.subscribe(function(){n._debounceSetSelectedValue(!0)});return n.registerDestroyListener(function(){return o.unsubscribe()}),n}return c(t,e),t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),a.styler(this.nativeElement,this)},t.prototype.onStyleChange=function(t,n,i){"height"===t?s.setCSS(this.nativeElement,"overflow",n?"auto":""):e.prototype.onStyleChange.call(this,t,n,i)},t.prototype.setSelectedValue=function(){s.isDefined(this.datavalue)||s.isDefined(this.toBeProcessedDatavalue)?this.selectedItem=_.find(this.datasetItems,{selected:!0}):this.selectOptAtIndex(0)},t.prototype.updateSwitchOptions=function(){this.datasetItems.length&&(this.btnwidth=100/this.datasetItems.length,s.setCSS(this.nativeElement.querySelector(".app-switch-overlay"),"width",this.btnwidth+"%")),this._debounceSetSelectedValue(!0)},t.prototype.updateHighlighter=function(e){var t=$(this.nativeElement).find("span.app-switch-overlay");this.setSelectedValue();var n,i=this.selectedItem?_.findIndex(this.datasetItems,{key:this.selectedItem.key}):-1;null==i&&(i=-1),n=i*this.btnwidth,e?t.css("left",n+"%"):t.animate({left:n+"%"},300)},t.prototype.selectOptAtIndex=function(e){if(this.datasetItems.length){var t=this.datasetItems[e];this._modelByValue=t.value}},t.prototype.selectOpt=function(e,t,n){if(this.modelByKey=n.key,this.invokeOnTouched(),e.preventDefault(),!this.disabled){if(this.selectedItem&&t===_.findIndex(this.datasetItems,{key:this.selectedItem.key})){if(2!==this.datasetItems.length)return;t=1===t?0:1}this.selectedItem=this.datasetItems[t],this.updateHighlighter(),this.invokeOnChange(this.datavalue,e||{},!0),s.$appDigest()}},t.prototype.onPropertyChange=function(t,n,i){"disabled"!==t||s.toBoolean(n)?e.prototype.onPropertyChange.call(this,t,n,i):this.nativeElement.removeAttribute(t)},t.initializeProps=Z(),t.decorators=[{type:o.Component,args:[{selector:"[wmSwitch]",template:'<div role="group" aria-label="button switch" class="btn-group btn-group-justified">\n    <a *ngFor="let opt of datasetItems; let $index = index;"\n       [title]="opt.label" focus-target\n       href="javascript:void(0);"\n       class="btn btn-default"\n       [name]="\'wm-switch-\' + opt.key"\n       [ngClass]="{\'selected\': opt.selected, \'disabled\': disabled}"\n       (click)="selectOpt($event, $index, opt)"\n    >\n        <i *ngIf="opt.dataObject && opt.dataObject[iconclass]" aria-hidden="true" [ngClass]="[\'app-icon\', opt.dataObject[iconclass] || opt[\'icon\']]"></i>\n        <span class="caption" [textContent]="opt[displayfield] || opt.label"></span>\n    </a>\n</div>\n<span [title]="selectedItem ? selectedItem.label : modelByKey"\n      class="btn btn-primary app-switch-overlay switch-handle">\n    <i *ngIf="iconclass"\n       class="app-icon {{(selectedItem && selectedItem.dataObject) && selectedItem.dataObject[iconclass]}}"></i>\n    {{selectedItem ? selectedItem.label : modelByKey}}\n</span>\n<input [name]="name" class="model-holder ng-hide" [disabled]="disabled" [value]="modelByKey" [required]="required">\n',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t}(S),te=new Map([["autocomplete",p({value:!0},a.PROP_BOOLEAN)],["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datasource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxvalue",a.PROP_NUMBER],["minvalue",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",p({value:"Enter text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["step",a.PROP_NUMBER],["tabindex",p({value:0},a.PROP_NUMBER)],["type",a.PROP_STRING],["updateon",a.PROP_STRING]]),ne=function(){a.register("wm-input-calendar",te)},ie={widgetType:"wm-input-calendar",hostClass:"app-input-wrapper"},oe=function(e){function t(t){return e.call(this,t,ie)||this}return c(t,e),t.initializeProps=ne(),t.decorators=[{type:o.Component,args:[{selector:'wm-input[type="date"], wm-input[type="datetime-local"], wm-input[type="month"], wm-input[type="time"], wm-input[type="week"]',template:'<input class="form-control app-textbox"\n       focus-target\n       role="input"\n       [type]="type"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [min]="minvalue"\n       [max]="maxvalue"\n       [step]="step"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       #input>\n',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),re=new Map([["autocomplete",p({value:!0},a.PROP_BOOLEAN)],["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["name",a.PROP_STRING],["placeholder",p({value:"Enter text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["type",a.PROP_STRING],["updateon",a.PROP_STRING]]),ae=function(){a.register("wm-input-color",re)},se={widgetType:"wm-input-color",hostClass:"app-input-wrapper"},le=function(e){function t(t){return e.call(this,t,se)||this}return c(t,e),t.initializeProps=ae(),t.decorators=[{type:o.Component,args:[{selector:'wm-input[type="color"]',template:'<input class="form-control app-textbox"\n       focus-target\n       type="color"\n       role="input"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       #input>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),ce=new Map([["autocomplete",p({value:!0},a.PROP_BOOLEAN)],["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxchars",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",p({value:"Enter text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["regexp",a.PROP_STRING],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["type",a.PROP_STRING],["updateon",a.PROP_STRING]]),pe=function(){a.register("wm-input-email",ce)},ue={widgetType:"wm-input-email",hostClass:"app-input-wrapper"},de=function(e){function t(t){return e.call(this,t,ue)||this}return c(t,e),t.initializeProps=pe(),t.decorators=[{type:o.Component,args:[{selector:'wm-input[type="email"]',template:'<input class="form-control app-textbox"\n       focus-target\n       role="input"\n       type="email"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       email\n       #input>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),me=new Map([["autocomplete",p({value:!0},a.PROP_BOOLEAN)],["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxchars",a.PROP_NUMBER],["maxvalue",a.PROP_NUMBER],["minvalue",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",p({value:"Enter text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["regexp",a.PROP_STRING],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["step",a.PROP_NUMBER],["tabindex",p({value:0},a.PROP_NUMBER)],["type",a.PROP_STRING],["updateon",a.PROP_STRING]]),he=function(){a.register("wm-input-number",me)},fe={widgetType:"wm-input-number",hostClass:"app-input-wrapper"},ge=function(e){function t(t){return e.call(this,t,fe)||this}return c(t,e),t.prototype.onArrowPress=function(e){0===this.step&&e.preventDefault()},t.prototype.validateInputEntry=function(e){if("e"===e.key&&-1!==e.target.value.indexOf(e.key))return!1},t.initializeProps=he(),t.decorators=[{type:o.Component,args:[{selector:'wm-input[type="number"]',template:'<input class="form-control app-textbox"\n       [ngClass]="{\'step-hidden\': step === 0}"\n       focus-target\n       role="input"\n       type="number"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [min]="minvalue"\n       [max]="maxvalue"\n       [step]="step"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (blur)="handleBlur($event)"\n       (ngModelChange)="handleChange($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       (keydown.ArrowUp)="onArrowPress($event)"\n       (keydown.ArrowDown)="onArrowPress($event)"\n       (keypress)="validateInputEntry($event)"\n       #input>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),ve=new Map([["autocomplete",p({value:!0},a.PROP_BOOLEAN)],["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["displayformat",a.PROP_STRING],["hint",a.PROP_STRING],["maxchars",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",p({value:"Enter text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["regexp",a.PROP_STRING],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["type",p({value:"text"},a.PROP_STRING)],["updateon",a.PROP_STRING]]),ye=function(){a.register("wm-input-text",ve),a.registerFormWidget(s.FormWidgetType.PASSWORD,new Map(ve));var e=new Map(ve),t=function(t){t.forEach(function(t,n){return e.set(n,t)})};t(te),t(re),t(ce),t(me),a.registerFormWidget(s.FormWidgetType.TEXT,new Map(e))},be={widgetType:"wm-input-text",hostClass:"app-input-wrapper"},we=function(e){function t(t){return e.call(this,t,be)||this}return c(t,e),t.prototype.onPropertyChange=function(t,n,i){var o=this;switch(t){case"displayformat":this.maskVal=[],_.forEach(this.displayformat,function(e){"9"===e?o.maskVal.push(/\d/):"A"===e?o.maskVal.push(/[A-Z, a-z]/):"a"===e?o.maskVal.push(/[a-z]/):"*"===e?o.maskVal.push(/\w/):o.maskVal.push(e)});break;default:e.prototype.onPropertyChange.call(this,t,n,i)}},Object.defineProperty(t.prototype,"mask",{get:function(){return this.displayformat?{mask:this.maskVal,showMask:!0}:{mask:!1}},enumerable:!0,configurable:!0}),t.initializeProps=ye(),t.decorators=[{type:o.Component,args:[{selector:'wm-input[type="text"], wm-input:not([type]), wm-input[type="password"], wm-input[type="search"], wm-input[type="tel"], wm-input[type="url"]',template:'<input class="form-control app-textbox"\n       focus-target\n       role="input"\n       [type]="type"\n       [attr.name]="name"\n       [(ngModel)]="datavalue"\n       [textMask]="mask"\n       [ngModelOptions]="ngModelOptions"\n       [readonly]="readonly"\n       [required]="required"\n       [disabled]="disabled"\n       [maxlength]="maxchars"\n       [pattern]="regexp"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [autofocus]="autofocus"\n       (ngModelChange)="handleChange($event)"\n       (blur)="handleBlur($event)"\n       [autocomplete]="autocomplete ? \'on\' : \'off\'"\n       (keyup.enter)="flushViewChanges(input.value)"\n       #input>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["input"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),Pe=new Map([["autofocus",a.PROP_BOOLEAN],["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["maxchars",a.PROP_NUMBER],["name",a.PROP_STRING],["placeholder",p({value:"Place your text"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",p({value:!0},a.PROP_BOOLEAN)],["tabindex",p({value:0},a.PROP_NUMBER)],["updateon",a.PROP_STRING]]),_e=function(){a.register("wm-textarea",Pe),a.registerFormWidget(s.FormWidgetType.TEXTAREA,new Map(Pe))},Oe={widgetType:"wm-textarea",hostClass:"app-input-wrapper"},Re=function(e){function t(t){return e.call(this,t,Oe)||this}return c(t,e),t.initializeProps=_e(),t.decorators=[{type:o.Component,args:[{selector:"wm-textarea",template:'<textarea class="form-control app-textarea"\n          focus-target\n          role="input"\n          [attr.name]="name"\n          [(ngModel)]="datavalue"\n          [ngModelOptions]="ngModelOptions"\n          [readonly]="readonly"\n          [required]="required"\n          [disabled]="disabled"\n          [maxlength]="maxchars"\n          [attr.tabindex]="tabindex"\n          [attr.placeholder]="placeholder"\n          [attr.accesskey]="shortcutkey"\n          [autofocus]="autofocus"\n          (blur)="handleBlur($event)"\n          (ngModelChange)="handleChange($event)"\n          #textarea\n></textarea>',providers:[a.provideAs(t,r.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t.propDecorators={inputEl:[{type:o.ViewChild,args:["textarea"]}],ngModel:[{type:o.ViewChild,args:[r.NgModel]}]},t}(B),Ee=[f,y,T,D,k,V,H,Q,ee,oe,le,de,ge,we,Re],Te=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[i.CommonModule,r.FormsModule,t.TextMaskModule,a.WmComponentsModule],declarations:d(Ee),exports:d(Ee),entryComponents:[]}]}],e}();e.\u0275b=y,e.\u0275c=g,e.\u0275a=m,e.\u0275d=T,e.\u0275e=O,e.\u0275f=D,e.\u0275g=I,e.\u0275h=k,e.\u0275i=N,e.\u0275j=V,e.\u0275l=F,e.\u0275m=H,e.\u0275n=W,e.\u0275o=Q,e.\u0275p=Y,e.\u0275q=ee,e.\u0275r=Z,e.\u0275k=B,e.\u0275s=oe,e.\u0275t=ne,e.\u0275u=le,e.\u0275v=ae,e.\u0275w=de,e.\u0275x=pe,e.\u0275y=ge,e.\u0275z=he,e.\u0275ba=we,e.\u0275bb=ye,e.\u0275bc=Re,e.\u0275bd=_e,e.InputModule=Te,e.ButtonComponent=f,e.NumberLocale=G,e.BaseFormComponent=b,e.BaseFormCustomComponent=w,e.DatasetAwareFormComponent=S,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/basic",["exports","@angular/common","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic={}),e.ng.common,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){o.register("wm-anchor",new Map([["animation",o.PROP_STRING],["badgevalue",o.PROP_STRING],["caption",s({value:"Link"},o.PROP_STRING)],["class",o.PROP_STRING],["conditionalclass",o.PROP_ANY],["conditionalstyle",o.PROP_ANY],["encodeurl",o.PROP_BOOLEAN],["hint",o.PROP_STRING],["hyperlink",s({value:""},o.PROP_STRING)],["iconclass",o.PROP_STRING],["iconheight",o.PROP_STRING],["iconmargin",o.PROP_STRING],["iconposition",o.PROP_STRING],["iconurl",o.PROP_STRING],["iconwidth",o.PROP_STRING],["name",o.PROP_STRING],["shortcutkey",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["tabindex",s({value:0},o.PROP_NUMBER)],["target",s({value:"_self"},o.PROP_STRING)]]))},u={widgetType:"wm-anchor",hostClass:"app-anchor",displayType:o.DISPLAY_TYPE.INLINE_BLOCK},d=/Actions.goToPage_(\w+)\.invoke\(\)/g,m=function(e){e.preventDefault()},h=function(e){function t(t,n){var r=e.call(this,t,u)||this;return r.app=n,r._eventNotifier=new i.EventNotifier(!1),o.styler(r.nativeElement,r),r}return a(t,e),t.prototype.processEventAttr=function(t,n,o){var r=this;if(e.prototype.processEventAttr.call(this,t,n,o),!this.hasNavigationToCurrentPageExpr){var a=this.inj.get(i.App);n.split(";").map(Function.prototype.call,String.prototype.trim).some(function(e){d.lastIndex=0;var t=d.exec(e);return r.hasGoToPageExpr=t&&t.length>0,r.hasGoToPageExpr&&t[1]===a.activePageName})&&(this.hasNavigationToCurrentPageExpr=!0)}},t.prototype.onActive=function(e){this._eventNotifier.subscribe("on-active",e)},t.prototype.handleEvent=function(t,n,i,o,r){var a=this;e.prototype.handleEvent.call(this,t,n,function(e){a.hasGoToPageExpr&&o.$event&&o.$event.preventDefault(),i()},o,r)},t.prototype.onPropertyChange=function(t,n,o){if("hyperlink"===t){if(!n)return i.setAttr(this.nativeElement,"href","javascript:void(0)"),void this.nativeElement.addEventListener("contextmenu",m);this.encodeurl&&(n=i.encodeUrl(n)),n.startsWith("www.")&&(n="//"+n),i.setAttr(this.nativeElement,"href",n),this.nativeElement.removeEventListener("contextmenu",m)}else e.prototype.onPropertyChange.call(this,t,n,o)},t.prototype.ngAfterViewInit=function(){var t=this;e.prototype.ngAfterViewInit.call(this),this.hasNavigationToCurrentPageExpr&&i.addClass(this.nativeElement,"active"),setTimeout(function(){(t.hyperlink&&i.getRouteNameFromLink(t.hyperlink)==="/"+t.app.activePageName||t.hasNavigationToCurrentPageExpr)&&t._eventNotifier.notify("on-active",{})})},t.prototype.ngOnDestroy=function(){this._eventNotifier.destroy()},t.initializeProps=p(),t.decorators=[{type:n.Component,args:[{selector:"a[wmAnchor]",template:'<img data-identifier="img" alt="Image" class="anchor-image-icon" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}"/>\n<i class="app-icon {{iconclass}}" aria-hidden="true" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}" *ngIf="iconclass"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption | trustAs:\'html\'}} {{appLocale.LABEL_ICON}}</span>\n<span class="anchor-caption" [innerHTML]="caption | trustAs:\'html\'"></span>\n<ng-content select=".caret"></ng-content>\n<span *ngIf="badgevalue" class="badge pull-right" [textContent]="badgevalue"></span>',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:i.App}]},t.propDecorators={target:[{type:n.HostBinding,args:["target"]}],shortcutkey:[{type:n.HostBinding,args:["attr.accesskey"]}],iconposition:[{type:n.HostBinding,args:["attr.icon-position"]}]},t}(o.StylableComponent),f=function(){o.register("wm-audio",new Map([["audiopreload",s({value:"none"},o.PROP_STRING)],["audiosupportmessage",s({value:"Your browser does not support the audio tag."},o.PROP_STRING)],["autoplay",o.PROP_BOOLEAN],["class",o.PROP_STRING],["controls",o.PROP_BOOLEAN],["hint",o.PROP_STRING],["loop",o.PROP_BOOLEAN],["mp3format",o.PROP_STRING],["muted",o.PROP_BOOLEAN],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["tabindex",s({value:0},o.PROP_NUMBER)]]))},g={widgetType:"wm-audio",hostClass:"app-audio",displayType:o.DISPLAY_TYPE.INLINE_BLOCK},v=function(e){function t(t){var n=e.call(this,t,g)||this;return o.styler(n.nativeElement,n),n}return a(t,e),t.initializeProps=f(),t.decorators=[{type:n.Component,args:[{selector:"[wmAudio]",template:'<audio [src]="mp3format | trustAs: \'resource\'" [muted]="muted" [autoplay]="autoplay" [controls]="controls" [loop]="loop" [preload]="audiopreload" role="application" aria-describedby="recorded audio">\n    <source type="audio/mp3" [src]="mp3format | trustAs: \'resource\'">\n    {{audiosupportmessage}}\n</audio>\n',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(o.StylableComponent),y=function(){o.register("wm-html",new Map([["class",o.PROP_STRING],["content",o.PROP_STRING],["hint",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]))},b={widgetType:"wm-html",hostClass:"app-html-container"},w=function(e){function t(t,n,r,a){var s=e.call(this,t,b)||this;return s.boundContent=r,s.trustAsPipe=a,n&&i.setCSS(s.nativeElement,"overflow","auto"),o.styler(s.nativeElement,s),s}return a(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.boundContent&&(this.nativeElement.innerHTML=""),!this.content&&this.nativeElement.innerHTML&&(this.content=this.nativeElement.innerHTML)},t.prototype.onPropertyChange=function(t,o,r){"content"===t?i.setProperty(this.nativeElement,"innerHTML",this.trustAsPipe.transform(o,n.SecurityContext.HTML)):e.prototype.onPropertyChange.call(this,t,o,r)},t.initializeProps=y(),t.decorators=[{type:n.Directive,args:[{selector:"[wmHtml]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:String,decorators:[{type:n.Attribute,args:["height"]}]},{type:String,decorators:[{type:n.Attribute,args:["content.bind"]}]},{type:o.TrustAsPipe}]},t}(o.StylableComponent),P=function(){o.register("wm-icon",new Map([["animation",o.PROP_STRING],["caption",o.PROP_STRING],["class",o.PROP_STRING],["conditionalclass",o.PROP_ANY],["conditionalstyle",o.PROP_ANY],["hint",o.PROP_STRING],["iconclass",s({value:"wi wi-star-border"},o.PROP_STRING)],["iconposition",s({value:"left"},o.PROP_STRING)],["iconsize",o.PROP_STRING],["iconurl",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]))},O={widgetType:"wm-icon",hostClass:"app-icon-wrapper"},R=function(e){function t(t){var n=e.call(this,t,O)||this;return o.styler(n.nativeElement,n),n}return a(t,e),t.initializeProps=P(),t.decorators=[{type:n.Component,args:[{selector:"[wmIcon]",template:'<i class="app-icon {{iconclass}}"></i>\n<span class="sr-only" *ngIf="iconclass">{{caption}} {{appLocale.LABEL_ICON}}</span>\n<label class="app-label" [textContent]="caption" *ngIf="caption"></label>',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={iconposition:[{type:n.HostBinding,args:["attr.icon-position"]}],iconsize:[{type:n.HostBinding,args:["style.fontSize"]}]},t}(o.StylableComponent),E=function(){o.register("wm-iframe",new Map([["class",o.PROP_STRING],["encodeurl",o.PROP_BOOLEAN],["height",s({value:"150px"},o.PROP_STRING)],["iframesrc",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["width",s({value:"300px"},o.PROP_STRING)]]))},T={widgetType:"wm-iframe",hostClass:"embed-responsive app-iframe"},S=function(e){function t(t,n){var i=e.call(this,t,T)||this;return i.trustAsPipe=n,i.showContentLoadError=!1,o.styler(i.nativeElement,i),i}return a(t,e),t.prototype.computeIframeSrc=function(){if(this.showContentLoadError=!1,this._iframesrc=void 0,this.iframesrc){var e=this.iframesrc;this.encodeurl&&(e=i.encodeUrl(this.iframesrc));var t=this.trustAsPipe.transform(e,n.SecurityContext.RESOURCE_URL);i.isInsecureContentRequest(e)&&(this.showContentLoadError=!0,this.errorMsg=this.appLocale.MESSAGE_ERROR_CONTENT_DISPLAY+" "+this.iframesrc,this.hintMsg=this.errorMsg),this._iframesrc=t}},t.prototype.onPropertyChange=function(t,n,i){"iframesrc"===t||"encodeurl"===t?this.computeIframeSrc():e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=E(),t.decorators=[{type:n.Component,args:[{selector:"[wmIframe]",template:'<iframe title="" class="embed-responsive-item iframe-content" role="document"\n        scrolling="auto"\n        marginheight="0"\n        marginwidth="0"\n        frameborder="0"\n        [name]="name"\n        [attr.src]="_iframesrc"\n        seamless="seamless">\n</iframe>\n<div class="wm-content-info readonly-wrapper" *ngIf="showContentLoadError">\n    <p class="wm-message" [title]="hintMsg" [textContent]="errMsg"></p>\n</div>',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.TrustAsPipe}]},t}(o.StylableComponent),C=function(){o.register("wm-label",new Map([["animation",o.PROP_STRING],["caption",s({value:"Label"},o.PROP_STRING)],["class",o.PROP_STRING],["conditionalclass",o.PROP_ANY],["conditionalstyle",o.PROP_ANY],["hint",o.PROP_STRING],["name",o.PROP_STRING],["required",o.PROP_BOOLEAN],["show",s({value:!0},o.PROP_BOOLEAN)]]))},I={widgetType:"wm-label",hostClass:"app-label",displayType:o.DISPLAY_TYPE.INLINE_BLOCK},A=function(e){function t(t,n){var i=e.call(this,t,I)||this;return i.trustAsPipe=n,o.styler(i.nativeElement,i),i}return a(t,e),t.prototype.onPropertyChange=function(t,o,r){"caption"===t?_.isObject(o)?i.setProperty(this.nativeElement,"textContent",JSON.stringify(o)):i.setProperty(this.nativeElement,"innerHTML",this.trustAsPipe.transform(o,n.SecurityContext.HTML)):"required"===t?i.toggleClass(this.nativeElement,"required",o):e.prototype.onPropertyChange.call(this,t,o,r)},t.initializeProps=C(),t.decorators=[{type:n.Directive,args:[{selector:"[wmLabel]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.TrustAsPipe}]},t}(o.StylableComponent),D=function(){var e=new Map([["animation",o.PROP_STRING],["class",o.PROP_STRING],["conditionalclass",o.PROP_ANY],["conditionalstyle",o.PROP_ANY],["encodeurl",o.PROP_STRING],["hint",o.PROP_STRING],["name",o.PROP_STRING],["pictureaspect",s({value:"None"},o.PROP_STRING)],["pictureplaceholder",o.PROP_STRING],["picturesource",o.PROP_STRING],["shape",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["tabindex",s({value:0},o.PROP_NUMBER)]]);i.isMobileApp()&&e.set("offline",s({value:!0},o.PROP_BOOLEAN)),o.register("wm-picture",e)},N={widgetType:"wm-picture",hostClass:"app-picture",displayType:o.DISPLAY_TYPE.INLINE_BLOCK},x=function(e){function t(t,n){var i=e.call(this,t,N)||this;return i.imagePipe=n,o.styler(i.nativeElement,i),i}return a(t,e),t.prototype.setImgSource=function(){this.imgSource=this.imagePipe.transform(this.picturesource,this.encodeurl,this.pictureplaceholder)},t.prototype.onPropertyChange=function(t,n,o){if("pictureaspect"===t){var r="",a="";switch(n){case"None":r=this.width,a=this.height;break;case"H":r="100%";break;case"V":a="100%";break;case"Both":r="100%",a="100%"}i.setCSS(this.nativeElement,"width",r,!0),i.setCSS(this.nativeElement,"height",a,!0)}else"encodeurl"===t||"pictureplaceholder"===t?this.setImgSource():"shape"===t?i.switchClass(this.nativeElement,"img-"+n,"img-"+o):"hint"===t&&i.setAttr(this.nativeElement,"alt",n);e.prototype.onPropertyChange.call(this,t,n,o)},t.prototype.onStyleChange=function(t,n,i){"picturesource"===t?this.setImgSource():e.prototype.onStyleChange.call(this,t,n,i)},t.prototype.ngOnInit=function(){this.setImgSource(),e.prototype.ngOnInit.call(this)},t.initializeProps=D(),t.decorators=[{type:n.Directive,args:[{selector:"img[wmPicture]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.ImagePipe}]},t.propDecorators={imgSource:[{type:n.HostBinding,args:["src"]}]},t}(o.StylableComponent),M=function(){o.register("wm-spinner",new Map([["animation",{value:"spin",PROP_STRING:o.PROP_STRING}],["caption",s({value:"Loading..."},o.PROP_STRING)],["class",o.PROP_STRING],["iconclass",s({value:"fa fa-circle-o-notch fa-spin"},o.PROP_STRING)],["iconsize",o.PROP_STRING],["image",o.PROP_STRING],["imageheight",o.PROP_STRING],["imagewidth",s({value:"20px"},o.PROP_STRING)],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["type",s({value:"icon"},o.PROP_STRING)],["servicevariabletotrack",o.PROP_STRING]]))},k={widgetType:"wm-spinner",hostClass:"app-spinner"},L=function(e){function t(t,n){var i=e.call(this,t,k)||this;return i.imagePipe=n,i.iconclass="",i.animation="",i.showCaption=!0,o.styler(i.nativeElement,i),i}return a(t,e),Object.defineProperty(t.prototype,"spinnerMessages",{get:function(){return this._spinnerMessages},set:function(e){this.showCaption=_.isEmpty(e),this._spinnerMessages=e},enumerable:!0,configurable:!0}),t.prototype.listenOnDataSource=function(){var e=this,t=_.split(this.servicevariabletotrack,",");this.getAppInstance().subscribe("toggle-variable-state",function(n){var o=n.variable.execute(i.DataSource.Operation.GET_NAME);_.includes(t,o)&&i.validateDataSourceCtx(n.variable,e.getViewParent())&&(e.widget.show=n.active)})},t.prototype.onPropertyChange=function(t,n,i){"image"===t?this.picture=this.imagePipe.transform(n):"animation"===t?this.animation="spin"===n?"fa-spin":n||"":e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.servicevariabletotrack&&(this.widget.show=!1,this.listenOnDataSource())},t.initializeProps=M(),t.decorators=[{type:n.Component,args:[{selector:"[wmSpinner]",template:'<div class="spinner-message" aria-label="loading gif">\n    <span class="spinner-image animated infinite" [ngClass]="animation" aria-hidden="true"\n        [ngStyle]="{width: imagewidth, height: imageheight, backgroundImage: \'url(\' + picture + \')\', backgroundSize: imagewidth}"\n        *ngIf="type === \'image\'"></span>\n    <i class="spinner-image animated infinite" [ngClass]="[iconclass, animation]" [style.fonSize]="iconsize" *ngIf="type === \'icon\'"></i>\n    <span class="spinner-text" [innerHTML]="caption | trustAs: \'html\'" *ngIf="showCaption"></span>\n    <div class="spinner-messages" *ngIf="!showCaption && spinnerMessages">\n        <p *ngFor="let value of spinnerMessages" [textContent]="value"></p>\n    </div>\n</div>',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.ImagePipe}]},t}(o.StylableComponent),F=function(){o.register("wm-video",new Map([["autoplay",o.PROP_BOOLEAN],["class",o.PROP_STRING],["controls",o.PROP_BOOLEAN],["hint",o.PROP_STRING],["loop",o.PROP_BOOLEAN],["mp4format",o.PROP_STRING],["muted",o.PROP_BOOLEAN],["name",o.PROP_STRING],["oggformat",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["subtitlelang",s({value:"en"},o.PROP_STRING)],["subtitlesource",o.PROP_STRING],["tabindex",s({value:0},o.PROP_NUMBER)],["videoposter",s({value:"resources/images/imagelists/default-image.png"},o.PROP_STRING)],["videopreload",s({value:"none"},o.PROP_STRING)],["videosupportmessage",s({value:"Your browser does not support the video tag."},o.PROP_STRING)],["webmformat",o.PROP_STRING]]))},B={widgetType:"wm-video",hostClass:"app-video",displayType:o.DISPLAY_TYPE.INLINE_BLOCK},G=function(e){function t(t,n){var i=e.call(this,t,B)||this;return i.trustAsPipe=n,i.subtitlelang="en",o.styler(i.nativeElement,i),i}return a(t,e),t.prototype.onPropertyChange=function(t,o,r){if("subtitlesource"===t){var a=this.nativeElement.querySelector("track");a&&i.removeNode(a,!0),a=i.createElement("track",{kind:"subtitles",label:this.subtitlelang,srclang:this.subtitlelang,src:this.trustAsPipe.transform(o,n.SecurityContext.RESOURCE_URL),default:""},!0),i.appendNode(a,this.nativeElement.querySelector("video"))}e.prototype.onPropertyChange.call(this,t,o,r)},t.initializeProps=F(),t.decorators=[{type:n.Component,args:[{selector:"[wmVideo]",template:'<video [preload]="videopreload" role="application"\n       [src]="mp4format | trustAs: \'resource\'"\n       [muted]="muted"\n       [poster]="videoposter | image"\n       [controls]="controls"\n       [loop]="loop"\n       [autoplay]="autoplay">\n    <source type="video/mp4" [src]="mp4format | trustAs: \'resource\'" *ngIf="mp4format">\n    <source type="video/webm" [src]="webmformat | trustAs: \'resource\'" *ngIf="webmformat">\n    <source type="video/ogg" [src]="oggformat | trustAs: \'resource\'" *ngIf="oggformat">\n    {{videosupportmessage}}\n</video>',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.TrustAsPipe}]},t}(o.StylableComponent),j=[h,v,w,R,S,A,x,L,G],V=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:c(j),exports:c(j),entryComponents:[]}]}],e}();e.\u0275a=p,e.\u0275b=v,e.\u0275c=f,e.\u0275d=w,e.\u0275e=y,e.\u0275f=R,e.\u0275g=P,e.\u0275h=S,e.\u0275i=E,e.\u0275j=A,e.\u0275k=C,e.\u0275l=x,e.\u0275m=D,e.\u0275n=L,e.\u0275o=M,e.\u0275p=G,e.\u0275q=F,e.disableContextMenu=m,e.AnchorComponent=h,e.BasicModule=V,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/core"),require("@angular/core"),require("ng-circle-progress"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/basic/progress",["exports","@angular/common","@wm/core","@angular/core","ng-circle-progress","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.progress={}),e.ng.common,e.wm.core,e.ng.core,e.ngCircleProgress,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){r.register("wm-progress-bar",new Map([["captionplacement",l({value:"hidden"},r.PROP_STRING)],["class",r.PROP_STRING],["dataset",r.PROP_ANY],["datavalue",r.PROP_STRING],["displayformat",r.PROP_STRING],["hint",r.PROP_STRING],["maxvalue",l({value:100},r.PROP_NUMBER)],["minvalue",l({value:0},r.PROP_NUMBER)],["name",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["tabindex",l({value:0},r.PROP_NUMBER)],["type",l({value:"default"},r.PROP_STRING)]]))},d=function(e){var t=(e=(e=e||"9").replace(/\%$/,"")).lastIndexOf(".");return-1===t?0:e.length-t-1},m=function(e){return!!n.isString(e)&&"%"===(e=e.trim()).charAt(e.length-1)},h={widgetType:"wm-progress-bar",hostClass:"progress app-progress"},f={default:"","default-striped":"progress-bar-striped",success:"progress-bar-success","success-striped":"progress-bar-success progress-bar-striped",info:"progress-bar-info","info-striped":"progress-bar-info progress-bar-striped",warning:"progress-bar-warning","warning-striped":"progress-bar-warning progress-bar-striped",danger:"progress-bar-danger","danger-striped":"progress-bar-danger progress-bar-striped"},g=function(e){function t(t,n,i){var o=e.call(this,t,h)||this;return o.data=[{cls:f.default,progressBarWidth:"0%",displayValue:"0"}],o.hasDataset=!(!n&&!i),r.styler(o.nativeElement,o),o._prepareData=_.debounce(function(){return o.prepareData()},50),o}return s(t,e),t.prototype.onTypeChange=function(){this.hasDataset||this.data[0]&&(this.data[0].cls=f[this.type])},t.prototype.getFormattedDisplayVal=function(e){var t=this.displayformat||"9";return e=(e=parseFloat(""+e)).toFixed(d(t)),t&&t.includes("%")&&(e+="%"),e},t.prototype.prepareData=function(){var e=this;if(this.dataset&&_.isArray(this.dataset)&&this.type&&this.datavalue)this.data=this.dataset.map(function(t){var i=n.findValueOf(t,e.datavalue).toString(),o=i;return i&&!i.includes("%")&&(o=i+"%"),{cls:f[n.findValueOf(t,e.type)],progressBarWidth:o,displayValue:e.getFormattedDisplayVal(i)}});else{var t=0,i=0;if(this.datavalue)if(m(this.datavalue))t=i=this.datavalue||"0%";else if(n.isDefined(this.datavalue)){var o=+this.maxvalue-+this.minvalue||1;t=i=100*(+this.datavalue-+this.minvalue)/o+"%"}this.data[0].displayValue=this.getFormattedDisplayVal(i),this.data[0].progressBarWidth=t,this.data[0].cls=f[this.type]}},t.prototype.onPropertyChange=function(t,n,i){"type"===t?this.onTypeChange():"minvalue"===t||"maxvalue"===t||"datavalue"===t||"dataset"===t||"displayformat"===t?this._prepareData():e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"[wmProgressBar]",template:'<div class="multi-bar progress-bar {{bar.cls}}" *ngFor="let bar of data" [style.width]="bar.progressBarWidth" role="progressbar"\n     [attr.aria-valuenow]="datavalue" [attr.aria-valuemin]="minvalue" [attr.aria-valuemax]="maxvalue">\n    <span class="app-progress-label" [attr.data-caption-placement]="captionplacement">{{bar.displayValue}}</span>\n</div>',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["dataset"]}]},{type:String,decorators:[{type:i.Attribute,args:["dataset.bind"]}]}]},t}(r.StylableComponent),v=function(){r.register("wm-progress-circle",new Map([["captionplacement",l({value:"inside"},r.PROP_STRING)],["class",r.PROP_STRING],["dataset",r.PROP_ANY],["datavalue",l({value:"30"},r.PROP_STRING)],["displayformat",l({value:"9%"},r.PROP_STRING)],["hint",r.PROP_STRING],["maxvalue",l({value:100},r.PROP_NUMBER)],["minvalue",l({value:0},r.PROP_NUMBER)],["name",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["subtitle",r.PROP_STRING],["tabindex",l({value:0},r.PROP_NUMBER)],["title",r.PROP_STRING],["type",l({value:"default"},r.PROP_STRING)]]))},y={widgetType:"wm-progress-circle",hostClass:"progress app-progress circle"},b={responsive:!0,innerStrokeWidth:10,outerStrokeWidth:10,unitsFontSize:"15",space:-10,toFixed:0,maxPercent:100,showSubtitle:!1,clockwise:!0,startFromZero:!1,renderOnClick:!1,innerStrokeColor:"",outerStrokeColor:""},w={default:"",success:"progress-circle-success",info:"progress-circle-info",warning:"progress-circle-warning",danger:"progress-circle-danger"},P=function(e){function t(t){var n=e.call(this,t,y)||this;return r.styler(n.nativeElement,n),n.options=_.clone(b),n.redraw=_.debounce(n._redraw,100),n}return s(t,e),t.prototype._redraw=function(){this.circleRef.render()},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this.options=Object.assign(this.circleRef.options,this.options)},t.prototype.updateDisplayValueFormat=function(){this.options.showTitle=this.options.showSubtitle="inside"===this.captionplacement,this.options.showUnits=!this.title&&this.options.showTitle&&m(this.displayformat),this.options.toFixed=d(this.displayformat),this.options.showTitle&&(this.options.title=this.title||"auto",this.options.showSubtitle=!!this.subtitle,this.options.subtitle=this.subtitle||""),this.redraw()},t.prototype.onPropertyChange=function(t,n,i){switch(t){case"type":this.$element.removeClass(w[i]),this.$element.addClass(w[n]);break;case"minvalue":case"maxvalue":case"datavalue":m(this.datavalue)?this.percentagevalue=parseFloat(this.datavalue):this.percentagevalue=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var i=(e-t)/(n-t)*100;return _.isNaN(i)?(console.warn("Circle Progress Bar: One of the properties Min, Max or datavalue is not a valid number"),0):Math.abs(i)}(parseFloat(this.datavalue),this.minvalue,this.maxvalue);break;case"displayformat":case"captionplacement":case"title":case"subtitle":this.updateDisplayValueFormat()}e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=v(),t.decorators=[{type:i.Component,args:[{selector:"[wmProgressCircle]",template:'<circle-progress [percent]="percentagevalue" [options]="options"></circle-progress>\n',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t.propDecorators={circleRef:[{type:i.ViewChild,args:[o.CircleProgressComponent]}]},t}(r.StylableComponent),O=[g,P],R=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,o.NgCircleProgressModule,r.WmComponentsModule],declarations:p(O),exports:p(O),entryComponents:[]}]}],e}();e.\u0275a=g,e.\u0275b=u,e.\u0275c=P,e.\u0275d=v,e.ProgressModule=R,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("@wm/components/input"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/basic/rich-text-editor",["exports","@angular/common","@angular/core","@angular/forms","@angular/platform-browser","@wm/components/input","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.richtexteditor={}),e.ng.common,e.ng.core,e.ng.forms,e.ng.platformBrowser,e.wm.components.input,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d=new Map([["class",a.PROP_STRING],["datavaluesource",a.PROP_ANY],["datavalue",a.PROP_STRING],["height",a.PROP_STRING],["hint",a.PROP_STRING],["name",a.PROP_STRING],["placeholder",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["show",c({value:!0},a.PROP_BOOLEAN)],["showpreview",c({value:!1},a.PROP_BOOLEAN)],["tabindex",c({value:0},a.PROP_NUMBER)]]),m=function(){a.register("wm-richtexteditor",d),a.registerFormWidget(s.FormWidgetType.RICHTEXT,new Map(d))},h={widgetType:"wm-richtexteditor",hostClass:"app-richtexteditor clearfix"},f=function(){var e;return"function"==typeof Event?e=new Event("change"):(e=document.createEvent("Event")).initEvent("change",!0,!0),e},g=function(){if(!$.summernote.__overidden){var e=$.summernote.ui.button.bind($.summernote);$.summernote.ui.button=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.apply(void 0,u(t)),o=i.callback;return i.callback=function(e,t){return e.addClass("btn"),o(e,t)},i},$.summernote.__overidden=!0}},v=function(e){function t(t,i,o){var r=e.call(this,t,h)||this;return r.domSanitizer=i,r.ngZone=o,r._operationStack=[],r.isEditorLoaded=!1,r.EDITOR_DEFAULT_OPTIONS={toolbar:[["misc",["undo","redo"]],["style",["style"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["height",["height"]],["style",["bold","italic","underline","clear"]],["font",["strikethrough","superscript","subscript"]],["color",["color"]],["insert",["table","picture","link","video","hr"]],["para",["ul","ol","paragraph"]],["misc",["codeview","fullscreen","help"]]],callbacks:{onInit:function(){r.isEditorLoaded=!0,r._operationStack.length&&(r._operationStack.forEach(function(e){var t=Array.from(e.keys())[0],n=e.get(t);r.performEditorOperation(t,n)}),r._operationStack=[])},onChange:function(e,t){r.proxyModel=r.domSanitizer.sanitize(n.SecurityContext.HTML,e.toString()),r.invokeOnChange(e,f(),!0),r.invokeOnTouched()}},fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Merriweather"],placeholder:"write here...",minHeight:100,disableResizeEditor:!0},a.styler(r.nativeElement,r,a.APPLY_STYLES_TYPE.CONTAINER,["height"]),g(),r}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"htmlcontent",{get:function(){return this.performEditorOperation("code")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datavalue",{get:function(){return this.htmlcontent},set:function(e){null!=e&&(this.$hiddenInputEle.val(e),this.performEditorOperation("reset"),this.performEditorOperation("code",e))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.$richTextEditor=$(this.nativeElement.querySelector("[richTextEditor]")),this.$hiddenInputEle=$(this.nativeElement.querySelector("input.model-holder")),e.prototype.ngOnInit.call(this),this.initEditor()},t.prototype.initEditor=function(){var e=this;this.ngZone.runOutsideAngular(function(){e.$richTextEditor.summernote(e.EDITOR_DEFAULT_OPTIONS)})},t.prototype.onPropertyChange=function(t,n,i){"placeholder"===t?this.performEditorOperation("placeholder",n):"disabled"===t||"readonly"===t?this.performEditorOperation(n?"disable":"enable"):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.onStyleChange=function(e,t,n){"height"===e&&this.performEditorOperation("height",t)},t.prototype.performEditorOperation=function(e,t){if(!this.isEditorLoaded){var n=new Map;return n.set(e,t),void this._operationStack.push(n)}if("height"===e)s.setCSS(this.nativeElement.querySelector("div.note-editable"),e,t,!0);else{if("placeholder"!==e){if(1===arguments.length&&"code"===e&&this.$richTextEditor.summernote("isEmpty")){var i=this.$richTextEditor.summernote("code");return""===i?i:void 0}return this.$richTextEditor.summernote(e,t)}s.setHtml(this.nativeElement.querySelector("div.note-placeholder"),t,!0)}},t.prototype.getCurrentPosition=function(){return this.performEditorOperation("createRange")},t.prototype.undo=function(){this.performEditorOperation("undo")},t.prototype.focus=function(){this.performEditorOperation("focus")},t.prototype.ngOnDestroy=function(){this.performEditorOperation("destroy"),e.prototype.ngOnDestroy.call(this)},t.initializeProps=m(),t.decorators=[{type:n.Component,args:[{selector:"div[wmRichTextEditor]",template:'<div richTextEditor></div>\n<div [innerHTML]="proxyModel" class="ta-preview" *ngIf="showpreview"></div>\n<input class="model-holder" [disabled]="disabled" hidden>\n',providers:[a.provideAs(t,i.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:o.DomSanitizer},{type:n.NgZone}]},t}(r.BaseFormCustomComponent),y=[v],b=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,a.WmComponentsModule],declarations:u(y),exports:u(y),entryComponents:[]}]}],e}();e.\u0275a=v,e.\u0275b=m,e.RichTextEditorModule=b,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("ngx-bootstrap/typeahead"),require("@wm/components/input"),require("@wm/core"),require("@wm/components/base"),require("@angular/core")):"function"==typeof define&&define.amd?define("@wm/components/basic/search",["exports","@angular/common","@angular/forms","rxjs","rxjs/operators","ngx-bootstrap/typeahead","@wm/components/input","@wm/core","@wm/components/base","@angular/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.search={}),e.ng.common,e.ng.forms,e.rxjs,e.rxjs.operators,e.ngxBootstrap,e.wm.components.input,e.wm.core,e.wm.components.base,e.ng.core)}(this,function(e,t,n,i,o,r,a,s,l,c){"use strict";var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var h=new Map([["casesensitive",u({value:!1},l.PROP_BOOLEAN)],["class",l.PROP_STRING],["datacompletemsg",u({value:"No more data to load"},l.PROP_STRING)],["datafield",u({value:"All Fields"},l.PROP_STRING)],["dataoptions",l.PROP_ANY],["dataset",l.PROP_ANY],["datasource",l.PROP_ANY],["datavalue",l.PROP_STRING],["datavaluesource",l.PROP_ANY],["disabled",l.PROP_BOOLEAN],["displayimagesrc",l.PROP_STRING],["displaylabel",l.PROP_STRING],["dropup",l.PROP_BOOLEAN],["hint",l.PROP_STRING],["imagewidth",u({value:"16px"},l.PROP_STRING)],["limit",l.PROP_NUMBER],["loadingdatamsg",u({value:"Loading items..."},l.PROP_STRING)],["matchmode",l.PROP_STRING],["minchars",l.PROP_NUMBER],["name",l.PROP_STRING],["navsearchbar",u({value:!1},l.PROP_BOOLEAN)],["orderby",l.PROP_STRING],["placeholder",u({value:"Search"},l.PROP_STRING)],["position",l.PROP_STRING],["query",l.PROP_STRING],["readonly",l.PROP_BOOLEAN],["required",l.PROP_BOOLEAN],["searchkey",l.PROP_STRING],["searchon",u({value:"typing"},l.PROP_STRING)],["shortcutkey",l.PROP_STRING],["show",u({value:!0},l.PROP_BOOLEAN)],["showsearchicon",l.PROP_BOOLEAN],["tabindex",u({value:0},l.PROP_NUMBER)],["type",u({value:"search"},l.PROP_STRING)],["debouncetime",u({value:250},l.PROP_NUMBER)],["width",l.PROP_STRING]]),f=function(){l.register("wm-search",h),l.registerFormWidget(s.FormWidgetType.AUTOCOMPLETE,new Map(h)),l.registerFormWidget(s.FormWidgetType.TYPEAHEAD,new Map(h))},g=function(){function e(){}return e.prototype.applyFilter=function(e,t,n){return _.includes(n,"start")?_.startsWith(e,t):_.includes(n,"end")?_.endsWith(e,t):_.includes(n,"exact")?_.isEqual(e,t):_.includes(e,t)},e.prototype.filter=function(e){var t=this,n=e.dataset,i=e.casesensitive,o=e.matchMode;o&&!_.includes(o,"ignorecase")&&(i=!0);var r,a=e.query;return new Promise(function(s,l){if(e.searchKey){var c=_.split(e.searchKey,",");r=_.filter(e.dataset,function(e){return c.some(function(n){var r=_.get(e,n),s=a;return i||(r=_.toLower(_.toString(r)),s=_.toLower(_.toString(s))),t.applyFilter(r,s,o)})})}else r=_.isArray(n)&&_.isObject(n[0])?_.filter(n,function(e){var n=_.values(e).join(" ");return i||(n=_.toLower(n),a=_.toLower(a)),t.applyFilter(n,a)}):_.filter(n,function(e){return i||(e=_.toLower(e),a=_.toLower(a)),t.applyFilter(e,a,o)});s({data:r,hasMoreData:!1,isLastPage:!0})})},e}(),v=function(){function e(){}return e.prototype.filter=function(e){var t=this;return this.filterData(e).then(function(n){return t.onFilterSuccess(e,n)},function(){return t.onFilterFailure()})},e.prototype.filterData=function(e){if(e.dataoptions){var t=e.dataoptions,n=e.datasource.execute(s.DataSource.Operation.GET_REQUEST_PARAMS,e);if(t.relatedField)return new Promise(function(i,o){l.interpolateBindExpressions(e.viewParent,t.filterExpr,function(r){n.filterExpr=t.filterExpr=r,t.filterExpr=r,e.datasource.execute(s.DataSource.Operation.GET_RELATED_TABLE_DATA,_.assign({relatedField:t.relatedField},n)).then(i,o)})});if(t.distinctField)return e.datasource.execute(s.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{pagesize:e.limit||e.pagesize,page:e.page,fields:t.distinctField,entityName:t.tableName,filterFields:_.assign(t.filterFields,n.filterFields),filterExpr:s.getClonedObject(t.filterExpr||{})})}return e.datasource.execute(s.DataSource.Operation.SEARCH_RECORDS,e)},e.prototype.isLast=function(e,t,n,i){return t===s.AppConstants.INT_MAX_VALUE?0!==i&&i<n:e===(t>n?Math.ceil(t/n):t<0?0:1)},e.prototype.getTransformedData=function(e,t){var n=e.operation+"Result",i=t[n];if(i){var o={};_.set(o,n,i),t=[o]}else t=[t];return t},e.prototype.onFilterFailure=function(){return[]},e.prototype.isLastPageForDistinctApi=function(e,t,n,i){return t>1&&!i&&_.isEmpty(e)&&n===s.AppConstants.INT_MAX_VALUE},e.prototype.onFilterSuccess=function(e,t){var n,i,o,r,a=this,l=t.data,c=_.split(e.binddataset,"."),p=_.slice(c,_.indexOf(c,"dataSet")+1).join(".");return new Promise(function(c,u){var d=t.pagination;if(e.datasource.execute(s.DataSource.Operation.IS_PAGEABLE)&&(o=d.number+1,i=a.isLast(o,e.limit>0&&e.limit||d.totalElements,d.size,d.numberOfElements),r=!0,a.isLastPageForDistinctApi(l,o,d.totalElements,i)))c({data:[],isLastPage:i=!0,hasMoreData:o>1,isPaginatedData:r,page:o});else{if(p){var m=p.lastIndexOf("[$i]"),h=p.substr(m+5);_.isArray(l)?n=l.map(function(e){return s.findValueOf(e,h)}):_.isObject(l)&&(n=_.get(l,p)),l=n||l}_.isArray(l)||(l=a.getTransformedData(e.datasource,l)),l.length?c({data:l,isLastPage:i,hasMoreData:o>1,isPaginatedData:r,page:o}):c({data:[],isLastPage:i,hasMoreData:o>1,isPaginatedData:r,page:o})}})},e}(),y=function(){function e(){}return e.prototype.filter=function(t){var n=this,i=t.datasource&&t.datasource.execute(s.DataSource.Operation.IS_UPDATE_REQUIRED,t.hasData);return(!t.isLocalFilter&&(t.dataoptions||t.datasource&&t.datasource.execute(s.DataSource.Operation.IS_API_AWARE)&&t.searchKey&&i)?e.remoteDataProvider.filter(t):e.localDataProvider.filter(t)).then(function(e){return n.updateDataset=t.datasource&&!t.datasource.execute(s.DataSource.Operation.SUPPORTS_CRUD)&&i,n.hasMoreData=e.hasMoreData,n.isLastPage=e.isLastPage,n.page=e.page,n.isPaginatedData=e.isPaginatedData,e})},e.remoteDataProvider=new v,e.localDataProvider=new g,e}(),b={widgetType:"wm-search",hostClass:"input-group"},w=function(e){function t(t,n,r){var a=e.call(this,t,b)||this;a.binddatavalue=n,a.binddataset=r,a.query="",a.page=1,a.allowempty=!1,s.addClass(a.nativeElement,"app-search",!0),a.typeaheadDataSource=i.Observable.create(function(e){a.listenQuery&&(a._defaultQueryInvoked=!1,a._loadingItems=!0,e.next(a.query)),a.lastSelectedIndex&&(a.typeahead._container=void 0)}).pipe(o.mergeMap(function(e){return a.getDataSourceAsObservable(e)})),a.dataProvider=new y;var l=a.datavalue$.subscribe(function(e){var t=_.isArray(e)?e[0]:e;if(null===t||""===t)return a._modelByValue="",a.query=a.queryModel="",void(a._lastResult=void 0);a._unsubscribeDv||(a._defaultQueryInvoked=!1,_.isObject(e)||a.prevDatavalue===e||(a._modelByKey=void 0,a.query=a.queryModel=""),a.updateByDatavalue(e))});a.registerDestroyListener(function(){return l.unsubscribe()});var c=a.dataset$.subscribe(function(){a.startIndex=a.datasetItems.length,a._lastResult=void 0;var e=a.datavalue||a.toBeProcessedDatavalue;s.isDefined(e)&&a.updateByDataset(e)});return a.registerDestroyListener(function(){return c.unsubscribe()}),a}return function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"datasource",{get:function(){return this._datasource},set:function(e){this._datasource=e;var t=this.datavalue||this.toBeProcessedDatavalue;this.updateByDatavalue(t)},enumerable:!0,configurable:!0}),t.prototype.clearSearch=function(e,t){this.query="",this.onInputChange(e),this.dataProvider.isLastPage=!1,this.listenQuery=!1,t&&(this.listenQuery=!0,this._unsubscribeDv=!1,this.loadMoreData()),this.invokeEventCallback("clearsearch")},t.prototype.clearText=function(){this.$element.find("input").val(""),this.showClosebtn=!1},t.prototype.closeSearch=function(){this._loadingItems=!1,this.page=1,this.insertAtIndex(this.elIndex),this.elIndex=void 0,this.parentEl=void 0,this.$element.removeClass("full-screen"),this._domUpdated&&(this._domUpdated=!1),this.listenQuery=!1,this._unsubscribeDv=!0,this.typeahead.hide()},t.prototype.renderMobileAutoComplete=function(){s.isDefined(this.elIndex)||(this.parentEl=this.$element.parent(),this.elIndex=this.parentEl.children().index(this.$element)),this.$element.hasClass("full-screen")||(this._domUpdated=!0,this.$element.addClass("full-screen"),"inline"===this.position&&this.$element.addClass(this.position)),this.$element.hasClass("full-screen")&&this.$element.find(".app-search-input").focus()},t.prototype.getDataSourceAsObservable=function(e){return this._lastQuery===e&&!_.get(this.dataoptions,"filterFields")&&s.isDefined(this._lastResult)?(this._loadingItems=!1,i.of(this._lastResult)):(this._lastQuery=this.query,i.from(this.getDataSource(e)))},t.prototype.handleEvent=function(t,n,i,o){_.includes(["blur","focus","select","submit","change"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.highlight=function(e,t){if(this.typeaheadContainer)return e.value=e.item.label.toString(),this.typeaheadContainer.highlight(e,t)},t.prototype.insertAtIndex=function(e){0===e?this.parentEl.prepend(this.$element):this.parentEl.children().eq(e).length?this.$element.insertBefore(this.parentEl.children().eq(e)):this.$element.insertAfter(this.parentEl.children().eq(e-1))},t.prototype.isMobileAutoComplete=function(){return"autocomplete"===this.type&&s.isMobile()},t.prototype.loadMoreData=function(e){this.dataProvider.isLastPage||(this.page=e?this.page+1:this.page,this.isScrolled=!0,this._loadingItems=!0,e&&(this._lastQuery=void 0),this.typeahead.onInput({target:{value:_.trim(this.query)||"0"}}))},t.prototype.onFocusOut=function(){var e=this;this._unsubscribeDv=!1,this._loadingItems=!1,this.page=1,!this._domUpdated&&this._isOpen&&(this.listenQuery=!1,setTimeout(function(){e.typeahead._typeahead.isShown&&e.typeahead.hide()},200)),this._isOpen=!1,this._domUpdated&&this.typeahead&&this.typeahead._container&&(this.typeahead._container.isFocused=!0)},t.prototype.onInputChange=function(e){this.result=[],this.page=1,this.listenQuery=this.isUpdateOnKeyPress(),this._modelByValue=void 0,""===this.query?(this.queryModel="",this._modelByValue="",this.invokeOnChange(this._modelByValue,{},!0),e&&9!==e.which&&this.invokeEventCallback("submit",{$event:e})):this.invokeEventCallback("change",{$event:e,newVal:this._modelByValue||this.query,oldVal:this.prevDatavalue}),this.showClosebtn=""!==this.query},t.prototype.handleEnterEvent=function(e){this.typeahead._container||this.onSearchSelect(e)},t.prototype.onSearchSelect=function(e){if(!this.isUpdateOnKeyPress())return this.listenQuery=!0,void this.typeahead.onInput({target:{value:this.query}});this.typeaheadContainer&&this.liElements.length?this.typeaheadContainer.selectActiveMatch():(this.queryModel=this.query,this.invokeEventCallback("submit",{$event:e}))},t.prototype.invokeOnBeforeServiceCall=function(e){this.invokeEventCallback("beforeservicecall",{inputData:e})},t.prototype.onDropdownOpen=function(){var e=this;if(_.debounce(function(){e._isOpen=!0,e.typeaheadContainer=e.typeahead._container||e.typeahead._typeahead.instance,e.typeaheadContainer.liElements=e.liElements,e.typeaheadContainer.ulElement=e.ulElement,s.adjustContainerPosition($("typeahead-container"),e.nativeElement,e.typeahead._typeahead,$("typeahead-container .dropdown-menu"))})(),this.isMobileAutoComplete()){this.$element.hasClass("full-screen")||this.renderMobileAutoComplete();var t=this.dropdownEl.closest("typeahead-container");t.insertAfter(this.$element.find("input:first"));var n=this.$element.closest(".app-content").height();t.css({position:"relative",top:0,height:n+"px"}),this.showClosebtn=this.query&&""!==this.query,this.dataProvider.isLastPage||this.triggerSearch()}},t.prototype.selectNext=function(){var e=this.typeaheadContainer.matches;if(e){var t=e.indexOf(this.typeaheadContainer.active);!this._loadingItems&&!this.dataProvider.isLastPage&&t+1>e.length-1&&(this.lastSelectedIndex=t,this.loadMoreData(!0))}},t.prototype.setLastActiveMatchAsSelected=function(){this.lastSelectedIndex&&(this.typeaheadContainer._active=this.typeaheadContainer.matches[this.lastSelectedIndex],this.typeaheadContainer.nextActiveMatch(),this.lastSelectedIndex=void 0)},t.prototype.triggerSearch=function(){if(!this.dataProvider.isLastPage&&this.$element.hasClass("full-screen")){var e=this.dropdownEl,t=e.find("li").last();t.length&&e.length&&e.height()+e.position().top>t.height()+t.position().top&&this.loadMoreData(!0)}},t.prototype.isUpdateOnKeyPress=function(){return"typing"===this.searchon},t.prototype.debounceDefaultQuery=function(e){var t=this;this._defaultQueryInvoked=!0,this.getDataSource(e,!0).then(function(e){e.length?(t.queryModel=e,t._lastQuery=t.query=t.queryModel[0].label||"",t._modelByValue=t.queryModel[0].value,t._modelByKey=t.queryModel[0].key):(t._modelByValue=void 0,t.queryModel=void 0,t.query="")})},t.prototype.updateByDatavalue=function(e){this.updateByDataset(e),this.updateByDataSource(e)},t.prototype.updateByDataSource=function(e){if(s.isDefined(e)&&!_.isObject(e)&&this.datasource&&!s.isDefined(this._modelByKey)&&this.datafield!==l.ALLFIELDS){if(s.isDefined(this.queryModel)&&!_.isEmpty(this.queryModel))return void this.updateDatavalueFromQueryModel();!this._defaultQueryInvoked&&this.datasource.execute(s.DataSource.Operation.SUPPORTS_CRUD)&&this.debounceDefaultQuery(e)}},t.prototype.updateDatavalueFromQueryModel=function(){s.isDefined(this.queryModel)&&(this._modelByValue=_.isArray(this.queryModel)?this.queryModel[0].value:this.queryModel,this._modelByKey=_.isArray(this.queryModel)?this.queryModel[0].key:this.queryModel,this.toBeProcessedDatavalue=void 0)},t.prototype.updateByDataset=function(e){if(!this._defaultQueryInvoked||!this.searchkey){var t=_.find(this.datasetItems,function(t){return _.isObject(t.value)?_.isEqual(t.value,e):_.toString(t.value).toLowerCase()===_.toString(e).toLowerCase()});if(t)this.queryModel=[t];else if(this.datafield===l.ALLFIELDS&&_.isObject(e))this.queryModel=this.getTransformedData(l.extractDataAsArray(e));else if(this.prevDatavalue!==e)return this.queryModel=void 0,void(this.query="");this.updateDatavalueFromQueryModel(),this._lastQuery=this.query=s.isDefined(this.queryModel)&&this.queryModel.length?_.get(this.queryModel[0],"label"):""}},t.prototype.handleFocus=function(e){"search"===this.type&&this.query===this._lastQuery&&this._lastResult&&this.typeahead.keyUpEventEmitter.emit(this.query)},t.prototype.getDataSource=function(e,t,n){var i=this;if(t&&this.datafield===l.ALLFIELDS)return this._loadingItems=!1,Promise.resolve([]);var o={dataset:this.dataset?l.convertDataToObject(this.dataset):void 0,binddataset:this.binddataset,datasource:this.datasource,datafield:this.datafield,hasData:this.dataset&&this.dataset.length,query:e,isLocalFilter:!this.searchkey,searchKey:t?this.datafield:this.searchkey,matchMode:t?"startignorecase":this.matchmode,casesensitive:this.casesensitive,isformfield:this.isformfield,orderby:this.orderby,limit:this.limit,pagesize:this.pagesize,page:this.page,onBeforeservicecall:this.invokeOnBeforeServiceCall.bind(this)};return this.dataoptions&&(o.dataoptions=this.dataoptions,o.viewParent=this.viewParent),this._loadingItems=!0,this.dataProvider.filter(o).then(function(e){e=e.data||e,s.isDefined(i.dataset)&&i.dataset.length||!i.dataProvider.updateDataset||(i.dataset=e),i.dataProvider.hasMoreData?i.formattedDataset=i.formattedDataset.concat(e):i.formattedDataset=e,i.formattedDataset.length>20&&!s.isDefined(i.limit)&&(i.typeahead.typeaheadOptionsLimit=i.formattedDataset.length),i._isOpen&&i.isMobileAutoComplete()&&!i.dataProvider.isLastPage&&i.triggerSearch();var t=i.getTransformedData(i.formattedDataset,n);return i.result=_.map(t,"value"),t},function(e){return i._loadingItems=!1,[]}).then(function(t){return i.isScrolled&&(_.debounce(function(){i.setLastActiveMatchAsSelected()},30)(),i.isScrolled=!1),t.length||(i._modelByValue=void 0,i.queryModel=e),i._unsubscribeDv&&(t=[]),i._loadingItems=!1,i._lastResult=t,t})},t.prototype.getContext=function(e){return e&&_.get(e,"widget")?this.getContext(e.viewParent):e},t.prototype.getTransformedData=function(e,t,n){s.isDefined(t)&&t++;var i=l.transformFormData(this.getContext(this.viewParent),e,this.datafield,{displayField:this.displaylabel||this.displayfield,displayExpr:n?"":this.displayexpression,bindDisplayExpr:n?"":this.binddisplaylabel,bindDisplayImgSrc:this.binddisplayimagesrc,displayImgSrc:this.displayimagesrc},t);return l.getUniqObjsByDataField(i,this.datafield,this.displayfield||this.displaylabel,s.toBoolean(this.allowempty))},t.prototype.onScroll=function(e,t){var n=e.scrollHeight,i=e.clientHeight;!this._loadingItems&&!this.dataProvider.isLastPage&&e.scrollTop+i>=n&&this.loadMoreData(!0)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),s.isDefined(this.minchars)||("autocomplete"===this.type?this.minchars=0:this.minchars=1),this.listenQuery=this.isUpdateOnKeyPress(),this.showsearchicon=s.isDefined(this.showsearchicon)?this.showsearchicon:"search"===this.type},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),l.styler(this.nativeElement,this)},t.prototype.typeaheadOnSelect=function(e,t){var n=e.item;this.queryModel=n,n.selected=!0,this.query=n.label,t=t||this.$typeaheadEvent,this._modelByKey=n.key,this._modelByValue=n.value,this.invokeOnTouched(),this.invokeOnChange(this.datavalue,t||{}),this.datavalue!==this.prevDatavalue&&this.updateBoundVariable(this.datavalue),this.$element.hasClass("full-screen")&&this.closeSearch(),this.invokeEventCallback("select",{$event:t,selectedValue:this.datavalue}),this.invokeEventCallback("submit",{$event:t}),this.updatePrevDatavalue(this.datavalue)},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("displaylabel"===t&&this.dataoptions&&null===this.binddisplaylabel&&(this.query=_.get(this._modelByValue,n)||this._modelByValue),e.prototype.onPropertyChange.call(this,t,n,i))},t.initializeProps=f(),t.decorators=[{type:c.Component,args:[{selector:"[wmSearch]",template:'<ng-template #customItemTemplate let-model="item" let-index="index" let-query="query" let-match="match">\n    <a>\n        <img *ngIf="model.imgSrc" [src]="model.imgSrc" alt="Search" [style.width]="imagewidth">\n        <span [title]="model.label" [innerHtml]="highlight(match, query) || model.label"></span>\n    </a>\n</ng-template>\n\n<ng-template #customListTemplate let-matches="matches" let-itemTemplate="itemTemplate" let-query="query">\n    <ul #ulElement class="app-search dropdown-menu" scrollable>\n        <li #liElements *ngFor="let match of matches" [ngClass]="{active: typeaheadContainer && typeaheadContainer.isActive(match)}"\n            (mouseenter)="typeaheadContainer.selectActive(match);"\n            (click)="typeaheadContainer.selectMatch(match, $event); $typeaheadEvent = $event;">\n            \x3c!-- itemTemplate comes from the <input> --\x3e\n            <ng-container *ngIf="!match.isHeader()" [ngTemplateOutlet]="itemTemplate"\n                          [ngTemplateOutletContext]="{item: match.item, index: i, match: match, query: query}">\n            </ng-container>\n        </li>\n        <div class="status" [hidden]="_loadingItems || !(datacompletemsg && dataProvider.isLastPage)">\n            <span [textContent]="datacompletemsg"></span>\n        </div>\n        <div class="status" [hidden]="!_loadingItems">\n            <i class="fa fa-circle-o-notch fa-spin"></i>\n            <span [textContent]="loadingdatamsg"></span>\n        </div>\n    </ul>\n</ng-template>\n\n\x3c!--This template is for search inside mobile navbar.--\x3e\n<ng-container *ngIf="navsearchbar; else searchTemplate">\n    <input [title]="query || \'\'" type="text" class="app-textbox form-control list-of-objs app-search-input" [placeholder]="placeholder || \'\'"\n           focus-target\n           container="body"\n           [disabled]="disabled"\n           autocomplete="off"\n           [(ngModel)]="query"\n           [readonly]="readonly"\n           [disabled]="disabled"\n           [typeahead]="typeaheadDataSource"\n           [typeaheadWaitMs]="debouncetime"\n           [typeaheadItemTemplate]="customItemTemplate"\n           [optionsListTemplate]="customListTemplate"\n           (input)="onInputChange($event)"\n           (keydown)="listenQuery = true"\n           (keydown.enter)="$typeaheadEvent = $event;handleEnterEvent($event)"\n           (keydown.arrowdown)="selectNext($event)"\n           (blur)="invokeOnTouched($event)"\n           (click)="handleFocus($event);"\n           (focus)="_unsubscribeDv = false; listenQuery = true; handleFocus($event); invokeOnFocus($event);"\n           (focusout)="onFocusOut()"\n           [typeaheadMinLength]="minchars"\n           [typeaheadOptionsLimit]="limit"\n           (typeaheadLoading)="_loadingItems"\n           (typeaheadOnSelect)="typeaheadOnSelect($event)"\n           typeaheadOptionField="label"\n           [typeaheadAsync]="true"\n           [typeaheadScrollable]="true"\n           [typeaheadOptionsInScrollableView]="optionslimitinscrollableview"\n           [dropup]="dropup"\n           [tabindex]="tabindex"\n           [attr.name]="name"/>\n    <i class="btn-close wi wi-cancel" [hidden]="!showClosebtn" (click)="clearSearch($event);"></i>\n</ng-container>\n\x3c!--This template is for both web and fullscreen mode in mobile.--\x3e\n<ng-template #searchTemplate>\n    <span class="wi wi-arrow-left form-control-feedback back-btn" aria-hidden="true" (click)="closeSearch()"></span>\n    <span class="sr-only">Back button</span>\n    <input [title]="query || \'\'" type="text" class="app-textbox form-control list-of-objs app-search-input" [placeholder]="placeholder || \'\'"\n           focus-target\n           container="body"\n           [disabled]="disabled"\n           autocomplete="off"\n           [(ngModel)]="query"\n           [readonly]="readonly"\n           [typeahead]="typeaheadDataSource"\n           [typeaheadWaitMs]="debouncetime"\n           [typeaheadItemTemplate]="customItemTemplate"\n           [optionsListTemplate]="customListTemplate"\n           (input)="onInputChange($event)"\n           (keydown)="listenQuery = true"\n           (keydown.enter)="$typeaheadEvent = $event;handleEnterEvent($event)"\n           (keydown.arrowdown)="selectNext($event)"\n           (blur)="invokeOnTouched($event)"\n           (click)="handleFocus($event);"\n           (focus)="_unsubscribeDv = false; listenQuery = true; handleFocus($event); invokeOnFocus($event)"\n           (focusout)="onFocusOut()"\n           [typeaheadMinLength]="minchars"\n           [typeaheadOptionsLimit]="limit"\n           (typeaheadLoading)="_loadingItems"\n           (typeaheadOnSelect)="typeaheadOnSelect($event)"\n           typeaheadOptionField="label"\n           [typeaheadAsync]="true"\n           [typeaheadScrollable]="true"\n           [typeaheadOptionsInScrollableView]="optionslimitinscrollableview"\n           [tabindex]="tabindex"\n           [dropup]="dropup"\n           [attr.name]="name">\n    <input class="model-holder" ng-model="proxyModel" ng-required="required" tabindex="-1">\n    <span *ngIf="_loadingItems" aria-hidden="true" class="fa fa-circle-o-notch fa-spin form-control-feedback"></span>\n    <span class="wi wi-close form-control-feedback clear-btn" [hidden]="!showClosebtn" (click)="clearSearch($event, true)"></span>\n    <span class="sr-only">Clear button</span>\n    <span *ngIf="showsearchicon" class="input-group-addon" aria-label="search icon" [ngClass]="{\'disabled\': disabled}">\n        <form>\n            <button title="Search" [disabled]="disabled" class="app-search-button wi wi-search" type="submit"\n                    (click)="onSearchSelect($event)"></button>\n        </form>\n    </span>\n</ng-template>\n',providers:[l.provideAs(t,n.NG_VALUE_ACCESSOR,!0),l.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:c.Injector},{type:void 0,decorators:[{type:c.Attribute,args:["datavalue.bind"]}]},{type:void 0,decorators:[{type:c.Attribute,args:["dataset.bind"]}]}]},t.propDecorators={typeahead:[{type:c.ViewChild,args:[r.TypeaheadDirective]}],ulElement:[{type:c.ViewChild,args:["ulElement"]}],liElements:[{type:c.ViewChildren,args:["liElements"]}]},t}(a.DatasetAwareFormComponent),P=function(){function e(e,t){this.searchRef=t,this.elementRef=e.get(c.ElementRef)}return e.prototype.ngAfterContentInit=function(){this.elementRef.nativeElement.addEventListener("scroll",this.notifyParent.bind(this)),this.searchRef.dropdownEl=$(this.elementRef.nativeElement),this.searchRef.onDropdownOpen()},e.prototype.ngAfterViewInit=function(){if(!this.searchRef.isMobileAutoComplete()){var e=this.searchRef.$element.find("input:first");this.searchRef.dropdownEl.width(e.outerWidth())}},e.prototype.notifyParent=function(e){this.searchRef.onScroll(this.elementRef.nativeElement,e)},e.decorators=[{type:c.Directive,args:[{selector:"[scrollable]"}]}],e.ctorParameters=function(){return[{type:c.Injector},{type:w}]},e}(),O=[w,P],R=function(){function e(){}return e.decorators=[{type:c.NgModule,args:[{imports:[t.CommonModule,n.FormsModule,r.TypeaheadModule,l.WmComponentsModule],declarations:m(O),exports:m(O),entryComponents:[]}]}],e}();e.\u0275b=P,e.\u0275a=f,e.SearchModule=R,e.SearchComponent=w,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/basic/tree",["exports","@angular/common","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.basic=e.wm.components.basic||{},e.wm.components.basic.tree={}),e.ng.common,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var c=function(){o.register("wm-tree",new Map([["class",o.PROP_STRING],["dataset",a({value:"node1, node2, node3"},o.PROP_ANY)],["datavalue",o.PROP_STRING],["levels",a({value:0},o.PROP_NUMBER)],["name",o.PROP_STRING],["nodeaction",o.PROP_STRING],["nodechildren",o.PROP_STRING],["nodeclick",a({value:"none"},o.PROP_STRING)],["nodeicon",o.PROP_STRING],["nodeid",o.PROP_STRING],["nodelabel",o.PROP_STRING],["orderby",o.PROP_STRING],["show",a({value:!0},o.PROP_BOOLEAN)],["tabindex",a({value:0},o.PROP_NUMBER)],["treeicons",o.PROP_STRING]]))},p={folder:{expanded:"wi-folder-open",collapsed:"wi-folder"},"circle-plus-minus":{expanded:"wi-remove-circle-outline",collapsed:"wi-add-circle-outline"},chevron:{expanded:"wi-keyboard-arrow-down",collapsed:"wi-keyboard-arrow-right"},menu:{expanded:"wi-arrow-down",collapsed:"wi-arrow-right"},triangle:{expanded:"wi-arrow-drop-down-circle",collapsed:"wi-play-circle-filled"},"expand-collapse":{expanded:"wi-expand-less",collapsed:"wi-expand-more"},"plus-minus":{expanded:"wi-minus",collapsed:"wi-plus"}},u={widgetType:"wm-tree",hostClass:"app-tree"},d=function(e){function t(t,n,i,o,r,a){var s=e.call(this,t,u)||this;return s.binddatavalue=n,s.bindnodelabel=i,s.bindnodeicon=o,s.bindnodechildren=r,s.bindnodeid=a,s.bindEvents(),s}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.onPropertyChange=function(t,n,i){switch(t){case"dataset":this.nodes=this.getNodes(n),this._selectNode=void 0,this.renderTree();break;case"nodeicon":case"nodelabel":case"nodechildren":case"orderby":this.renderTree();break;case"treeicons":this.changeTreeIcons(n,i);break;case"datavalue":this.selectById(n);break;default:e.prototype.onPropertyChange.call(this,t,n,i)}},t.prototype.constructNodes=function(e,t,n,r,a){var s,l,c=this,u=$("<ul></ul>"),d=p[this.treeicons||"plus-minus"],m=this.binddatavalue||this.datavalue;s=(l=n>0?" expanded ":" collapsed ")+(n>0?d.expanded:d.collapsed),r=r||0,t.append(u),e.forEach(function(t,p){var d,h=$("<li></li>"),f=$("<i></i>"),g=o.getEvaluatedData(t,{expression:c.nodelabel,bindExpression:c.bindnodelabel},c.viewParent)||t.label,v=o.getEvaluatedData(t,{expression:c.nodeicon,bindExpression:c.bindnodeicon},c.viewParent)||t.icon,y=o.getEvaluatedData(t,{expression:c.nodechildren,bindExpression:c.bindnodechildren},c.viewParent)||t.children,b=o.getEvaluatedData(t,{expression:c.nodeid,bindExpression:c.bindnodeid},c.viewParent)||t.children,w=!1;h.data("nodedata",t).append(f).append('<span class="title">'+g+"</span>").appendTo(u),c.bindnodeid||c.nodeid?(w=c.binddatavalue?b===a:b===m,b&&h.attr("id",b)):c.binddatavalue&&(w=!!i.$parseExpr(m)(c,t)),c._selectNode||("FirstNode"===m&&0===p||!r&&"LastNode"===m&&p===e.length-1||w)&&(c._selectNode=h,c.datavalue=b),v&&f.addClass(v),y&&y.length?(h.addClass("parent-node "+l),d=$('<i class="wi '+s+'"></i>'),v&&f.addClass(v),h.prepend(d),c.constructNodes(y,h,n-1,r+1,a)):(v||f.addClass("leaf-node"),h.addClass("leaf-node"))})},t.prototype.getNodesFromString=function(e){return e.split(",").map(function(e){return{label:e&&e.trim()}})},t.prototype.getNodes=function(e){var t;return _.isString(e)&&!_.isEmpty(e)?(e=e.trim())&&(t=this.getNodesFromString(e)):_.isArray(e)?t=e=o.getOrderedDataset(e,this.orderby):_.isObject(e)&&(t=[e]),t},t.prototype.changeTreeIcons=function(e,t){var n=$(this.nativeElement);e=e||"plus-minus",t=t||"plus-minus",n.find("i.expanded").removeClass(p[t].expanded).addClass(p[e].expanded),n.find("i.collapsed").removeClass(p[t].collapsed).addClass(p[e].collapsed)},t.prototype.toggleExpandCollapseNode=function(e,t,n){var i=p[this.treeicons||"plus-minus"],o={$event:e};t.hasClass("collapsed")?(t.removeClass("collapsed "+i.collapsed).addClass("expanded "+i.expanded),n.removeClass("collapsed").addClass("expanded"),this.invokeEventCallback("expand",o)):t.hasClass("expanded")&&(t.removeClass("expanded "+i.expanded).addClass("collapsed "+i.collapsed),n.removeClass("expanded").addClass("collapsed"),this.invokeEventCallback("collapse",o))},t.prototype.renderTree=function(e){var t,n,o,r,a=this,s="",l=+this.nativeElement.getAttribute("levels")||0,c=$(this.nativeElement);c.empty(),e&&(this._selectNode=void 0),this.nodes&&this.nodes.length&&(t=document.createDocumentFragment(),this.constructNodes(this.nodes,$(t),l,0,this.datavalue),c.append(t)),this._selectNode&&((n=this._selectNode).addClass("selected"),r=n.data("nodedata"),(o=n.parentsUntil(c,"li.parent-node.collapsed")).length||(o=n),o.each(function(){var e=$(a),t=e.children("i.collapsed"),n=e.children(".title");a.toggleExpandCollapseNode(void 0,t,e),s="/"+(n.text()+s)}),this.selecteditem=i.getClonedObject(r)||{},this.selecteditem.path=s,this.invokeEventCallback("select",{$event:void 0,$item:r,$path:s}),i.$appDigest())},t.prototype.selectNode=function(e,t){var n,r,a=this,s=e&&$(e.target),l=$(this.nativeElement),c=_.isObject(t)?t:l.find('li[id="'+t+'"]:first'),p="";l.find(".selected").removeClass("selected"),c.length&&(c.addClass("selected"),r=(n=c.data("nodedata"))[this.nodeaction||"action"],(s?s.parents(".app-tree li"):c.find("> span.title").parents(".app-tree li")).each(function(e,t){var n=$(t).children(".title").text();p="/"+(n+p)}),c.parentsUntil(l,"li.parent-node.collapsed").each(function(e,t){var n=$(t),i=n.children("i.collapsed");a.toggleExpandCollapseNode(void 0,i,n)}),this.selecteditem=i.getClonedObject(n)||{},this.selecteditem.path=p,s&&(this.nodeid?this.datavalue=i.$parseExpr(this.nodeid)(this,n):this.bindnodeid?this.datavalue=o.getEvaluatedData(n,{expression:this.nodeid,bindExpression:this.bindnodeid},this.viewParent):this.datavalue=i.getClonedObject(n)||{}),r&&i.$parseEvent(r)(this),this.invokeEventCallback("select",{$event:e,$item:n,$path:p}),i.$appDigest())},t.prototype.bindEvents=function(){var e=this;$(this.nativeElement).on("click",function(t){var n=$(t.target),i=n.closest("li"),o=n.is("i")?n:n.siblings("i.collapsed,i.expanded");t.stopPropagation(),n.is("span.title")&&(e.selecteditem={},e.selectNode(t,i)),(n.is("i")||n.is("span.title")&&"expand"===e.nodeclick)&&e.toggleExpandCollapseNode(t,o,i)})},t.prototype.selectById=function(e){this.selectNode(void 0,e)},t.prototype.deselectById=function(e){this.selecteditem={},this.selectById()},t.prototype.redraw=function(){this.renderTree(!0)},t.initializeProps=c(),t.decorators=[{type:n.Directive,args:[{selector:"div[wmTree]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:void 0,decorators:[{type:n.Attribute,args:["datavalue.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["nodelabel.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["nodeicon.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["nodechildren.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["nodeid.bind"]}]}]},t}(o.StylableComponent),m=[d],h=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:l(m),exports:l(m),entryComponents:[]}]}],e}();e.\u0275a=d,e.\u0275b=c,e.TreeModule=h,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/datepicker"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/input/calendar",["exports","@angular/common","@angular/forms","ngx-bootstrap/datepicker","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.calendar={}),e.ng.common,e.ng.forms,e.ngxBootstrap,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){var e=new Map([["calendartype",l({value:"basic"},a.PROP_STRING)],["class",a.PROP_STRING],["tabindex",l({value:0},a.PROP_NUMBER)],["controls",l({value:"navigation, today, year, month, week, day"},a.PROP_STRING)],["dataset",a.PROP_ANY],["datavalue",a.PROP_STRING],["eventallday",a.PROP_STRING],["eventclass",a.PROP_STRING],["eventend",a.PROP_STRING],["eventstart",a.PROP_STRING],["eventtitle",a.PROP_STRING],["name",a.PROP_STRING],["show",l({value:!0},a.PROP_BOOLEAN)],["showindevice",l({displayType:"inline-block",value:"all"},a.PROP_STRING)],["view",a.PROP_STRING],["selectionmode",a.PROP_STRING]]);r.isMobileApp()&&e.set("view",l({value:"day"},a.PROP_STRING)),a.register("wm-calendar",e)},d=["yyyy-MM-dd","yyyy-M-dd","M-dd-yyyy","MM-dd-yy","yyyy, dd MMMM","yyyy, MMM dd","MM/dd/yyyy","M/d/yyyy","EEE, dd MMM yyyy","EEE MMM dd yyyy","EEEE, MMMM dd, yyyy","timestamp"],m={left:"prev next today",center:"title",right:"month basicWeek basicDay"},h="basic",f="list",g="Year",v="Month",y="Week",b="Day",w="Today",P="none",O="single",R={START:"00:00",END:"24:00"},E=function(e){var t=(e=_.isObject(e)?e:moment(e)).format("YYYY"),n=e.format("MM")-1,i=e.format("DD"),o=e.format("HH"),r=e.format("mm"),a=e.format("ss");return new Date(t,n,i,o,r,a)},T={widgetType:"wm-calendar",hostClass:"app-calendar"},S=function(e){function t(t,n){var i=e.call(this,t,T)||this;i.controls="navigation, today, year, month, week, day",i.eventSources=[],i.dataSetEvents={events:[]},i.changesStack=[],i.invokeOnViewRenderback=_.debounce(function(){return i.invokeEventCallback("viewrender",{$view:i.calendarOptions})},300),i.calendarOptions={calendar:{height:600,eventSources:i.eventSources,editable:!0,locale:r.getSessionStorageItem("selectedLocale")||"en",selectable:!1,header:m,nextDayThreshold:R,views:{month:{eventLimit:0}},unselectAuto:!1,eventDrop:i.eventDrop.bind(i),eventResizeStart:i.onEventChangeStart.bind(i),eventDragStart:i.onEventChangeStart.bind(i),eventResize:i.eventResize.bind(i),eventClick:i.eventClick.bind(i),select:i.select.bind(i),eventRender:i.eventRender.bind(i),viewRender:i.viewRender.bind(i)}},i.dayClass=[],i.mobileCalendar=r.isMobile(),i.eventSources.push(i.dataSetEvents);var o=window.FullCalendar;return o.__wm_locale_initialized||(n.initCalendarLocale(),o.__wm_locale_initialized=!0),i}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.selectDate=function(){var e,t;_.isObject(this.datavalue)?(e=this.datavalue.start,t=this.datavalue.end):(e=moment(this.datavalue),t=moment(this.datavalue).add(1,"day").startOf("day")),this.$fullCalendar.fullCalendar("gotoDate",e),this.$fullCalendar.fullCalendar("select",e,t)},t.prototype.gotoDate=function(){this.$fullCalendar.fullCalendar("gotoDate",moment(this.datavalue))},t.prototype.gotoNextYear=function(){this.$fullCalendar.fullCalendar("nextYear")},t.prototype.gotoPrevYear=function(){this.$fullCalendar.fullCalendar("prevYear")},t.prototype.gotoMonth=function(e){var t=this.$fullCalendar.fullCalendar("getDate"),n=new Date(t).getMonth();n<e?this.$fullCalendar.fullCalendar("gotoDate",t.add(e-n-1,"M")):this.$fullCalendar.fullCalendar("gotoDate",t.subtract(n-e+1,"M"))},t.prototype.gotoNextMonth=function(){var e=this.$fullCalendar.fullCalendar("getDate");this.$fullCalendar.fullCalendar("gotoDate",e.add(1,"M"))},t.prototype.gotoPrevMonth=function(){var e=this.$fullCalendar.fullCalendar("getDate");this.$fullCalendar.fullCalendar("gotoDate",e.subtract(1,"M"))},t.prototype.rerenderEvents=function(){this.$fullCalendar.fullCalendar("rerenderEvents")},t.prototype.setSelectedData=function(e,t){var n=this.dataset;if(n){var i=[],o=this.eventstart||"start",r=this.eventend||"end",a=moment(new Date(e)).format("MM/DD/YYYY"),s=moment(new Date(t)).subtract(1,"days").format("MM/DD/YYYY");return(n=n.data||n).forEach(function(e){if(e[o]){var t=moment(new Date(e[o])).format("MM/DD/YYYY"),n=moment(new Date(e[r]||e[o])).format("MM/DD/YYYY");moment(t).isSameOrAfter(a)&&moment(n).isSameOrBefore(s)&&i.push(e)}}),i}},t.prototype.eventDrop=function(e,t,n,i,o,r){this.invokeEventCallback("eventdrop",{$event:i,$newData:e,$oldData:this.oldData,$delta:t,$revertFunc:n,$ui:o,$view:r})},t.prototype.select=function(e,t,n,i){this.selecteddates={start:E(e),end:E(t)},this.selecteddata=this.setSelectedData(e,t),this.invokeEventCallback("select",{$start:e.valueOf(),$end:t.valueOf(),$view:i,$data:this.selecteddata})},t.prototype.eventResize=function(e,t,n,i,o,r){this.invokeEventCallback("eventresize",{$event:i,$newData:e,$oldData:this.oldData,$delta:t,$revertFunc:n,$ui:o,$view:r})},t.prototype.onEventChangeStart=function(e){this.oldData=r.getClonedObject(e)},t.prototype.eventClick=function(e,t,n){this.invokeEventCallback("eventclick",{$event:t,$data:e,$view:n})},t.prototype.eventRender=function(e,t,n){this.calendartype===f&&this.$fullCalendar.find(".fc-list-table").addClass("table"),this.invokeEventCallback("eventrender",{$event:t,$data:e,$view:n})},t.prototype.viewRender=function(e){this.currentview={start:e.start.format(),end:e.end.subtract(1,"days").format()},this.calendartype===f&&this.$fullCalendar.find(".fc-list-table").addClass("table"),this.invokeEventCallback("viewrender",{$view:e})},t.prototype.updateCalendarHeaderOptions=function(){var e=this.controls,t=this.calendartype,n=new RegExp("\\bday\\b","g"),i="",o="";e&&t&&(_.includes(e,"navigation")&&(i+=" prev next"),_.includes(e,"today")&&(i+=" today"),_.includes(e,"year")&&(o+=t===f?"listYear":""),_.includes(e,"month")&&(o+=t===f?" listMonth":" month"),_.includes(e,"week")&&(o+=t===h?" basicWeek":t===f?" listWeek":" agendaWeek"),n.test(e)&&(o+=t===h?" basicDay":t===f?" listDay":" agendaDay"),_.extend(this.calendarOptions.calendar.header,{left:i,right:o}))},t.prototype.calculateHeight=function(e){var t,n=$(this.nativeElement).parent(),i=e||"650px",o=n.css("height");return _.includes(i,"%")?(_.includes(o,"%")&&(o=n.height()),t=parseInt(o,10)*Number(i.replace(/\%/g,""))/100):t=parseInt(i,10),this.calendarOptions.calendar.views.month.eventLimit=parseInt(""+t/200,10)+1,t},t.prototype.triggerMobileCalendarChange=function(){this.prepareCalendarEvents(),this.proxyModel=this.proxyModel||moment().valueOf(),this.selecteddates={start:moment(this.proxyModel).valueOf(),end:moment(this.proxyModel).endOf("day").valueOf()},this.invokeEventCallback("eventrender",{$data:this.eventData})},t.prototype.prepareCalendarEvents=function(){var e,t,n=this;this.eventData={},this.dataset&&(t=this.dataset,t=_.isArray(t)?t:_.isObject(t)?[t]:[],this.events=t||this.constructCalendarDataset(t),this.events.forEach(function(t){var i=t.start||t[n.eventstart];i&&(e=moment(i).startOf("day").format("YYYY/MM/DD"),n.eventData[e]?n.eventData[e].push(t):n.eventData[e]=[t],n.mobileCalendar&&n.dayClass.push({date:new Date(i).setHours(0,0,0,0),mode:"day",clazz:n.getDayClass({eventDay:e})}))}),this.mobileCalendar&&this._datepickerInnerComponent&&this._datepickerInnerComponent.refreshView())},t.prototype.constructCalendarDataset=function(e){var t=this,n={title:this.eventtitle||"title",allDay:this.eventallday||"allday",start:this.eventstart||"start",end:this.eventend||"end",className:this.eventclass||"className"};return e.forEach(function(e){_.mapKeys(n,function(n,i){var o;(o="title"===i?a.getEvaluatedData(e,{expression:n},t.viewParent):"allDay"===i?!!_.get(e,n):_.get(e,n))&&("start"!==i&&"end"!==i||(o=function(e,t){var n=!1;return d.forEach(function(t){if(moment(e,t.toUpperCase(),!0).isValid())return n=!0,!1}),n&&"end"===t?moment(e).endOf("day"):moment(e)}(o,i)),e[i]=o)})}),e},t.prototype.setLocale=function(){var e=_.get(this.appLocale,"LABEL_CALENDAR_YEAR")||g,t=_.get(this.appLocale,"LABEL_CALENDAR_MONTH")||v,n=_.get(this.appLocale,"LABEL_CALENDAR_WEEK")||y,i=_.get(this.appLocale,"LABEL_CALENDAR_DAY")||b,o=_.get(this.appLocale,"LABEL_CALENDAR_TODAY")||w;this.calendarOptions.calendar.buttonText={year:e,month:t,week:n,day:i,today:o,listYear:e,listMonth:t,listWeek:n,listDay:i}},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),a.styler(this.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER,["height"]),this.mobileCalendar?(this.view&&"week"!==this.view||(this.view="day"),this.triggerMobileCalendarChange()):this.setLocale()},t.prototype.onStyleChange=function(t,n,i){e.prototype.onStyleChange.call(this,t,n,i),"height"===t&&(this.calendarOptions.calendar.height=this.calculateHeight(n),this.updateCalendarOptions("option","height",this.calendarOptions.calendar.height))},t.prototype.onPropertyChange=function(t,n,i){switch(e.prototype.onPropertyChange.call(this,t,n,i),t){case"selectionmode":n!==P?(this.calendarOptions.calendar.selectable=!0,this.updateCalendarOptions("option","selectable",!0),n===O?(this.calendarOptions.calendar.selectConstraint={start:"00:00",end:"24:00"},this.updateCalendarOptions("option","selectConstraint",this.calendarOptions.calendar.selectConstraint)):this.updateCalendarOptions("option","selectConstraint",{})):(this.calendarOptions.calendar.selectable=!1,this.updateCalendarOptions("option","selectable",!1));break;case"view":"month"!==n||this.calendartype===f?this.calendarOptions.calendar.defaultView=this.calendartype+_.capitalize(n):this.calendarOptions.calendar.defaultView=n,this.updateCalendarOptions("changeView",this.calendarOptions.calendar.defaultView);break;case"calendartype":this.calendartype=n||"basic";case"controls":this.updateCalendarHeaderOptions();break;case"dataset":var o=void 0;this.dataset=n,o=a.createArrayFrom(r.getClonedObject(n)),o=this.constructCalendarDataset(o),this.dataSetEvents.events=o.filter(function(e){if(e.start=e.start||e.end,e.start)return!0}),this.mobileCalendar?this.triggerMobileCalendarChange():(this.updateCalendarOptions("removeEvents"),this.updateCalendarOptions("addEventSource",this.dataSetEvents.events),this.updateCalendarOptions("rerenderEvents"))}},t.prototype.getDefaultDate=function(){if(this.datavalue)return new Date(this.datavalue)},t.prototype.ngAfterViewInit=function(){var t=this;if(e.prototype.ngAfterViewInit.call(this),this.mobileCalendar&&this._datepicker){var n=this._datepicker.activeDate;return this._datepicker.activeDateChange.subscribe(function(e){var i=n.getYear(),o=n.getMonth(),r=e.getYear();o===e.getMonth()&&i===r||(n=e,t.renderMobileView(e))}),this._datepickerInnerComponent=this._datepicker._datePicker,this.renderMobileView(moment(this.datavalue)),void this.registerDestroyListener(r.$watch("_datepickerInnerComponent.datepickerMode",this,{},function(e,n){n&&!_.isEmpty(n)&&t.invokeOnViewRenderback()}))}this.$fullCalendar=$(this._calendar.nativeElement),this.$fullCalendar.fullCalendar(this.calendarOptions.calendar),this.changesStack.length&&(this.changesStack.forEach(function(e){t.$fullCalendar.fullCalendar(e.operationType,e.argumentKey,e.argumentValue)}),this.changesStack.length=0)},t.prototype.updateCalendarOptions=function(e,t,n){this.$fullCalendar?this.$fullCalendar.fullCalendar(e,t,n):this.changesStack.push({operationType:e,argumentKey:t,argumentValue:n})},t.prototype.redraw=function(){this.updateCalendarOptions("render")},t.prototype.onValueChange=function(e){this.proxyModel=e;var t=this.proxyModel&&moment(this.proxyModel).startOf("day").format("YYYY/MM/DD"),n=this.eventData[t],i=moment(this.proxyModel),o=moment(this.proxyModel).endOf("day");this.selecteddata=n,this.selecteddates={start:moment(t).valueOf(),end:moment(t).endOf("day").valueOf()},this.calendarOptions.calendar.select(i.valueOf(),o.valueOf(),{},this,n),n&&this.calendarOptions.calendar.eventClick(n,{},this)},t.prototype.getDayClass=function(e){var t=e.eventDay;if(!_.isEmpty(this.eventData)&&this.eventData[t]){var n=this.eventData[t].length;return 1===n?"app-calendar-event one":2===n?"app-calendar-event two":"app-calendar-event"}return""},t.prototype.renderMobileView=function(e){var t,n;e&&(t=moment(e).startOf("month").valueOf(),n=moment(e).endOf("month").valueOf(),this.currentview={start:t,end:n},this.invokeOnViewRenderback())},t.initializeProps=u(),t.decorators=[{type:o.Component,args:[{selector:"[wmCalendar]",template:'<div *ngIf="!mobileCalendar" #calendar></div>\n\n<datepicker *ngIf="mobileCalendar" #datepicker [(ngModel)]="proxyModel"\n            [initDate]="getDefaultDate()"\n            [minDate]="minDate"\n            [datepickerMode]="view"\n            [showWeeks]="false"\n            [customClass]="dayClass"\n            (selectionDone)="onValueChange($event)">\n</datepicker>\n\n\n\n',providers:[a.provideAsWidgetRef(t)],encapsulation:o.ViewEncapsulation.None,styles:['/*!\n * FullCalendar v3.10.0\n * Docs & License: https://fullcalendar.io/\n * (c) 2018 Adam Shaw\n */.fc{direction:ltr;text-align:left}.fc-rtl{text-align:right}body .fc{font-size:1em}.fc-highlight{background:#bce8f1;opacity:.3}.fc-bgevent{background:#8fdf82;opacity:.3}.fc-nonbusiness{background:#d7d7d7}.fc button{box-sizing:border-box;margin:0;height:2.1em;padding:0 .6em;font-size:1em;white-space:nowrap;cursor:pointer}.fc button::-moz-focus-inner{margin:0;padding:0}.fc-state-default{border:1px solid;background-color:#f5f5f5;background-image:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6));background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);color:#333;text-shadow:0 1px 1px rgba(255,255,255,.75);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05)}.fc-state-default.fc-corner-left{border-top-left-radius:4px;border-bottom-left-radius:4px}.fc-state-default.fc-corner-right{border-top-right-radius:4px;border-bottom-right-radius:4px}.fc button .fc-icon{position:relative;top:-.05em;margin:0 .2em;vertical-align:middle}.fc-state-active,.fc-state-disabled,.fc-state-down,.fc-state-hover{color:#333;background-color:#e6e6e6}.fc-state-hover{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;transition:background-position .1s linear}.fc-state-active,.fc-state-down{background-color:#ccc;background-image:none;box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05)}.fc-state-disabled{cursor:default;background-image:none;opacity:.65;box-shadow:none}.fc-button-group{display:inline-block}.fc .fc-button-group>*{float:left;margin:0 0 0 -1px}.fc .fc-button-group>:first-child{margin-left:0}.fc-popover{position:absolute;box-shadow:0 2px 6px rgba(0,0,0,.15)}.fc-popover .fc-header{padding:2px 4px}.fc-popover .fc-header .fc-title{margin:0 2px}.fc-popover .fc-header .fc-close{cursor:pointer}.fc-ltr .fc-popover .fc-header .fc-title,.fc-rtl .fc-popover .fc-header .fc-close{float:left}.fc-ltr .fc-popover .fc-header .fc-close,.fc-rtl .fc-popover .fc-header .fc-title{float:right}.fc-divider{border-style:solid;border-width:1px}hr.fc-divider{height:0;margin:0;padding:0 0 2px;border-width:1px 0}.fc-clear{clear:both}.fc-bg,.fc-bgevent-skeleton,.fc-helper-skeleton,.fc-highlight-skeleton{position:absolute;top:0;left:0;right:0}.fc-bg{bottom:0}.fc-bg table{height:100%}.fc table{width:100%;box-sizing:border-box;table-layout:fixed;border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{border-style:solid;border-width:1px;padding:0;vertical-align:top}.fc td.fc-today{border-style:double}a[data-goto]{cursor:pointer}a[data-goto]:hover{text-decoration:underline}.fc .fc-row{border-style:solid;border-width:0}.fc-row table{border-left:0 hidden transparent;border-right:0 hidden transparent;border-bottom:0 hidden transparent}.fc-row:first-child table{border-top:0 hidden transparent}.fc-row{position:relative}.fc-row .fc-bg{z-index:1}.fc-row .fc-bgevent-skeleton,.fc-row .fc-highlight-skeleton{bottom:0}.fc-row .fc-bgevent-skeleton table,.fc-row .fc-highlight-skeleton table{height:100%}.fc-row .fc-bgevent-skeleton td,.fc-row .fc-highlight-skeleton td{border-color:transparent}.fc-row .fc-bgevent-skeleton{z-index:2}.fc-row .fc-highlight-skeleton{z-index:3}.fc-row .fc-content-skeleton{position:relative;z-index:4;padding-bottom:2px}.fc-row .fc-helper-skeleton{z-index:5}.fc .fc-row .fc-content-skeleton table,.fc .fc-row .fc-content-skeleton td,.fc .fc-row .fc-helper-skeleton td{background:0 0;border-color:transparent}.fc-row .fc-content-skeleton td,.fc-row .fc-helper-skeleton td{border-bottom:0}.fc-row .fc-content-skeleton tbody td,.fc-row .fc-helper-skeleton tbody td{border-top:0}.fc-scroller{-webkit-overflow-scrolling:touch}.fc-scroller>.fc-day-grid,.fc-scroller>.fc-time-grid{position:relative;width:100%}.fc-event{position:relative;display:block;font-size:.85em;line-height:1.3;border-radius:3px;border:1px solid #3a87ad}.fc-event,.fc-event-dot{background-color:#3a87ad}.fc-event,.fc-event:hover{color:#fff;text-decoration:none}.fc-event.fc-draggable,.fc-event[href]{cursor:pointer}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc-event .fc-bg{z-index:1;background:#fff;opacity:.25}.fc-event .fc-content{position:relative;z-index:2}.fc-event .fc-resizer{position:absolute;z-index:4;display:none}.fc-event.fc-allow-mouse-resize .fc-resizer,.fc-event.fc-selected .fc-resizer{display:block}.fc-event.fc-selected .fc-resizer:before{content:"";position:absolute;z-index:9999;top:50%;left:50%;width:40px;height:40px;margin-left:-20px;margin-top:-20px}.fc-event.fc-selected{z-index:9999!important;box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event.fc-selected.fc-dragging{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-h-event.fc-selected:before{content:"";position:absolute;z-index:3;top:-10px;bottom:-10px;left:0;right:0}.fc-ltr .fc-h-event.fc-not-start,.fc-rtl .fc-h-event.fc-not-end{margin-left:0;border-left-width:0;padding-left:1px;border-top-left-radius:0;border-bottom-left-radius:0}.fc-ltr .fc-h-event.fc-not-end,.fc-rtl .fc-h-event.fc-not-start{margin-right:0;border-right-width:0;padding-right:1px;border-top-right-radius:0;border-bottom-right-radius:0}.fc-ltr .fc-h-event .fc-start-resizer,.fc-rtl .fc-h-event .fc-end-resizer{cursor:w-resize;left:-1px}.fc-ltr .fc-h-event .fc-end-resizer,.fc-rtl .fc-h-event .fc-start-resizer{cursor:e-resize;right:-1px}.fc-h-event.fc-allow-mouse-resize .fc-resizer{width:7px;top:-1px;bottom:-1px}.fc-h-event.fc-selected .fc-resizer{border-radius:4px;width:6px;height:6px;background:#fff;top:50%;margin-top:-4px;border:1px solid;border-color:inherit}.fc-ltr .fc-h-event.fc-selected .fc-start-resizer,.fc-rtl .fc-h-event.fc-selected .fc-end-resizer{margin-left:-4px}.fc-ltr .fc-h-event.fc-selected .fc-end-resizer,.fc-rtl .fc-h-event.fc-selected .fc-start-resizer{margin-right:-4px}.fc-day-grid-event{margin:1px 2px 0;padding:0 1px}tr:first-child>td>.fc-day-grid-event{margin-top:2px}.fc-day-grid-event.fc-selected:after{content:"";position:absolute;z-index:1;top:-1px;right:-1px;bottom:-1px;left:-1px;background:#000;opacity:.25}.fc-day-grid-event .fc-content{white-space:nowrap;overflow:hidden}.fc-day-grid-event .fc-time{font-weight:700}.fc-ltr .fc-day-grid-event.fc-allow-mouse-resize .fc-start-resizer,.fc-rtl .fc-day-grid-event.fc-allow-mouse-resize .fc-end-resizer{margin-left:-2px}.fc-ltr .fc-day-grid-event.fc-allow-mouse-resize .fc-end-resizer,.fc-rtl .fc-day-grid-event.fc-allow-mouse-resize .fc-start-resizer{margin-right:-2px}a.fc-more{margin:1px 3px;font-size:.85em;cursor:pointer;text-decoration:none}a.fc-more:hover{text-decoration:underline}.fc-limited{display:none}.fc-day-grid .fc-row{z-index:1}.fc-more-popover{z-index:2;width:220px}.fc-more-popover .fc-event-container{padding:10px}.fc-now-indicator{position:absolute;border:0 solid red}.fc-unselectable{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.fc-unthemed .fc-content,.fc-unthemed .fc-divider,.fc-unthemed .fc-list-heading td,.fc-unthemed .fc-list-view,.fc-unthemed .fc-popover,.fc-unthemed .fc-row,.fc-unthemed tbody,.fc-unthemed td,.fc-unthemed th,.fc-unthemed thead{border-color:#ddd}.fc-unthemed .fc-popover{background-color:#fff;border-width:1px;border-style:solid}.fc-unthemed .fc-divider,.fc-unthemed .fc-list-heading td,.fc-unthemed .fc-popover .fc-header{background:#eee}.fc-unthemed .fc-popover .fc-header .fc-close{color:#666;font-size:.9em;margin-top:2px}.fc-unthemed td.fc-today{background:#fcf8e3}.fc-unthemed .fc-disabled-day{background:#d7d7d7;opacity:.3}.fc-icon{display:inline-block;height:1em;line-height:1em;font-size:1em;text-align:center;overflow:hidden;font-family:"Courier New",Courier,monospace;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fc-icon:after{position:relative}.fc-icon-left-single-arrow:after{content:"\\2039";font-weight:700;font-size:200%;top:-7%}.fc-icon-right-single-arrow:after{content:"\\203A";font-weight:700;font-size:200%;top:-7%}.fc-icon-left-double-arrow:after{content:"\\AB";font-size:160%;top:-7%}.fc-icon-right-double-arrow:after{content:"\\BB";font-size:160%;top:-7%}.fc-icon-left-triangle:after{content:"\\25C4";font-size:125%;top:3%}.fc-icon-right-triangle:after{content:"\\25BA";font-size:125%;top:3%}.fc-icon-down-triangle:after{content:"\\25BC";font-size:125%;top:2%}.fc-icon-x:after{content:"\\D7";font-size:200%;top:6%}.fc-unthemed .fc-list-item:hover td{background-color:#f5f5f5}.ui-widget .fc-disabled-day{background-image:none}.fc-popover>.ui-widget-header+.ui-widget-content{border-top:0}.ui-widget .fc-event{color:#fff;text-decoration:none;font-weight:400}.ui-widget td.fc-axis{font-weight:400}.fc-time-grid .fc-slats .ui-widget-content{background:0 0}.fc.fc-bootstrap3 a{text-decoration:none}.fc.fc-bootstrap3 a[data-goto]:hover{text-decoration:underline}.fc-bootstrap3 hr.fc-divider{border-color:inherit}.fc-bootstrap3 .fc-today.alert{border-radius:0}.fc-bootstrap3 .fc-popover .panel-body{padding:0}.fc-bootstrap3 .fc-time-grid .fc-slats table{background:0 0}.fc.fc-bootstrap4 a{text-decoration:none}.fc.fc-bootstrap4 a[data-goto]:hover{text-decoration:underline}.fc-bootstrap4 hr.fc-divider{border-color:inherit}.fc-bootstrap4 .fc-today.alert{border-radius:0}.fc-bootstrap4 a.fc-event:not([href]):not([tabindex]){color:#fff}.fc-bootstrap4 .fc-popover.card{position:absolute}.fc-bootstrap4 .fc-popover .card-body{padding:0}.fc-bootstrap4 .fc-time-grid .fc-slats table{background:0 0}.fc-toolbar{text-align:center}.fc-toolbar.fc-header-toolbar{margin-bottom:1em}.fc-toolbar.fc-footer-toolbar{margin-top:1em}.fc-toolbar .fc-left{float:left}.fc-toolbar .fc-right{float:right}.fc-toolbar .fc-center{display:inline-block}.fc .fc-toolbar>*>*{float:left;margin-left:.75em}.fc .fc-toolbar>*>:first-child{margin-left:0}.fc-toolbar h2{margin:0}.fc-toolbar button{position:relative}.fc-toolbar .fc-state-hover,.fc-toolbar .ui-state-hover{z-index:2}.fc-toolbar .fc-state-down{z-index:3}.fc-toolbar .fc-state-active,.fc-toolbar .ui-state-active{z-index:4}.fc-toolbar button:focus{z-index:5}.fc-view-container *,.fc-view-container :after,.fc-view-container :before{box-sizing:content-box}.fc-view,.fc-view>table{position:relative;z-index:1}.fc-basicDay-view .fc-content-skeleton,.fc-basicWeek-view .fc-content-skeleton{padding-bottom:1em}.fc-basic-view .fc-body .fc-row{min-height:4em}.fc-row.fc-rigid{overflow:hidden}.fc-row.fc-rigid .fc-content-skeleton{position:absolute;top:0;left:0;right:0}.fc-day-top.fc-other-month{opacity:.3}.fc-basic-view .fc-day-number,.fc-basic-view .fc-week-number{padding:2px}.fc-basic-view th.fc-day-number,.fc-basic-view th.fc-week-number{padding:0 2px}.fc-ltr .fc-basic-view .fc-day-top .fc-day-number{float:right}.fc-rtl .fc-basic-view .fc-day-top .fc-day-number{float:left}.fc-ltr .fc-basic-view .fc-day-top .fc-week-number{float:left;border-radius:0 0 3px}.fc-rtl .fc-basic-view .fc-day-top .fc-week-number{float:right;border-radius:0 0 0 3px}.fc-basic-view .fc-day-top .fc-week-number{min-width:1.5em;text-align:center;background-color:#f2f2f2;color:grey}.fc-basic-view td.fc-week-number{text-align:center}.fc-basic-view td.fc-week-number>*{display:inline-block;min-width:1.25em}.fc-agenda-view .fc-day-grid{position:relative;z-index:2}.fc-agenda-view .fc-day-grid .fc-row{min-height:3em}.fc-agenda-view .fc-day-grid .fc-row .fc-content-skeleton{padding-bottom:1em}.fc .fc-axis{vertical-align:middle;padding:0 4px;white-space:nowrap}.fc-ltr .fc-axis{text-align:right}.fc-rtl .fc-axis{text-align:left}.fc-time-grid,.fc-time-grid-container{position:relative;z-index:1}.fc-time-grid{min-height:100%}.fc-time-grid table{border:0 hidden transparent}.fc-time-grid>.fc-bg{z-index:1}.fc-time-grid .fc-slats,.fc-time-grid>hr{position:relative;z-index:2}.fc-time-grid .fc-content-col{position:relative}.fc-time-grid .fc-content-skeleton{position:absolute;z-index:3;top:0;left:0;right:0}.fc-time-grid .fc-business-container{position:relative;z-index:1}.fc-time-grid .fc-bgevent-container{position:relative;z-index:2}.fc-time-grid .fc-highlight-container{z-index:3;position:relative}.fc-time-grid .fc-event-container{position:relative;z-index:4}.fc-time-grid .fc-now-indicator-line{z-index:5}.fc-time-grid .fc-helper-container{position:relative;z-index:6}.fc-time-grid .fc-slats td{height:1.5em;border-bottom:0}.fc-time-grid .fc-slats .fc-minor td{border-top-style:dotted}.fc-time-grid .fc-highlight{position:absolute;left:0;right:0}.fc-ltr .fc-time-grid .fc-event-container{margin:0 2.5% 0 2px}.fc-rtl .fc-time-grid .fc-event-container{margin:0 2px 0 2.5%}.fc-time-grid .fc-bgevent,.fc-time-grid .fc-event{position:absolute;z-index:1}.fc-time-grid .fc-bgevent{left:0;right:0}.fc-v-event.fc-not-start{border-top-width:0;padding-top:1px;border-top-left-radius:0;border-top-right-radius:0}.fc-v-event.fc-not-end{border-bottom-width:0;padding-bottom:1px;border-bottom-left-radius:0;border-bottom-right-radius:0}.fc-time-grid-event{overflow:hidden}.fc-time-grid-event.fc-selected{overflow:visible}.fc-time-grid-event.fc-selected .fc-bg{display:none}.fc-time-grid-event .fc-content{overflow:hidden}.fc-time-grid-event .fc-time,.fc-time-grid-event .fc-title{padding:0 1px}.fc-time-grid-event .fc-time{font-size:.85em;white-space:nowrap}.fc-time-grid-event.fc-short .fc-content{white-space:nowrap}.fc-time-grid-event.fc-short .fc-time,.fc-time-grid-event.fc-short .fc-title{display:inline-block;vertical-align:top}.fc-time-grid-event.fc-short .fc-time span{display:none}.fc-time-grid-event.fc-short .fc-time:before{content:attr(data-start)}.fc-time-grid-event.fc-short .fc-time:after{content:"\\A0-\\A0"}.fc-time-grid-event.fc-short .fc-title{font-size:.85em;padding:0}.fc-time-grid-event.fc-allow-mouse-resize .fc-resizer{left:0;right:0;bottom:0;height:8px;overflow:hidden;line-height:8px;font-size:11px;font-family:monospace;text-align:center;cursor:s-resize}.fc-time-grid-event.fc-allow-mouse-resize .fc-resizer:after{content:"="}.fc-time-grid-event.fc-selected .fc-resizer{border-radius:5px;width:8px;height:8px;background:#fff;left:50%;margin-left:-5px;bottom:-5px;border:1px solid;border-color:inherit}.fc-time-grid .fc-now-indicator-line{border-top-width:1px;left:0;right:0}.fc-time-grid .fc-now-indicator-arrow{margin-top:-5px}.fc-ltr .fc-time-grid .fc-now-indicator-arrow{left:0;border-width:5px 0 5px 6px;border-top-color:transparent;border-bottom-color:transparent}.fc-rtl .fc-time-grid .fc-now-indicator-arrow{right:0;border-width:5px 6px 5px 0;border-top-color:transparent;border-bottom-color:transparent}.fc-event-dot{display:inline-block;width:10px;height:10px;border-radius:5px}.fc-rtl .fc-list-view{direction:rtl}.fc-list-view{border-width:1px;border-style:solid}.fc .fc-list-table{table-layout:auto}.fc-list-table td{border-width:1px 0 0;padding:8px 14px}.fc-list-table tr:first-child td{border-top-width:0}.fc-list-heading{border-bottom-width:1px}.fc-list-heading td{font-weight:700}.fc-ltr .fc-list-heading-main{float:left}.fc-ltr .fc-list-heading-alt,.fc-rtl .fc-list-heading-main{float:right}.fc-rtl .fc-list-heading-alt{float:left}.fc-list-item.fc-has-url{cursor:pointer}.fc-list-item-marker,.fc-list-item-time{white-space:nowrap;width:1px}.fc-ltr .fc-list-item-marker{padding-right:0}.fc-rtl .fc-list-item-marker{padding-left:0}.fc-list-item-title a{text-decoration:none;color:inherit}.fc-list-item-title a[href]:hover{text-decoration:underline}.fc-list-empty-wrap2{position:absolute;top:0;left:0;right:0;bottom:0}.fc-list-empty-wrap1{width:100%;height:100%;display:table}.fc-list-empty{display:table-cell;vertical-align:middle;text-align:center}.fc-unthemed .fc-list-empty{background-color:#eee}']}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:r.AbstractI18nService}]},t.propDecorators={_calendar:[{type:o.ViewChild,args:["calendar"]}],_datepicker:[{type:o.ViewChild,args:["datepicker"]}]},t}(a.StylableComponent),C=[S],I=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[r.CoreModule,i.DatepickerModule,t.CommonModule,n.FormsModule,a.WmComponentsModule],declarations:p(C),exports:p(C),entryComponents:[]}]}],e}();e.\u0275a=S,e.\u0275b=u,e.CalendarModule=I,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@wm/components/input"),require("@wm/components/basic/search"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/chips",["exports","@angular/common","@angular/core","@angular/forms","@wm/components/input","@wm/components/basic/search","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.chips={}),e.ng.common,e.ng.core,e.ng.forms,e.wm.components.input,e.wm.components.basic.search,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d=new Map([["allowonlyselect",a.PROP_BOOLEAN],["autofocus",a.PROP_BOOLEAN],["chipclass",a.PROP_STRING],["class",a.PROP_STRING],["compareby",a.PROP_STRING],["datafield",a.PROP_STRING],["dataoptions",a.PROP_ANY],["dataset",c({value:"Option 1, Option 2, Option 3"},a.PROP_ANY)],["datasource",a.PROP_ANY],["datavalue",a.PROP_ANY],["datavaluesource",a.PROP_ANY],["disabled",a.PROP_BOOLEAN],["displayexpression",a.PROP_STRING],["displayfield",a.PROP_STRING],["displayimagesrc",a.PROP_STRING],["enablereorder",a.PROP_BOOLEAN],["inputposition",c({value:"last"},a.PROP_STRING)],["inputwidth",c({value:"default"},a.PROP_STRING)],["limit",a.PROP_NUMBER],["loadingdatamsg",c({value:"Loading items..."},a.PROP_STRING)],["matchmode",a.PROP_STRING],["maxsize",a.PROP_NUMBER],["minchars",c({value:1},a.PROP_NUMBER)],["name",a.PROP_STRING],["navsearchbar",c({value:!1},a.PROP_BOOLEAN)],["orderby",a.PROP_STRING],["placeholder",c({value:"Type here.."},a.PROP_STRING)],["query",a.PROP_STRING],["readonly",a.PROP_BOOLEAN],["searchkey",a.PROP_STRING],["shortcutkey",a.PROP_STRING],["show",c({value:!0},a.PROP_BOOLEAN)],["showsearchicon",a.PROP_BOOLEAN],["tabindex",c({value:0},a.PROP_NUMBER)],["type",c({value:"search"},a.PROP_STRING)],["debouncetime",c({value:250},a.PROP_NUMBER)]]),m=function(){a.register("wm-chips",d),a.registerFormWidget(s.FormWidgetType.CHIPS,new Map(d))},h={widgetType:"wm-chips",hostClass:"app-chips nav nav-pills list-inline"},f=function(e){function t(t,n,i,o,r,l,c){var p=e.call(this,t,h)||this;p.bindDisplayField=n,p.bindDisplayExpr=i,p.bindDisplayImgSrc=o,p.bindDataField=r,p.bindDataSet=l,p.bindChipclass=c,p.chipsList=[],p.maxSizeReached="Max size reached",p._unsubscribeDv=!1,a.styler(p.nativeElement,p),s.isDefined(p.showsearchicon)||(p.showsearchicon=!1),p.multiple=!0,p.nextItemIndex=0,p._debounceUpdateQueryModel=s.debounce(function(e){p.updateQueryModel(e).then(function(){p.bindChipclass&&_.forEach(p.chipsList,function(e,t){p.registerChipItemClass(e,t)})})},150);var u=p.dataset$.subscribe(function(){p.searchComponent.dataset=p.dataset,p.nextItemIndex=p.datasetItems.length,p._debounceUpdateQueryModel(p.datavalue||p.toBeProcessedDatavalue)});p.registerDestroyListener(function(){return u.unsubscribe()});var d=p.datavalue$.subscribe(function(e){p._unsubscribeDv||(p.chipsList=[],p._debounceUpdateQueryModel(e))});return p.registerDestroyListener(function(){return d.unsubscribe()}),p}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"datasource",{get:function(){return this._datasource},set:function(e){this._datasource=e,this.searchComponent.datasource=e,this._debounceUpdateQueryModel(this.datavalue||this.toBeProcessedDatavalue)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.searchComponent.multiple=!0,this.searchComponent.binddisplayimagesrc=this.bindDisplayImgSrc,this.searchComponent.displayimagesrc=this.displayimagesrc,this.searchComponent.binddisplaylabel=this.bindDisplayExpr,this.searchComponent.displaylabel=this.displayfield,this.searchComponent.datafield=this.bindDataField||this.datafield,this.searchComponent.binddataset=this.bindDataSet,this.searchComponent.dataset=this.dataset,this.searchComponent.searchkey=this.searchkey,this.searchComponent.limit=this.limit,this.searchComponent.debouncetime=this.debouncetime,this.searchComponent.matchmode=this.matchmode,this.getTransformedData=function(e,n){return t.searchComponent.getTransformedData([e],t.nextItemIndex++,n)}},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this.enablereorder&&this.configureDnD()},t.prototype.registerChipItemClass=function(e,t){var n=this;if(this.bindChipclass){var i=this.widgetId+"_chipItemClass_"+t;s.$unwatch(i),this.registerDestroyListener(s.$watch(this.bindChipclass,this.viewParent,{item:e,$index:t},function(e,i){n.applyItemClass(a.getConditionalClasses(e,i),t)},i))}},t.prototype.applyItemClass=function(e,t){var n=this.nativeElement.querySelectorAll(".chip-item").item(t);$(n).removeClass(e.toRemove).addClass(e.toAdd)},t.prototype.removeDuplicates=function(){this.chipsList=a.getUniqObjsByDataField(this.chipsList,this.datafield,this.displayfield||this.displaylabel)},t.prototype.updateQueryModel=function(e){var t=this,n=[];if(!e)return this.chipsList=[],Promise.resolve();var i=_.clone(e),o=this.chipsList;this.chipsList=[],this.maxsize&&i.length>this.maxsize&&(this._modelByValue=i=_.slice(i,0,this.maxsize),e=i);var r=[];return i.forEach(function(n,i){var s=_.find(t.datasetItems,function(e){return _.isObject(e.value)?_.isEqual(e.value,n):_.toString(e.value)===_.toString(n)});if(s)t.chipsList.push(s);else if(t.datafield!==a.ALLFIELDS)r.push(n);else if(t.datafield===a.ALLFIELDS){var l=void 0,c=!1;if(_.isObject(n)){var p=o.find(function(e){return _.isEqual(e.value,n)});p&&(c=p.iscustom)}else c=!0,(l=t.createCustomDataModel(n))&&e.splice(i,1,l);l=l||n;var u=t.getTransformedData(l,c)[0];c&&(u.iscustom=c),t.chipsList.push(u)}}),r.length&&n.push(this.getDefaultModel(r,this.nextItemIndex).then(function(n){t.chipsList=t.chipsList.concat(n||[]),i.forEach(function(n,i){if(!_.find(t.chipsList,function(e){return e.value.toString()===n.toString()})){if(t.allowonlyselect){var o=e.indexOf(n);return void(o>-1&&e.splice(o,1))}var r=t.getTransformedData(n,!0)[0];r.iscustom=!0,t.chipsList.push(r)}})})),this.resetSearchModel(!0),Promise.all(n).then(function(){t._modelByValue=e,t.removeDuplicates(),t.updateMaxSize(),s.$appDigest()})},t.prototype.resetSearchModel=function(e){this._unsubscribeDv=!0,this.searchComponent.clearSearch(void 0,!this.minchars&&!e),this._unsubscribeDv=!1},t.prototype.onSelect=function(e){this.searchComponent.liElements.length||this.addItem(e)},t.prototype.addItem=function(e,t){var n,i,o=t;if(o&&s.isDefined(o.datavalue)&&""!==o.queryModel){if(!o.query||!_.trim(o.query))return;i=o.queryModel}else{if(this.allowonlyselect)return;var r=void 0;if(this.datafield===a.ALLFIELDS&&!_.isObject(this.searchComponent.query)&&_.trim(this.searchComponent.query)&&!(r=this.createCustomDataModel(this.searchComponent.query)))return void this.resetSearchModel();var l=r||_.trim(this.searchComponent.query);if(l)(i=this.getTransformedData(l,!0)[0]).iscustom=!0}s.isDefined(i)&&""!==i&&(n=this.invokeEventCallback("beforeadd",{$event:e,newItem:i}),s.isDefined(n)&&!s.toBoolean(n)||(this.isDuplicate(i)?this.resetSearchModel():(this.registerChipItemClass(i,this.chipsList.length),this.chipsList.push(i),this.datavalue?this._modelByValue=u(this._modelByValue,[i.value]):this._modelByValue=[i.value],this._unsubscribeDv=!0,this.invokeOnTouched(),this.invokeOnChange(this._modelByValue,e||{},!0),this.invokeEventCallback("add",{$event:e,$item:i}),this.updateMaxSize(),this.resetSearchModel(),!e||"Enter"!==e.key&&13!==e.keyCode||this.stopEvent(e))))},t.prototype.createCustomDataModel=function(e){var t=this.displayfield||(this.datafield!==a.ALLFIELDS?this.datafield:void 0);if(t){var n={};return n[t]=e,n}},t.prototype.isDuplicate=function(e){return this.datafield===a.ALLFIELDS?_.findIndex(this.chipsList,{value:e.value})>-1:_.findIndex(this.chipsList,{key:e.key})>-1},t.prototype.updateMaxSize=function(){this.saturate=this.maxsize>0&&this.chipsList.length===this.maxsize},t.prototype.getDefaultModel=function(e,t){return this.nextItemIndex++,this.searchComponent.getDataSource(e,!0,t).then(function(t){return _.filter(e,function(e){_.find(t,{value:e})})})},t.prototype.handleChipClick=function(e,t){this.readonly||(e.currentTarget.focus(),this.invokeEventCallback("chipclick",{$event:e,$item:t}))},t.prototype.handleChipFocus=function(e,t){this.readonly||(t.active=!0,this.invokeEventCallback("chipselect",{$event:e,$item:t}))},t.prototype.stopEvent=function(e){e.stopPropagation(),e.preventDefault()},t.prototype.onTextDelete=function(e){s.isAppleProduct&&this.onInputClear(e)},t.prototype.onInputClear=function(e){this.chipsList&&this.chipsList.length&&!this.searchComponent.query&&(this.$element.find("li.chip-item > a.app-chip:last").focus(),this.stopEvent(e))},t.prototype.onBackspace=function(e,t,n){this.readonly||this.removeItem(e,t,n,!0)},t.prototype.onDelete=function(e,t,n){this.readonly||this.removeItem(e,t,n)},t.prototype.onArrowLeft=function(e,t){this.readonly||(this.searchComponent.query||s.isDefined(t)||s.isDefined(e)?t>0?this.$element.find("li.chip-item > a.app-chip").get(t-1).focus():this.focusSearchBox():this.$element.find("li.chip-item > a.app-chip:last").focus())},t.prototype.onArrowRight=function(e,t){this.readonly||(this.searchComponent.query||s.isDefined(t)||s.isDefined(e)?t<this.chipsList.length-1?this.$element.find("li.chip-item > a.app-chip").get(t+1).focus():this.focusSearchBox():this.$element.find("li.chip-item > a.app-chip:first").focus())},t.prototype.focusSearchBox=function(){this.$element.find(".app-chip-input > input.app-textbox").focus()},t.prototype.removeItem=function(e,t,n,i){var o=this;e.stopPropagation();var r=_.isArray(n)?n:[n],a=_.max(r),l=_.reduce(r,function(e,t){return e.push(o.chipsList[t]),e},[]),c=this.invokeEventCallback("beforeremove",{$event:e,$item:1===l.length?l[0]:l});if(!s.isDefined(c)||s.toBoolean(c)){var p=_.clone(this.datavalue);setTimeout(function(){var e=o.chipsList.length,t=o.$element.find("li.chip-item > a.app-chip");e&&i?e-1<a?t.get(e-1).focus():(o.chipsList[a].active=!0,t.get(a).focus()):o.focusSearchBox()}),_.pullAt(this.chipsList,r).forEach(function(e){o._modelByValue=_.filter(o._modelByValue,function(t){return!(_.isObject(t)?_.isEqual(t,e.value):_.toString(t)===_.toString(e.value))})}),this._unsubscribeDv=!1,this.invokeOnChange(this._modelByValue,e,!0),this.invokeEventCallback("change",{$event:e,newVal:this.datavalue,oldVal:p}),this.updateMaxSize(),this.invokeEventCallback("remove",{$event:e,$item:1===l.length?l[0]:l})}},t.prototype.swapElementsInArray=function(e,t,n){var i=_.pullAt(e,n)[0];e.splice(t,0,i)},t.prototype.resetReorder=function(){this.$element.removeData("oldIndex")},t.prototype.invokeOnBeforeServiceCall=function(e){this.invokeEventCallback("beforeservicecall",{inputData:e})},t.prototype.handleEvent=function(t,n,i,o){"remove"!==n&&"beforeremove"!==n&&"chipselect"!==n&&"chipclick"!==n&&"add"!==n&&"reorder"!==n&&"change"!==n&&e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.configureDnD=function(){a.configureDnD(this.$element,{items:"> li:not(.app-chip-search)",placeholder:"chip-placeholder"},this.onReorderStart.bind(this),this.update.bind(this))},t.prototype.onReorderStart=function(e,t){var n=t.helper;n.width(n.width()+1),this.$element.data("oldIndex",t.item.index()-("first"===this.inputposition?1:0))},t.prototype.update=function(e,t){var n,i,o;if(i=t.item.index()-("first"===this.inputposition?1:0),n={oldIndex:o=this.$element.data("oldIndex"),newIndex:i=this.chipsList.length===i?i-1:i,item:this.chipsList[o]},i!==o){n.item=this.chipsList[o];var r=this.invokeEventCallback("beforereorder",{$event:e,$data:this.chipsList,$changedItem:n});s.isDefined(r)&&!1===s.toBoolean(r)?this.resetReorder():(this.swapElementsInArray(this.chipsList,i,o),this.swapElementsInArray(this._modelByValue,i,o),n.item=this.chipsList[i],this.chipsList=u(this.chipsList),this.resetReorder(),this.invokeEventCallback("reorder",{$event:e,$data:this.chipsList,$changedItem:n}))}else this.resetReorder()},t.prototype.onPropertyChange=function(t,n,i){var o=this;if("tabindex"!==t){if("dataoptions"===t&&(this.searchComponent.dataoptions=n),"datafield"===t&&(this.searchComponent.datafield=this.datafield),"displayfield"===t&&(this.searchComponent.displaylabel=this.displayfield),"displayexpression"===t&&(this.searchComponent.binddisplaylabel=this.binddisplayexpression?this.binddisplayexpression:this.displayexpression),"displayimagesrc"===t&&(this.searchComponent.binddisplayimagesrc=this.binddisplayimagesrc?this.binddisplayimagesrc:this.displayimagesrc),"limit"===t&&(this.searchComponent.limit=this.limit),"matchmode"===t&&(this.searchComponent.matchmode=this.matchmode),"enablereorder"===t&&(this.$element.hasClass("ui-sortable")?this.$element.sortable("option","disabled",!n):n&&this.configureDnD()),"readonly"===t&&(n?this.$element.addClass("readonly"):this.$element.removeClass("readonly")),"inputposition"===t){var r=this.$element.find("li.app-chip-search");"first"===n?this.$element.prepend(r):this.$element.append(r)}"autofocus"===t&&n&&setTimeout(function(){var e=o.$element.find(".app-chip-input > input.app-textbox");e&&e.length&&o.focusSearchBox()}),e.prototype.onPropertyChange.call(this,t,n,i)}},t.initializeProps=m(),t.decorators=[{type:n.Component,args:[{selector:"[wmChips]",template:'<li class="chip-item" role="option" *ngFor="let item of chipsList; let $index = index;"\n    [ngClass]="{\'active\': item.active, \'disabled\': disabled}">\n    <a class="app-chip" href="javascript:void(0);" tabindex="-1"\n       (click)="handleChipClick($event, item)"\n       (keydown.delete)="onDelete($event, item, $index)"\n       (keydown.backspace)="onBackspace($event, item, $index)"\n       (keydown.arrowleft)="onArrowLeft(item, $index)"\n       (keydown.arrowright)="onArrowRight(item, $index)"\n       (focus)="handleChipFocus($event, item)"\n       (blur)="readonly ? 0 : item.active = false"\n       [ngClass]="{\'chip-duplicate bg-danger\': item.isDuplicate, \'chip-picture\': item.imgSrc}">\n        <img data-identifier="img" alt="Chip Image" class="button-image-icon" [src]="item.imgSrc" *ngIf="item.imgSrc"/>\n        <span class="app-chip-title" [textContent]="item.label" [title]="item.label"></span>\n        <button type="button" tabindex="-1" arial-label="Clear Button" class="btn btn-transparent" (click)="removeItem($event, item, $index);" *ngIf="!readonly">\n            <i class="app-icon wi wi-close"></i>\n        </button>\n    </a>\n</li>\n<li class="app-chip-search" [ngClass]="{\'full-width\': inputwidth === \'full\'}">\n    <div #search wmSearch class="app-chip-input"\n         name="app-chip-search"\n         submit.event="addItem($event, widget)"\n         beforeservicecall.event="invokeOnBeforeServiceCall(inputData)"\n         disabled.bind="disabled || readonly || saturate"\n         datafield.bind="datafield"\n         allowonlyselect.bind="allowonlyselect"\n         searchkey.bind="searchkey"\n         orderby.bind="orderby"\n         placeholder.bind="saturate ? maxSizeReached : placeholder"\n         showsearchicon.bind="showsearchicon"\n         tabindex.bind="tabindex"\n         minchars.bind="minchars"\n         debouncetime.bind="debouncetime"\n         matchmode.bind="matchmode"\n         (keydown.enter)="onSelect($event)"\n         (keydown.delete)="onTextDelete($event)"\n         (keydown.backspace)="onInputClear($event)"\n         (keydown.arrowleft)="onArrowLeft()"\n         (keydown.arrowright)="onArrowRight()">\n    </div>\n</li>\n',providers:[a.provideAs(t,i.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:void 0,decorators:[{type:n.Attribute,args:["displayfield.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["displayexpression.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["displayimagesrc.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["datafield.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:n.Attribute,args:["chipclass.bind"]}]}]},t.propDecorators={searchComponent:[{type:n.ViewChild,args:[r.SearchComponent]}]},t}(o.DatasetAwareFormComponent),g=[f],v=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.SearchModule,a.WmComponentsModule],declarations:u(g),exports:u(g),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275b=m,e.ChipsModule=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-color-picker"),require("@angular/core"),require("@angular/forms"),require("@wm/components/input"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/color-picker",["exports","@angular/common","ngx-color-picker","@angular/core","@angular/forms","@wm/components/input","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.colorpicker={}),e.ng.common,e.zef.ngxColorPicker,e.ng.core,e.ng.forms,e.wm.components.input,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d=new Map([["class",a.PROP_STRING],["datavalue",a.PROP_STRING],["disabled",a.PROP_BOOLEAN],["hint",a.PROP_STRING],["name",a.PROP_STRING],["placeholder",c({value:"Select Color"},a.PROP_STRING)],["readonly",a.PROP_BOOLEAN],["required",a.PROP_BOOLEAN],["shortcutkey",a.PROP_STRING],["show",c({value:!0},a.PROP_BOOLEAN)],["tabindex",c({value:0},a.PROP_NUMBER)]]),m=function(){a.register("wm-colorpicker",d),a.registerFormWidget(s.FormWidgetType.COLORPICKER,new Map(d))},h={widgetType:"wm-colorpicker",hostClass:"input-group app-colorpicker",displayType:"inline-block"},f=function(e){function t(t){var n=e.call(this,t,h)||this;return a.styler(n.nativeElement,n),n}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.colorPickerToggleChange=function(e){var t=this.nativeElement.querySelector(".color-picker");e?s.removeClass(t,"hidden"):s.addClass(t,"hidden")},t.prototype.handleEvent=function(t,n,i,o){"change"!==n&&"blur"!==n&&e.prototype.handleEvent.call(this,this.inputEl.nativeElement,n,i,o)},t.prototype.handleChange=function(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=m(),t.decorators=[{type:i.Component,args:[{selector:"[wmColorPicker]",template:'<input class="form-control app-textbox" aria-label="Enter the color code" aria-haspopup="true" aria-expanded="false"\n       #input\n       focus-target\n       [attr.name]="name"\n       [(colorPicker)]="datavalue"\n       (colorPickerChange)="handleChange($event);"\n       (cpToggleChange)="colorPickerToggleChange($event)"\n       [cpPosition]="\'bottom\'"\n       [attr.placeholder]="placeholder"\n       [disabled]="readonly || disabled"\n       [required]="required"\n       [tabindex]="tabindex"\n       [(ngModel)]="datavalue"\n       (ngModelChange)="handleChange($event);"\n       [ngModelOptions]="{updateOn: \'change\'}"\n       (blur)="invokeOnTouched($event)"\n       [attr.accesskey]="shortcutkey">\n<span class="input-group-addon colorpicker-container">\n    <i class="colored-box" [style.backgroundColor]="datavalue">&nbsp;</i>\n</span>',providers:[a.provideAs(t,o.NG_VALUE_ACCESSOR,!0),a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t.propDecorators={ngModel:[{type:i.ViewChild,args:[o.NgModel]}],inputEl:[{type:i.ViewChild,args:["input",{read:i.ElementRef}]}]},t}(r.BaseFormCustomComponent),g=[f],v=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,n.ColorPickerModule,o.FormsModule,a.WmComponentsModule],declarations:u(g),exports:u(g),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275b=m,e.ColorPickerModule=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@wm/components/input"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/currency",["exports","@angular/core","@angular/forms","@angular/common","@wm/components/input","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.currency={}),e.ng.core,e.ng.forms,e.ng.common,e.wm.components.input,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=new Map([["class",r.PROP_STRING],["currency",l({value:"USD"},r.PROP_STRING)],["datavalue",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["hint",r.PROP_STRING],["maxvalue",r.PROP_NUMBER],["minvalue",r.PROP_NUMBER],["name",r.PROP_STRING],["placeholder",l({value:"Enter value"},r.PROP_STRING)],["readonly",r.PROP_BOOLEAN],["required",r.PROP_BOOLEAN],["shortcutkey",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["step",l({value:1},r.PROP_NUMBER)],["tabindex",l({value:0},r.PROP_NUMBER)]]),d=function(){r.register("wm-currency",u),r.registerFormWidget(a.FormWidgetType.CURRENCY,new Map(u))},m={widgetType:"wm-currency",hostClass:"input-group app-currency"},h=function(e){function o(t,n,i){return e.call(this,t,m,n,i)||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(o,e),o.prototype.onPropertyChange=function(t,n,i){"currency"===t?this.currencySymbol=a.CURRENCY_INFO[this.currency||"USD"].symbol:e.prototype.onPropertyChange.call(this,t,n,i)},o.initializeProps=d(),o.decorators=[{type:t.Component,args:[{selector:"[wmCurrency]",template:'<span class="input-group-addon" [textContent]="currencySymbol"></span>\n<input class="form-control app-textbox app-currency-input"\n       #input\n       role="input"\n       type="text"\n       focus-target\n       [autofocus]="autofocus"\n       [readonly]="readonly"\n       [disabled]="disabled"\n       [required]="required"\n       [pattern]="regexp"\n       [attr.name]="name"\n       [attr.aria-label]="name"\n       [attr.tabindex]="tabindex"\n       [attr.placeholder]="placeholder"\n       [attr.accesskey]="shortcutkey"\n       [ngModel]="displayValue"\n       [ngModelOptions]="ngModelOptions"\n\n       (blur)="handleBlur($event)"\n       (ngModelChange)="datavalue=$event"\n       (keypress)="validateInputEntry($event)"\n       (keydown.enter)="onEnter($event)"\n       (keydown.ArrowUp)="onArrowPress($event, \'UP\')"\n       (keydown.ArrowDown)="onArrowPress($event, \'DOWN\')">',providers:[r.provideAs(o,n.NG_VALUE_ACCESSOR,!0),r.provideAs(o,n.NG_VALIDATORS,!0),r.provideAsWidgetRef(o)]}]}],o.ctorParameters=function(){return[{type:t.Injector},{type:a.AbstractI18nService},{type:i.DecimalPipe}]},o.propDecorators={ngModel:[{type:t.ViewChild,args:[n.NgModel]}],inputEl:[{type:t.ViewChild,args:["input",{read:t.ElementRef}]}]},o}(o.NumberLocale),f=[h],g=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule,n.FormsModule,o.InputModule,r.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=d,e.CurrencyModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@wm/components/input"),require("ngx-bootstrap/datepicker"),require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("ngx-bootstrap/timepicker"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/input/epoch",["exports","@angular/common","ngx-bootstrap/dropdown","@wm/components/input","ngx-bootstrap/datepicker","@angular/core","@angular/forms","@angular/platform-browser","ngx-bootstrap/timepicker","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.epoch={}),e.ng.common,e.ngxBootstrap,e.wm.components.input,e.ngxBootstrap,e.ng.core,e.ng.forms,e.ng.platformBrowser,e.ngxBootstrap,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a,s,l,c,p){"use strict";var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function d(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var m=function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}var g=["January","February","March","April","May","June","July","August","September","October","November","December"],v="default",y="default",b=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.useDatapicker=!0,i.isReadOnly=!1,i._dateOptions=new o.BsDatepickerConfig,i.datePipe=i.inj.get(p.ToDatePipe),i}return d(t,e),t.prototype.isDropDownDisplayEnabledOnInput=function(e){return e===v},t.prototype.isDataEntryModeEnabledOnInput=function(e){return e===y},t.prototype.showValidation=function(e,t,n,i){if(n)return console.warn("min max date validation failed ",i),$(e.target).val(t)},t.prototype.resetDisplayInput=function(){$(this.nativeElement).find(".display-input").val("")},t.prototype.validate=function(){return this.invalidDateTimeFormat?(this.validateType="",{invalidDateTimeFormat:{valid:!1}}):!_.isUndefined(this.dateNotInRange)&&this.dateNotInRange?{dateNotInRange:{valid:!1}}:!_.isUndefined(this.timeNotInRange)&&this.timeNotInRange?{timeNotInRange:{valid:!1}}:(this.validateType="",null)},t.prototype.formatValidation=function(e,t,n){var i=this.datepattern||this.timepattern,o=c.getFormattedDate(this.datePipe,e,i);if(t=t.trim())if("timestamp"===i){if(!_.isNaN(t)&&_.parseInt(t)!==o)return this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,void 0,!1),!1}else if(n&&(t=c.getFormattedDate(this.datePipe,t,i)),t!==o)return this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,void 0,!1),!1;return!0},t.prototype.minDateMaxDateValidationOnInput=function(e,t,n,i){var o=this;if(e){e=moment(e).startOf("day").toDate();var r=moment(c.getDateObj(this.mindate)).startOf("day").toDate(),a=moment(c.getDateObj(this.maxdate)).startOf("day").toDate();if(this.mindate&&e<r){var s=this.appLocale.LABEL_MINDATE_VALIDATION_MESSAGE+" "+this.mindate+".";return this.dateNotInRange=!0,this.validateType="mindate",this.invokeOnChange(this.datavalue,void 0,!1),this.showValidation(t,n,i,s)}if(this.maxdate&&e>a){s=this.appLocale.LABEL_MAXDATE_VALIDATION_MESSAGE+" "+this.maxdate+".";return this.dateNotInRange=!0,this.validateType="maxdate",this.invokeOnChange(this.datavalue,void 0,!1),this.showValidation(t,n,i,s)}if(this.excludedates){if((c.isString(this.excludedates)?_.split(this.excludedates,","):this.excludedates).map(function(e){return c.getFormattedDate(o.datePipe,e,o.datepattern)}).indexOf(c.getFormattedDate(this.datePipe,e,this.datepattern))>-1)return this.dateNotInRange=!0,this.validateType="excludedates",void this.invokeOnChange(this.datavalue,void 0,!1)}if(this.excludedays)if(_.split(this.excludedays,",").indexOf(e.getDay().toString())>-1)return this.dateNotInRange=!0,this.validateType="excludedays",void this.invokeOnChange(this.datavalue,void 0,!1)}i||(this.dateNotInRange=!1,this.invokeOnChange(this.datavalue,void 0,!1))},t.prototype.hightlightToday=function(){var e=(new Date).getDate().toString();_.filter($("span:contains("+e+")").not(".is-other-month"),function(t){$(t).text()===e&&$(t).addClass("current-date text-info")})},t.prototype.isOtheryear=function(e){return 0===e.getMonth()&&11===this.activeDate.getMonth()||11===e.getMonth()&&0===this.activeDate.getMonth()},t.prototype.setActiveDateFocus=function(e,t){var n=this,i=this.activeDate.getMonth();t||(e.getMonth()<i?this.isOtheryear(e)?this.goToOtherMonthOryear("next","days"):this.goToOtherMonthOryear("previous","days"):e.getMonth()>i&&(this.isOtheryear(e)?this.goToOtherMonthOryear("previous","days"):this.goToOtherMonthOryear("next","days"))),setTimeout(function(){e.getMonth()===(new Date).getMonth()&&e.getFullYear()===(new Date).getFullYear()&&n.hightlightToday();var t=e.getDate().toString();_.filter($("span:contains("+t+")").not(".is-other-month"),function(i){$(i).text()===t&&($(i).focus(),n.activeDate=e)})})},t.prototype.goToOtherMonthOryear=function(e,t){var n=$(".bs-datepicker-head ."+e);n.attr("disabled")||(n.trigger("click"),"days"===t?this.loadDays():"month"===t?this.loadMonths():"year"===t&&this.loadYears())},t.prototype.addDatepickerMouseEvents=function(){var e=this,t=$(".bs-datepicker-head");t.find(".previous").click(function(t){t.originalEvent&&e.setFocusForDate(-1)}),t.find(".next").click(function(t){t.originalEvent&&e.setFocusForDate(1)}),t.find(".current").click(function(t){t.originalEvent&&e.setFocusForCurrentMonthOryear()}),$(".bs-datepicker-body").click(function(t){t.stopPropagation(),t.originalEvent&&e.setFocusForMonthOrDay()})},t.prototype.setFocusForMonthOrDay=function(){var e=$(".bs-datepicker-head .current").first().text(),t=$(".bs-datepicker-body");if(t.find("table.months").length>0){_.parseInt(e)!==this.activeDate.getFullYear()&&this.loadMonths();var n=new Date(_.parseInt(e),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveMonthFocus(n,!0)}else if(t.find("table.days").length>0){var i=g.indexOf(e);i!==this.activeDate.getMonth()&&this.loadDays();n=new Date(this.activeDate.getFullYear(),i,1);this.setActiveDateFocus(n,!0)}},t.prototype.setFocusForCurrentMonthOryear=function(){var e=$(".bs-datepicker-body");e.find("table.months").length>0?(this.loadMonths(),this.setActiveMonthFocus(this.activeDate,!0)):e.find("table.years").length>0&&(this.loadYears(),this.setActiveYearFocus(this.activeDate,!0))},t.prototype.setFocusForDate=function(e){var t=$(".bs-datepicker-body");if(t.find("table.months").length>0){this.loadMonths();var n=new Date(this.activeDate.getFullYear()+e,0,this.activeDate.getDate());this.setActiveMonthFocus(n,!0)}else if(t.find("table.years").length>0){this.loadYears();var i=t.find("table.years span").first().text();n=new Date(_.parseInt(i),this.activeDate.getMonth(),this.activeDate.getDate());this.setActiveYearFocus(n,!0)}else if(t.find("table.days").length>0){this.loadDays();n=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+e,1);this.setActiveDateFocus(n,!0)}},t.prototype.addDatepickerKeyboardEvents=function(e,t){var n=this;this.keyEventPluginInstance=e.keyEventPlugin.constructor,this.elementScope=e;var i=document.querySelector("."+e.dateContainerCls);c.setAttr(i,"tabindex","0"),i.onkeydown=function(e){var i=n.keyEventPluginInstance.getEventFullKey(e);if("shift.tab"===i||"escape"===i||"tab"===i&&!t){n.elementScope.hideDatepickerDropdown();var o=n.elementScope.nativeElement.querySelector(".display-input");setTimeout(function(){return o.focus()})}"tab"===i&&t&&(n.bsDatePickerDirective.hide(),n.elementScope.toggleTimePicker(!0))},this.loadDays(),this.setActiveDateFocus(this.activeDate)},t.prototype.loadDays=function(){var e=this;setTimeout(function(){$(".bs-datepicker-body").attr("tabindex","0"),$("[bsdatepickerdaydecorator]").not(".is-other-month").attr("tabindex","0"),e.addKeyBoardEventsForDays(),e.addDatepickerMouseEvents()})},t.prototype.addKeyBoardEventsForDays=function(){var e=this,t=$(".bs-datepicker-body");t.length>0&&t[0].addEventListener("mouseenter",function(e){e.stopPropagation()},!0),t.keydown(function(t){var n,i=e.keyEventPluginInstance.getEventFullKey(t);if("arrowdown"===i)t.preventDefault(),n=moment(e.activeDate).add(7,"days").toDate(),e.setActiveDateFocus(n);else if("arrowup"===i)t.preventDefault(),n=moment(e.activeDate).add(-7,"days").toDate(),e.setActiveDateFocus(n);else if("arrowleft"===i)n=moment(e.activeDate).add(-1,"days").toDate(),e.setActiveDateFocus(n);else if("arrowright"===i)n=moment(e.activeDate).add(1,"days").toDate(),e.setActiveDateFocus(n);else if("control.arrowup"===i)$(".bs-datepicker-head .current").first().click(),e.loadMonths(),e.setActiveMonthFocus(e.activeDate);else if("enter"===i){if($(document.activeElement).hasClass("disabled"))return;$(document.activeElement).click(),e.elementScope.hideDatepickerDropdown();var o=e.elementScope.nativeElement.querySelector(".display-input");setTimeout(function(){return o.focus()})}})},t.prototype.loadMonths=function(){var e=this;setTimeout(function(){var t=$(".bs-datepicker-body");t.attr("tabindex","0"),t.find("table.months span").attr("tabindex","0"),e.addKeyBoardEventsForMonths(),e.addDatepickerMouseEvents()})},t.prototype.addKeyBoardEventsForMonths=function(){var e=this;$(".bs-datepicker-body").keydown(function(t){var n,i=e.keyEventPluginInstance.getEventFullKey(t);if("arrowdown"===i)t.preventDefault(),n=moment(e.activeDate).add(3,"month").toDate(),e.setActiveMonthFocus(n);else if("arrowup"===i)t.preventDefault(),n=moment(e.activeDate).add(-3,"month").toDate(),e.setActiveMonthFocus(n);else if("arrowleft"===i)n=moment(e.activeDate).add(-1,"month").toDate(),e.setActiveMonthFocus(n);else if("arrowright"===i)n=moment(e.activeDate).add(1,"month").toDate(),e.setActiveMonthFocus(n);else if("control.arrowup"===i)$(".bs-datepicker-head .current").first().click(),e.loadYears(),e.setActiveYearFocus(e.activeDate);else if("control.arrowdown"===i||"enter"===i){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),e.loadDays();var o=new Date(e.activeDate.getFullYear(),e.activeDate.getMonth(),1);e.setActiveDateFocus(o)}})},t.prototype.loadYears=function(){var e=this;setTimeout(function(){var t=$(".bs-datepicker-body");t.attr("tabindex","0"),t.find("table.years span").attr("tabindex","0"),e.addKeyBoardEventsForYears(),e.addDatepickerMouseEvents()})},t.prototype.setActiveMonthFocus=function(e,t){var n=this,i=g[e.getMonth()];t||(e.getFullYear()<this.activeDate.getFullYear()?this.goToOtherMonthOryear("previous","month"):e.getFullYear()>this.activeDate.getFullYear()&&this.goToOtherMonthOryear("next","month")),setTimeout(function(){$(".bs-datepicker-body table.months span:contains("+i+")").focus(),n.activeDate=e})},t.prototype.addKeyBoardEventsForYears=function(){var e=this;$(".bs-datepicker-body").keydown(function(t){var n,i=e.keyEventPluginInstance.getEventFullKey(t);if("arrowdown"===i)t.preventDefault(),n=moment(e.activeDate).add(4,"year").toDate(),e.setActiveYearFocus(n);else if("arrowup"===i)t.preventDefault(),n=moment(e.activeDate).add(-4,"year").toDate(),e.setActiveYearFocus(n);else if("arrowleft"===i)n=moment(e.activeDate).add(-1,"year").toDate(),e.setActiveYearFocus(n);else if("arrowright"===i)n=moment(e.activeDate).add(1,"year").toDate(),e.setActiveYearFocus(n);else if("control.arrowdown"===i||"enter"===i){if($(document.activeElement).parent().hasClass("disabled"))return;$(document.activeElement).click(),e.loadMonths(),e.setActiveMonthFocus(e.activeDate)}})},t.prototype.setActiveYearFocus=function(e,t){var n=this,i=e.getFullYear(),o=$(".bs-datepicker-body table.years span"),r=o.first().text(),a=o.last().text();t||(e.getFullYear()<_.parseInt(r)?this.goToOtherMonthOryear("previous","year"):e.getFullYear()>_.parseInt(a)&&this.goToOtherMonthOryear("next","year")),setTimeout(function(){$(".bs-datepicker-body table.years span:contains("+i+")").focus(),n.activeDate=e})},t.prototype.focusTimePickerPopover=function(e){this.keyEventPluginInstance=e.keyEventPlugin.constructor,this.elementScope=e,this.elementScope.ngZone.runOutsideAngular(function(){setTimeout(function(){$("timepicker .form-group:first > input.form-control").focus()})})},t.prototype.bindTimePickerKeyboardEvents=function(){var e=this;setTimeout(function(){var t=$("body").find("> bs-dropdown-container timepicker");t.attr("tabindex",0),e.addEventsOnTimePicker(t)})},t.prototype.isValidDate=function(e){return e&&e instanceof Date&&!isNaN(e.getTime())},t.prototype.timeFormatValidation=function(){var e=$(this.nativeElement).find("input").val(),t=c.getNativeDateObject(e);this.formatValidation(t,e)&&(this.invalidDateTimeFormat=!1,this.invokeOnChange(this.datavalue,void 0,!1))},t.prototype.addEventsOnTimePicker=function(e){var t=this;e.on("keydown",function(e){var n,i,o=$(e.target),r=o.parent(),a=t.elementScope,s=t.keyEventPluginInstance.getEventFullKey(e);if("escape"===s&&a.hideTimepickerDropdown(),o.hasClass("bs-timepicker-field")){if(r.is(":first-child")?"shift.tab"!==s&&"enter"!==s&&"escape"!==s||(a.setIsTimeOpen(!1),t.focus(),n=!0,i=!0):r.is(":last-child")||r.next().next().find("button.disabled").length?"tab"!==s&&"escape"!==s&&"enter"!==s||(a.setIsTimeOpen(!1),t.focus(),n=!0,i=!0):"enter"!==s&&"escape"!==s||(a.setIsTimeOpen(!1),t.focus(),n=!0,i=!0),n&&e.stopPropagation(),i&&e.preventDefault(),a.mintime&&a.maxtime&&!t.isValidDate(a.bsTimeValue)&&("arrowdown"===s?a.bsTimeValue=a.maxTime:"arrowup"===s&&(a.bsTimeValue=a.minTime)),"tab"===s){t.invalidDateTimeFormat=!1,t.invokeOnChange(t.datavalue,void 0,!1);var l=t.datepattern||t.timepattern;c.getFormattedDate(a.datePipe,a.bsTimeValue,l)===a.displayValue&&$(t.nativeElement).find(".display-input").val(a.displayValue)}"arrowdown"!==s&&"arrowup"!==s||t.timeFormatValidation()}else o.hasClass("btn-default")&&("tab"!==s&&"escape"!==s||(a.setIsTimeOpen(!1),t.focus()))}),e.find("a").on("click",function(e){var n=t.elementScope,i=$(e.target);n.mintime&&n.maxtime&&!t.isValidDate(n.bsTimeValue)&&(i.find("span").hasClass("bs-chevron-down")?n.bsTimeValue=n.maxTime:i.find("span").hasClass("bs-chevron-up")&&(n.bsTimeValue=n.minTime)),t.timeFormatValidation()})},t.prototype.updateFormat=function(e){"datepattern"===e?(this._dateOptions.dateInputFormat=this.datepattern,this.showseconds=_.includes(this.datepattern,"s"),this.ismeridian=_.includes(this.datepattern,"h")):"timepattern"===e&&(this.showseconds=_.includes(this.timepattern,"s"),this.ismeridian=_.includes(this.timepattern,"h"))},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&(this.useDatapicker&&"datepattern"===t?this.updateFormat(t):"showweeks"===t?this._dateOptions.showWeekNumbers=n:"mindate"===t?(this._dateOptions.minDate="CURRENT_DATE"===n?this.mindate=new Date:c.getDateObj(n),this.minDateMaxDateValidationOnInput(this.datavalue)):"maxdate"===t?(this._dateOptions.maxDate="CURRENT_DATE"===n?this.maxdate=new Date:c.getDateObj(n),this.minDateMaxDateValidationOnInput(this.datavalue)):"excludedates"===t||"excludedays"===t?this.minDateMaxDateValidationOnInput(this.datavalue):e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.ngAfterViewInit=function(){var t=this;e.prototype.ngAfterViewInit.call(this),this.isReadOnly="undefined"!=this.dataentrymode&&!this.isDataEntryModeEnabledOnInput(this.dataentrymode),this.bsDatePickerDirective&&(this.dateOnShowSubscription=this.bsDatePickerDirective.onShown.subscribe(function(e){e.daysCalendar.subscribe(function(e){var n;t.excludedates&&(n=(n=c.isString(t.excludedates)?_.split(t.excludedates,","):t.excludedates).map(function(e){return moment(e)})),e[0].weeks.forEach(function(e){e.days.forEach(function(e){if(!e.isDisabled&&t.excludedays&&(e.isDisabled=_.includes(t.excludedays,e.dayIndex)),!e.isDisabled&&n){var i=moment(e.date);e.isDisabled=n.some(function(e){return i.isSame(e,"day")})}})})})}))},t.prototype.ngOnDestroy=function(){this.dateOnShowSubscription&&this.dateOnShowSubscription.unsubscribe(),e.prototype.ngOnDestroy.call(this)},t.propDecorators={bsDropdown:[{type:r.ViewChild,args:[n.BsDropdownDirective]}]},t}(i.BaseFormCustomComponent),w=new Map([["autofocus",p.PROP_BOOLEAN],["class",p.PROP_STRING],["dataentrymode",m({value:"default"},p.PROP_STRING)],["datavaluesource",p.PROP_ANY],["datavalue",p.PROP_STRING],["datepattern",p.PROP_STRING],["disabled",p.PROP_BOOLEAN],["excludedays",p.PROP_STRING],["excludedates",p.PROP_STRING],["hint",p.PROP_STRING],["maxdate",p.PROP_STRING],["mindate",p.PROP_STRING],["name",p.PROP_STRING],["outputformat",m({value:"yyyy-MM-dd"},p.PROP_STRING)],["placeholder",m({value:"Select Date"},p.PROP_STRING)],["readonly",p.PROP_BOOLEAN],["required",p.PROP_BOOLEAN],["shortcutkey",p.PROP_STRING],["show",m({value:!0},p.PROP_BOOLEAN)],["showdropdownon",m({value:"default"},p.PROP_STRING)],["showbuttonbar",m({value:!0},p.PROP_BOOLEAN)],["showindevice",m({displayType:"inline-block",value:"all"},p.PROP_STRING)],["showweeks",m({value:!1},p.PROP_BOOLEAN)],["tabindex",m({value:0},p.PROP_NUMBER)]]),P=function(){c.isMobileApp()&&w.set("datepattern",m({value:"yyyy-MM-dd"},p.PROP_STRING)),p.register("wm-date",w),p.registerFormWidget(c.FormWidgetType.DATE,new Map(w))},O={widgetType:"wm-date",hostClass:"app-date input-group"},R=function(e){function t(t,n,i,o){var r=e.call(this,t,O)||this;return r.cdRef=n,r.appDefaults=i,r.isEnterPressedOnDateInput=!1,p.styler(r.nativeElement,r),r.keyEventPlugin=o[1],r.dateContainerCls="app-date-"+r.widgetId,r._dateOptions.containerClass="app-date "+r.dateContainerCls,r._dateOptions.showWeekNumbers=!1,r.datepattern=r.appDefaults.dateFormat||c.getDisplayDateTimeFormat(c.FormWidgetType.DATE),r.updateFormat("datepattern"),r}return d(t,e),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this.bsDataValue?this.bsDataValue.valueOf():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayValue",{get:function(){return c.getFormattedDate(this.datePipe,this.bsDataValue,this._dateOptions.dateInputFormat)||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datavalue",{get:function(){return c.getFormattedDate(this.datePipe,this.bsDataValue,this.outputformat)||""},set:function(e){this.bsDataValue="CURRENT_DATE"===e?new Date:e?c.getDateObj(e):void 0,this.invokeOnChange(this.datavalue,void 0,!0),this.cdRef.detectChanges()},enumerable:!0,configurable:!0}),t.prototype.onDisplayDateChange=function(e,t){if(this.isEnterPressedOnDateInput)this.isEnterPressedOnDateInput=!1;else{var n=c.getDateObj(e.target.value);this.formatValidation(n,e.target.value,t)&&(t&&this.minDateMaxDateValidationOnInput(n,e,this.displayValue,t)||this.setDataValue(n))}},t.prototype.setDataValue=function(e){this.invalidDateTimeFormat=!1,this.minDateMaxDateValidationOnInput(e),c.getFormattedDate(this.datePipe,e,this._dateOptions.dateInputFormat)===this.displayValue&&$(this.nativeElement).find(".app-dateinput").val(this.displayValue),this.bsDataValue=e||void 0,this.invokeOnChange(this.datavalue,{},!0)},t.prototype.onDatePickerOpen=function(){this.isOpen=!0,this.bsDataValue?this.activeDate=this.bsDataValue:this.activeDate=new Date,this.bsDataValue||this.hightlightToday(),this.addDatepickerKeyboardEvents(this,!1),c.adjustContainerPosition($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker)},t.prototype.onInputBlur=function(e){$(e.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))},t.prototype.hideDatepickerDropdown=function(){this.invokeOnTouched(),this.isOpen=!1,this.isEnterPressedOnDateInput=!1,this.deregisterEventListener&&this.deregisterEventListener()},t.prototype.handleEvent=function(t,n,i,o){_.includes(["blur","focus","change","click"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.toggleDpDropdown=function(e){"click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?e.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen))},t.prototype.addBodyClickListener=function(e){var t=this;if(e){var n=document.querySelector("body");setTimeout(function(){var e=n.querySelector("."+t.dateContainerCls);t.deregisterEventListener=c.addEventListenerOnElement(n,e,t.nativeElement,"click",t.isDropDownDisplayEnabledOnInput(t.showdropdownon),function(){t.isOpen=!1},0,!0)},350)}},t.prototype.onDisplayKeydown=function(e){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){e.stopPropagation();var t=c.getDateObj(e.target.value),n=this.keyEventPlugin.constructor.getEventFullKey(e);if("enter"===n||"arrowdown"===n){e.preventDefault();var i=c.getFormattedDate(this.datePipe,t,this._dateOptions.dateInputFormat),o=e.target.value.trim();o&&"timestamp"===this.datepattern?_.isNaN(o)||_.parseInt(o)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):o&&o!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=t),this.toggleDpDropdown(e)}else this.hideDatepickerDropdown()}else this.hideDatepickerDropdown()},t.prototype.onDateChange=function(e){var t=this.nativeElement.querySelector(".display-input");this.isOpen&&setTimeout(function(){return t.focus()}),this.setDataValue(e)},t.initializeProps=P(),t.decorators=[{type:r.Component,args:[{selector:"[wmDate]",template:'<ng-container *ngIf="useDatapicker; then dataPickerTemplate else nativeDateTemplate"></ng-container>\n<ng-template #dataPickerTemplate>\n    <input class="form-control app-textbox app-dateinput display-input" aria-label="Select date"\n           focus-target\n           type="text"\n           [name]="name"\n           [tabindex]="tabindex"\n           [value]="displayValue"\n           (click)="toggleDpDropdown($event)"\n           (focus)="invokeOnFocus($event)"\n           (blur)="onInputBlur($event)"\n           [disabled]="disabled || readonly"\n           [autofocus]="autofocus"\n           [required]="required"\n           [readOnly]="isReadOnly"\n           [attr.placeholder]="placeholder"\n           [attr.accesskey]="shortcutkey"\n           (change)="onDisplayDateChange($event)"\n           (keydown)="onDisplayKeydown($event)">\n    <div style="width: 0;display: inline-block;" aria-label="datepicker dropdownmenu" aria-controls="date">\n        <input class="model-holder"\n               container="body"\n               [bsConfig]="_dateOptions"\n               [isOpen]="isOpen"\n               #datepicker="bsDatepicker"\n               bsDatepicker\n               [isDisabled]="disabled || readonly"\n               [bsValue]="bsDataValue"\n               (onShown)="onDatePickerOpen()"\n               (onHidden)="hideDatepickerDropdown()"\n               (bsValueChange)="onDateChange($event)">\n    </div>\n    <span class="input-group-btn">\n            <button type="button" class="btn btn-default btn-time" [tabindex]="tabindex" [disabled]="disabled || readonly"\n                    aria-label="Select date" aria-haspopup="true" aria-expanded="false"\n                    (click)="toggleDpDropdown($event)">\n                <i aria-hidden="true" class="app-icon wi wi-calendar"></i>\n            </button>\n    </span>\n</ng-template>\n<ng-template #nativeDateTemplate>\n    <input type="date" class="form-control app-textbox app-dateinput"\n           role="input"\n           step="any"\n           [value]="displayValue"\n           [required]="required"\n           [disabled]="disabled || readonly"\n           (change)="onDisplayDateChange($event, true)"\n           (focus)="invokeOnFocus($event)"\n           (blur)="invokeOnTouched($event)">\n</ng-template>\n',providers:[p.provideAs(t,a.NG_VALUE_ACCESSOR,!0),p.provideAs(t,a.NG_VALIDATORS,!0),p.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector},{type:r.ChangeDetectorRef},{type:c.AppDefaults},{type:void 0,decorators:[{type:r.Inject,args:[s.EVENT_MANAGER_PLUGINS]}]}]},t.propDecorators={bsDatePickerDirective:[{type:r.ViewChild,args:[o.BsDatepickerDirective]}]},t}(b),E=new Map([["autofocus",p.PROP_BOOLEAN],["class",p.PROP_STRING],["dataentrymode",m({value:"default"},p.PROP_STRING)],["datavaluesource",p.PROP_ANY],["datavalue",p.PROP_STRING],["datepattern",p.PROP_STRING],["disabled",p.PROP_BOOLEAN],["excludedays",p.PROP_STRING],["excludedates",p.PROP_STRING],["hint",p.PROP_STRING],["hourstep",m({value:1},p.PROP_NUMBER)],["maxdate",p.PROP_STRING],["mindate",p.PROP_STRING],["minutestep",m({value:15},p.PROP_NUMBER)],["name",p.PROP_STRING],["outputformat",m({value:"timestamp"},p.PROP_STRING)],["placeholder",m({value:"Select date time"},p.PROP_STRING)],["readonly",p.PROP_BOOLEAN],["required",p.PROP_BOOLEAN],["secondsstep",m({value:1},p.PROP_NUMBER)],["shortcutkey",p.PROP_STRING],["show",m({value:!0},p.PROP_BOOLEAN)],["showdropdownon",m({value:"default"},p.PROP_STRING)],["showbuttonbar",p.PROP_BOOLEAN],["showindevice",m({displayType:"inline-block",value:"all"},p.PROP_STRING)],["showweeks",p.PROP_BOOLEAN],["tabindex",m({value:0},p.PROP_NUMBER)],["timestamp",p.PROP_STRING]]),T=function(){c.isMobileApp()&&E.set("datepattern",m({value:"yyyy-MM-ddTHH:mm:ss"},p.PROP_STRING)),p.register("wm-datetime",E),p.registerFormWidget(c.FormWidgetType.DATETIME,new Map(E)),p.registerFormWidget(c.FormWidgetType.TIMESTAMP,new Map(E))},S={widgetType:"wm-datetime",hostClass:"app-datetime input-group"},C=function(e){function t(t,n,i,o,r){var a=e.call(this,t,S)||this;return a.ngZone=n,a.cdRef=i,a.appDefaults=o,a.isEnterPressedOnDateInput=!1,a.isTimeOpen=!1,a.isDateOpen=!1,a.isCurrentDate=!1,a._debouncedOnChange=_.debounce(a.invokeOnChange,10),a.registerDestroyListener(function(){return a.clearTimeInterval()}),p.styler(a.nativeElement,a),a.keyEventPlugin=r[1],a.dateContainerCls="app-date-"+a.widgetId,a._dateOptions.containerClass="app-date "+a.dateContainerCls,a._dateOptions.showWeekNumbers=!1,a.datepattern=a.appDefaults.dateTimeFormat||c.getDisplayDateTimeFormat(c.FormWidgetType.DATETIME),a.updateFormat("datepattern"),a}return d(t,e),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this.proxyModel?this.proxyModel.valueOf():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayValue",{get:function(){return c.getFormattedDate(this.datePipe,this.proxyModel,this._dateOptions.dateInputFormat)||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datavalue",{get:function(){return this.isCurrentDate&&!this.proxyModel?"CURRENT_DATE":c.getFormattedDate(this.datePipe,this.proxyModel,this.outputformat)},set:function(e){"CURRENT_DATE"===e?(this.isCurrentDate=!0,this.setTimeInterval()):(this.proxyModel=e?c.getDateObj(e):void 0,this.clearTimeInterval(),this.isCurrentDate=!1),this.bsTimeValue=this.bsDateValue=this.proxyModel,this.cdRef.detectChanges()},enumerable:!0,configurable:!0}),t.prototype.setTimeInterval=function(){var e=this;this.timeinterval||(this.timeinterval=setInterval(function(){var t=new Date;e.onModelUpdate(t)},1e3))},t.prototype.clearTimeInterval=function(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)},t.prototype.toggleTimePicker=function(e,t){this.isTimeOpen=e,t&&"click"===t.type&&this.invokeEventCallback("click",{$event:t}),this.addTimepickerClickListener(this.isTimeOpen)},t.prototype.addTimepickerClickListener=function(e){var t=this;if(e){var n=document.querySelector("body");setTimeout(function(){var e=$(n).find(">bs-dropdown-container .dropdown-menu").get(0);t.deregisterTimepickeEventListener=c.addEventListenerOnElement(n,e,t.nativeElement,"click",t.isDropDownDisplayEnabledOnInput(t.showdropdownon),function(){t.toggleTimePicker(!1)},0,!0)},350)}},t.prototype.setIsTimeOpen=function(e){this.isTimeOpen=e},t.prototype.hideTimepickerDropdown=function(){this.invokeOnTouched(),this.toggleTimePicker(!1),this.deregisterTimepickeEventListener&&this.deregisterTimepickeEventListener()},t.prototype.onTimepickerOpen=function(){var e=document.querySelectorAll("timepicker");_.forEach(e,function(e){c.addClass(e.parentElement,"app-datetime",!0)}),this.bsDatePickerDirective.hide(),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),c.adjustContainerPosition($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))},t.prototype.onDatePickerOpen=function(){this.isDateOpen=!this.isDateOpen,this.toggleTimePicker(!1),this.bsDateValue?this.activeDate=this.bsDateValue:this.activeDate=new Date,this.bsDateValue||this.hightlightToday(),this.addDatepickerKeyboardEvents(this,!0),c.adjustContainerPosition($("bs-datepicker-container"),this.nativeElement,this.bsDatePickerDirective._datepicker)},t.prototype.onModelUpdate=function(e,t){if("date"===t&&(this.invalidDateTimeFormat=!1,c.getFormattedDate(this.datePipe,e,this._dateOptions.dateInputFormat)===this.displayValue&&$(this.nativeElement).find(".display-input").val(this.displayValue)),this.minDateMaxDateValidationOnInput(e),!e)return this.bsDateValue&&this.bsTimePicker&&(""===this.bsTimePicker.hours||""===this.bsTimePicker.minutes||""===this.bsTimePicker.seconds)?this.bsDateValue=this.bsTimeValue=this.proxyModel=moment(this.bsDateValue).startOf("day").toDate():this.bsDateValue=this.bsTimeValue=this.proxyModel=void 0,void this._debouncedOnChange(this.datavalue,{},!0);"date"===t&&this.isDateOpen&&this.toggleTimePicker(!0),this.proxyModel=e,this.proxyModel&&(this.bsDateValue=this.bsTimeValue=this.proxyModel),this._debouncedOnChange(this.datavalue,{},!0),this.cdRef.detectChanges()},t.prototype.preventTpClose=function(e){e.stopImmediatePropagation()},t.prototype.toggleDpDropdown=function(e){"click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)?e.stopPropagation():(this.bsDatePickerDirective.toggle(),this.addBodyClickListener(this.bsDatePickerDirective.isOpen))},t.prototype.addBodyClickListener=function(e){var t=this;if(e){var n=document.querySelector("body");setTimeout(function(){var e=n.querySelector("."+t.dateContainerCls);t.deregisterDatepickerEventListener=c.addEventListenerOnElement(n,e,t.nativeElement,"click",t.isDropDownDisplayEnabledOnInput(t.showdropdownon),function(){t.bsDatePickerDirective.hide()},0,!0)},350)}},t.prototype.hideDatepickerDropdown=function(){this.isDateOpen=!1,this.invokeOnTouched(),this.bsDatePickerDirective.hide(),this.isEnterPressedOnDateInput=!1,this.deregisterDatepickerEventListener&&this.deregisterDatepickerEventListener()},t.prototype.onDateChange=function(e,t){if(this.isEnterPressedOnDateInput)this.isEnterPressedOnDateInput=!1;else{var n=e.target.value.trim();n=n?c.getNativeDateObject(n):void 0,this.formatValidation(n,e.target.value,t)&&(t&&this.minDateMaxDateValidationOnInput(n,e,this.displayValue,t)||(this.invalidDateTimeFormat=!1,this.onModelUpdate(n)))}},t.prototype.onDisplayKeydown=function(e){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){e.stopPropagation();var t=e.target.value.trim();t=t?c.getNativeDateObject(t):void 0;var n=this.keyEventPlugin.constructor.getEventFullKey(e);if("enter"===n||"arrowdown"===n){e.preventDefault();var i=c.getFormattedDate(this.datePipe,t,this._dateOptions.dateInputFormat),o=e.target.value.trim();o&&"timestamp"===this.datepattern?_.isNaN(o)||_.parseInt(o)===i||(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):o&&o!==i?(this.invalidDateTimeFormat=!0,this.invokeOnChange(this.datavalue,e,!1)):(this.invalidDateTimeFormat=!1,this.isEnterPressedOnDateInput=!0,this.bsDatePickerDirective.bsValue=t),this.toggleDpDropdown(e)}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()}else this.hideDatepickerDropdown(),this.hideTimepickerDropdown()},t.prototype.isValid=function(e){if(!e){var t=$(this.nativeElement).find("input").val(),n=c.getNativeDateObject(t);if(!this.formatValidation(n,t))return}},t.prototype.handleEvent=function(t,n,i,o){_.includes(["blur","focus","change","click"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.onInputBlur=function(e){$(e.relatedTarget).hasClass("current-date")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))},t.initializeProps=T(),t.decorators=[{type:r.Component,args:[{selector:"[wmDateTime]",template:'<ng-container *ngIf="useDatapicker; then dataPickerTemplate else nativeDateTemplate"></ng-container>\n\n<ng-template #dataPickerTemplate>\n    <div dropdown [isOpen]="isTimeOpen" autoClose="false" [container]="\'body\'" (onShown)="onTimepickerOpen()"\n         style="display: inherit;">\n        <input class="form-control app-textbox display-input" aria-label="Set the date and time"\n               focus-target\n               [name]="name"\n               [tabindex]="tabindex"\n               type="text"\n               [value]="displayValue"\n               (click)="toggleDpDropdown($event)"\n               (focus)="invokeOnFocus($event)"\n               (blur)="onInputBlur($event)"\n               (change)="onDateChange($event)"\n               [autofocus]="autofocus"\n               [disabled]="disabled || readonly || isCurrentDate"\n               [required]="required"\n               [readOnly]="isReadOnly"\n               [attr.placeholder]="placeholder"\n               [attr.accesskey]="shortcutkey"\n               (keydown)="onDisplayKeydown($event)">\n        <div style="width: 0;display: inline-block;" aria-label="datepicker dropdownmenu" aria-controls="date">\n            <input class="model-holder"\n                   focus-target\n                   [container]="\'body\'"\n                   [bsConfig]="_dateOptions"\n                   [isOpen]="isDateOpen"\n                   (onShown)="onDatePickerOpen()"\n                   (onHidden)="hideDatepickerDropdown()"\n                   #datepicker=bsDatepicker\n                   bsDatepicker\n                   [isDisabled]="disabled || readonly || isCurrentDate"\n                   [bsValue]="bsDateValue"\n                   (bsValueChange)="onModelUpdate($event, \'date\')">\n        </div>\n        <span class="input-group-btn">\n            <button type="button" class="btn btn-default btn-date"\n                    [tabindex]="tabindex" [disabled]="disabled || readonly || isCurrentDate" aria-label="Select date" aria-haspopup="true"\n                    aria-expanded="false" (click)="toggleDpDropdown($event)">\n                <i aria-hidden="true" class="app-icon wi wi-calendar"></i>\n            </button>\n            <button type="button" class="btn btn-default btn-time"\n                    [tabindex]="tabindex" [disabled]="disabled || readonly || isCurrentDate" aria-label="Select time" aria-haspopup="true"\n                    aria-expanded="false" (click)="toggleTimePicker(!isTimeOpen, $event)">\n                <i aria-hidden="true" class="app-icon wi wi-access-time"></i>\n            </button>\n        </span>\n        <div *dropdownMenu class="dropdown-menu" aria-label="timepicker dropdown" aria-controls="time"\n             (click)="preventTpClose($event)">\n            <timepicker class="model-holder"\n                        [showMeridian]="ismeridian"\n                        [readonlyInput]="disabled || readonly || isCurrentDate"\n                        [(ngModel)]="bsTimeValue"\n                        [min]="minTime"\n                        [max]="maxTime"\n                        [hourStep]="hourstep"\n                        [minuteStep]="minutestep"\n                        [secondsStep]="secondsstep"\n                        [mousewheel]="true"\n                        [arrowkeys]="true"\n                        (isValid)="isValid($event)"\n                        [showSeconds]="showseconds" (ngModelChange)="onModelUpdate($event, \'time\')"></timepicker>\n        </div>\n    </div>\n</ng-template>\n<ng-template #nativeDateTemplate>\n    <input type="datetime-local" class="form-control app-textbox"\n           role="input"\n           step="any"\n           [value]="displayValue"\n           [required]="required"\n           [disabled]="disabled || readonly || isCurrentDate"\n           (change)="onDateChange($event, true)">\n</ng-template>\n',providers:[p.provideAs(t,a.NG_VALUE_ACCESSOR,!0),p.provideAs(t,a.NG_VALIDATORS,!0),p.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector},{type:r.NgZone},{type:r.ChangeDetectorRef},{type:c.AppDefaults},{type:void 0,decorators:[{type:r.Inject,args:[s.EVENT_MANAGER_PLUGINS]}]}]},t.propDecorators={bsDatePickerDirective:[{type:r.ViewChild,args:[o.BsDatepickerDirective]}],bsTimePicker:[{type:r.ViewChild,args:[l.TimepickerComponent]}]},t}(b),I=new Map([["autofocus",p.PROP_BOOLEAN],["class",p.PROP_STRING],["dataentrymode",m({value:"default"},p.PROP_STRING)],["datavaluesource",p.PROP_ANY],["datavalue",p.PROP_STRING],["disabled",p.PROP_BOOLEAN],["hint",p.PROP_STRING],["hourstep",m({value:1},p.PROP_NUMBER)],["maxtime",p.PROP_STRING],["mintime",p.PROP_STRING],["minutestep",m({value:15},p.PROP_NUMBER)],["name",p.PROP_STRING],["outputformat",m({value:"HH:mm:ss"},p.PROP_STRING)],["placeholder",m({value:"Select time"},p.PROP_STRING)],["readonly",p.PROP_BOOLEAN],["required",p.PROP_BOOLEAN],["shortcutkey",p.PROP_STRING],["show",m({value:!0},p.PROP_BOOLEAN)],["showdropdownon",m({value:"default"},p.PROP_STRING)],["secondsstep",m({value:1},p.PROP_NUMBER)],["tabindex",m({value:0},p.PROP_NUMBER)],["timepattern",p.PROP_STRING],["timestamp",p.PROP_STRING]]),A=function(){c.isMobileApp()&&I.set("timepattern",m({value:"HH:mm"},p.PROP_STRING)),p.register("wm-time",I),p.registerFormWidget(c.FormWidgetType.TIME,new Map(I))},D={widgetType:"wm-time",hostClass:"input-group app-timeinput"},N=function(e){function t(t,n,i,o){var r=e.call(this,t,D)||this;return r.ngZone=n,r.appDefaults=i,r.status={isopen:!1},r.keyEventPlugin=o[1],p.styler(r.nativeElement,r),r.registerDestroyListener(function(){return r.clearTimeInterval()}),r.timepattern=r.appDefaults.timeFormat||c.getDisplayDateTimeFormat(c.FormWidgetType.TIME),r.updateFormat("timepattern"),r}return d(t,e),Object.defineProperty(t.prototype,"timestamp",{get:function(){return this.bsTimeValue?this.bsTimeValue.valueOf():void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datavalue",{get:function(){return this.isCurrentTime&&!this.bsTimeValue?"CURRENT_TIME":c.getFormattedDate(this.datePipe,this.bsTimeValue,this.outputformat)||""},set:function(e){e?"CURRENT_TIME"===e?(this.isCurrentTime=!0,this.setTimeInterval()):(this.clearTimeInterval(),this.bsTimeValue=c.getNativeDateObject(e),this.isCurrentTime=!1):(this.bsTimeValue=void 0,this.clearTimeInterval(),this.isCurrentTime=!1),this.invokeOnChange(this.datavalue),c.$appDigest()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayValue",{get:function(){return c.getFormattedDate(this.datePipe,this.bsTimeValue,this.timepattern)||""},enumerable:!0,configurable:!0}),t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("timepattern"===t&&this.updateFormat("timepattern"),"mintime"===t?(this.minTime=c.getNativeDateObject(n),this.mintimeMaxtimeValidation()):"maxtime"===t?(this.maxTime=c.getNativeDateObject(n),this.mintimeMaxtimeValidation()):e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.setValidateType=function(e,t,n){this.timeNotInRange&&(n<e?this.validateType="mintime":n>t&&(this.validateType="maxtime"))},t.prototype.mintimeMaxtimeValidation=function(){this.timeNotInRange=this.minTime&&this.maxTime&&(this.bsTimeValue<this.minTime||this.bsTimeValue>this.maxTime),this.setValidateType(this.minTime,this.maxTime,this.bsTimeValue),this.invokeOnChange(this.datavalue,void 0,!1)},t.prototype.toggleDropdown=function(e){var t=this;"click"===e.type&&this.invokeEventCallback("click",{$event:e}),e.target&&$(e.target).is("input")&&!this.isDropDownDisplayEnabledOnInput(this.showdropdownon)||(this.ngZone.run(function(){t.status.isopen=!t.status.isopen}),this.addBodyClickListener(this.status.isopen))},t.prototype.preventTpClose=function(e){e.stopImmediatePropagation()},t.prototype.addBodyClickListener=function(e){var t=this;if(e){var n=document.querySelector("body");setTimeout(function(){var e=$(n).find(">bs-dropdown-container .dropdown-menu").get(0);t.deregisterEventListener=c.addEventListenerOnElement(n,e,t.nativeElement,"click",t.isDropDownDisplayEnabledOnInput(t.showdropdownon),function(){t.status.isopen=!1},0,!0)},350)}},t.prototype.onDisplayKeydown=function(e){if(this.isDropDownDisplayEnabledOnInput(this.showdropdownon)){e.stopPropagation();var t=this.keyEventPlugin.constructor.getEventFullKey(e);"enter"===t||"arrowdown"===t?(e.preventDefault(),this.toggleDropdown(e)):this.hideTimepickerDropdown()}else this.hideTimepickerDropdown()},t.prototype.onDisplayTimeChange=function(e){var t=c.getNativeDateObject(e.target.value);this.formatValidation(t,e.target.value)&&(this.invalidDateTimeFormat=!1,this.onTimeChange(t))},t.prototype.onInputBlur=function(e){$(e.relatedTarget).hasClass("bs-timepicker-field")||(this.invokeOnTouched(),this.invokeEventCallback("blur",{$event:e}))},t.prototype.onTimeChange=function(e,t){var n,i,o;t&&(e=c.getNativeDateObject(e.target.value)),e?(this.bsTimeValue=e,this.timeNotInRange=this.minTime&&this.maxTime&&(e<this.minTime||e>this.maxTime),this.setValidateType(this.minTime,this.maxTime,e)):(this.bsTimePicker&&this.bsTimePicker.min&&this.bsTimePicker.max&&(o=moment(new Date(this.bsTimePicker.min)).format("A"),moment(new Date(this.bsTimePicker.max)).format("A"),n=this.bsTimePicker.hours+":"+(this.bsTimePicker.minutes||0)+":"+(this.bsTimePicker.seconds||0)+(this.bsTimePicker.showMeridian?" "+o:""),i=c.getNativeDateObject(n),this.bsTimePicker.meridian=o,this.timeNotInRange=this.bsTimePicker.min>i||this.bsTimePicker.max<i,this.setValidateType(this.bsTimePicker.min,this.bsTimePicker.max,i)),this.bsTimeValue=i),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,{},!0)},t.prototype.setTimeInterval=function(){var e=this;this.timeinterval||(this.timeinterval=setInterval(function(){var t=new Date;t.setSeconds(t.getSeconds()+1),e.datavalue="CURRENT_TIME",e.onTimeChange(t)},1e3))},t.prototype.clearTimeInterval=function(){this.timeinterval&&(clearInterval(this.timeinterval),this.timeinterval=null)},t.prototype.setIsTimeOpen=function(e){this.status.isopen=e},t.prototype.handleEvent=function(t,n,i,o){_.includes(["blur","focus","change","click"],n)||e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.hideTimepickerDropdown=function(){this.invokeOnTouched(),this.status.isopen=!1,this.deregisterEventListener&&this.deregisterEventListener()},t.prototype.isValid=function(e){if(!e){var t=$(this.nativeElement).find("input").val(),n=c.getNativeDateObject(t);if(!this.formatValidation(n,t))return}},t.prototype.onShown=function(){var e=document.querySelectorAll("timepicker");_.forEach(e,function(e){c.addClass(e.parentElement,"app-datetime",!0)}),this.focusTimePickerPopover(this),this.bindTimePickerKeyboardEvents(),c.adjustContainerPosition($("bs-dropdown-container"),this.nativeElement,this.bsDropdown._dropdown,$("bs-dropdown-container .dropdown-menu"))},t.initializeProps=A(),t.decorators=[{type:r.Component,args:[{selector:"[wmTime]",template:'<ng-container *ngIf="useDatapicker; then timePickerTemplate else nativeTimeTemplate">\n</ng-container>\n\n<ng-template #timePickerTemplate>\n    <div dropdown [isOpen]="status.isopen" (onShown)="onShown()" (onHidden)="hideTimepickerDropdown()" container="body" style="display: inherit">\n        <input class="form-control app-textbox display-input" aria-label="Set the time"\n               focus-target\n               [tabindex]="tabindex"\n               [name]="name"\n               type="text"\n               [value]="displayValue"\n               [disabled]="disabled || readonly || isCurrentTime"\n               [autofocus]="autofocus"\n               [required]="required"\n               [attr.placeholder]="placeholder"\n               [attr.accesskey]="shortcutkey"\n               [required]="required"\n               [readOnly]="isReadOnly"\n               (click)="toggleDropdown($event)"\n               (focus)="invokeOnFocus($event)"\n               (blur)="onInputBlur($event)"\n               (change)="onDisplayTimeChange($event)"\n               (keydown)="onDisplayKeydown($event)">\n        <span class="input-group-btn dropdown-toggle">\n          <button type="button" class="btn btn-default btn-date" [tabindex]="tabindex" [disabled]="disabled || readonly || isCurrentTime" aria-label="Select time" aria-haspopup="true" aria-expanded="false" (click)="toggleDropdown($event)"><i aria-hidden="true" class="app-icon wi wi-access-time"></i></button>\n        </span>\n        <div *dropdownMenu class="dropdown-menu" (click)="preventTpClose($event)">\n            <timepicker class="model-holder"\n                        [showMeridian]="ismeridian"\n                        [readonlyInput]="isDisabled"\n                        [(ngModel)]="bsTimeValue"\n                        [disabled]="disabled || readonly || isCurrentTime"\n                        [min]="minTime"\n                        [max]="maxTime"\n                        [hourStep]="hourstep"\n                        [minuteStep]="minutestep"\n                        [secondsStep]="secondsstep"\n                        [mousewheel]="true"\n                        [arrowkeys]="true"\n                        (isValid)="isValid($event)"\n                        [showSeconds]="showseconds" (ngModelChange)="onTimeChange($event)"></timepicker>\n        </div>\n    </div>\n</ng-template>\n<ng-template #nativeTimeTemplate>\n    <input type="time" class="form-control app-textbox"\n           role="input"\n           [value]="displayValue"\n           [required]="required"\n           [disabled]="disabled || readonly || isCurrentTime"\n           (change)="onTimeChange($event, true)"\n           (focus)="invokeOnFocus($event)"\n           (blur)="invokeOnTouched($event)">\n</ng-template>\n',providers:[p.provideAs(t,a.NG_VALUE_ACCESSOR,!0),p.provideAs(t,a.NG_VALIDATORS,!0),p.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector},{type:r.NgZone},{type:c.AppDefaults},{type:void 0,decorators:[{type:r.Inject,args:[s.EVENT_MANAGER_PLUGINS]}]}]},t.propDecorators={bsTimePicker:[{type:r.ViewChild,args:[l.TimepickerComponent]}]},t}(b),x=[R,C,N],M=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,o.BsDatepickerModule,n.BsDropdownModule,a.FormsModule,l.TimepickerModule,p.WmComponentsModule],declarations:f(x),exports:f(x),entryComponents:[]}]}],e}();e.\u0275a=b,e.\u0275c=T,e.\u0275b=P,e.\u0275d=A,e.EpochModule=M,e.DateComponent=R,e.DatetimeComponent=C,e.TimeComponent=N,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/file-upload",["exports","@angular/common","@angular/core","rxjs","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.fileupload={}),e.ng.common,e.ng.core,e.rxjs,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){o.register("wm-fileupload",new Map([["caption",o.PROP_STRING],["name",o.PROP_STRING],["tabindex",o.PROP_NUMBER],["multiple",o.PROP_BOOLEAN],["fileuploadmessage",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["disabled",o.PROP_BOOLEAN],["contenttype",o.PROP_STRING],["maxfilesize",o.PROP_NUMBER],["iconclass",s({value:"wi wi-file-upload"},o.PROP_STRING)],["class",o.PROP_STRING],["uploadpath",s({},o.PROP_STRING)],["datasource",o.PROP_STRING],["selectedFiles",o.PROP_STRING],["destination",o.PROP_STRING],["filelistheight",o.PROP_NUMBER]])),o.registerFormWidget(r.FormWidgetType.UPLOAD,new Map([["disabled",o.PROP_BOOLEAN],["extensions",o.PROP_STRING],["filetype",o.PROP_STRING],["multiple",o.PROP_BOOLEAN],["readonly",o.PROP_BOOLEAN],["required",o.PROP_BOOLEAN]]))},u={widgetType:"wm-fileupload",hostClass:"app-fileupload"},d=function(e){function t(t,n,i){var o=e.call(this,t,u)||this;return o.app=n,o.onSelectEvt=i,o.selectedFiles=[],o.fileTransfers={},o.caption="Upload",o.formName="",o.DEFAULT_CAPTIONS={MULTIPLE_SELECT:"Drop your files here.",SELECT:"Select"},o.DEVICE_CONTENTTYPES={IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILES:"files"},o.FILESIZE_MB=1048576,o.CONSTANT_FILE_SERVICE="FileService",o.uploadData={file:void 0,uploadPath:void 0},o.chooseFilter="",o.fileUploadMessage="You can also browse for files",o.uploadedFiles={fileName:"",path:"",length:"",status:""},o.uploadUrl="services",o}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.isValidFile=function(e,t,n,i){var o,a;return!t||(a=_.toLower(t).split(","),(_.includes(a,"image/*")||_.includes(a,"image")&&i)&&(o=r.isImageFile(e))?o:(_.includes(a,"audio/*")||_.includes(a,"audio")&&i)&&(o=r.isAudioFile(e))?o:(_.includes(a,"video/*")||_.includes(a,"video")&&i)&&(o=r.isVideoFile(e))?o:(_.includes(a,"."+_.toLower(n))&&(o=!0),o))},t.prototype.getValidFiles=function(e){var t=this,n=[],i=[],o=parseFloat(this.maxfilesize)*this.FILESIZE_MB||this.FILESIZE_MB,r=(this.maxfilesize||"1")+"MB";return this.chooseFilter===this.DEVICE_CONTENTTYPES.FILES&&(this.chooseFilter=""),_.forEach(e,function(e){if(t.isValidFile(e.name,t.chooseFilter,t.getFileExtension(e.name),t._isMobileType))if(e.size>o){a=t.appLocale.LABEL_FILE_EXCEED_VALIDATION_MESSAGE+" "+r;t.handleErrorFiles("INVALID_FILE_SIZE",a,e,i)}else n.push(e);else{var a=t.appLocale.LABEL_FILE_EXTENTION_VALIDATION_MESSAGE+" "+t.chooseFilter;t.handleErrorFiles("INVALID_FILE_EXTENSION",a,e,i)}}),{validFiles:n,errorFiles:i}},t.prototype.handleErrorFiles=function(e,t,n,i){this.hasEventCallback("error")||this.app.notifyApp(t,"Error");var o={key:e,message:t};n.error=o,i.push(n)},t.prototype.getCaption=function(e,t,n){return _.includes(this.DEFAULT_CAPTIONS,e)?t&&!n?this.DEFAULT_CAPTIONS.MULTIPLE_SELECT:this.DEFAULT_CAPTIONS.SELECT:e},t.prototype.changeServerUploadPath=function(e){this.selectedUploadTypePath=e},t.prototype.getFileExtension=function(e){return e&&_.includes(e,".")?e.substring(e.lastIndexOf(".")+1):"file"},t.prototype.onSelectEventCall=function(e,t){var n=this;this.selectedFiles=t,setTimeout(function(){n.invokeEventCallback("select",{$event:$.extend(e.$files||{},t),selectedFiles:t})})},t.prototype.onFileElemClick=function(){$(".file-input")[0].value=null},t.prototype.onFileSelect=function(e,t){var n,o=this,r=this.getValidFiles(t);t=r.validFiles,_.isEmpty(r.errorFiles)||this.invokeEventCallback("error",{$event:e,files:r.errorFiles}),t.length&&(this.progressObservable=new i.Subject,n=this.invokeEventCallback("beforeselect",{$event:$.extend(e.$files||{},t),files:t}),this.datasource?(this.datasource._progressObservable=this.progressObservable,this.datasource._progressObservable.asObservable().subscribe(function(e){_.forEach(o.selectedFiles,function(t){t.name===e.fileName&&(t.progress=e.progress,100===t.progress?t.status="success":t.status=e.status)})})):this.selectedFiles=t,!1!==n&&this.onSelectEventCall(e,t))},t.prototype.abortFileUpload=function(e){this.datasource.execute(r.DataSource.Operation.CANCEL,e)},t.prototype.onPropertyChange=function(t,n,i){switch(t){case"uploadpath":this.changeServerUploadPath(n);break;case"contenttype":this.chooseFilter=n.split(" ").join(",");break;case"multiple":this.formName=this.name+(this.multiple?"-multiple-fileupload":"-single-fileupload"),this.caption=this.getCaption(this.caption,this.multiple,this._isMobileType);break;case"fileuploadmessage":this.fileUploadMessage=n}e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngAfterViewInit=function(){o.styler(this.nativeElement.querySelector(".app-button, .drop-box"),this)},t.initializeProps=p(),t.decorators=[{type:n.Component,args:[{selector:"[wmFileUpload]",template:'<div class="app-fileupload" init-widget>\n    \x3c!-- drag and drop files UI in web --\x3e\n    <div class="app-multi-file-upload" *ngIf="!_isMobileType && multiple">\n        <div class="drop-box" drag-files="onFileSelect($event,$event.target.files)">\n            <i class="{{iconclass}}"></i>\n            <div class="message">\n                <label [innerHtml]="caption" class="caption"></label>\n                <form class="form-horizontal" name="{{formName}}">\n                    <input class="file-input" aria-label="Select File" type="file" name="files" *ngIf="multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick()" (change)="onFileSelect($event, $event.target.files)" multiple >\n                    <a href="javascript:void(0);" class="app-anchor">{{fileUploadMessage}}</a>\n                </form>\n            </div>\n        </div>\n    </div>\n    \x3c!-- single file upload in web and single , multiple file upload UI in mobile runmode --\x3e\n    <div class="app-single-file-upload" *ngIf="!_isCordova && (!multiple || _isMobileType)">\n        <div class="app-button-wrapper">\n            <form class="form-horizontal" name="{{formName}}">\n                \x3c!-- support for file upload in Mobileapp in its runmode (Web) --\x3e\n                <input class="file-input" aria-label="Select files" type="file" name="files" *ngIf="multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick()" (change)="onFileSelect($event, $event.target.files)" multiple>\n                <input class="file-input" aria-label="Select Files" type="file" name="files" *ngIf="!multiple" [disabled]="disabled" [accept]="chooseFilter" (click)="onFileElemClick()" (change)="onFileSelect($event, $event.target.files)" >\n                <button focus-target class="app-button btn btn-default">\n                    <i class="{{iconclass}}" aria-hidden="true"></i>\n                    <span class="caption">{{caption}}</span>\n                </button>\n            </form>\n        </div>\n        <div class="app-files-upload-status single"></div>\n    </div>\n    \x3c!-- support for file upload in Mobile Application (device) --\x3e\n    <button *ngIf="_isCordova" focus-target class="app-button btn btn-default" (click)="openFileSelector()" [disabled]="disabled">\n        <i class="{{iconclass}}"></i>\n        <span class="caption">{{caption}}</span>\n    </button>\n    \x3c!-- list of selectedfiles UI --\x3e\n    <ul class="list-group file-upload" [ngStyle]="{height: filelistheight, overflow: overflow}" *ngIf="selectedFiles.length > 0" >\n        <div *ngFor="let ft of selectedFiles">\n            <li class="list-group-item file-upload-status" *ngIf="ft.status !== \'abort\'">\n                <div class="media upload-file-list">\n                    <div class="media-left media-middle file-icon {{getFileExtension(ft.name) | fileIconClass}}" title="{{getFileExtension(ft.name)}}"></div>\n                    <div class="media-body media-middle file-details">\n                        <p class="uploaddetails">\n                            <label class="upload-title">{{ft.name}}</label><br/>\n                            <span class="filesize" *ngIf="ft.fileLength  !== 0">{{ft.size | filesize:0}}</span>\n                        </p>\n                        <div class="progress" *ngIf="ft.status === \'onProgress\'">\n                            <div class="progress-bar progress-bar-striped progress-bar-info" [ngStyle]="{width: (ft.progress +\'%\')}"></div>\n                        </div>\n                    </div>\n                    <div class="media-right media-middle" *ngIf="ft.status === \'onProgress\' || ft.status === \'queued\'">\n                        <a class="btn btn-transparent file-upload-stop" type="button" (click)="abortFileUpload(ft)">\n                            <i class="wi wi-close"></i>\n                        </a>\n                    </div>\n                    <div class="media-right media-middle"  *ngIf="ft.status === \'success\'">\n                        <span class="status-icon {{ft.status | stateClass }}"></span>\n                    </div>\n                </div>\n            </li>\n        </div>\n    </ul>\n</div>\n',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:r.App},{type:void 0,decorators:[{type:n.Attribute,args:["select.event"]}]}]},t}(o.StylableComponent),m=[d],h=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:c(m),exports:c(m),entryComponents:[]}]}],e}();e.\u0275a=p,e.FileUploadModule=h,e.FileUploadComponent=d,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@wm/components/input"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/rating",["exports","@angular/common","@angular/core","@angular/forms","@wm/components/input","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.rating={}),e.ng.common,e.ng.core,e.ng.forms,e.wm.components.input,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=new Map([["caption",r.PROP_STRING],["class",r.PROP_STRING],["datafield",r.PROP_STRING],["dataset",r.PROP_ANY],["datavaluesource",r.PROP_ANY],["datavalue",r.PROP_STRING],["displayexpression",r.PROP_STRING],["displayfield",r.PROP_STRING],["hint",r.PROP_STRING],["iconcolor",r.PROP_STRING],["iconsize",r.PROP_STRING],["maxvalue",l({value:5},r.PROP_NUMBER)],["name",r.PROP_STRING],["orderby",r.PROP_STRING],["readonly",r.PROP_BOOLEAN],["show",l({value:!0},r.PROP_BOOLEAN)],["showcaptions",l({value:!0},r.PROP_BOOLEAN)],["tabindex",l({value:0},r.PROP_NUMBER)],["usekeys",r.PROP_BOOLEAN]]),d=function(){r.register("wm-rating",u),r.registerFormWidget(a.FormWidgetType.RATING,new Map(u))},m={widgetType:"wm-rating",hostClass:"app-ratings"},h=function(e){function t(t){var n=e.call(this,t,m)||this;n._id=a.generateGUId(),r.styler(n.nativeElement,n);var i=n.dataset$.subscribe(function(){n.prepareRatingDataset()});n.registerDestroyListener(function(){return i.unsubscribe()});var o=n.datavalue$.subscribe(function(){return n.onDatavalueChange(n.datavalue)});return n.registerDestroyListener(function(){return o.unsubscribe()}),n}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"selectedRatingValue",{get:function(){return this._selectedRatingValue},set:function(e){this._selectedRatingValue=e,this.calculateRatingsWidth()},enumerable:!0,configurable:!0}),t.prototype.handleEvent=function(t,n,i,o){"change"!==n&&"blur"!==n&&e.prototype.handleEvent.call(this,this.ratingEl.nativeElement,n,i,o)},t.prototype.prepareRatingDataset=function(){this.datasetItems.length||(this.ratingItems=[],this.caption="");var e=[],t=this.datasetItems,n=parseInt(this.maxvalue||this.datasetItems.length,10),i=(n>10?10:n)||5;t.length&&t.length>i&&(t=_.slice(t,0,i));for(var o=i;o>0;o--)if(t.length){if(!(o>t.length)){t=r.getOrderedDataset(t,"index:desc"),e=e.concat(t);break}e.push({key:o,value:o,index:o,label:o})}else e.push({key:o,value:o,index:o,label:o});this.ratingItems=e,t.length||(this.datasetItems=e),this.onDatavalueChange(this.datavalue)},t.prototype.onRatingClick=function(e,t){this.modelByKey=t.key,this.selectedRatingValue=t.index,this.showcaptions||(this.caption=t.label),this.invokeOnTouched(),this.invokeOnChange(this.datavalue,e||{},!0)},t.prototype.onDatavalueChange=function(e){if(_.isEmpty(this.datasetItems))this.selectedRatingValue=0;else{var t=_.find(this.datasetItems,{selected:!0});t||_.isUndefined(e)||(t=_.find(this.datasetItems,function(t){return _.toString(t.index)===e}))&&(t.selected=!0),t||(this.modelByKey=void 0,this.caption=""),this.selectedRatingValue=t?t.index:0,t&&(this.caption=t.label)}this.readonly&&(this.selectedRatingValue||isNaN(e)||(this.selectedRatingValue=parseFloat(e)<=this.maxvalue?e:this.maxvalue),this.ratingsWidth=this.calculateRatingsWidth(e))},t.prototype.calculateRatingsWidth=function(e){var t=parseFloat(this.selectedRatingValue),n=parseInt(this.maxvalue||this.datasetItems.length,10)||5;return a.setCSS(this.nativeElement.querySelector(".ratings-container"),"width",.925*n+"em"),void 0===(e=e||this.datavalue)||""===e||null===e?(this.caption="",0):t<=n&&t>=0?.925*t+"em":t>n?.925*n+"em":void 0},t.prototype.onPropertyChange=function(t,n,i){"readonly"===t?n&&(this.ratingsWidth=this.calculateRatingsWidth()):"maxvalue"===t?(this.prepareRatingDataset(),this.resetDatasetItems()):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.onTouchStart=function(e){this.touchEnabled=!0,this.onTouchStart=a.noop},t.prototype.onMouseleave=function(){this.caption=this.displayValue},t.prototype.onMouseOver=function(e,t){this.caption=t.label,!this.touchEnabled&&!e.target.classList.contains("rating-label-hover")&&e.target.classList.add("rating-label-hover")},t.initializeProps=d(),t.decorators=[{type:n.Component,args:[{selector:"[wmRating]",template:'<div [(ngModel)]="modelByKey" (focus)="onFocus($event)" ngDefaultControl role="radiogroup" class="ratings-wrapper">\n    <div *ngIf="!readonly" class="rating-style">\n        <label *ngFor="let rate of ratingItems;"\n               [ngClass]="{active : rate.index <= selectedRatingValue}"\n               [ngStyle]="{\'font-size\' :iconsize, color: rate.index <= selectedRatingValue && iconcolor}"\n               [title]="rate.label || rate.index"\n               (touchstart)="onTouchStart($event)"\n               (mouseleave)="onMouseleave($event, rate)"\n               (mouseover)="onMouseOver($event, rate)"\n               [for]="_id + \'-\' + rate.index">\n            <input #ratingInput type="radio" aria-label="rating radio buttons" aria-checked="false" aria-multiselectable="true"\n                   [id]="_id + \'-\' + rate.index" (click)="onRatingClick($event, rate)" name="ratings-id" [value]="rate.key || rate.index"/>\n        </label>\n    </div>\n    <div [class.hidden]="!readonly" [ngStyle]="{\'font-size\' :iconsize}" class="ratings-container disabled" >\n        <div class="ratings active" [ngStyle]="{width: ratingsWidth, color: iconcolor}"></div>\n    </div>\n    <label *ngIf="showcaptions" class="caption" [textContent]="caption"></label>\n</div>\n',providers:[r.provideAs(t,i.NG_VALUE_ACCESSOR,!0),r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={ratingEl:[{type:n.ViewChild,args:["ratingInput",{read:n.ElementRef}]}]},t}(o.DatasetAwareFormComponent),f=[h],g=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.FormsModule,r.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=d,e.RatingModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@wm/components/input"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/input/slider",["exports","@angular/common","@angular/core","@angular/forms","@wm/components/input","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.input=e.wm.components.input||{},e.wm.components.input.slider={}),e.ng.common,e.ng.core,e.ng.forms,e.wm.components.input,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=new Map([["class",r.PROP_STRING],["datavalue",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["hint",r.PROP_STRING],["maxvalue",r.PROP_NUMBER],["minvalue",r.PROP_NUMBER],["name",r.PROP_STRING],["readonly",r.PROP_BOOLEAN],["shortcutkey",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["step",r.PROP_NUMBER],["tabindex",l({value:0},r.PROP_NUMBER)]]),d=function(){r.register("wm-slider",u),r.registerFormWidget(a.FormWidgetType.SLIDER,new Map(u))},m={widgetType:"wm-slider",hostClass:"app-slider slider"},h=function(e){function t(t){var n=e.call(this,t,m)||this;return r.styler(n.nativeElement,n),n}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.handleEvent=function(t,n,i,o){"change"!==n&&"blur"!==n&&e.prototype.handleEvent.call(this,t,n,i,o)},t.prototype.handleChange=function(e){this.invokeOnChange(this.datavalue,{type:"change"},this.ngModel.valid)},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=d(),t.decorators=[{type:n.Component,args:[{selector:"[wmSlider]",template:'<span class="app-slider-value pull-left" [attr.aria-valuemin]="minvalue" [textContent]="minvalue"></span>\n<span class="app-slider-value pull-right" [attr.aria-valuemax]="maxvalue" [textContent]="maxvalue"></span>\n<input class="range-input" aria-label="slider range" aria-orientation="horizontal"\n       focus-target\n       type="range" [title]="datavalue"\n       [attr.min]="minvalue"\n       [attr.max]="maxvalue"\n       [attr.step]="step"\n       [(ngModel)]="datavalue"\n       [disabled]="disabled"\n       [attr.accesskey]="shortcutkey"\n       [tabindex]="tabindex"\n       (blur)="invokeOnTouched($event)"\n       (ngModelChange)="handleChange($event)"\n       [attr.name]="name"\n       [tabindex]="tabindex"/>\n<div *ngIf="readonly || disabled" aria-readonly="true" class="readonly-wrapper"></div>',providers:[r.provideAs(t,i.NG_VALUE_ACCESSOR,!0),r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={ngModel:[{type:n.ViewChild,args:[i.NgModel]}]},t}(o.BaseFormCustomComponent),f=[h],g=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.FormsModule,r.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=d,e.SliderModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/basic"),require("@angular/core"),require("@wm/components/base"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/chart",["exports","@angular/common","@wm/components/basic","@angular/core","@wm/components/base","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.chart={}),e.ng.common,e.wm.components.basic,e.ng.core,e.wm.components.base,e.wm.core)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){o.register("wm-chart",new Map([["aggregation",s({value:"none"},o.PROP_STRING)],["aggregationcolumn",o.PROP_STRING],["areaviewtype",s({value:"stack"},o.PROP_STRING)],["barspacing",s({value:"medium"},o.PROP_STRING)],["bubblesize",o.PROP_STRING],["centerlabel",o.PROP_STRING],["class",o.PROP_STRING],["customcolors",o.PROP_STRING],["dataset",o.PROP_ANY],["datasource",o.PROP_STRING],["donutratio",s({value:"medium"},o.PROP_STRING)],["formattype",{value:"",PROP_STRING:o.PROP_STRING}],["groupby",o.PROP_STRING],["height",{value:"210px",PROP_STRING:o.PROP_STRING}],["highlightpoints",o.PROP_BOOLEAN],["iconclass",o.PROP_STRING],["interpolation",s({value:"linear"},o.PROP_STRING)],["labelthreshold",s({value:.01},o.PROP_NUMBER)],["labeltype",s({value:"percent"},o.PROP_STRING)],["legendtype",s({value:"furious"},o.PROP_STRING)],["linethickness",o.PROP_STRING],["loadingdatamsg",s({value:"Loading..."},o.PROP_STRING)],["name",o.PROP_STRING],["nodatamessage",s({value:"No Data Available."},o.PROP_STRING)],["offset",o.PROP_STRING],["offsetbottom",s({value:55},o.PROP_NUMBER)],["offsetleft",s({value:75},o.PROP_NUMBER)],["offsetright",s({value:25},o.PROP_NUMBER)],["offsettop",s({value:25},o.PROP_NUMBER)],["orderby",o.PROP_STRING],["reducexticks",s({value:!0},o.PROP_BOOLEAN)],["shape",s({value:"circle"},o.PROP_STRING)],["show",s({value:!0},o.PROP_BOOLEAN)],["showlabels",s({value:"outside"},o.PROP_STRING)],["showlabelsoutside",s({value:!0},o.PROP_BOOLEAN)],["showlegend",s({value:"top"},o.PROP_STRING)],["showvalues",s({value:!1},o.PROP_BOOLEAN)],["showxaxis",s({value:!0},o.PROP_BOOLEAN)],["showxdistance",s({value:!1},o.PROP_BOOLEAN)],["showyaxis",s({value:!0},o.PROP_BOOLEAN)],["showydistance",s({value:!1},o.PROP_BOOLEAN)],["staggerlabels",s({value:!1},o.PROP_BOOLEAN)],["subheading",o.PROP_STRING],["theme",o.PROP_STRING],["title",o.PROP_STRING],["tooltips",s({value:!0},o.PROP_BOOLEAN)],["type",o.PROP_STRING],["viewtype",s({value:"Grouped"},o.PROP_STRING)],["xaxisdatakey",o.PROP_STRING],["xaxislabel",o.PROP_STRING],["xaxislabeldistance",s({value:12},o.PROP_NUMBER)],["xdateformat",o.PROP_STRING],["xdomain",s({value:"Default"},o.PROP_STRING)],["xnumberformat",o.PROP_STRING],["xunits",o.PROP_STRING],["yaxisdatakey",o.PROP_STRING],["yaxislabel",o.PROP_STRING],["yaxislabeldistance",s({value:12},o.PROP_NUMBER)],["ydomain",s({value:"Default"},o.PROP_STRING)],["ynumberformat",o.PROP_STRING],["yunits",o.PROP_STRING]]))},u=["Column","Line","Area","Cumulative Line","Bar","Pie","Donut","Bubble"],d=["circle","square","diamond","cross","triangle-up","triangle-down"],m=["01/01/2001","01/01/2002","01/01/2003"],h={Terrestrial:{colors:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],tooltip:{backgroundColor:"#de7d28",textColor:"#FFFFFF"}},Annabelle:{colors:["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],tooltip:{backgroundColor:"#2e306f",textColor:"#FFFFFF"}},Azure:{colors:["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"],tooltip:{backgroundColor:"#3182bd",textColor:"#FFFFFF"}},Retro:{colors:["#0ca7a1","#ffa615","#334957","#acc5c2","#988f90","#8accc9","#515151","#f27861","#36c9fd","#794668","#0f709d","#0d2738","#44be78","#4a1839","#6a393f","#557d8b","#6c331c","#1c1c1c","#861500","#09562a"],tooltip:{backgroundColor:"#80513a",textColor:"#FFFFFF"}},Mellow:{colors:["#f0dcbf","#88c877","#aeb918","#2e2c23","#ddddd2","#dfe956","#4c963b","#5d3801","#e1eec3","#cd8472","#fcfab3","#9a4635","#9295ad","#2e3f12","#565677","#557d8b","#4f4d02","#0c0c1b","#833324","#24120e"],tooltip:{backgroundColor:"#7c9e73",textColor:"#FFFFFF"}},Orient:{colors:["#a80000","#cc6c3c","#f0e400","#000084","#fccc6c","#009c6c","#cc309c","#78cc00","#fc84e4","#48e4fc","#4878d8","#186c0c","#606060","#a8a8a8","#000000","#d7d7d7","#75a06e","#190d0b","#888888","#694b84"],tooltip:{backgroundColor:"#c14242",textColor:"#FFFFFF"}},GrayScale:{colors:["#141414","#353535","#5b5b5b","#848484","#a8a8a8","#c3c3c3","#e0e0e0","#c8c8c8","#a5a5a5","#878787","#656565","#4e4e4e","#303030","#1c1c1c","#4f4f4f","#3b3b3b","#757575","#606060","#868686","#c1c1c1"],tooltip:{backgroundColor:"#575757",textColor:"#FFFFFF"}},Flyer:{colors:["#3f454c","#5a646e","#848778","#cededf","#74c4dd","#0946ed","#380bb1","#000ff0","#f54a23","#1db262","#bca3aa","#ffa500","#a86b32","#63a18c","#56795e","#934343","#b75f5f","#752d2d","#4e1111","#920606"],tooltip:{backgroundColor:"#47637c",textColor:"#FFFFFF"}},Luminosity:{colors:["#FFFFFF","#e4e4e4","#00bcd4","#f0dd2f","#00aabf","#018376","#e91e63","#39e5d4","#ff6d6d","#00ff76","#ff9800","#969696","#ff4200","#e00000","#95cbe5","#5331ff","#fff4a7","#e7a800","#0061e4","#d5e7ff"],tooltip:{backgroundColor:"#47637c",textColor:"#FFFFFF"}}},f=["xaxislabel","yaxislabel","xunits","yunits","xnumberformat","xdateformat","ynumberformat","showvalues","showlabels","viewtype","areaviewtype","staggerlabels","reducexticks","offsettop","offsetbottom","offsetright","offsetleft","barspacing","xaxislabeldistance","yaxislabeldistance","theme","labeltype","donutratio","showlabelsoutside","showxdistance","showydistance","shape","nodatamessage","captions","showxaxis","showyaxis","centerlabel","customcolors","showlegend","legendtype","xdomain","ydomain","tooltips","linethickness","highlightpoints","interpolation","labelthreshold"],g={small:.3,medium:.5,large:.8},v={small:.3,medium:.6,large:.7},y=_.invert(g),b=_.invert(v),w={Thousand:{prefix:"K",divider:1e3},Million:{prefix:"M",divider:1e6},Billion:{prefix:"B",divider:1e9}},P="#preview-chart",O=["Column","Line","Pie","Bar","Donut","Bubble"],R=["Line","Area","Cumulative Line"],E=["Cumulative Line","Area"],T="Europe",S="Asia",C="America",I="Australia",A=function(e){return"Bar"===e},D=function(e){return"Donut"===e},N=function(e){return"Bubble"===e},x=function(e){return"Area"===e},M=function(e){return function(e){return"Pie"===e}(e)||D(e)},k=function(e){return _.includes(O,e)||!_.includes(u,e)},L=function(e){return _.includes(R,e)},F=function(e,t){return"value"===t?g[e]:"key"===t?y[e]:void 0},B=function(e,t){return"value"===t?v[e]:"key"===t?b[e]:void 0},G=function(e){return function(e,t,n){var i=[],o=[],r=[],a=[],s=[],l=[],c=[],p=[],u=[],m=[];switch(e){case"jsonFormat":i=[{x:"01/01/2001",y:4e6},{x:"01/01/2002",y:1e6},{x:"01/01/2003",y:5e6}],o=[{x:"01/01/2001",y:3e6},{x:"01/01/2002",y:4e6},{x:"01/01/2003",y:7e6}],r=[{x:"01/01/2001",y:2e6},{x:"01/01/2002",y:8e6},{x:"01/01/2003",y:6e6}],m[0]={values:i,key:T},t>=2&&(m[1]={values:o,key:S}),t>=3&&(m[2]={values:r,key:C});break;case"lineChartFormat":i=[{x:1,y:4e6},{x:2,y:1e6},{x:3,y:5e6}],o=[{x:1,y:3e6},{x:2,y:4e6},{x:3,y:7e6}],r=[{x:1,y:2e6},{x:2,y:8e6},{x:3,y:6e6}],m[0]={values:i,key:T},t>=2&&(m[1]={values:o,key:S}),t>=3&&(m[2]={values:r,key:C});break;case"arrayFormat":a=[[1,4e6],[2,1e6],[3,5e6]],s=[[1,3e6],[2,4e6],[3,7e6]],l=[[1,2e6],[2,8e6],[3,6e6]],m[0]={values:a,key:T},t>=2&&(m[1]={values:s,key:S}),t>=3&&(m[2]={values:l,key:C});break;case"bubbleFormat":c=[{x:80.66,y:33739900,size:78,shape:n="random"===n?d[Math.floor(Math.random()*d.length)]:n},{x:79.84,y:81902300,size:90,shape:n},{x:78.6,y:5523100,size:45,shape:n}],p=[{x:72.73,y:79716200,size:98,shape:n},{x:80.05,y:61801600,size:20,shape:n},{x:72.49,y:73137200,size:34,shape:n}],u=[{x:68.09,y:33739900,size:45,shape:n},{x:81.55,y:7485600,size:78,shape:n},{x:68.6,y:14185e4,size:56,shape:n}],m[0]={values:c,key:T},t>=2&&(m[1]={values:p,key:S}),t>=3&&(m[2]={values:u,key:C});break;case"pieChartFormat":m=[{x:T,y:1e6},{x:S,y:2e6},{x:C,y:3e6},{x:I,y:4e6}]}return m}(function(e){var t=e.type;return function(e){return"Line"===e}(t)?"lineChartFormat":M(t)?"pieChartFormat":N(t)?"bubbleFormat":k(t)?"jsonFormat":"arrayFormat"}(e),_.split(e.yaxisdatakey,",").length,e.shape)},j=function(e,t){return!("Min"!==e[t+"domain"]||(n=e.type,!function(e){return"Column"===e}(n)&&!x(n)));var n},V=function(e){return!(!_.isFinite(e.min)||!_.isFinite(e.max))},U=function(e){var t=Math.floor(e);return Math.abs(e)-t>0?e-.1:t-1},W=function(e,t){return isNaN(parseInt(e,10))?t(e,"value"):e},q=function(e,t){return e=e||"%x",d3.time.format(e)(new Date(t))},H=function(e,t){var n,i,o;return n=d3.format(e)(t),e?(i=w[e]&&w[e].divider||0,(o=w[e]&&w[e].prefix)&&0!==i&&(n=d3.format(".2f")(t/i)+o)):n=t>=1e3?d3.format(".1s")(t):t,n},z=function(e){return"false"!==e&&!1!==e&&("true"===e||!0===e||"hide"!==e)},Y=function(e,t,n,i){e.tooltip.contentGenerator(function(e){var o,r=e.data.x;return o=H(t.ynumberformat,e.data.y),M(n.type)&&(i=e.data.x,r=""),'<table><tbody><tr class="value"><b>'+r+'</b></tr><tr><td class="legend-color-guide"><div style="background-color:'+e.color+';"></div></td><td class="key">'+i+'</td><td class="value">'+o+"</td></tr></tbody></table>"})},K=function(e,t,n,i,o){i=function(e,t){return t&&!r.isEmptyObject(t)||(t={}),_.forEach(f,function(n){_.isUndefined(t[n])&&(t[n]=e[n])}),t}(e,i);var a,s,l,c,p,d,y,b,w,P=[],O={},R={};switch(e.type){case"Column":d=W(i.barspacing,F)||g.medium,a=nv.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).reduceXTicks(i.reducexticks).rotateLabels(0).showControls(!1).stacked("Stacked"===i.viewtype).groupSpacing(d);break;case"Cumulative Line":a=nv.models.cumulativeLineChart().x(function(e){return e[0]}).y(function(e){return e[1]}).showControls(!1).useInteractiveGuideline(i.tooltips).interpolate(i.interpolation);break;case"Line":a=nv.models.lineChart().useInteractiveGuideline(i.tooltips).interpolate(i.interpolation);break;case"Area":a=nv.models.stackedAreaChart().x(function(e){return e[0]}).y(function(e){return e[1]}).clipEdge(!0).showControls(!1).style(i.areaviewtype).useInteractiveGuideline(i.tooltips).interpolate(i.interpolation);break;case"Bar":d=W(i.barspacing,F)||g.medium,a=nv.models.multiBarHorizontalChart().x(function(e){return e.x}).y(function(e){return e.y}).showControls(!1).stacked("Stacked"===i.viewtype).showValues(i.showvalues).groupSpacing(d);break;case"Pie":case"Donut":c=function(e,t,n){var i={};switch(e){case"hide":i.showlabels=!1;break;case"inside":i.showlabels=!0,i.showlabelsoutside=!1;break;case"outside":i.showlabels=!0,i.showlabelsoutside=!0}return i}(i.showlabels,i.showlabelsoutside),p=W(i.donutratio,B)||v.medium,a=nv.models.pieChart().x(function(e){return e.x}).y(function(e){return e.y}).showLabels(c.showlabels).labelType(i.labeltype).valueFormat(d3.format("%")).title(i.centerlabel).labelThreshold(i.labelthreshold||.01).labelsOutside(c.showlabelsoutside),D(e.type)&&a.donut(!0).donutRatio(p),"key-value"===i.labeltype&&a.labelType(function(e){return e.data.x+" "+e.data.y});break;case"Bubble":a=nv.models.scatterChart().x(function(e){return e.x}).y(function(e){return e.y}).showDistX(i.showxdistance).showDistY(i.showydistance)}return t&&(O.min=t.min.x||t.min[0],O.max=t.max.x||t.max[0],V(O)&&(O.min=U(O.min),a.xDomain([O.min,O.max]))),n&&(R.min=n.min.y||n.min[1],R.max=n.max.y||n.max[1],V(R)&&(R.min=U(R.min),a.yDomain([R.min,R.max]))),a.legend.vers(i.legendtype&&i.legendtype.toLowerCase()||"furious"),_.includes(u,e.type)||(a=nv.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y})),M(e.type)?("percent"===i.labeltype?a.valueFormat(d3.format("%")):a.valueFormat(function(e){return H(i.ynumberformat,e)}),Y(a,i,e)):(a.showXAxis(i.showxaxis).showYAxis(i.showyaxis),s=i.xaxislabel||r.prettifyLabels(e.xaxisdatakey)||"x caption",l=i.yaxislabel||r.prettifyLabels(e.yaxisdatakey)||"y caption",e.yaxisdatakey&&e.yaxisdatakey.split(",").length>1&&(w=!0),w||N(e.type)||Y(a,i,e,l),s+=i.xunits?"("+i.xunits+")":"",l+=i.yunits?"("+i.yunits+")":"",a.xAxis.axisLabel(s).axisLabelDistance(i.xaxislabeldistance).staggerLabels(i.staggerlabels),i.xdateformat||o&&!N(e.type)?L(e.type)?a.xAxis.tickFormat(function(t){return b=o?m[t-1]:e.xDataKeyArr[t],q(i.xdateformat,b)}):a.xAxis.tickFormat(function(e){return q(i.xdateformat,e)}):i.xnumberformat?a.xAxis.tickFormat(function(e){return H(i.xnumberformat,e)}):L(e.type)&&a.xAxis.tickFormat(function(t){return e.xDataKeyArr[t]}),a.yAxis.axisLabel(l).axisLabelDistance(i.yaxislabeldistance).staggerLabels(i.staggerlabels).tickFormat(function(e){return H(i.ynumberformat,e)}),A(e.type)&&a.valueFormat(function(e){return H(i.ynumberformat,e)})),_.isString(i.customcolors)&&i.customcolors&&(P=_.split(i.customcolors,",")),_.isArray(i.customcolors)&&(P=i.customcolors),y=z(i.showlegend),a.showLegend(y).margin({top:i.offsettop,right:i.offsetright,bottom:i.offsetbottom,left:i.offsetleft}).color(P.length?P:h[i.theme].colors),a.tooltip.enabled(i.tooltips),e.message=i.nodatamessage||"No data found",a.noData(e.message),L(e.type)&&e.highlightpoints&&a.dispatch.on("stateChange",function(){setTimeout(function(){return Q(e)},100)}),a},Q=function(e,t){var n=t?null:e.$id;L(e.type)&&(function(e,t){t=t||1.5,(e?d3.select("#wmChart"+e+" svg"):d3.select(P+" svg")).selectAll(".nv-line").style({"stroke-width":t})}(n,e.linethickness),function(e,t){var n=e?d3.select("#wmChart"+e+" svg"):d3.select(P+" svg");t?n.selectAll(".nv-point").style({"stroke-width":"6px","fill-opacity":".95","stroke-opacity":".95"}):n.selectAll(".nv-point").style({"stroke-width":"0px","fill-opacity":"0"})}(n,e.highlightpoints)),e.showlegend&&function(e,t,n){var i,o=z(e.showlegend),r=n?"#wmChart"+n:P,a=d3.select(r+" .nv-legendWrap");if(o&&a[0][0]&&"bottom"===t){var s=a[0][0].getBoundingClientRect().height,l=d3.select(r+" .nv-wrap"),c=l&&l.attr("transform")?l.attr("transform").replace(/, /g,","):"",p=/translate\(\s*([^\s,)]+)[ ,]([^\s,)]+)/.exec(c);a.attr("transform","translate(0 , "+(0===(i=$(r+" svg>.nvd3.nv-wrap")[0].getBoundingClientRect().height)&&(i=$(r+" svg")[0].getBoundingClientRect().height-(s+15)),i-s-5)+")"),p&&l.attr("transform","translate("+p[1]+",5)")}}(e,e.showlegend,n)},X={widgetType:"wm-chart",hostClass:"app-chart"},Z=["aggregation","aggregationcolumn","groupby","orderby"],J={Column:"rect.nv-bar",Bar:"g.nv-bar",Area:".nv-stackedarea .nv-point","Cumulative Line":".nv-cumulativeLine .nv-scatterWrap path.nv-point",Line:".nv-lineChart .nv-scatterWrap path.nv-point",Pie:".nv-pieChart .nv-slice path",Donut:".nv-pieChart .nv-slice path",Bubble:".nv-scatterChart .nv-point-paths path"},ee={fontunit:"font-size",fontsize:"font-size",color:"fill",fontfamily:"font-family",fontweight:"font-weight",fontstyle:"font-style",textdecoration:"text-decoration"},te={average:"AVG",count:"COUNT",maximum:"MAX",minimum:"MIN",sum:"SUM"},ne=function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&e},ie=function(e){var t,n=[],i=[];return _.forEach(_.split(e,","),function(e){t=_.split(e,":"),n.push(t[0]),i.push(t[1])}),{columns:n,orders:i}},oe=function(e){return e?e.replace(/\./g,"$"):null},re=function(e,t){d3.select("#wmChart"+t+" svg").selectAll("text").style(e)},ae=function(e){function t(t,n){var i=e.call(this,t,X)||this;return i.app=n,i.iconclass="",i.nonPrimaryColumns=[],i.xDataKeyArr=[],i.chartData=[],i._processedData=[],i._plotChartProxy=_.debounce(i.plotChartProxy.bind(i),100),i.redraw=i._plotChartProxy.bind(i),o.styler(i.nativeElement,i,o.APPLY_STYLES_TYPE.CONTAINER,["fontsize","fontunit","color","fontfamily","fontweight","fontstyle","textdecoration"]),i.$id=i.widgetId||Math.random(),r.removeAttr(i.nativeElement,"title"),i.chartReady=!1,i.binddataset=i.nativeElement.getAttribute("dataset.bind"),i.app.subscribe("toggle-variable-state",i.handleLoading.bind(i)),i}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.isGroupByEnabled=function(){return!(!this.groupby||"none"===this.groupby)},t.prototype.isValidAxis=function(){return!this.binddataset||this.xaxisdatakey&&this.yaxisdatakey},t.prototype.isAggregationEnabled=function(){return!(!this.isGroupByEnabled()||"none"===this.aggregation||!this.aggregationcolumn)},t.prototype.isDataFilteringEnabled=function(){return this.isAggregationEnabled()||!this.isVisuallyGrouped&&this.orderby},t.prototype.getxAxisVal=function(e,t,n){var i=_.get(e,t);return L(this.type)&&!r.isNumberType(this.xAxisDataType)?(this.xDataKeyArr.push(i),n):i},t.prototype.getXMinMaxValues=function(e){if(e){var t={};return t.min=_.minBy(e.values,function(e){return e.x||e[0]}),t.max=_.maxBy(e.values,function(e){return e.x||e[0]}),t}},t.prototype.getYMinMaxValues=function(e){var t={},n=[],i=[];if(e)return _.forEach(e,function(e){n.push(_.minBy(e.values,function(e){return e.y||e[1]})),i.push(_.maxBy(e.values,function(e){return e.y||e[1]}))}),t.min=_.minBy(n,function(e){return e.y||e[1]}),t.max=_.maxBy(i,function(e){return e.y||e[1]}),t},t.prototype.getValidData=function(e){return 1===e.length&&void 0===e[0]?[]:e},t.prototype.valueFinder=function(e,t,n,i,o){var r,a=this.getxAxisVal(e,t,i),s=_.get(e,n),l=parseFloat(s)||s,c=parseFloat(e[this.bubblesize])||2,p={};return k(this.type)?(p.x=a,p.y=l,N(this.type)&&(p.size=c,p.shape=o||"circle")):(r=this.type,_.includes(E,r)&&(p=[a,l])),p._dataObj=e,p},t.prototype.setErrMsg=function(e){this.showNoDataMsg&&(this.showContentLoadError=!0,this.invalidConfig=!0,this.errMsg="")},t.prototype.processChartData=function(){var e=this;if(this.sampleData=G(this),this.xDataKeyArr=[],!this.binddataset)return this.xDataKeyArr=m,this.sampleData;if(!this.chartData||!this.chartData.length)return[];var t,n=[],i=[],o=[],a=this.xaxisdatakey,s=this.yaxisdatakey?this.yaxisdatakey.split(","):[],l=this.chartData;return _.isArray(l)&&(M(this.type)?(t=s[0],n=_.map(l,function(n,i){if(!r.isEmptyObject(l[i]))return e.valueFinder(l[i],a,t)}),n=this.getValidData(n)):(N(this.type)&&(i="random"===this.shape?d:this.shape),s.forEach(function(t,s){o=_.map(l,function(n,o){if(!r.isEmptyObject(l[o]))return e.valueFinder(l[o],a,t,o,_.isArray(i)&&i[s]||e.shape)}),o=e.getValidData(o),n.push({values:o,key:r.prettifyLabels(t)})}))),n},t.prototype.setChartData=function(e){e&&(this._processedData=e)},t.prototype.getChartData=function(){return this._processedData},t.prototype.getVisuallyGroupedData=function(e,t){var n,i,o=this,r={},a=[],s=[],l=x(this.type),c=_.first(_.split(this.yaxisdatakey,","));return this.xDataKeyArr=[],e=_.orderBy(e,_.split(this.groupby,",")),this.orderby&&(n=ie(this.orderby),e=_.orderBy(e,n.columns,n.orders)),e=_.groupBy(e,t),l&&(i=_.max(_.map(e,function(e){return e.length}))),_.forEach(e,function(e,t){a=x?_.fill(new Array(i),[0,0]):[],_.forEachRight(e,function(e,t){a[t]=o.valueFinder(e,o.xaxisdatakey,c,t)}),r={key:t,values:a},s.push(r)}),s},t.prototype.getGroupingDetails=function(){var e=this;if(this.isGroupByEnabled()&&!this.isAggregationEnabled()){var t,n,i,o=!1,r=[],a=this.groupby&&"none"!==this.groupby?this.groupby.split(","):[],s=this.yaxisdatakey?this.yaxisdatakey.split(","):[];return a.length>1&&(a.every(function(n,r){return e.xaxisdatakey===n||-1!==$.inArray(n,s)||(o=!0,t=n,i=r,a.splice(i,1),!1)}),t&&r.push(t),a.length&&(r=_.concat(r,a))),this.xaxisdatakey!==this.aggregationcolumn&&r.push(this.xaxisdatakey),_.forEach(s,function(t){t!==e.aggregationcolumn&&r.push(t)}),n=r.join(","),this.isVisuallyGrouped=o,{expression:n,isVisuallyGrouped:o,visualGroupingColumn:t}}return{expression:"",isVisuallyGrouped:!1,visualGroupingColumn:""}},t.prototype.getAggregatedData=function(e){var t,n,i,o=this,a=this.datasource,s=this.yaxisdatakey?this.yaxisdatakey.split(","):[],l={},c=[],p=[];a&&(this.isGroupByEnabled()&&(p=_.split(this.groupby,",")),this.orderby&&(t=_.replace(this.orderby,/:/g," "),c=_.uniq(_.concat(c,p,[this.aggregationcolumn])),i=ie(this.orderby).columns,_.forEach(_.intersection(c,i),function(e){n=oe(e),t=_.replace(t,e,n)})),this.isAggregationEnabled()&&(l.groupByFields=p,l.aggregations=[{field:this.aggregationcolumn,type:te[this.aggregation],alias:oe(this.aggregationcolumn)}]),a.execute("getAggregatedData",{aggregations:l,sort:t}).then(function(t){var n=[],i=oe(o.aggregationcolumn),a=oe(o.xaxisdatakey),l=[];s.forEach(function(e){return l.push(oe(e))}),_.forEach(t.body.content,function(e){var t={};o.isAggregationEnabled()&&(t[o.aggregationcolumn]=e[i],t[o.aggregationcolumn]=_.get(e,i)||_.get(e,o.aggregationcolumn)),t[o.xaxisdatakey]=_.get(e,a)||_.get(e,o.xaxisdatakey),s.forEach(function(n,i){t[n]=e[l[i]],t[n]=_.get(e,l[i])||_.get(e,n)}),n.push(t)}),o.chartData=n,r.triggerFn(e)},function(){o.chartData=[],o.setErrMsg("MESSAGE_ERROR_FETCH_DATA"),r.triggerFn(e)}))},t.prototype.setLabelsMaxWidth=function(){var e,t,n,i,o,r,a,s,l,c,p,u,d=parseInt(this.fontsize,10)||12,m=A(this.type);(e=$("#wmChart"+this.$id+" svg").find("g.nv-x").find("g.tick").find("text")).each(function(){var e,n,r=$(this);if(r.text()&&"1"===r.css("opacity"))return e=r.parent().attr("transform").split(","),i=parseFloat(e[0].substr(10)),o=parseFloat(e[1]||"0"),!m&&i>0?n=i:o>0&&(n=o),t?(t=n-t,!1):(t=n,!0)}),m?(c=$("#wmChart"+this.$id+" svg>g.nv-wrap>g>g.nv-barsWrap")[0],p=$("#wmChart"+this.$id+" svg>g.nv-wrap>g>g.nv-y")[0],u=$("#wmChart"+this.$id+" svg")[0],r=c?c.getBoundingClientRect().height:0,l=p?u.getBoundingClientRect().width-p.getBoundingClientRect().width:u.getBoundingClientRect().width,n=Math.round(l/d),t<d&&(a=r/d,s=Math.ceil(this.chartData.length/a),d3.select("#wmChart"+this.$id+" svg").select("g.nv-x").selectAll("g.tick").select("text").each(function(e,t){t%s!=0&&d3.select(this).attr("opacity",0)}))):n=Math.round(t/d),n=Math.abs(n),e.each(function(){this.textContent.length>n&&(this.textContent=this.textContent.substr(0,n)+"...")})},t.prototype.getDefaultColumns=function(){var e,t,n,i,o=[],a=this.datasource.execute(r.DataSource.Operation.GET_PROPERTIES_MAP)||[];for(n=0;n<a.length&&o.length<=2;n+=1)e=a[n].type,!a[n].isRelated&&r.isNumberType(e)?o.push(a[n].fieldName):"string"!==e||t||(t=a[n].fieldName);return t&&o.length>0&&!N(this.type)&&(i=o[0],o[0]=t,o[1]=i),o},t.prototype.attachClickEvent=function(){var e,t=this;d3.select("#wmChart"+this.$id+" svg").selectAll(J[this.type]).style("pointer-events","all").on("click",function(n,i){switch(t.type){case"Column":case"Bar":e=n._dataObj;break;case"Pie":case"Donut":e=n.data._dataObj;break;case"Area":case"Cumulative Line":case"Line":e=n[0]._dataObj;break;case"Bubble":e=n.data.point[4]._dataObj}t.selecteditem=e,t.invokeEventCallback("select",{$event:d3.event,selectedChartItem:n,selectedItem:t.selecteditem})})},t.prototype.postPlotProcess=function(e){var t,n,i,o,a=this,s={},l=this.$element;Q(this),M(this.type)?this.showlabelsoutside||(n=(t=d3.select("#wmChart"+this.$id+" svg")).select(".nv-pieLabels").selectAll(".nv-label"),i=t.select(".nv-pie").selectAll(".nv-slice"),o=[],i&&i.length&&(i.each(function(){d3.select(this).attr("transform",function(e){o.push(function(e){var t=90*(e.startAngle+e.endAngle)/Math.PI-90;return t>90?t-180:t}(e))})}),n.each(function(e,t){var n=d3.select(this);$(n[0][0]).find("text").attr("transform","rotate("+o[t]+")")}))):this.setLabelsMaxWidth(),_.forEach(ee,function(e,t){s[e]="fontsize"===t||"fontunit"===t?a.fontsize+a.fontunit:a[t]}),re(s,this.$id),r.triggerFn(this._resizeFn&&this._resizeFn.clear),this._resizeFn=nv.utils.windowResize(function(){l[0].getBoundingClientRect().height&&(e.update(),Q(a),M(a.type)||a.setLabelsMaxWidth())})},t.prototype.configureChart=function(){var e,t,n,i;if(this._processedData.length>0&&(j(this,"x")&&(e=this.binddataset?this.getXMinMaxValues(this._processedData[0]):{min:{x:1},max:{x:5}}),j(this,"y")&&(t=this.binddataset?this.getYMinMaxValues(this._processedData):{min:{y:1},max:{y:5}})),!M(this.type)||this.binddataset&&this.scopedataset||(this._processedData=r.getClonedObject(this.scopedataset||this._processedData)),n=K(this,e,t,null,!this.binddataset),_.isArray(this._processedData))return(i=this.invokeEventCallback("beforerender",{chartInstance:n}))&&(n=i),this.chart=n,d3.select("#wmChart"+this.$id+" svg").datum(this._processedData).call(this.chart),this.postPlotProcess(n),n},t.prototype.plotChart=function(){var e=this,t=this.$element;this.chartData=this.invokeEventCallback("transform")||this.chartData,this.isVisuallyGrouped&&!M(this.type)?this._processedData=this.chartData:this._processedData=this.processChartData(),t[0].getBoundingClientRect().height&&(this.clearCanvas&&(t.find("svg").replaceWith("<svg></svg>"),this.clearCanvas=!1),this.isValidAxis()||(this._processedData=[]),nv.addGraph(function(){return e.configureChart()},function(){setTimeout(function(){e.attachClickEvent()},600)}),this.isLoadInProgress=!1)},Object.defineProperty(t.prototype,"isLiveVariable",{get:function(){var e=this.datasource;return e&&"wm.LiveVariable"===e.category},enumerable:!0,configurable:!0}),t.prototype.plotChartProxy=function(){var e=this;this.showContentLoadError=!1,this.invalidConfig=!1,this.isLoadInProgress=!0;var t=this.getGroupingDetails();this.binddataset&&this.isLiveVariable&&(this.filterFields||this.isDataFilteringEnabled())?this.getAggregatedData(function(){return e.plotChart()}):(this.dataset&&this.isLiveVariable&&(this.chartData=this.dataset,this.isGroupByEnabled()&&t.isVisuallyGrouped&&(this.chartData=this.getVisuallyGroupedData(this.chartData,t.visualGroupingColumn))),this.plotChart())},t.prototype.setDefaultAxisOptions=function(){var e=this.getDefaultColumns();this.xaxisdatakey=e[0]||null,this.yaxisdatakey=e[1]||null},t.prototype.getCutomizedOptions=function(e,t){var n,i=_.split(this.groupby,","),o=_.split(this.aggregationcolumn,",");if(!this.binddataset)return t;switch(this.axisoptions||(this.axisoptions=t),e){case"xaxisdatakey":this.isGroupByEnabled()&&(n=i);break;case"yaxisdatakey":this.isAggregationEnabled()?n=o:this.isLiveVariable&&(n=this.numericColumns);break;case"groupby":this.isLiveVariable&&this.nonPrimaryColumns&&this.nonPrimaryColumns.length&&(n=this.nonPrimaryColumns);break;case"aggregationcolumn":this.isLiveVariable&&this.isAggregationEnabled()&&"count"!==this.aggregation&&(n=this.numericColumns);break;case"orderby":this.isLiveVariable&&this.isAggregationEnabled()&&(n=_.uniq(_.concat(i,o)));break;case"bubblesize":this.numericColumns&&this.numericColumns.length&&(n=this.numericColumns)}return n||t||this.axisoptions},t.prototype.setNumericandNonPrimaryColumns=function(){var e,t,n=this,i=this.datasource.execute(r.DataSource.Operation.GET_PROPERTIES_MAP);this.numericColumns=[],this.nonPrimaryColumns=[],this.dataset&&!_.isEmpty(i)&&(e=[]),e&&(_.forEach(Object.keys(e),function(i){t=e[i].type,r.isNumberType(t)&&n.numericColumns.push(i),"true"!==e[i].isRelatedPk&&e[i].isPrimaryKey||n.nonPrimaryColumns.push(i)}),this.numericColumns=this.numericColumns.sort(),this.nonPrimaryColumns=this.nonPrimaryColumns.sort())},t.prototype.handleDataSet=function(e){this.errMsg="",e||this.binddataset||(this.isVisuallyGrouped=!1,this.axisoptions=null),this.chartData=this.isLiveVariable?e||"":e&&""===e.dataValue&&1===_.keys(e).length?"":e,!_.isArray(this.chartData)&&_.isObject(this.chartData)&&(this.chartData=[this.chartData]),e&&e.filterFields&&(this.filterFields=e.filterFields),this.chartData&&this._plotChartProxy()},t.prototype.onPropertyChange=function(t,n,i){switch(e.prototype.onPropertyChange.call(this,t,n,i),t){case"dataset":this.handleDataSet(n);break;case"type":M(this.type)?(this.offsettop=20,this.offsetright=0,this.offsetbottom=0,this.offsetleft=0):"Pie"!==i&&"Donut"!==i||(this.offsettop=25,this.offsetright=25,this.offsetbottom=55,this.offsetleft=75),i!==n&&(this.clearCanvas=!0),this._plotChartProxy();break;default:this._plotChartProxy()}_.includes(Z,t)&&this._plotChartProxy()},t.prototype.handleLoading=function(e){var t=this.datasource;t&&t.execute(r.DataSource.Operation.IS_API_AWARE)&&r.isDataSourceEqual(e.variable,t)&&(this.variableInflight=e.active,this.isLoadInProgress=e.active)},t.prototype.onStyleChange=function(t,n,i){var o={};switch(e.prototype.onStyleChange.call(this,t,n,i),t){case"fontsize":case"fontunit":case"color":case"fontfamily":case"fontweight":case"fontstyle":case"textdecoration":o[ee[t]]="fontsize"===t||"fontunit"===t?this.fontsize+this.fontunit:n,re(o,this.$id)}},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),_.includes(["outside","inside","hide"],this.showlabels)||(this.showlabels=ne(this.showlabels),this.showlabelsoutside=ne(this.showlabelsoutside),this.showlabels=this.showlabels?this.showlabelsoutside?"outside":"inside":"hide"),this.theme||(this.theme=M(this.type)?"Azure":"Terrestrial"),this.nativeElement.setAttribute("id","wmChart"+this.$id),this.binddataset||this.nativeElement.getAttribute("scopedataset")||this._plotChartProxy()},t.initializeProps=p(),t.decorators=[{type:i.Component,args:[{selector:"div[wmChart]",template:'<div class="panel-heading" *ngIf="title">\n    <h3 class="panel-title">\n        <div class="pull-left"><i class="app-icon panel-icon {{iconclass}}" [class.ng-hide]="!iconclass"></i></div>\n        <div class="heading" [innerHTML]="title | trustAs: \'html\'"></div>\n        <div class="description" *ngIf="subheading" [innerHTML]="subheading | trustAs: \'html\'"></div>\n    </h3>\n</div>\n<div class="app-chart-inner" [ngClass]="{\'loading\':isLoadInProgress, \'panel-body\': title}">\n    <svg></svg>\n    <div class="wm-content-info readonly-wrapper" *ngIf="showContentLoadError && showNoDataMsg">\n        <p class="wm-message" [title]="hintMsg" [ngClass]="{\'error\': invalidConfig}" [innerText]="errMsg"></p>\n    </div>\n    <div wmSpinner show.bind="isLoadInProgress" caption.bind="loadingdatamsg"></div>\n</div>',providers:[o.provideAsWidgetRef(t)],encapsulation:i.ViewEncapsulation.None,styles:[".nvd3 .nv-axis{pointer-events:none;opacity:1}.nvd3 .nv-axis path{fill:none;stroke:#000;stroke-opacity:.75;shape-rendering:crispEdges}.nvd3 .nv-axis path.domain{stroke-opacity:.75}.nvd3 .nv-axis.nv-x path.domain{stroke-opacity:0}.nvd3 .nv-axis line{fill:none;stroke:#e5e5e5;shape-rendering:crispEdges}.nvd3 .nv-axis .zero line,.nvd3 .nv-axis line.zero{stroke-opacity:.75}.nvd3 .nv-axis .nv-axisMaxMin text{font-weight:700}.nvd3 .x .nv-axis .nv-axisMaxMin text,.nvd3 .x2 .nv-axis .nv-axisMaxMin text,.nvd3 .x3 .nv-axis .nv-axisMaxMin text{text-anchor:middle}.nvd3 .nv-axis.nv-disabled{opacity:0}.nvd3 .nv-bars rect{fill-opacity:.75;-webkit-transition:fill-opacity 250ms linear;transition:fill-opacity 250ms linear}.nvd3 .nv-bars rect.hover{fill-opacity:1}.nvd3 .nv-bars .hover rect{fill:#add8e6}.nvd3 .nv-bars text{fill:transparent}.nvd3 .nv-bars .hover text{fill:rgba(0,0,0,1)}.nvd3 .nv-discretebar .nv-groups rect,.nvd3 .nv-multibar .nv-groups rect,.nvd3 .nv-multibarHorizontal .nv-groups rect{stroke-opacity:0;-webkit-transition:fill-opacity 250ms linear;transition:fill-opacity 250ms linear}.nvd3 .nv-candlestickBar .nv-ticks rect:hover,.nvd3 .nv-discretebar .nv-groups rect:hover,.nvd3 .nv-multibar .nv-groups rect:hover,.nvd3 .nv-multibarHorizontal .nv-groups rect:hover{fill-opacity:1}.nvd3 .nv-discretebar .nv-groups text,.nvd3 .nv-multibarHorizontal .nv-groups text{font-weight:700;fill:rgba(0,0,0,1);stroke:transparent}.nvd3 .nv-boxplot circle{fill-opacity:.5}.nvd3 .nv-boxplot circle:hover,.nvd3 .nv-boxplot rect:hover{fill-opacity:1}.nvd3 line.nv-boxplot-median{stroke:#000}.nv-boxplot-tick:hover{stroke-width:2.5px}.nvd3.nv-bullet{font:10px sans-serif}.nvd3.nv-bullet .nv-measure{fill-opacity:.8}.nvd3.nv-bullet .nv-measure:hover{fill-opacity:1}.nvd3.nv-bullet .nv-marker{stroke:#000;stroke-width:2px}.nvd3.nv-bullet .nv-markerTriangle{stroke:#000;fill:#fff;stroke-width:1.5px}.nvd3.nv-bullet .nv-markerLine{stroke:#000;stroke-width:1.5px}.nvd3.nv-bullet .nv-tick line{stroke:#666;stroke-width:.5px}.nvd3.nv-bullet .nv-range.nv-s0{fill:#eee}.nvd3.nv-bullet .nv-range.nv-s1{fill:#ddd}.nvd3.nv-bullet .nv-range.nv-s2{fill:#ccc}.nvd3.nv-bullet .nv-title{font-size:14px;font-weight:700}.nvd3.nv-bullet .nv-subtitle{fill:#999}.nvd3.nv-bullet .nv-range{fill:#bababa;fill-opacity:.4}.nvd3.nv-bullet .nv-range:hover{fill-opacity:.7}.nvd3.nv-candlestickBar .nv-ticks .nv-tick{stroke-width:1px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.hover{stroke-width:2px}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.positive rect{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-candlestickBar .nv-ticks .nv-tick.negative rect{stroke:#d62728;fill:#d62728}.with-transitions .nv-candlestickBar .nv-ticks .nv-tick{-webkit-transition:stroke-width 250ms linear,stroke-opacity 250ms linear;transition:stroke-width 250ms linear,stroke-opacity 250ms linear}.nvd3.nv-candlestickBar .nv-ticks line{stroke:#333}.nv-force-node{stroke:#fff;stroke-width:1.5px}.nv-force-link{stroke:#999;stroke-opacity:.6}.nv-force-node text{stroke-width:0}.nvd3 .nv-check-box .nv-box{fill-opacity:0;stroke-width:2}.nvd3 .nv-check-box .nv-check{fill-opacity:0;stroke-width:4}.nvd3 .nv-series.nv-disabled .nv-check-box .nv-check{fill-opacity:0;stroke-opacity:0}.nvd3 .nv-controlsWrap .nv-legend .nv-check-box .nv-check{opacity:0}.nvd3.nv-linePlusBar .nv-bar rect{fill-opacity:.75}.nvd3.nv-linePlusBar .nv-bar rect:hover{fill-opacity:1}.nvd3 .nv-groups path.nv-line{fill:none}.nvd3 .nv-groups path.nv-area{stroke:none}.nvd3.nv-line .nvd3.nv-scatter .nv-groups .nv-point{fill-opacity:0;stroke-opacity:0}.nvd3.nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:.5!important;stroke-opacity:.5!important}.with-transitions .nvd3 .nv-groups .nv-point{-webkit-transition:stroke-width 250ms linear,stroke-opacity 250ms linear;transition:stroke-width 250ms linear,stroke-opacity 250ms linear}.nvd3 .nv-groups .nv-point.hover,.nvd3.nv-scatter .nv-groups .nv-point.hover{stroke-width:7px;fill-opacity:.95!important;stroke-opacity:.95!important}.nvd3 .nv-point-paths path{stroke:#aaa;stroke-opacity:0;fill:#eee;fill-opacity:0}.nvd3 .nv-indexLine{cursor:ew-resize}svg.nvd3-svg{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;width:100%;height:100%}.nvtooltip.with-3d-shadow,.with-3d-shadow .nvtooltip{box-shadow:0 5px 10px rgba(0,0,0,.2);border-radius:5px}.nvd3 text{font:12px Arial,sans-serif}.nvd3 .title{font:bold 14px Arial,sans-serif}.nvd3 .nv-background{fill:#fff;fill-opacity:0}.nvd3.nv-noData{font-size:18px;font-weight:700}.nv-brush .extent{fill-opacity:.125;shape-rendering:crispEdges}.nv-brush .resize path{fill:#eee;stroke:#666}.nvd3 .nv-legend .nv-series{cursor:pointer}.nvd3 .nv-legend .nv-disabled circle{fill-opacity:0}.nvd3 .nv-brush .extent{fill-opacity:0!important}.nvd3 .nv-brushBackground rect{stroke:#000;stroke-width:.4;fill:#fff;fill-opacity:.7}@media print{.nvd3 text{stroke-width:0;fill-opacity:1}}.nvd3.nv-ohlcBar .nv-ticks .nv-tick{stroke-width:1px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.hover{stroke-width:2px}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.positive{stroke:#2ca02c}.nvd3.nv-ohlcBar .nv-ticks .nv-tick.negative{stroke:#d62728}.nvd3 .background path{fill:none;stroke:#eee;stroke-opacity:.4;shape-rendering:crispEdges}.nvd3 .foreground path{fill:none;stroke-opacity:.7}.nvd3 .nv-parallelCoordinates-brush .extent{fill:#fff;fill-opacity:.6;stroke:gray;shape-rendering:crispEdges}.nvd3 .nv-parallelCoordinates .hover{fill-opacity:1;stroke-width:3px}.nvd3 .missingValuesline line{fill:none;stroke:#000;stroke-width:1;stroke-opacity:1;stroke-dasharray:5,5}.nvd3.nv-pie path{stroke-opacity:0;-webkit-transition:fill-opacity 250ms linear,stroke-width 250ms linear,stroke-opacity 250ms linear;transition:fill-opacity 250ms linear,stroke-width 250ms linear,stroke-opacity 250ms linear;stroke:#fff;stroke-width:1px;stroke-opacity:1;fill-opacity:.7}.nvd3.nv-pie .nv-pie-title{font-size:24px;fill:rgba(19,196,249,.59)}.nvd3.nv-pie .nv-slice text{stroke:#000;stroke-width:0}.nvd3.nv-pie .hover path{fill-opacity:1}.nvd3.nv-pie .nv-label{pointer-events:none}.nvd3.nv-pie .nv-label rect{fill-opacity:0;stroke-opacity:0}.nvd3 .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nvd3 .nv-scatter .nv-point.hover{fill-opacity:1}.nv-distx,.nv-disty,.nv-noninteractive{pointer-events:none}.nvd3.nv-sparkline path{fill:none}.nvd3.nv-sparklineplus g.nv-hoverValue{pointer-events:none}.nvd3.nv-sparklineplus .nv-hoverValue line{stroke:#333;stroke-width:1.5px}.nvd3.nv-sparklineplus,.nvd3.nv-sparklineplus g{pointer-events:all}.nvd3 .nv-hoverArea{fill-opacity:0;stroke-opacity:0}.nvd3.nv-sparklineplus .nv-xValue,.nvd3.nv-sparklineplus .nv-yValue{stroke-width:0;font-size:.9em;font-weight:400}.nvd3.nv-sparklineplus .nv-yValue{stroke:#f66}.nvd3.nv-sparklineplus .nv-maxValue{stroke:#2ca02c;fill:#2ca02c}.nvd3.nv-sparklineplus .nv-minValue{stroke:#d62728;fill:#d62728}.nvd3.nv-sparklineplus .nv-currentValue{font-weight:700;font-size:1.1em}.nvd3.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0;-webkit-transition:fill-opacity 250ms linear,stroke-opacity 250ms linear;transition:fill-opacity 250ms linear,stroke-opacity 250ms linear}.nvd3.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nvd3.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nvtooltip{position:absolute;color:rgba(0,0,0,1);padding:1px;border:1px solid rgba(0,0,0,.5);z-index:10000;display:block;font-family:Arial,sans-serif;font-size:13px;text-align:left;pointer-events:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:rgba(255,255,255,.8);border-radius:4px}.nvtooltip.with-transitions,.with-transitions .nvtooltip{-webkit-transition:opacity 50ms linear .2s;transition:opacity 50ms linear .2s}.nvtooltip.x-nvtooltip,.nvtooltip.y-nvtooltip{padding:8px}.nvtooltip h3{margin:0;padding:4px 14px;line-height:18px;font-weight:400;background-color:rgba(247,247,247,.75);color:rgba(0,0,0,1);text-align:center;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.nvtooltip p{margin:0;padding:5px 14px;text-align:center}.nvtooltip span{display:inline-block;margin:2px 0}.nvtooltip table{margin:6px;border-spacing:0}.nvtooltip table td{padding:2px 9px 2px 0;vertical-align:middle}.nvtooltip table td.key{font-weight:400}.nvtooltip table td.key.total{font-weight:700}.nvtooltip table td.value{text-align:right;font-weight:700}.nvtooltip table td.percent{color:#a9a9a9}.nvtooltip table tr.highlight td{padding:1px 9px 1px 0;border-bottom-style:solid;border-bottom-width:1px;border-top-style:solid;border-top-width:1px}.nvtooltip table td.legend-color-guide div{vertical-align:middle;width:12px;height:12px;border:1px solid #999}.nvtooltip .footer{padding:3px;text-align:center}.nvtooltip-pending-removal{pointer-events:none;display:none}.nvd3 .nv-interactiveGuideLine{pointer-events:none}.nvd3 line.nv-guideline{stroke:#ccc}"]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:r.App}]},t.propDecorators={title:[{type:i.HostBinding,args:["class.panel"]}]},t}(o.StylableComponent),se=[ae],le=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[n.BasicModule,t.CommonModule,o.WmComponentsModule],declarations:c(se),exports:c(se),entryComponents:[]}]}],e}();e.\u0275a=ae,e.\u0275b=p,e.ChartModule=le,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/input"),require("ngx-bootstrap/dropdown"),require("@angular/router"),require("@wm/components/basic"),require("@wm/core"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/navigation/menu",["exports","@angular/common","@wm/components/input","ngx-bootstrap/dropdown","@angular/router","@wm/components/basic","@wm/core","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.menu={}),e.ng.common,e.wm.components.input,e.ngxBootstrap,e.ng.router,e.wm.components.basic,e.wm.core,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a,s,l){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function p(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var h=function(){l.register("wm-nav",new Map([["autoclose",u({value:"always"},l.PROP_STRING)],["autoopen",u({value:"never"},l.PROP_STRING)],["class",l.PROP_STRING],["dataset",l.PROP_ANY],["iconposition",u({value:"left"},l.PROP_STRING)],["isactive",l.PROP_STRING],["itemlabel",l.PROP_STRING],["itemlink",l.PROP_STRING],["itemicon",l.PROP_STRING],["itemclass",l.PROP_STRING],["itemchildren",l.PROP_STRING],["itemaction",l.PROP_STRING],["itembadge",l.PROP_STRING],["itemtarget",l.PROP_STRING],["layout",l.PROP_STRING],["name",l.PROP_STRING],["orderby",l.PROP_STRING],["show",u({value:!0},l.PROP_BOOLEAN)],["type",l.PROP_STRING],["userrole",l.PROP_STRING]]))},f={widgetType:"wm-nav",hostClass:"nav app-nav"},g={pills:"nav-pills",tabs:"nav-tabs",navbar:"navbar-nav"},v=function(e){function t(t,n,i,o,r,s){var c=e.call(this,t,f)||this;c.cdRef=n,c.route=i,c.userDefinedExecutionContext=o,c.app=r,l.styler(c.nativeElement,c,l.APPLY_STYLES_TYPE.CONTAINER),c.disableMenuContext=!!s,c.pageScope=c.viewParent;var p=c.nodes$.subscribe(function(){if(!_.isEmpty(c.nodes)){var e=!1,t=function(n,i){_.forEach(n,function(n){if(!e)return n.isactive?(e=!0,c.selecteditem=i?_.omit(n,["children","value"]):n.value,c.invokeEventCallback("select",{$event:{},$item:n.value}),a.triggerItemAction(c,n),i||(n._selected=!0),!1):void(_.isEmpty(n.children)||t(n.children,"menu"))})};t(c.nodes)}});return c.registerDestroyListener(function(){return p.unsubscribe()}),c}return p(t,e),Object.defineProperty(t.prototype,"activePageName",{get:function(){return this.app.activePageName},enumerable:!0,configurable:!0}),t.prototype.setNavType=function(e){a.addClass(this.nativeElement,g[e])},t.prototype.setNavLayout=function(e){a.addClass(this.nativeElement,"nav-"+e)},t.prototype.onNavSelect=function(e,t,n){e.preventDefault();var i=_.find(this.nodes,"_selected");i&&delete i._selected,this.activeNavLINode&&a.removeClass(this.activeNavLINode,"active"),this.activeNavLINode=n,a.addClass(n,"active"),this.selecteditem=t.value,this.invokeEventCallback("select",{$event:e,$item:t.value}),a.triggerItemAction(this,t)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.setNavType(this.type),this.setNavLayout(this.layout)},t.prototype.onMenuItemSelect=function(e,t,n){this.selecteditem=_.omit(n,["children","value"]),this.invokeEventCallback("select",{$event:e,$item:this.selecteditem})},t.initializeProps=h(),t.decorators=[{type:s.Component,args:[{selector:"[wmNav]",template:'<ng-template #menuRef let-item="item" let-index="index">\n    <div wmMenu dropdown\n         type="anchor"\n         autoclose.bind="autoclose"\n         iconclass.bind="item.icon"\n         autoopen.bind="autoopen"\n         caption.bind="item.label"\n         dataset.bind="item.children"\n         iconposition.bind="iconposition"\n         select.event="onMenuItemSelect($event, widget, $item)"></div>\n</ng-template>\n\n<ng-template #anchorRef let-item="item" let-index="index" let-liRef="liRef">\n    <a wmAnchor\n       [disableMenuContext]="disableMenuContext || !!item.action"\n       [wmNavigationControl]="item.link"\n       caption.bind="item.label"\n       iconclass.bind="item.icon"\n       badgevalue.bind="item.badge"\n       iconposition.bind="iconposition"\n       click.event="onNavSelect($event, item, liRef)"></a>\n</ng-template>\n\n<li class="app-nav-item {{item.class}}" *ngFor="let item of nodes; let index = index;" #liRef [ngClass]="{active: item._selected || (!isactive && item.link === \'#/\' + activePageName)}">\n    <ng-container [ngTemplateOutlet]="anchorRef" [ngTemplateOutletContext]="{item: item, index:index, liRef: liRef}" *ngIf="!item.children.length"></ng-container>\n    <ng-container [ngTemplateOutlet]="menuRef" [ngTemplateOutletContext]="{item: item, index:index}"  *ngIf="item.children.length"></ng-container>\n</li>\n\n<ng-content *ngIf="!nodes.length" select="[wmNavItem]"></ng-content>\n',providers:[l.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:s.Injector},{type:s.ChangeDetectorRef},{type:o.Router},{type:a.UserDefinedExecutionContext},{type:a.App},{type:void 0,decorators:[{type:s.Attribute,args:["select.event"]}]}]},t}(l.DatasetAwareNavComponent),y=function(){l.register("wm-menu",new Map([["accessroles",u({value:"Everyone"},l.PROP_STRING)],["animateitems",l.PROP_STRING],["autoclose",u({value:"always"},l.PROP_STRING)],["autoopen",u({value:"never"},l.PROP_STRING)],["caption",l.PROP_STRING],["class",l.PROP_STRING],["dataset",u({value:"Menu Item 1, Menu Item 2, Menu Item 3"},l.PROP_ANY)],["hint",u({value:""},l.PROP_STRING)],["isactive",l.PROP_STRING],["iconclass",l.PROP_STRING],["iconposition",u({value:"left"},l.PROP_STRING)],["itemaction",l.PROP_STRING],["itemchildren",l.PROP_STRING],["itemclass",l.PROP_STRING],["itemicon",l.PROP_STRING],["itemlabel",l.PROP_STRING],["itemlink",l.PROP_STRING],["itemtarget",l.PROP_STRING],["linktarget",u({value:"_self"},l.PROP_STRING)],["menuclass",l.PROP_STRING],["menulayout",l.PROP_STRING],["menuposition",l.PROP_STRING],["name",l.PROP_STRING],["orderby",l.PROP_STRING],["shortcutkey",l.PROP_STRING],["show",u({value:!0},l.PROP_BOOLEAN)],["tabindex",u({value:0},l.PROP_NUMBER)],["type",u({value:"menu"},l.PROP_STRING)],["userrole",l.PROP_STRING]]))},b={MOVE_UP:"UP-ARROW",MOVE_LEFT:"LEFT-ARROW",MOVE_RIGHT:"RIGHT-ARROW",MOVE_DOWN:"DOWN-ARROW",ON_ENTER:"ENTER",ON_TAB:"TAB",ON_ESCAPE:"ESC"},w="up,left",P="up,right",O="down,left",R="down,right",E="down,left",T="up,right",S="up,left",C="inline",I="fa-caret-up",A="fa-caret-down",D="pull-left",N="pull-right",x="activepage",M="always",k={widgetType:"wm-menu",hostClass:"dropdown app-menu"},L=function(e){function t(t,n,i,o,r,s){var l=e.call(this,t,k)||this;l.route=n,l.userDefinedExecutionContext=i,l.bsDropdown=o,l.parentNav=r,l.selectEventCB=s,l.menuCaret="fa-caret-down",l._selectFirstItem=!1,l.disableMenuContext=r?!!r.disableMenuContext:!!s;var c=l.nodes$.subscribe(function(){if(!_.isEmpty(l.nodes)){if(l.parentNav)return;var e=!1,t=function(n){_.forEach(n,function(n){if(!e)return n.isactive?(e=!0,l.onMenuItemSelect({$event:{},$item:n}),a.triggerItemAction(l,n),!1):void(_.isEmpty(n.children)||t(n.children))})};t(l.nodes)}});return l.registerDestroyListener(function(){return c.unsubscribe()}),l}return p(t,e),t.prototype.onShow=function(){var e=this;this._selectFirstItem&&setTimeout(function(){e.$element.find("> ul[wmmenudropdown] li.app-menu-item:first > a").focus()}),a.$appDigest()},t.prototype.onHide=function(){this.$element.find(">.dropdown-toggle").focus(),this.$element.find("li").removeClass("open"),this._selectFirstItem=!1,a.$appDigest()},t.prototype.onKeyDown=function(e,t){var n=_.clone(b);this.menuposition===P?(n.MOVE_UP="DOWN-ARROW",n.MOVE_DOWN="UP-ARROW"):this.menuposition===w?(n.MOVE_UP="DOWN-ARROW",n.MOVE_DOWN="UP-ARROW",n.MOVE_LEFT="RIGHT-ARROW",n.MOVE_RIGHT="LEFT-ARROW"):this.menuposition===O&&(n.MOVE_LEFT="RIGHT-ARROW",n.MOVE_RIGHT="LEFT-ARROW"),_.includes([n.MOVE_DOWN,n.MOVE_RIGHT],t)?this.bsDropdown.isOpen?this.$element.find("> ul[wmmenudropdown] li.app-menu-item:first > a").focus():(this._selectFirstItem=!0,this.bsDropdown.show()):t===n.ON_ENTER?this.bsDropdown.toggle(!0):_.includes([n.MOVE_UP,n.MOVE_LEFT],t)&&this.bsDropdown.hide(),e.preventDefault()},t.prototype.hasLinkToCurrentPage=function(e){var t=this;return e.some(function(e){return!!l.isActiveNavItem(e.link,t.route.url)||(e.children?t.hasLinkToCurrentPage(e.children):void 0)})},t.prototype.resetNodes=function(){e.prototype.resetNodes.call(this),(this.autoopen===x&&this.hasLinkToCurrentPage(this.nodes)||this.autoopen===M)&&this.bsDropdown.show()},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.setMenuPosition()},t.prototype.onPropertyChange=function(t,n,i){"tabindex"!==t&&("autoclose"===t?this.bsDropdown.autoClose="disabled"!==n:e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.setMenuPosition=function(){switch(this.menuposition){case R:a.removeClass(this.nativeElement,"dropup"),this.menualign=D,this.menuCaret=A;break;case E:a.removeClass(this.nativeElement,"dropup"),this.menualign=N,this.menuCaret=A;break;case S:a.addClass(this.nativeElement,"dropup"),this.menualign=N,this.menuCaret=I;break;case T:a.addClass(this.nativeElement,"dropup"),this.menualign=D,this.menuCaret=I;break;case C:this.menualign="dropinline-menu"}},t.prototype.onMenuItemSelect=function(e){var t=e.$event,n=e.$item.value;this.invokeEventCallback("select",{$event:t,$item:n})},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),l.styler(this.nativeElement.querySelector(".dropdown-toggle"),this)},t.initializeProps=y(),t.decorators=[{type:s.Component,args:[{selector:"[wmMenu]",template:'<ng-template #menuTemplate>\n    <button wmButton\n            dropdownToggle\n            aria-haspopup="true"\n            aria-expanded="false"\n\n            class="btn app-button dropdown-toggle {{menuclass}}"\n            hint.bind="hint"\n            shortcutkey.bind="shortcutkey"\n            tabindex.bind="tabindex"\n            caption.bind="caption"\n            iconclass.bind="iconclass"\n            iconposition.bind="iconposition">\n        <span class="pull-right caret fa {{menuCaret}}"></span>\n    </button>\n</ng-template>\n\n<ng-template #innerTemplate>\n    <i class="app-icon {{iconclass}}"></i>\n    <span class="caption" [textContent]="caption"></span>\n    <span class="pull-right caret fa {{menuCaret}}"></span>\n</ng-template>\n\n<ng-container *ngIf="type === \'anchor\'; else menuTemplate">\n    <a wmAnchor\n       dropdownToggle\n\n       href="javascript:void(0);"\n       role="button"\n       aria-haspopup="true"\n       aria-expanded="false"\n\n       hint.bind="hint"\n       class="dropdown-toggle {{menuclass}}"\n       shortcutkey.bind="shortcutkey"\n       tabindex.bind="tabindex"\n       caption.bind="caption"\n       iconclass.bind="iconclass"\n       iconposition.bind="iconposition"\n    >\n        <span class="pull-right caret fa {{menuCaret}}"></span>\n    </a>\n</ng-container>\n\n<ul wmMenuDropdown [items]="nodes" [ngClass]="menulayout" class="icon-position-{{iconposition}}" *dropdownMenu aria-labelledby="dropdownmenu"></ul>\n',providers:[l.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:s.Injector},{type:o.Router},{type:a.UserDefinedExecutionContext},{type:i.BsDropdownDirective,decorators:[{type:s.Self},{type:s.Optional}]},{type:v,decorators:[{type:s.Optional}]},{type:String,decorators:[{type:s.Attribute,args:["select.event"]}]}]},t.propDecorators={onShow:[{type:s.HostListener,args:["onShown"]}],onHide:[{type:s.HostListener,args:["onHidden"]}],onKeyDown:[{type:s.HostListener,args:["keydown.arrowup",["$event",'"UP-ARROW"']]},{type:s.HostListener,args:["keydown.arrowdown",["$event",'"DOWN-ARROW"']]},{type:s.HostListener,args:["keydown.arrowright",["$event",'"RIGHT-ARROW"']]},{type:s.HostListener,args:["keydown.arrowleft",["$event",'"LEFT-ARROW"']]},{type:s.HostListener,args:["keydown.enter",["$event",'"ENTER"']]}]},t}(l.DatasetAwareNavComponent),F={scale:{name:"wmScaleInLeft","down,right":"wmScaleInLeft","down,left":"wmScaleInRight","up,right":"wmScaleInTopLeft","up,left":"wmScaleInTopRight"},fade:{name:"fadeIn","down,right":"fadeIn","down,left":"fadeIn","up,right":"fadeIn","up,left":"fadeIn"},slide:{name:"wmSlideInDown","down,right":"wmSlideInDown","down,left":"wmSlideInDown","up,right":"wmSlideInUp","up,left":"wmSlideInUp"}},B="dropdown-menu",G=function(){function e(e,t){this.menuRef=t,this.nativeElement=e.nativeElement,a.addClass(this.nativeElement,B)}return e.prototype.ngAfterViewInit=function(){var e=this.menuRef.animateitems,t="";e&&(t="animated "+(F[e][this.menuRef.menuposition]||F[e].name)),a.addClass(this.nativeElement,"dropdown-menu "+this.menuRef.menualign+" "+t,!0)},e.decorators=[{type:s.Component,args:[{selector:"ul[wmMenuDropdown]",template:'<li wmMenuDropdownItem *ngFor="let item of items"\n    [item]="item"\n    [ngClass]="{disabled: item.disabled, \'dropdown-submenu\': item.children.length > 0}"\n    class="{{item.class}}">\n</li>'}]}],e.ctorParameters=function(){return[{type:s.ElementRef},{type:L}]},e.propDecorators={items:[{type:s.Input}]},e}(),j={"pull-right":"fa-caret-left","dropinline-menu":"fa-caret-down","pull-left":"fa-caret-right"},V="horizontal",U=function(){function e(e,t,n,i){var o=this;this.menuRef=e,this.userDefinedExecutionContext=t,this.parentNav=n,this.onSelect=function(e,t){if(o.nativeElement===$(e.target).closest(".app-menu-item").get(0)){"outsideClick"===o.menuRef.autoclose&&e.stopPropagation(),e.preventDefault();var n={$event:e,$item:t};o.menuRef.onMenuItemSelect(n);var i=_.clone(t);i.target=i.target||o.menuRef.linktarget,a.triggerItemAction(o,i)}},this.nativeElement=i.nativeElement,a.addClass(this.nativeElement,"app-menu-item"),this.menualign=j[this.menuRef.menualign]||j["pull-left"]}return e.prototype.ngOnInit=function(){this.parentNav&&l.isActiveNavItem(this.item.link,this.menuRef.route.url)&&a.addClass(this.nativeElement,"active")},e.prototype.getInitialKeyMovements=function(){var e=_.clone(b);return this.menuRef.menulayout===V?(e.MOVE_UP="LEFT-ARROW",e.MOVE_LEFT="UP-ARROW",e.MOVE_RIGHT="DOWN-ARROW",e.MOVE_DOWN="RIGHT-ARROW"):this.menuRef.menuposition===O||this.menuRef.menuposition===w?(e.MOVE_LEFT="RIGHT-ARROW",e.MOVE_RIGHT="LEFT-ARROW"):"inline"===this.menuRef.menuposition&&(e.MOVE_UP="LEFT-ARROW",e.MOVE_LEFT="UP-ARROW",e.MOVE_RIGHT="DOWN-ARROW",e.MOVE_DOWN="RIGHT-ARROW"),e},e.prototype.onKeyDown=function(e,t){var n=$(this.nativeElement),i=$(this.nativeElement).closest("ul.dropdown-menu"),o=this.menuRef.$element.find("> ul.dropdown-menu"),r=this.getInitialKeyMovements();if(_.includes(["LEFT-ARROW","RIGHT-ARROW","UP-ARROW","DOWN-ARROW"],t)&&e.preventDefault(),t===r.ON_TAB&&o.children().last()[0]===this.nativeElement||t===r.ON_ESCAPE)e.preventDefault(),this.menuRef.bsDropdown.hide();else if(t===r.ON_ENTER&&!this.item.link||t===r.MOVE_RIGHT)e.stopPropagation(),this.item.children.length?(n.toggleClass("open"),n.find("li:first > a").focus()):n.find("> a").focus();else if(t===r.MOVE_LEFT||t===r.ON_TAB&&i.children().last()[0]===this.nativeElement){if(o[0]!==i[0]){var a=i.parent();a.toggleClass("open").find("li.open").removeClass("open"),a.find("> a").focus(),e.preventDefault(),e.stopPropagation()}}else t===r.MOVE_UP?o[0]===i[0]&&o.find("> li:first")[0]===this.nativeElement||(e.stopPropagation(),n.prev().find("> a").focus()):t===r.MOVE_DOWN?(e.stopPropagation(),o.find("> li:last")[0]===this.nativeElement&&(this.menuRef.menulayout!==V&&this.menuRef.menuposition===P||this.menuRef.menuposition===w)?this.menuRef.bsDropdown.hide():n.next().find("> a").focus()):t===r.ON_ENTER?this.onSelect(e,this.item):e.stopPropagation()},e.decorators=[{type:s.Component,args:[{selector:"li[wmMenuDropdownItem]",template:'<a href="javascript:void(0);" [title]="item.label" [wmNavigationControl]="item.link" [disableMenuContext]="menuRef.disableMenuContext || !!item.action">\n    <span *ngIf="item.children.length" class="pull-right fa caret {{menualign}}"></span>\n    <i class="app-icon {{item.icon}}"></i>\n    <span class="anchor-caption">{{item.label}}</span>\n\n</a>\n<ng-container [ngTemplateOutlet]="nestedMenuDropdown" *ngIf="item.children.length" [ngTemplateOutletContext]="{item: item}"></ng-container>\n\n<ng-template #nestedMenuDropdown let-item="item">\n    <ul wmMenuDropdown [items]="item.children"></ul>\n</ng-template>\n'}]}],e.ctorParameters=function(){return[{type:L},{type:a.UserDefinedExecutionContext},{type:v,decorators:[{type:s.Optional}]},{type:s.ElementRef}]},e.propDecorators={item:[{type:s.Input}],onKeyDown:[{type:s.HostListener,args:["keydown.tab",["$event",'"TAB"']]},{type:s.HostListener,args:["keydown.escape",["$event",'"ESC"']]},{type:s.HostListener,args:["keydown.enter",["$event",'"ENTER"']]},{type:s.HostListener,args:["keydown.arrowup",["$event",'"UP-ARROW"']]},{type:s.HostListener,args:["keydown.arrowdown",["$event",'"DOWN-ARROW"']]},{type:s.HostListener,args:["keydown.arrowright",["$event",'"RIGHT-ARROW"']]},{type:s.HostListener,args:["keydown.arrowleft",["$event",'"LEFT-ARROW"']]}],onSelect:[{type:s.HostListener,args:["click",["$event","item"]]}]},e}(),W=function(){l.register("wm-nav-item",new Map([["class",l.PROP_STRING],["name",l.PROP_STRING],["show",u({value:!0},l.PROP_BOOLEAN)]]))},q={widgetType:"wm-nav-item",hostClass:"app-nav-item"},H=function(e){function t(t){var n=e.call(this,t,q)||this;return l.styler(n.nativeElement,n,l.APPLY_STYLES_TYPE.CONTAINER),n}return p(t,e),t.prototype.makeActive=function(){var e=this.nativeElement.parentNode;$(e).find("> li.active").removeClass("active"),a.addClass(this.nativeElement,"active")},t.prototype.ngAfterViewInit=function(){var e=this;this.innerLink&&this.innerLink.onActive(function(){return e.makeActive()})},t.initializeProps=W(),t.decorators=[{type:s.Directive,args:[{selector:"[wmNavItem]",providers:[l.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:s.Injector}]},t.propDecorators={innerLink:[{type:s.ContentChild,args:[r.AnchorComponent]}],makeActive:[{type:s.HostListener,args:["click"]},{type:s.HostListener,args:["keydown.enter"]}]},t}(l.StylableComponent),z=function(e){e.preventDefault()},Y=function(){function e(e){this.nativeElement=e.nativeElement}return Object.defineProperty(e.prototype,"wmNavigationControl",{set:function(e){this._link=e,e&&!this.disableMenuContext?(a.setAttr(this.nativeElement,"href",e),this.nativeElement.removeEventListener("contextmenu",z)):(a.setAttr(this.nativeElement,"href","javascript:void(0)"),this.nativeElement.addEventListener("contextmenu",z))},enumerable:!0,configurable:!0}),e.decorators=[{type:s.Directive,args:[{selector:"[wmNavigationControl]"}]}],e.ctorParameters=function(){return[{type:s.ElementRef}]},e.propDecorators={disableMenuContext:[{type:s.Input}],wmNavigationControl:[{type:s.Input}]},e}(),K=[L,G,U,Y,v,H],Q=function(){function e(){}return e.decorators=[{type:s.NgModule,args:[{imports:[r.BasicModule,i.BsDropdownModule,t.CommonModule,n.InputModule,l.WmComponentsModule],declarations:m(K),exports:m(K),entryComponents:[L,G]}]}],e}(),X=["itemlabel","itemicon","itemlink","itemaction","itemchildren","userrole"],Z=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.pageScope=i.viewParent,i.binditemlabel=i.nativeElement.getAttribute("itemlabel.bind"),i.binditemicon=i.nativeElement.getAttribute("itemicon.bind"),i.binditemaction=i.nativeElement.getAttribute("itemaction.bind"),i.binditemlink=i.nativeElement.getAttribute("itemlink.bind"),i.binduserrole=i.nativeElement.getAttribute("userrole.bind"),i.binditemchildren=i.nativeElement.getAttribute("itemchildren.bind"),i}return p(t,e),t.prototype.onPropertyChange=function(t,n,i){_.includes(X,t)&&this.menuRef?this.menuRef.itemlabel=n:e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterViewInit=function(){var t=this;e.prototype.ngAfterViewInit.call(this);var n=this.menuRefQL.changes.subscribe(function(e){e.first&&(t.menuRef=e.first,X.forEach(function(e){var n="bind"+e;t[n]&&(t.menuRef[n]=t[n]),t.menuRef[e]=t[e]}),n.unsubscribe())})},t.propDecorators={menuRefQL:[{type:s.ViewChildren,args:[L]}]},t}(l.StylableComponent);e.\u0275e=U,e.\u0275d=G,e.\u0275a=L,e.\u0275c=y,e.\u0275g=W,e.\u0275b=h,e.\u0275f=Y,e.MenuModule=Q,e.MenuAdapterComponent=Z,e.NavItemDirective=H,e.NavComponent=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/navigation/navbar",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.navbar={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(){i.register("wm-navbar",new Map([["class",r({value:""},i.PROP_STRING)],["homelink",i.PROP_STRING],["imgsrc",i.PROP_STRING],["menuiconclass",r({value:"wi wi-more-vert"},i.PROP_STRING)],["name",i.PROP_STRING],["show",r({value:!0},i.PROP_BOOLEAN)],["title",i.PROP_STRING]]))},c={widgetType:"wm-navbar",hostClass:"navbar navbar-default app-navbar"},p=function(e){function t(t){var n=e.call(this,t,c)||this;return i.styler(n.nativeElement,n,i.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.toggleCollapse=function(){var e=this,t=$(this.navContent.nativeElement);t.animate({height:"toggle"}),t.hasClass("in")?setTimeout(function(){return e.toggleNavCollapse()},500):this.toggleNavCollapse()},t.prototype.toggleNavCollapse=function(){this.navContent.nativeElement.classList.toggle("in")},t.initializeProps=l(),t.decorators=[{type:n.Component,args:[{selector:"[wmNavbar]",template:'<div class="container-fluid">\n    <div class="navbar-header">\n        <button type="button" class="btn-transparent navbar-toggle collapsed" data-toggle="collapse" (click)="toggleCollapse()" aria-expanded="false">\n            <span class="sr-only">Toggle navigation</span>\n            <i [ngClass]="menuiconclass"></i>\n        </button>\n        <a class="navbar-brand" [href]="(homelink | trustAs: \'resource\') || \'#/\'" *ngIf="title || imgsrc">\n            <img data-identifier="img" class="brand-image" [alt]="Brand" height="20" *ngIf="imgsrc" [src]="imgsrc | image"/>\n            <span class="title" [textContent]="title"></span>\n        </a>\n    </div>\n    <div class="collapse navbar-collapse" #navContent>\n        <ng-content></ng-content>\n    </div>\n</div>',providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={navContent:[{type:n.ViewChild,args:["navContent"]}]},t}(i.StylableComponent),u=[p],d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:s(u),exports:s(u),entryComponents:[]}]}],e}();e.\u0275a=p,e.\u0275b=l,e.NavbarModule=d,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@wm/components/navigation/menu"),require("@angular/core"),require("@angular/router"),require("@angular/common"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/navigation/breadcrumb",["exports","@wm/components/navigation/menu","@angular/core","@angular/router","@angular/common","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.breadcrumb={}),e.wm.components.navigation.menu,e.ng.core,e.ng.router,e.ng.common,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-breadcrumb",new Map([["class",a.PROP_STRING],["dataset",a.PROP_ANY],["itemlabel",a.PROP_STRING],["itemid",a.PROP_STRING],["itemlink",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemclass",a.PROP_STRING],["itemtarget",a.PROP_STRING],["name",a.PROP_STRING],["show",l({value:!0},a.PROP_BOOLEAN)]]))},d={widgetType:"wm-breadcrumb",hostClass:"breadcrumb app-breadcrumb"},m=function(e){function t(t,n,i,o){var r=e.call(this,t,d)||this;return r.route=n,r.location=i,a.styler(r.nativeElement,r,a.APPLY_STYLES_TYPE.CONTAINER),r.disableMenuContext=!!o,r}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getPath=function(e,t,n){var i=this;return void 0===n&&(n=[]),t.forEach(function(t){return e.isPathFound?n:t.id===e.key?(e.isPathFound=!0,n.push(t),n):void(t.children.length&&(n.push(t),i.getPath(e,t.children,n),e.isPathFound||n.pop()))}),n},t.prototype.getCurrentRoute=function(){return this.location.path().substr(1).split("?")[0]},t.prototype.resetNodes=function(){e.prototype.resetNodes.call(this),(this.itemid||this.binditemid)&&(this.nodes=this.getPath({key:this.getCurrentRoute(),isPathFound:!1},this.nodes))},t.prototype.onItemClick=function(e,t){e.preventDefault();var n={$item:t.value,$event:e},i=!(!1===this.invokeEventCallback("beforenavigate",n)),o=t.target,a=t.link;if(a&&i)if(!a.startsWith("#/")||o&&"_self"!==o)r.openLink(a,o);else{var s=r.getUrlParams(a);a=r.getRouteNameFromLink(a),this.route.navigate([a],{queryParams:s})}},t.initializeProps=u(),t.decorators=[{type:n.Component,args:[{selector:"[wmBreadcrumb]",template:'<li *ngFor="let item of nodes; let last = last; let index = index" [ngClass]="{active: last}" class="{{item.class}}">\n    <i class="{{item.icon}}"></i>\n    <a [title]="item.label" href="javascript:void(0)" [wmNavigationControl]="item.link" [disableMenuContext]="disableMenuContext || !!item.action" (click)="onItemClick($event, item)" *ngIf="!last" [textContent]="item.label"></a>\n    <label *ngIf="last" [textContent]="item.label"></label>\n</li>\n',providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:i.Router},{type:o.Location},{type:String,decorators:[{type:n.Attribute,args:["beforenavigate.event"]}]}]},t}(a.DatasetAwareNavComponent),h=[m],f=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[o.CommonModule,t.MenuModule,a.WmComponentsModule],declarations:p(h),exports:p(h),entryComponents:[]}]}],e}();e.\u0275a=m,e.\u0275b=u,e.BreadcrumbModule=f,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/basic"),require("@angular/core"),require("@angular/platform-browser"),require("ngx-bootstrap/popover"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/navigation/popover",["exports","@angular/common","@wm/components/basic","@angular/core","@angular/platform-browser","ngx-bootstrap/popover","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.navigation=e.wm.components.navigation||{},e.wm.components.navigation.popover={}),e.ng.common,e.wm.components.basic,e.ng.core,e.ng.platformBrowser,e.ngxBootstrap,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d,m=function(){s.register("wm-popover",new Map([["badgevalue",s.PROP_STRING],["caption",c({value:"Link"},s.PROP_STRING)],["class",s.PROP_STRING],["conditionalclass",s.PROP_ANY],["content",s.PROP_STRING],["contentanimation",s.PROP_STRING],["contentsource",c({value:"partial"},s.PROP_STRING)],["encodeurl",s.PROP_BOOLEAN],["hint",s.PROP_STRING],["hyperlink",s.PROP_STRING],["iconclass",s.PROP_STRING],["iconheight",s.PROP_STRING],["iconmargin",s.PROP_STRING],["iconposition",s.PROP_STRING],["iconurl",s.PROP_STRING],["iconwidth",s.PROP_STRING],["interaction",c({value:"click"},s.PROP_STRING)],["name",s.PROP_STRING],["popoverarrow",c({value:!0},s.PROP_BOOLEAN)],["popoverheight",s.PROP_STRING],["popoverplacement",c({value:"bottom"},s.PROP_STRING)],["popoverwidth",s.PROP_STRING],["shortcutkey",s.PROP_STRING],["show",c({value:!0},s.PROP_BOOLEAN)],["tabindex",c({value:0},s.PROP_NUMBER)],["title",s.PROP_STRING]]))},h={widgetType:"wm-popover",hostClass:"app-popover-wrapper"},f={click:"click",hover:"mouseenter:click",default:"click mouseenter"},g=function(e){function t(t,n,i){var o=e.call(this,t,h)||this;return o.app=n,o.isOpen=!1,o.canPopoverOpen=!0,o.keyEventPlugin=i[1],o.popoverContainerCls="app-popover-"+o.widgetId,o}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.open=function(){this.showPopover()},t.prototype.close=function(){this.isOpen=!1},t.prototype.onHidden=function(){this.invokeEventCallback("hide",{$event:{type:"hide"}})},t.prototype.setFocusToPopoverLink=function(){var e=this;setTimeout(function(){return e.anchorRef.nativeElement.focus()},10)},t.prototype.adjustPopoverPosition=function(e,t,n){var i=t.left+t.width/2-n;this.bsPopoverDirective._popover._ngZone.onStable.subscribe(function(){e.css("left",n+"px"),e.find(".popover-arrow").css("left",i+"px")})},t.prototype.calculatePopoverPostion=function(e){var t=$(e),n=_.parseInt(t.css("left")),i=_.parseInt(t.css("width")),o=$(window).width(),r=this.anchorRef.nativeElement.getBoundingClientRect();if(n<0){var a=4;this.adjustPopoverPosition(t,r,a)}if(n+i>o){a=n-(n+i-o)-50;this.adjustPopoverPosition(t,r,a)}},t.prototype.onShown=function(){var e=this,t=a.findRootContainer(this.$element);t&&$("body:first > popover-container").wrap("<"+t+"/>"),d&&d.isOpen&&(d.isOpen=!1),(d=this).isOpen=!0;var n=document.querySelector("."+this.popoverContainerCls);a.setCSSFromObj(n,{height:this.popoverheight,minWidth:this.popoverwidth}),this.popoverarrow||a.addClass(n.querySelector(".arrow"),"hidden"),"hover"!==this.interaction&&"default"!==this.interaction||(n.onmouseenter=function(){return clearTimeout(e.closePopoverTimeout)},n.onmouseleave=function(){return e.hidePopover()},this.anchorRef.nativeElement.onmouseenter=function(){return clearTimeout(e.closePopoverTimeout)},this.anchorRef.nativeElement.onmouseleave=function(){return e.hidePopover()});var i=this.eventManager.addEventListener(n,"keydown.esc",function(){e.isOpen=!1,e.setFocusToPopoverLink(),i()}),o=n.querySelector(".popover-start"),r=n.querySelector(".popover-end");o.onkeydown=function(t){"shift.tab"===e.keyEventPlugin.constructor.getEventFullKey(t)&&(e.bsPopoverDirective.hide(),e.setFocusToPopoverLink())},r.onkeydown=function(t){"tab"===e.keyEventPlugin.constructor.getEventFullKey(t)&&(e.bsPopoverDirective.hide(),e.setFocusToPopoverLink())},a.setAttr(n,"tabindex",0),setTimeout(function(){return o.focus()},50),setTimeout(function(){"bottom"!==e.popoverplacement&&"top"!==e.popoverplacement||e.calculatePopoverPostion(n),e.triggerPopoverEvents()})},t.prototype.triggerPopoverEvents=function(){var e=this;if("partial"===this.contentsource)var t=this.app.subscribe("partialLoaded",function(n){var i,o=e.partialRef.nativeElement;o&&(i=o.widget,e.Widgets=i.Widgets,e.Variables=i.Variables,e.Actions=i.Actions,e.invokeEventCallback("load"),e.invokeEventCallback("show",{$event:{type:"show"}})),t()});else this.Widgets=this.viewParent.Widgets,this.Variables=this.viewParent.Variables,this.Actions=this.viewParent.Actions,this.invokeEventCallback("show",{$event:{type:"show"}})},t.prototype.hidePopover=function(){var e=this;this.closePopoverTimeout=setTimeout(function(){return e.isOpen=!1},500)},t.prototype.showPopover=function(){this.bsPopoverDirective.show()},t.prototype.onPopoverAnchorKeydown=function(e){this.canPopoverOpen&&("enter"===this.keyEventPlugin.constructor.getEventFullKey(event)&&(e.stopPropagation(),this.showPopover()))},t.prototype.onPropertyChange=function(t,n,i){"class"!==t&&"tabindex"!==t&&("contentsource"===t&&("partial"!==this.contentsource||this.content||(this.canPopoverOpen=!1)),"content"===t&&n&&(this.canPopoverOpen=!0),e.prototype.onPropertyChange.call(this,t,n,i))},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.event=f[this.interaction]},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),s.styler(this.anchorRef.nativeElement,this)},t.initializeProps=m(),t.decorators=[{type:i.Component,args:[{selector:"wm-popover",template:'<a [popover]="popoverTemplate"\n   [popoverContext]="context"\n   [popoverTitle]="title"\n   [placement]="popoverplacement"\n   [outsideClick]="true"\n   [triggers]="event"\n   (onShown)="onShown()"\n   (onHidden)="onHidden()"\n   containerClass="app-popover animated {{contentanimation}} {{popoverContainerCls}}"\n   container="body"\n   [isOpen]="isOpen"\n   [tabindex]="tabindex"\n   [name]="name"\n   [class] = "class"\n   [ngClass]="{\'disable-popover\': !canPopoverOpen}"\n\n   #anchor\n   name.bind="name"\n   wmAnchor\n   animation.bind="animation"\n   badgevalue.bind="badgevalue"\n   caption.bind="caption"\n   encodeurl.bind="encodeurl"\n   hint.bind="hint"\n   hyperlink.bind="hyperlink"\n   iconurl.bind="iconurl"\n   iconwidth.bind="iconwidth"\n   iconheight.bind="iconheight"\n   iconmargin.bind="iconmargin"\n   iconclass.bind="iconclass"\n   iconposition.bind="iconposition"\n   shortcutkey.bind="shortcutkey"\n   tabindex.bind="tabindex"\n   (keydown)="onPopoverAnchorKeydown($event)">\n</a>',providers:[s.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:a.App},{type:void 0,decorators:[{type:i.Inject,args:[o.EVENT_MANAGER_PLUGINS]}]}]},t.propDecorators={bsPopoverDirective:[{type:i.ViewChild,args:[r.PopoverDirective]}],anchorRef:[{type:i.ViewChild,args:["anchor"]}],popoverTemplate:[{type:i.ContentChild,args:[i.TemplateRef]}],partialRef:[{type:i.ContentChild,args:["partial"]}]},t}(s.StylableComponent),v=[g],y=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,n.BasicModule,r.PopoverModule,s.WmComponentsModule],declarations:u(v),exports:u(v),entryComponents:[]}]}],e}();e.\u0275a=g,e.\u0275b=m,e.PopoverModule=y,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@wm/core"),require("@angular/core"),require("@angular/common"),require("ngx-bootstrap/modal"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs",["exports","@wm/core","@angular/core","@angular/common","ngx-bootstrap/modal","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs={}),e.wm.core,e.ng.core,e.ng.common,e.ngxBootstrap,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a="app-dialog-body modal-body",s=function(){function e(e,n,i){var o=this;this.dialogRef=n,t.addClass(e.nativeElement,a);var r=i.onShown.subscribe(function(){var n=$(e.nativeElement).closest(".app-dialog")[0],i=o.dialogRef.width;n&&(i&&t.setCSS(n,"width",i),t.setAttr(n,"tabindex",o.dialogRef.tabindex),t.setAttr(n,"name",o.dialogRef.name)),r.unsubscribe()})}return e.decorators=[{type:n.Directive,args:[{selector:"div[wmDialogBody]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:void 0,decorators:[{type:n.Inject,args:[r.DialogRef]}]},{type:o.BsModalService}]},e.propDecorators={height:[{type:n.HostBinding,args:["style.height"]}]},e}(),l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function c(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var m=function(){r.register("wm-dialogfooter",new Map([["class",r.PROP_STRING],["name",r.PROP_STRING],["show",p({value:!0},r.PROP_BOOLEAN)]]))},h={widgetType:"wm-dialogfooter",hostClass:"app-dialog-footer modal-footer"},f=function(e){function t(t){return e.call(this,t,h)||this}return c(t,e),t.initializeProps=m(),t.decorators=[{type:n.Directive,args:[{selector:"div[wmDialogFooter]",providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(r.BaseComponent),g=function(e){e&&setTimeout(function(){var n=t.findRootContainer(e.$element);n&&$("body:first > modal-container > div").wrap("<"+n+"/>"),e.invokeEventCallback("opened",{$event:{type:"opened"}})})},v=g,y=function(e){e&&(e.invokeEventCallback("close"),e.dialogRef=void 0)},b=y,w=function(e){function n(n,i,r){var a=e.call(this,n,i)||this;a.modalOptions=r,a.dialogService=n.get(t.AbstractDialogService),a.bsModal=n.get(o.BsModalService);var s=[a.bsModal.onShown.subscribe(function(){var e=a.dialogService.getLastOpenedDialog();e===a&&g(e)}),a.bsModal.onHidden.subscribe(function(e){var t="esc"===e||"backdrop-click"===e?a.dialogService.getLastOpenedDialog():a.dialogService.getDialogRefFromClosedDialogs();t===a&&(a.dialogService.removeFromOpenedDialogs(t),a.dialogService.removeFromClosedDialogs(t),y(t))})];return a.registerDestroyListener(function(){a.dialogService.removeFromOpenedDialogs(a),a.dialogService.removeFromClosedDialogs(a),s.forEach(function(e){return e.unsubscribe()})}),a}return c(n,e),n.prototype.open=function(e){var t=this;this.dialogService.getOpenedDialogs().some(function(e){return e===t})||(this.dialogService.addToOpenedDialogs(this),Object.assign(this.context,e),this.dialogRef=this.bsModal.show(this.getTemplateRef(),this.modalOptions))},n.prototype.close=function(){this.dialogRef&&(this.dialogService.addToClosedDialogs(this),this.dialogRef.hide())},n.prototype.register=function(e){this.dialogService.register(this.name,this,e)},n.prototype.deRegister=function(e){this.dialogService.deRegister(this.name,e)},n.prototype.onPropertyChange=function(t,n,i){"class"!==t&&"name"!==t&&"tabindex"!==t&&("animation"===t&&(this.modalOptions.class=this.modalOptions.class.replace("animated "+i,""),n&&(this.modalOptions.class=this.modalOptions.class+"animated "+n)),e.prototype.onPropertyChange.call(this,t,n,i))},n.prototype.ngOnDestroy=function(){this.close(),this.deRegister(this.viewParent),e.prototype.ngOnDestroy.call(this)},n}(r.BaseComponent),P="app-dialog-header modal-header",_="21px",O=function(){function e(e,n){this.dialogRef=n,this.iconwidth=_,this.iconheight=_,this.closable=!0,t.addClass(e.nativeElement,P)}return Object.defineProperty(e.prototype,"isClosable",{get:function(){return t.toBoolean(this.closable)},enumerable:!0,configurable:!0}),e.prototype.closeDialog=function(){this.dialogRef.close()},e.decorators=[{type:n.Component,args:[{selector:"div[wmDialogHeader]",template:'<button *ngIf="isClosable" aria-label="Close" class="app-dialog-close close" (click)="closeDialog();" title="Close">\n    <span aria-hidden="true">&times;</span>\n</button>\n<h4 class="app-dialog-title modal-title">\n    <i [ngClass]="iconclass" [ngStyle]="{width: iconwidth, height: iconheight, margin: iconmargin}"  *ngIf="iconclass && !iconurl"></i>\n    <img data-identifier="img" [src]="iconurl | image" *ngIf="iconurl" [ngStyle]="{width:iconwidth, height:iconheight, margin:iconmargin}"/>\n    <span class="dialog-heading" [textContent]="heading"></span>\n    <span class="dialog-sub-heading" *ngIf="subheading" [title]="subheading" [textContent]="subheading"></span>\n</h4>'}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:w,decorators:[{type:n.Inject,args:[r.DialogRef]}]}]},e.propDecorators={iconwidth:[{type:n.Input}],iconheight:[{type:n.Input}],iconmargin:[{type:n.Input}],iconclass:[{type:n.Input}],iconurl:[{type:n.Input}],closable:[{type:n.Input}],heading:[{type:n.Input}],subheading:[{type:n.Input}]},e}(),R=[s,f,O],E=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule,o.ModalModule,r.WmComponentsModule],declarations:d(R),exports:d(R),entryComponents:[]}]}],e}();e.\u0275a=m,e.DialogBodyDirective=s,e.DialogFooterDirective=f,e.DialogHeaderComponent=O,e.BaseDialog=w,e.\u02750=v,e.\u02751=b,e.DialogModule=E,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/dialogs"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/alert-dialog",["exports","@angular/common","@wm/components/input","@angular/core","@wm/core","@wm/components/dialogs","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.alertdialog={}),e.ng.common,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.dialogs,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-alertdialog",new Map([["alerttype",l({value:"error"},a.PROP_STRING)],["animation",a.PROP_STRING],["class",a.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:a.PROP_BOOLEAN}],["iconclass",{value:"wi wi-warning",PROP_STRING:a.PROP_STRING}],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["message",l({value:"Am an alert box!"},a.PROP_STRING)],["modal",l({value:!1},a.PROP_BOOLEAN)],["name",a.PROP_STRING],["oktext",l({value:"OK"},a.PROP_STRING)],["tabindex",l({value:0},a.PROP_NUMBER)],["title",l({value:"Alert"},a.PROP_STRING)]]))},d="app-dialog modal-dialog app-alert-dialog",m={widgetType:"wm-alertdialog"},h=function(e){function t(t,n,i,r){null==i&&(i=!1),null==r&&(r=!0);var a=!o.toBoolean(i)||"static";return e.call(this,t,m,{class:d+" "+(n||""),backdrop:a,keyboard:!o.toBoolean(i)})||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getTemplateRef=function(){return this.dialogTemplate},t.prototype.onOk=function(e){this.invokeEventCallback("ok",{$event:e})},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.register(this.viewParent)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"div[wmAlertDialog]",template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"></div>\n    <div wmDialogBody>\n        <p class="app-dialog-message text-{{alerttype}}" [attr.aria-describedby]="message" [textContent]="message"></p>\n    </div>\n    <div wmDialogFooter>\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n',providers:[a.provideAsWidgetRef(t),a.provideAsDialogRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["closable"]}]}]},t.propDecorators={dialogTemplate:[{type:i.ViewChild,args:["dialogTemplate"]}]},t}(r.BaseDialog),f=[h],g=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.DialogModule,n.InputModule,a.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=u,e.AlertDialogModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/dialogs"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/confirm-dialog",["exports","@angular/common","@wm/components/input","@angular/core","@wm/core","@wm/components/dialogs","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.confirmdialog={}),e.ng.common,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.dialogs,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-confirmdialog",new Map([["animation",a.PROP_STRING],["canceltext",l({value:"CANCEL"},a.PROP_STRING)],["class",a.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:a.PROP_BOOLEAN}],["iconclass",{value:"wi wi-done",PROP_STRING:a.PROP_STRING}],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["message",l({value:"I am confirm box!"},a.PROP_STRING)],["modal",l({value:!1},a.PROP_BOOLEAN)],["name",a.PROP_STRING],["oktext",l({value:"OK"},a.PROP_STRING)],["tabindex",l({value:0},a.PROP_NUMBER)],["title",l({value:"Confirm"},a.PROP_STRING)]]))},d="app-dialog modal-dialog app-confirm-dialog",m={widgetType:"wm-confirmdialog"},h=function(e){function t(t,n,i,r){null==i&&(i=!1),null==r&&(r=!0);return e.call(this,t,m,{class:d+" "+(n||""),backdrop:"static",keyboard:!o.toBoolean(i)})||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getTemplateRef=function(){return this.dialogTemplate},t.prototype.onOk=function(e){this.invokeEventCallback("ok",{$event:e})},t.prototype.onCancel=function(e){this.invokeEventCallback("cancel",{$event:e})},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.register(this.viewParent)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"div[wmConfirmDialog]",template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"></div>\n    <div wmDialogBody>\n        <p class="app-dialog-message {{messageclass}}" [attr.aria-describedby]="message">{{message}}</p>\n    </div>\n    <div wmDialogFooter>\n        <button wmButton class="btn-default btn-secondary cancel-action" caption.bind="canceltext" aria-label="Cancel button" (click)="onCancel($event)"></button>\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n',providers:[a.provideAsWidgetRef(t),a.provideAsDialogRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["closable"]}]}]},t.propDecorators={dialogTemplate:[{type:i.ViewChild,args:["dialogTemplate"]}]},t}(r.BaseDialog),f=[h],g=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.DialogModule,n.InputModule,a.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=u,e.ConfirmDialogModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/dialogs"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/design-dialog",["exports","@angular/common","@wm/components/input","@angular/core","@wm/core","@wm/components/dialogs","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.designdialog={}),e.ng.common,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.dialogs,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-dialog",new Map([["animation",a.PROP_STRING],["class",a.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:a.PROP_BOOLEAN}],["iconclass",{value:"wi wi-file-text",PROP_STRING:a.PROP_STRING}],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["modal",l({value:!0},a.PROP_BOOLEAN)],["name",a.PROP_STRING],["showheader",l({value:!0},a.PROP_BOOLEAN)],["tabindex",l({value:0},a.PROP_NUMBER)],["title",l({value:"Information"},a.PROP_STRING)],["eventsource",a.PROP_ANY]]))},d="app-dialog modal-dialog",m={widgetType:"wm-dialog"},h={},f=function(e){function t(t,n,i,r,a){var s=this;null==i&&(i=!0),null==r&&(r=!0),a[0].closeDialog=function(){return s.close()};var l=!o.toBoolean(i)||"static";return s=e.call(this,t,m,{class:d+" "+(n||""),backdrop:l,keyboard:!o.toBoolean(i)})||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getTemplateRef=function(){return this.dialogTemplate},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.register(this.viewParent)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"div[wmDialog]",template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         *ngIf="showheader"\n    ></div>\n    <div wmDialogBody>\n        <ng-container *ngTemplateOutlet="dialogBody"></ng-container>\n    </div>\n    <ng-container *ngTemplateOutlet="dialogFooter"></ng-container>\n</ng-template>',providers:[a.provideAsWidgetRef(t),a.provideAsDialogRef(t),{provide:a.Context,useValue:h,multi:!0}]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["closable"]}]},{type:Array,decorators:[{type:i.Self},{type:i.Inject,args:[a.Context]}]}]},t.propDecorators={dialogTemplate:[{type:i.ViewChild,args:["dialogTemplate",{read:i.TemplateRef}]}],dialogBody:[{type:i.ContentChild,args:["dialogBody",{read:i.TemplateRef}]}],dialogFooter:[{type:i.ContentChild,args:["dialogFooter",{read:i.TemplateRef}]}]},t}(r.BaseDialog),g=[f],v=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.DialogModule,n.InputModule,a.WmComponentsModule],declarations:p(g),exports:p(g),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275b=u,e.DesignDialogModule=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/platform-browser"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/page",["exports","@angular/common","@angular/platform-browser","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page={}),e.ng.common,e.ng.platformBrowser,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){r.register("wm-page",new Map([["pagetitle",r.PROP_STRING]]))},d={widgetType:"wm-page",hostClass:"app-page container"},m=function(e){function t(t,n){var i=e.call(this,t,d)||this;return i.titleService=n,i._eventNotifier=new o.EventNotifier(!1),i}return s(t,e),t.prototype.onPropertyChange=function(t,n,i){"pagetitle"===t?this.titleService.setTitle(n):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.notify=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._eventNotifier.notify.apply(this._eventNotifier,arguments)},t.prototype.subscribe=function(e,t){return this._eventNotifier.subscribe(e,t)},t.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e._eventNotifier.start(),r.updateDeviceView(e.nativeElement,e.getAppInstance().isTabletApplicationType)},1)},t.prototype.ngOnDestroy=function(){this._eventNotifier.destroy()},t.initializeProps=u(),t.decorators=[{type:i.Directive,args:[{selector:"[wmPage]",providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:n.Title}]},t}(r.StylableComponent),h=function(){r.register("wm-content",new Map([["name",r.PROP_STRING],["class",r.PROP_STRING]]))},f={widgetType:"wm-content",hostClass:"app-content clearfix"},g=function(e){function t(t){var n=e.call(this,t,f)||this;return r.styler(n.nativeElement,n),n}return s(t,e),t.initializeProps=h(),t.decorators=[{type:i.Component,args:[{selector:"[wmContent]",template:'<div class="row app-content-row clearfix">\n    <ng-content></ng-content>\n</div>',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t}(r.StylableComponent),v=function(){r.register("wm-page-content",new Map([["class",r.PROP_STRING],["columnwidth",r.PROP_NUMBER],["content",r.PROP_STRING],["name",r.PROP_STRING],["pulltorefresh",l({value:o.isMobileApp()},r.PROP_BOOLEAN)]]))},y={widgetType:"wm-page-content",hostClass:"app-page-content app-content-column"},b=function(e){function t(t,n){var i=e.call(this,t,y)||this;return i.app=n,r.styler(i.nativeElement,i,r.APPLY_STYLES_TYPE.CONTAINER),i.registerDestroyListener(i.app.subscribe("pullToRefresh:enable",function(){i.childPullToRefresh=!0,i.initPullToRefresh()})),i}return s(t,e),t.prototype.onPropertyChange=function(t,n,i){var r=this;"columnwidth"===t?o.switchClass(this.nativeElement,"col-md-"+n+" col-sm-"+n,"col-md-"+i+" col-sm-"+i):"pulltorefresh"===t&&n?setTimeout(function(){r.initPullToRefresh()}):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.initPullToRefresh=function(){var e=this,t=this.hasEventCallback("pulltorefresh");!this.pullToRefreshIns&&(this.childPullToRefresh||t)&&this.pulltorefresh&&(this.pullToRefreshIns=new r.PullToRefresh($(this.nativeElement),this.app,function(){t?e.invokeEventCallback("pulltorefresh"):e.app.notify("pulltorefresh")}),this.registerDestroyListener(function(){e.pullToRefreshIns.cancelSubscription&&e.pullToRefreshIns.cancelSubscription()}))},t.initializeProps=v(),t.decorators=[{type:i.Component,args:[{selector:"[wmPageContent]",template:"<ng-content></ng-content>",providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:o.App}]},t}(r.StylableComponent),w=[m,g,b],P=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.WmComponentsModule],declarations:p(w),exports:p(w),entryComponents:[]}]}],e}();e.\u0275b=g,e.\u0275c=h,e.\u0275d=b,e.\u0275e=v,e.\u0275a=u,e.PageModule=P,e.PageDirective=m,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/page/footer",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.footer={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var s=function(){i.register("wm-footer",new Map([["name",i.PROP_STRING],["class",i.PROP_STRING],["content",i.PROP_STRING]]))},l={widgetType:"wm-footer",hostClass:"app-footer clearfix"},c=function(e){function t(t){var n=e.call(this,t,l)||this;return i.styler(n.nativeElement,n,i.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.initializeProps=s(),t.decorators=[{type:n.Directive,args:[{selector:"[wmFooter]",providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(i.StylableComponent),p=[c],u=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:a(p),exports:a(p),entryComponents:[]}]}],e}();e.\u0275a=c,e.\u0275b=s,e.FooterModule=u,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/page/header",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.header={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var s=function(){i.register("wm-header",new Map([["name",i.PROP_STRING],["class",i.PROP_STRING],["content",i.PROP_STRING]]))},l={widgetType:"wm-header",hostClass:"app-header clearfix"},c=function(e){function t(t){var n=e.call(this,t,l)||this;return i.styler(n.nativeElement,n,i.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.initializeProps=s(),t.decorators=[{type:n.Component,args:[{selector:"[wmHeader]",template:'<div class="app-header-menu" data-role="page-left-panel-icon">\n    <a class="app-header-action">\n        <i class="wi wi-menu"></i>\n    </a>\n</div>\n<div class="app-header-container" partial-container-target></div>',providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(i.StylableComponent),p=[c],u=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:a(p),exports:a(p),entryComponents:[]}]}],e}();e.\u0275a=c,e.\u0275b=s,e.HeaderModule=u,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/page"),require("@wm/components/base"),require("@swipey"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/components/page/left-panel",["exports","@angular/common","@angular/core","@wm/components/page","@wm/components/base","@swipey","@wm/core"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.leftpanel={}),e.ng.common,e.ng.core,e.wm.components.page,e.wm.components.base,e.swipey,e.wm.core)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function l(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d,m=function(){o.register("wm-left-panel",new Map([["animation",c({value:"slide-in"},o.PROP_STRING)],["class",o.PROP_STRING],["columnwidth",c({value:3},o.PROP_NUMBER)],["content",o.PROP_STRING],["gestures",c({value:"on"},o.PROP_STRING)],["name",o.PROP_STRING],["xscolumnwidth",c({value:10},o.PROP_NUMBER)]]))},h=function(t){function n(e){var n=t.call(this)||this;return n.leftPanel=e,n.init(n.leftPanel.$ele,n.leftPanel.$page),n}return l(n,t),n.prototype.bounds=function(){var t=0;return this.setGesturesEnabled(this.leftPanel.isGesturesEnabled()),this._width||(this._pageContainerWidth=this.leftPanel.$page.width(),this._leftPanelWidth=this.leftPanel.$ele.width(),this._maxX=this._leftPanelWidth/this._pageContainerWidth*100,this._width=this.leftPanel.animation===e.AnimationType.SLIDE_IN?this._pageContainerWidth:this._leftPanelWidth),this._expanded=this.leftPanel.expanded,this._expanded?{center:this._leftPanelWidth,lower:-(this._leftPanelWidth-t)}:(this.leftPanel.app.isTabletApplicationType&&(t=53.32),{center:0,upper:this._leftPanelWidth-t})},n.prototype.context=function(){return{w:this._width,pageW:this._pageContainerWidth,leftW:this._leftPanelWidth,maxX:this._maxX,limit:function(e,t,n){return t<e?e:t>n?n:t}}},n.prototype.animation=function(){return this._$animatedElements=this.leftPanel.$ele,this.leftPanel.animation===e.AnimationType.SLIDE_IN?(this._$animatedElements=this._$animatedElements.add(this.leftPanel.$page),this.leftPanel.app.isTabletApplicationType?[{target:this.leftPanel.$ele,css:{transform:"translate3d(${{ limit(-100, -($d * 100 / leftW), 0) + '%' }}, 0, 0)"}},{target:this.leftPanel.$page,css:{transform:"translate3d(${{ (($d) * 100 / pageW) + '%' }}, 0, 0)",width:"${{ (pageW - $d) + 'px' }}","z-index":101}}]:[{target:this.leftPanel.$ele,css:{transform:"translate3d(-100%, 0, 0)",opacity:1,"z-index":101}},{target:this.leftPanel.$page,css:{transform:"translate3d(${{ limit( 0, ((($D + $d) * 100 / w)), maxX ) + '%' }}, 0, 0)",opacity:1,"z-index":101}}]):{transform:"translate3d(${{ limit( -100, ((($D + $d) * 100 / w) - 100), 0 ) + '%'}}, 0, 0)",opacity:1,"z-index":101}},n.prototype.onLower=function(){this._expanded=!1,this.leftPanel.collapse(),this.resetTransition(),a.$appDigest()},n.prototype.onUpper=function(){this._expanded=!0,this.leftPanel.expand(),this.resetTransition(),a.$appDigest()},n.prototype.resetTransition=function(){var e=this;this._$animatedElements&&setTimeout(function(){e._$animatedElements.css({transform:"",opacity:"","z-index":"",width:""})},100)},n}(r.SwipeAnimation),f={widgetType:"wm-left-panel",hostClass:"app-left-panel left-panel-collapsed"};(d=e.AnimationType||(e.AnimationType={})).SLIDE_IN="slide-in",d.SLIDE_OVER="slide-over";var g=function(t){function r(e,n,i){var r=t.call(this,i,f)||this;return r.app=e,r.page=n,o.styler(r.nativeElement,r,o.APPLY_STYLES_TYPE.CONTAINER),r.$ele=r.$element,r.$page=n.$element,a.addClass(r.$page[0],"left-panel-collapsed-container"),r.columnwidth&&r.setLeftPanelWidth(["md","sm"],r.columnwidth),r.app.isTabletApplicationType&&a.addClass(r.nativeElement,"wm-tablet-app-left-panel"),r}return l(r,t),r.prototype.collapse=function(){a.addClass(this.nativeElement,"swipee-transition"),a.switchClass(this.nativeElement,"left-panel-collapsed","left-panel-expanded"),this.expanded=!1,a.switchClass(this.$page[0],"left-panel-collapsed-container","left-panel-expanded-container"),this.animation===e.AnimationType.SLIDE_IN&&(this.setPageWidthAndPosition(["md","sm"],null,this.columnwidth),this.setPageWidthAndPosition(["xs"],null,this.xscolumnwidth)),this._destroyCollapseActionListener&&this._destroyCollapseActionListener(),this.page.notify("wmLeftPanel:collapse")},r.prototype.expand=function(){a.removeClass(this.nativeElement,"swipee-transition"),a.switchClass(this.nativeElement,"left-panel-expanded","left-panel-collapsed"),this.expanded=!0,this.app.isTabletApplicationType&&this.animation===e.AnimationType.SLIDE_IN||(this._destroyCollapseActionListener=this.listenForCollapseAction()),a.switchClass(this.$page[0],"left-panel-expanded-container","left-panel-collapsed-container"),this.animation===e.AnimationType.SLIDE_IN&&(this.setPageWidthAndPosition(["md","sm"],this.columnwidth),this.setPageWidthAndPosition(["xs"],this.xscolumnwidth)),this.page.notify("wmLeftPanel:expand")},r.prototype.isGesturesEnabled=function(){return"on"===this.gestures},r.prototype.isVisible=function(){return this.expanded},r.prototype.onPropertyChange=function(n,i,o){switch(n){case"animation":i===e.AnimationType.SLIDE_IN?(a.removeClass(this.$page[0],"slide-over-left-panel-container"),a.addClass(this.$page[0],"slide-in-left-panel-container"),this.setPageWidthAndPosition(["md","sm"],this.columnwidth),this.setPageWidthAndPosition(["xs"],this.xscolumnwidth)):i===e.AnimationType.SLIDE_OVER&&(a.removeClass(this.$page[0],"slide-in-left-panel-container"),a.addClass(this.$page[0],"slide-over-left-panel-container")),this._leftPanelAnimator=new h(this),a.switchClass(this.nativeElement,i,o);break;case"columnwidth":this.setLeftPanelWidth(["md","sm"],i,o),this.animation===e.AnimationType.SLIDE_IN&&this.setPageWidthAndPosition(["md","sm"],i,o);break;case"expanded":a.toggleClass(this.nativeElement,"left-panel-expanded",i),a.toggleClass(this.nativeElement,"left-panel-collapsed",!i);break;case"xscolumnwidth":this.setLeftPanelWidth(["xs"],i,o),this.animation===e.AnimationType.SLIDE_IN&&this.setPageWidthAndPosition(["xs"],i,o);break;default:t.prototype.onPropertyChange.call(this,n,i,o)}},r.prototype.toggle=function(){var e=this;this.app.isTabletApplicationType?setTimeout(function(){e.expanded?e.collapse():e.expand()},50):this.$ele.swipeAnimation(this.expanded?"gotoLower":"gotoUpper")},r.prototype.listenForCollapseAction=function(){var e=this,t="click.leftNavToggle",n=!1;return this.$ele.on(t,function(){n=!0}),this.$page.on(t,function(){n||e.toggle(),n=!1}),function(){e.$ele.off(t),e.$page.off(t)}},r.prototype.setLeftPanelWidth=function(e,t,n){var i=this;e.forEach(function(e){t&&a.addClass(i.nativeElement,"col-"+e+"-"+t),n&&a.removeClass(i.nativeElement,"col-"+e+"-"+n)})},r.prototype.setPageWidthAndPosition=function(e,t,n){var i=this;e.forEach(function(e){t&&a.addClass(i.$page[0],"left-panel-container-"+e+"-"+(12-t)),n&&a.removeClass(i.$page[0],"left-panel-container-"+e+"-"+(12-n))})},r.initializeProps=m(),r.decorators=[{type:n.Directive,args:[{selector:"[wmLeftPanel]",providers:[o.provideAsWidgetRef(r)]}]}],r.ctorParameters=function(){return[{type:a.App},{type:i.PageDirective},{type:n.Injector}]},r}(o.StylableComponent),v=[g],y=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:u(v),exports:u(v),entryComponents:[]}]}],e}();e.\u0275a=m,e.LeftPanelModule=y,e.LeftPanelDirective=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/page/right-panel",["exports","@angular/common","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.rightpanel={}),e.ng.common,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(){o.register("wm-right-panel",new Map([["class",o.PROP_STRING],["columnwidth",o.PROP_NUMBER],["content",o.PROP_STRING],["name",o.PROP_STRING]]))},c={widgetType:"wm-right-panel",hostClass:"app-right-panel"},p=function(e){function t(t){var n=e.call(this,t,c)||this;return o.styler(n.nativeElement,n,o.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.onPropertyChange=function(t,n,o){"columnwidth"===t?i.switchClass(this.nativeElement,"col-sm-"+n,o?" col-sm-"+o:""):e.prototype.onPropertyChange.call(this,t,n,o)},t.initializeProps=l(),t.decorators=[{type:n.Directive,args:[{selector:"[wmRightPanel]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(o.StylableComponent),u=[p],d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:s(u),exports:s(u),entryComponents:[]}]}],e}();e.\u0275a=p,e.\u0275b=l,e.RightPanelModule=d,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/page/top-nav",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.page=e.wm.components.page||{},e.wm.components.page.topnav={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var s=function(){i.register("wm-top-nav",new Map([["name",i.PROP_STRING],["content",i.PROP_STRING]]))},l={widgetType:"wm-top-nav",hostClass:"app-top-nav"},c=function(e){function t(t){var n=e.call(this,t,l)||this;return i.styler(n.nativeElement,n),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.initializeProps=s(),t.decorators=[{type:n.Directive,args:[{selector:"[wmTopNav]",providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(i.StylableComponent),p=[c],u=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:a(p),exports:a(p),entryComponents:[]}]}],e}();e.\u0275a=c,e.\u0275b=s,e.TopNavModule=u,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/core"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/prefab",["exports","@angular/common","@wm/core","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.prefab={}),e.ng.common,e.wm.core,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=new Map([["animation",o.PROP_STRING],["class",s({value:""},o.PROP_STRING)],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]),u="app-prefab",d=new Set,m=function(e){function t(t,n,i,r){var a=this,s="wm-prefab-"+r,l={widgetType:s,hostClass:u};return(a=e.call(this,t,l,new Promise(function(e){return a.propsReady=e}))||this).prefabName=r,a.widgetType=s,a.name=n.nativeElement.getAttribute("name"),o.styler(a.nativeElement,a),a.registerReadyStateListener(function(){e.prototype.onPropertyChange.call(a,"name",a.name)}),a}return a(t,e),t.prototype.onStyleChange=function(e,t,i){"height"===e&&n.setCSS(this.nativeElement,"overflow","auto")},t.prototype.setProps=function(e){e&&e.properties&&(d.has(this.widgetType)||o.register(this.widgetType,this.prepareProps(e.properties)),this.propsReady())},t.prototype.handleEvent=function(){},t.prototype.prepareProps=function(e){void 0===e&&(e={});var t=new Map(p);return Object.entries(e).forEach(function(e){var n=l(e,2),i=n[0],r=n[1],a=o.PROP_TYPE.STRING;"boolean"===r.type?a=o.PROP_TYPE.BOOLEAN:"number"===r.type?a=o.PROP_TYPE.NUMBER:"string"!==r.type&&(a=r.type),t.set(i,{type:a,value:_.startsWith(r.value,"bind:")?void 0:r.value})}),d.add(this.widgetType),t},t.decorators=[{type:i.Directive,args:[{selector:"section[wmPrefab]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:void 0,decorators:[{type:i.Attribute,args:["prefabname"]}]}]},t}(o.StylableComponent),h=function(){o.register("wm-prefab-container",new Map([["class",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]))},f={widgetType:"wm-prefab-container",hostClass:"app-prefab-container full-height"},g=function(e){function t(t){var n=e.call(this,t,f)||this;return o.styler(n.nativeElement,n),n}return a(t,e),t.initializeProps=h(),t.decorators=[{type:i.Directive,args:[{selector:"[wmPrefabContainer]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t}(o.StylableComponent),v=[m,g],y=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:c(v),exports:c(v),entryComponents:[]}]}],e}();e.\u0275a=h,e.PrefabModule=y,e.PrefabDirective=m,e.PrefabContainerDirective=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap/pagination"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/data/pagination",["exports","@angular/common","@angular/forms","ngx-bootstrap/pagination","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.pagination={}),e.ng.common,e.ng.forms,e.ngxBootstrap,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-pagination",new Map([["boundarylinks",l({value:!1},a.PROP_BOOLEAN)],["class",a.PROP_STRING],["dataset",a.PROP_ANY],["directionlinks",l({value:!0},a.PROP_BOOLEAN)],["forceellipses",l({value:!0},a.PROP_BOOLEAN)],["maxResults",a.PROP_NUMBER],["maxsize",l({value:5},a.PROP_NUMBER)],["name",a.PROP_STRING],["navigation",l({value:"Basic"},a.PROP_STRING)],["navigationalign",l({value:"left"},a.PROP_STRING)],["navigationsize",a.PROP_STRING],["show",l({value:!0},a.PROP_BOOLEAN)],["showrecordcount",a.PROP_BOOLEAN],["tabindex",l({value:0},a.PROP_NUMBER)]]))},d={widgetType:"wm-pagination",hostClass:"app-datanavigator clearfix"},m={Pager:{small:"pager-sm",large:"pager-lg"},Basic:{small:"pagination-sm",large:"pagination-lg"},Classic:{small:"pagination-sm",large:"pagination-lg"}},h=function(e){function t(t,n){var i=e.call(this,t,d)||this;return i.parent=n,i.resultEmitter=new o.EventEmitter,i.maxResultsEmitter=new o.EventEmitter,i.dn={currentPage:1},i.pageCount=0,i.isDisableNext=!0,i.isDisablePrevious=!0,i.isDisableFirst=!0,i.isDisableLast=!0,i._debouncedApplyDataset=r.debounce(function(){return i.widget.dataset=i.dataset},a.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),i._debouncedPageChanged=r.debounce(function(e){var t=e&&e.page;if(t!==i.dn.currentPage){var n=i.parent||i;i.dn.currentPage=t,n.invokeEventCallback("paginationchange",{$event:void 0,$index:i.dn.currentPage}),i.goToPage()}},a.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),a.styler(i.nativeElement,i),i}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.setResult=function(e){this.result=e,this.resultEmitter.emit(this.result)},t.prototype.updateNavSize=function(){var e=m[this.navcontrols];e&&this.navigationsize?this.navigationClass=e[this.navigationsize]:this.navigationClass=""},t.prototype.resetPageNavigation=function(){this.pageCount=0,this.dn.currentPage=1,this.dataSize=0},t.prototype.calculatePagingValues=function(){this.pageCount=this.dataSize>this.maxResults?Math.ceil(this.dataSize/this.maxResults):this.dataSize<0?0:1,this.dn.currentPage=this.dn.currentPage||1},t.prototype.setDefaultPagingValues=function(e,t,n){e||t?(this.maxResults=t||this.maxResults,this.dataSize=r.isDefined(e)?e:this.dataSize,this.dn.currentPage=n||this.dn.currentPage,this.calculatePagingValues()):(this.pageCount=1,this.dn.currentPage=1,this.maxResults=e,this.dataSize=e),this.maxResultsEmitter.emit(this.maxResults)},t.prototype.checkDataSize=function(e,t,n){-1===e||e===r.AppConstants.INT_MAX_VALUE?(this.prevshowrecordcount=this.showrecordcount,this.isDisableLast=!0,this.isDisableCount=!0,this.showrecordcount=!1,t<n&&(this.isDisableNext=!0)):(this.isDisableCount=!1,this.showrecordcount=this.prevshowrecordcount||this.showrecordcount)},t.prototype.disableNavigation=function(){var e=1===this.dn.currentPage,t=this.dn.currentPage===this.pageCount;this.isDisableFirst=this.isDisablePrevious=e,this.isDisableNext=this.isDisableLast=t,this.isDisableCurrent=e&&t},t.prototype.isDataSourceHasPaging=function(){return this.datasource&&this.datasource.execute(r.DataSource.Operation.IS_PAGEABLE)},t.prototype.setNonPageableData=function(e){var t,n,i,o;t=_.isArray(e)?e.length:_.isEmpty(e)?0:1,n=this.options&&this.options.maxResults||t,i=this.datasource&&this.datasource.execute(r.DataSource.Operation.IS_API_AWARE)?1:this.dn.currentPage||1,this.setDefaultPagingValues(t,n,i),this.disableNavigation(),o=(this.dn.currentPage-1)*this.maxResults,this.setResult(_.isArray(e)?e.slice(o,o+this.maxResults):e)},t.prototype.setPagingValues=function(e){var t,n,i,o={};this.__fullData=e,this.binddataset?(o=(this.datasource||{})._options||{},e?this.isDataSourceHasPaging()?(this.pagination=this.datasource.execute(r.DataSource.Operation.GET_PAGING_OPTIONS)||{},this.filterFields=o.filterFields||{},this.sortOptions=o.orderBy||(_.isArray(this.pagination.sort)?a.getOrderByExpr(this.pagination.sort):""),t=this.pagination.totalElements,n=this.pagination.size,this.pagination.numberOfElements>0?(r.isDefined(this.pagination.number)&&(this.dn.currentPage=this.pagination.number+1),i=this.dn.currentPage||1):i=1,this.setDefaultPagingValues(t,n,i),this.disableNavigation(),this.checkDataSize(t,this.pagination.numberOfElements,this.pagination.size),this.setResult(e)):_.isString(e)||this.setNonPageableData(e):(this.setResult(e),this.resetPageNavigation())):e&&!_.isString(e)&&this.setNonPageableData(e)},t.prototype.isFirstPage=function(){return 1===this.dn.currentPage||!this.dn.currentPage},t.prototype.isLastPage=function(){return this.dn.currentPage===this.pageCount},t.prototype.goToLastPage=function(e,t,n){this.isLastPage()?e&&this.goToPage(t,n):(this.dn.currentPage=this.pageCount,this.goToPage(t,n))},t.prototype.goToFirstPage=function(e,t,n){this.isFirstPage()?e&&this.goToPage(t,n):(this.dn.currentPage=1,this.goToPage(t,n))},t.prototype.goToPage=function(e,t){this.firstRow=(this.dn.currentPage-1)*this.maxResults,this.getPageData(e,t)},t.prototype.onPageDataReady=function(e,t,n){this.disableNavigation(),this.invokeSetRecord(e,t),r.triggerFn(n)},t.prototype.getPageData=function(e,t){var n,i,o=this;this.isDataSourceHasPaging()?this.datasource.execute(r.DataSource.Operation.LIST_RECORDS,{page:this.dn.currentPage,filterFields:this.filterFields,orderBy:this.sortOptions,matchMode:"anywhereignorecase"}).then(function(n){o.onPageDataReady(e,n&&n.data,t),r.$appDigest()},function(e){}):(i=(this.dn.currentPage-1)*this.maxResults,n=_.isArray(this.__fullData)?this.__fullData.slice(i,i+this.maxResults):this.__fullData,this.setResult(n),this.onPageDataReady(e,n,t))},t.prototype.invokeSetRecord=function(e,t){var n={currentPage:this.dn.currentPage,size:this.maxResults,totalElements:this.dataSize,totalPages:this.pageCount};this.parent?this.parent.invokeEventCallback("setrecord",{$event:e,$data:t,$index:this.dn.currentPage,pageInfo:n,data:t}):this.invokeEventCallback("setrecord",{$event:e,$data:t,$index:this.dn.currentPage,pageInfo:n,data:t})},t.prototype.validateCurrentPage=function(e,t){return!e||!(isNaN(this.dn.currentPage)||this.dn.currentPage<=0||this.pageCount&&(this.dn.currentPage>this.pageCount||_.isNull(this.dn.currentPage)))||($(e.target).closest("a").addClass("ng-invalid"),!1)},t.prototype.onModelChange=function(e){this.validateCurrentPage(e)&&this.goToPage(e)},t.prototype.onKeyDown=function(e){var t=$(e.target).closest("a");return"KeyE"===e.code?(t.addClass("ng-invalid"),!1):(t.removeClass("ng-invalid"),!0)},t.prototype.pageChanged=function(e){this._debouncedPageChanged(e)},t.prototype.navigatePage=function(e,t,n,i){switch(this.invokeEventCallback("paginationchange",{$event:void 0,$index:this.dn.currentPage}),this.dn.currentPage=+this.dn.currentPage,e){case"first":return void this.goToFirstPage(n,t,i);case"prev":if(this.isFirstPage()||!this.validateCurrentPage(t,i))return;this.dn.currentPage-=1;break;case"next":if(this.isLastPage()||!this.validateCurrentPage(t,i))return;this.dn.currentPage+=1;break;case"last":return void this.goToLastPage(n,t,i)}this.goToPage(t,i)},t.prototype.setBindDataSet=function(e,t,n,i,o,a){var s,l=this,c=e.split(".");if("Variables"!==c[0]&&"Widgets"!==c[0]||(s=c[0]+"."+c[1]+".pagination"),!o&&i&&!a)return this.dataset=i,void this._debouncedApplyDataset();this.binddataset=e,setTimeout(function(){l.registerDestroyListener(r.$watch(e,t,a?n:{},function(e){l.dataset=e,l._debouncedApplyDataset()})),s&&l.registerDestroyListener(r.$watch(s,t,{},function(){return l._debouncedApplyDataset()}))}),a||(this.datasource=n)},t.prototype.setDataSource=function(e){this.datasource=e},t.prototype.onPropertyChange=function(t,n,i){if("dataset"===t){var o=void 0;o=this.parent&&this.parent.onDataNavigatorDataSetChange?this.parent.onDataNavigatorDataSetChange(n):n,this.setPagingValues(o)}else"navigation"===t?("Advanced"===n&&(this.navigation="Classic"),this.updateNavSize(),this.navcontrols=n):"navigationsize"===t?this.updateNavSize():"navigationalign"===t?r.switchClass(this.nativeElement,"text-"+n,"text-"+i):"maxResults"===t?this.setPagingValues(this.dataset):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterViewInit=function(){this.nativeElement.onclick=function(e){e.stopPropagation()}},t.initializeProps=u(),t.decorators=[{type:o.Component,args:[{selector:"[wmPagination]",template:'\n<ul class="pagination advanced {{navigationClass}}" *ngIf="navcontrols === \'Classic\'">\n    <li [ngClass]="{\'disabled\':isDisableFirst}">\n        <a [title]="appLocale.LABEL_FIRST" name="first" href="javascript:void(0);" aria-label="First"\n           (click)="navigatePage(\'first\', $event)">\n            <span aria-hidden="true"><i class="wi wi-first-page"></i></span>\n            <span class="sr-only">{{appLocale.LABEL_FIRST}}</span>\n        </a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisablePrevious}">\n        <a [title]="appLocale.LABEL_PREVIOUS" name="prev" href="javascript:void(0);" aria-label="Previous"\n           (click)="navigatePage(\'prev\', $event)">\n            <span aria-hidden="true"><i class="wi wi-chevron-left"></i></span>\n            <span class="sr-only">{{appLocale.LABEL_PREVIOUS}}</span>\n        </a>\n    </li>\n    <li class="pagecount disabled">\n        <a><input type="number" [disabled]="isDisableCurrent" [(ngModel)]="dn.currentPage"\n                  (keydown)="onKeyDown($event)" (change)="onModelChange($event)" class="form-control"/></a>\n    </li>\n    <li class="disabled">\n        <a [hidden]="isDisableCount"> / {{pageCount}}</a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisableNext}">\n        <a [title]="appLocale.LABEL_NEXT" name="next" href="javascript:void(0);" aria-label="Next"\n           (click)="navigatePage(\'next\', $event)">\n            <span aria-hidden="true"><i class="wi wi-chevron-right"></i></span>\n            <span class="sr-only">{{appLocale.LABEL_NEXT}}</span>\n        </a>\n    </li>\n    <li [ngClass]="{\'disabled\':isDisableLast}">\n        <a [title]="appLocale.LABEL_LAST" name="last" href="javascript:void(0);" aria-label="Last"\n           (click)="navigatePage(\'last\', $event)">\n            <span aria-hidden="true"><i class="wi wi-last-page"></i></span>\n            <span class="sr-only">{{appLocale.LABEL_LAST}}</span>\n        </a>\n    </li>\n    <li *ngIf="showrecordcount" class="totalcount disabled">\n        <a>{{appLocale.LABEL_TOTAL_RECORDS}}: {{dataSize}}</a>\n    </li>\n</ul>\n<ul class="pager {{navigationClass}}" *ngIf="navcontrols === \'Pager\'">\n    <li class="previous" [ngClass]="{\'disabled\':isDisablePrevious}">\n        <a href="javascript:void(0);" (click)="navigatePage(\'prev\', $event)" aria-label="Previous">\n            <span aria-hidden="true"><i class="wi wi-chevron-left"></i></span>\n            {{appLocale.LABEL_PREVIOUS}}\n            <span class="sr-only">{{appLocale.LABEL_PREVIOUS}}</span>\n        </a>\n    </li>\n    <li class="next" [ngClass]="{\'disabled\':isDisableNext}">\n        <a href="javascript:void(0);" (click)="navigatePage(\'next\', $event)" aria-label="Next">\n            {{appLocale.LABEL_NEXT}}\n            <span aria-hidden="true"><i class="wi wi-chevron-right"></i></span>\n            <span class="sr-only">{{appLocale.LABEL_NEXT}}</span>\n        </a>\n    </li>\n</ul>\n\n<pagination class="pagination basic" [ngClass]="navigationClass" *ngIf="navcontrols === \'Basic\'"\n            [itemsPerPage]="maxResults" [totalItems]="dataSize"\n            [ngModel]="dn.currentPage" (pageChanged)="pageChanged($event)"\n            [boundaryLinks]="boundarylinks" [maxSize]="maxsize"\n            [directionLinks]="directionlinks" previousText="." nextText="." firstText="." lastText="."></pagination>\n\n<ul *ngIf="navcontrols === \'Basic\' && showrecordcount" class="pagination">\n    <li class="totalcount disabled basiccount"><a>{{appLocale.LABEL_TOTAL_RECORDS}}: {{dataSize}}</a></li>\n</ul>',providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:void 0,decorators:[{type:o.SkipSelf},{type:o.Inject,args:[a.WidgetRef]}]}]},t.propDecorators={resultEmitter:[{type:o.Output}],maxResultsEmitter:[{type:o.Output}]},t}(a.StylableComponent),f=[h],g=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,n.FormsModule,i.PaginationModule,a.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=u,e.PaginationModule=g,e.PaginationComponent=h,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@wm/components/basic"),require("@wm/components/navigation/menu"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/data/card",["exports","@angular/common","ngx-bootstrap/dropdown","@wm/components/basic","@wm/components/navigation/menu","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.card={}),e.ng.common,e.ngxBootstrap,e.wm.components.basic,e.wm.components.navigation.menu,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function l(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d=function(){a.register("wm-card",new Map([["actions",a.PROP_STRING],["animation",a.PROP_STRING],["class",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconurl",a.PROP_STRING],["imageheight",c({value:"200px"},a.PROP_STRING)],["itemaction",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["name",a.PROP_STRING],["picturesource",a.PROP_STRING],["picturetitle",c({value:""},a.PROP_STRING)],["show",c({value:!0},a.PROP_BOOLEAN)],["subheading",a.PROP_STRING],["title",a.PROP_STRING],["userrole",a.PROP_STRING]]))},m={widgetType:"wm-card",hostClass:"app-card card app-panel"},h=function(e){function t(t){var n=e.call(this,t,m)||this;return a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.SHELL),n}return l(t,e),t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),a.styler(this.cardContainerElRef.nativeElement,this,a.APPLY_STYLES_TYPE.INNER_SHELL)},t.prototype.onPropertyChange=function(t,n,i){"title"===t||"subheading"===t||"iconclass"===t||"iconurl"===t||"actions"===t?this.showHeader=!!(this.title||this.subheading||this.iconclass||this.iconurl||this.actions):e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=d(),t.decorators=[{type:r.Component,args:[{selector:"[wmCard]",template:'<div class="app-card-header panel-heading" *ngIf="showHeader">\n    <div class="app-card-avatar" *ngIf="iconclass || iconurl">\n        <i class="app-icon" [ngClass]="iconclass" *ngIf="iconclass && !iconurl"></i>\n        <img class="img-circle" [src]="iconurl" *ngIf="iconurl" />\n    </div>\n    <div class="app-card-header-text">\n        <h4 class="card-heading" [textContent]="title"></h4>\n        <h5 class="card-subheading text-muted" [textContent]="subheading"></h5>\n    </div>\n    <div class="panel-actions" *ngIf="actions">\n        \x3c!-- TODO(punith) need to bind autoclose--\x3e\n        <div wmMenu dropdown\n             [autoClose]="autoclose !== \'disabled\'"\n             class="panel-action"\n             type="anchor"\n             iconclass="wi wi-more-vert"\n             menuposition="down,left"\n             hint="Actions"\n             caption=""\n             dataset.bind="actions">\n        </div>\n    </div>\n</div>\n<div class="app-card-image" *ngIf="picturesource"  [ngStyle]="{\'max-height\':imageheight}">\n   <img wmPicture class="card-image" picturesource.bind="picturesource" hint.bind="picturetitle" />\n</div>\n<div #cardContainerWrapper>\n    <ng-content select="[wmCardContent]"></ng-content>\n</div>\n<div>\n    <ng-content select="[wmCardActions]"></ng-content>\n</div>\n<div>\n    <ng-content select="[wmCardFooter]"></ng-content>\n</div>',providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector}]},t.propDecorators={cardContainerElRef:[{type:r.ViewChild,args:["cardContainerWrapper"]}]},t}(o.MenuAdapterComponent),f=function(){a.register("wm-card-actions",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",c({value:!0},a.PROP_BOOLEAN)]]))},g={widgetType:"wm-card-actions",hostClass:"app-card-actions"},v=function(e){function t(t){var n=e.call(this,t,g)||this;return a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.CONTAINER),n}return l(t,e),t.initializeProps=f(),t.decorators=[{type:r.Directive,args:[{selector:"[wmCardActions]"}]}],t.ctorParameters=function(){return[{type:r.Injector}]},t}(a.StylableComponent),y=function(){a.register("wm-card-content",new Map([["class",a.PROP_STRING],["content",a.PROP_STRING],["name",a.PROP_STRING],["show",c({value:!0},a.PROP_BOOLEAN)]]))},b={widgetType:"wm-card-content",hostClass:"app-card-content card-body card-block"},w=function(e){function t(t){return e.call(this,t,b)||this}return l(t,e),t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),a.styler(this.cardContentContainerElRef.nativeElement,this,a.APPLY_STYLES_TYPE.CONTAINER)},t.initializeProps=y(),t.decorators=[{type:r.Component,args:[{selector:"div[wmCardContent]",template:"<div partial-container-target #cardContentContainer>\n    <ng-content></ng-content>\n</div>",providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector}]},t.propDecorators={cardContentContainerElRef:[{type:r.ViewChild,args:["cardContentContainer"]}]},t}(a.StylableComponent),P=function(){a.register("wm-card-footer",new Map([["class",a.PROP_STRING],["name",a.PROP_STRING],["show",c({value:!0},a.PROP_BOOLEAN)]]))},_={widgetType:"wm-card-footer",hostClass:"app-card-footer text-muted card-footer"},O=function(e){function t(t){var n=e.call(this,t,_)||this;return a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.CONTAINER),n}return l(t,e),t.initializeProps=P(),t.decorators=[{type:r.Directive,args:[{selector:"[wmCardFooter]"}]}],t.ctorParameters=function(){return[{type:r.Injector}]},t}(a.StylableComponent),R=[h,v,w,O],E=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[i.BasicModule,n.BsDropdownModule,t.CommonModule,o.MenuModule,a.WmComponentsModule],declarations:u(R),exports:u(R),entryComponents:[]}]}],e}();e.\u0275c=v,e.\u0275d=f,e.\u0275e=w,e.\u0275f=y,e.\u0275g=O,e.\u0275h=P,e.\u0275a=h,e.\u0275b=d,e.CardModule=E,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/data/pagination"),require("@wm/components/input"),require("@wm/components/base"),require("@angular/core"),require("rxjs"),require("@wm/core"),require("@swipey")):"function"==typeof define&&define.amd?define("@wm/components/data/list",["exports","@angular/common","@wm/components/data/pagination","@wm/components/input","@wm/components/base","@angular/core","rxjs","@wm/core","@swipey"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.list={}),e.ng.common,e.wm.components.data.pagination,e.wm.components.input,e.wm.components.base,e.ng.core,e.rxjs,e.wm.core,e.swipey)}(this,function(e,t,n,i,o,r,a,s,l){"use strict";var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function p(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return(u=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}var h=function(){o.register("wm-list",new Map([["boundarylinks",u({value:!1},o.PROP_BOOLEAN)],["class",o.PROP_STRING],["collapsible",o.PROP_BOOLEAN],["dateformat",o.PROP_STRING],["dataset",o.PROP_ANY],["datasource",o.PROP_ANY],["directionlinks",u({value:!0},o.PROP_BOOLEAN)],["disableitem",o.PROP_BOOLEAN],["enablereorder",o.PROP_BOOLEAN],["forceellipses",u({value:!0},o.PROP_BOOLEAN)],["groupby",o.PROP_STRING],["iconclass",o.PROP_STRING],["itemclass",u({value:""},o.PROP_STRING)],["itemsperrow",o.PROP_STRING],["listclass",u({value:"list-group"},o.PROP_STRING)],["multiselect",o.PROP_BOOLEAN],["loadingdatamsg",u({value:"Loading..."},o.PROP_STRING)],["loadingicon",u({value:"fa fa-circle-o-notch"},o.PROP_STRING)],["match",o.PROP_STRING],["maxsize",u({value:5},o.PROP_NUMBER)],["name",o.PROP_STRING],["navigation",o.PROP_STRING],["navigationalign",u({value:"left"},o.PROP_STRING)],["nodatamessage",u({value:"No data found"},o.PROP_STRING)],["ondemandmessage",u({value:"Load More"},o.PROP_STRING)],["orderby",o.PROP_STRING],["paginationclass",o.PROP_STRING],["pagesize",o.PROP_NUMBER],["pulltorefresh",u({value:s.isMobileApp()},o.PROP_BOOLEAN)],["selectfirstitem",o.PROP_BOOLEAN],["selectionlimit",o.PROP_NUMBER],["show",u({value:!0},o.PROP_BOOLEAN)],["showcount",o.PROP_BOOLEAN],["showrecordcount",o.PROP_BOOLEAN],["subheading",o.PROP_STRING],["tabindex",u({value:0},o.PROP_NUMBER)],["title",o.PROP_STRING]]))},f=function(){function e(e,t,n){this.inj=e,this.app=n,this.destroy=new a.Subject,this.destroy$=this.destroy.asObservable(),this.itemClass="",this._currentItemWidgets={},this.isActive=!1,this.disableItem=!1,this.nativeElement=t.nativeElement,this.listComponent=e.view.component,this.context=e.view.context,this.itemClassWatcher(this.listComponent),this.disableItemWatcher(this.listComponent),$(this.nativeElement).data("listItemContext",this)}return e.prototype.onFocus=function(){this.listComponent.lastSelectedItem=this},Object.defineProperty(e.prototype,"$index",{get:function(){return this.context.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$even",{get:function(){return this.context.even},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$odd",{get:function(){return this.context.odd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$first",{get:function(){return this.context.first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$last",{get:function(){return this.context.last},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentItemWidgets",{get:function(){var e=Array.from(this.nativeElement.querySelectorAll("[widget-id]"));return Object.assign(this._currentItemWidgets,e.reduce(function(e,t){return e[t.widget.name]=t.widget,e},{}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wmListItem",{set:function(e){this.item=e},enumerable:!0,configurable:!0}),e.prototype.registerWatch=function(e,t){this.destroy$.subscribe(s.$watch(e,this.listComponent.viewParent,this,t))},e.prototype.itemClassWatcher=function(e){var t=this;e.binditemclass?this.registerWatch(e.binditemclass,function(e){return t.itemClass=e||""}):this.itemClass=e.itemclass},e.prototype.disableItemWatcher=function(e){var t=this;e.binddisableitem?this.registerWatch(e.binddisableitem,function(e){return t.disableItem=e||!1}):this.disableItem=e.disableitem||!1},e.prototype.triggerWMEvent=function(e){s.$invokeWatchers(!0);var t=this.listComponent.multiselect?_.last(this.listComponent.selecteditem):this.listComponent.selecteditem;this.app.notify("wm-event",{eventName:e,widgetName:this.listComponent.name,row:t})},e.prototype.setUpCUDHandlers=function(){var e=this,t=this.nativeElement.querySelector(".edit-list-item"),n=this.nativeElement.querySelector(".delete-list-item");t&&t.addEventListener("click",function(t){e.triggerWMEvent("update")}),n&&n.addEventListener("click",function(t){e.triggerWMEvent("delete")})},e.prototype.ngOnInit=function(){var e=this;this.listComponent.mouseEnterCB&&this.nativeElement.addEventListener("mouseenter",function(t){e.listComponent.invokeEventCallback("mouseenter",{widget:e,$event:t})}),this.listComponent.mouseLeaveCB&&this.nativeElement.addEventListener("mouseleave",function(t){e.listComponent.invokeEventCallback("mouseleave",{widget:e,$event:t})}),$(this.nativeElement).attr("listitemindex",this.$index)},e.prototype.ngAfterViewInit=function(){this.setUpCUDHandlers()},e.decorators=[{type:r.Directive,args:[{selector:"[wmListItem]",exportAs:"listItemRef"}]}],e.ctorParameters=function(){return[{type:r.Injector},{type:r.ElementRef},{type:s.App}]},e.propDecorators={isActive:[{type:r.HostBinding,args:["class.active"]}],disableItem:[{type:r.HostBinding,args:["class.disable-item"]}],onFocus:[{type:r.HostListener,args:["focus"]}],wmListItem:[{type:r.Input}]},e}(),g=function(e){function t(t){var n=e.call(this)||this;return n.list=t,n.$el=$(n.list.getNativeElement()).find("ul.app-livelist-container:first"),n.leftChildrenCount=n.$el.find(">.app-list-item-left-action-panel > button:visible").length,n.rightChildrenCount=n.$el.find(">.app-list-item-right-action-panel > button:visible").length,n.leftChildrenCount||n.rightChildrenCount?(n.init(n.$el),n.$btnSubscription=n.list.btnComponents.changes.subscribe(function(e){return n.actionItems=e}),n):n}return p(t,e),t.prototype.createActionPanel=function(e,t){return t.css({width:e.outerWidth()+"px",height:e.outerHeight()+"px",marginBottom:-1*e.outerHeight()+"px",float:"left",padding:0}),t.insertBefore(e)},t.prototype.computeTotalChildrenWidth=function(e){return _.reduce(e.children(),function(e,t){return e+$(t).outerWidth()},0)},t.prototype.computeTransitionProportions=function(e){var t=this.computeTotalChildrenWidth(e),n="right"===this.position,i=0;return _.map(e.children(),function(e){var o=(t-i)/t;return i+=$(e).outerWidth(),n?o:i/t})},t.prototype.resetElement=function(e){e&&e.css({transform:"none",transition:"none"})},t.prototype.resetState=function(){this.resetElement(this.li),this.resetElement(this.actionPanel),this.actionPanel&&(this.actionPanel=null)},t.prototype.getChildActionElement=function(e){if(e.children().length)return"left"===this.position?e.children().first():e.children().last()},t.prototype.initActionPanel=function(e){this.actionPanel=this.createActionPanel(this.li,e),this.actionPanel.css({backgroundColor:this.getChildActionElement(this.actionPanel).css("background-color")}),this.limit=this.computeTotalChildrenWidth(this.actionPanel),this.transitionProportions=this.computeTransitionProportions(this.actionPanel)},t.prototype.bounds=function(e,t){var n=$(e.target).closest("li"),i={strictUpper:!0,strictLower:!0,lower:0,center:0,upper:0};if(!n.hasClass("app-list-item"))return i;if(this.li&&this.li[0]===n[0])"left"===this.position?i={strictUpper:!1,lower:-this.limit,center:this.limit}:"right"===this.position&&(i={center:-this.limit,upper:this.limit,strictLower:!1});else{var o=t>0?".app-list-item-left-action-panel":".app-list-item-right-action-panel",r=this.$el.find(">"+o);if(!r.length&&this.list.groupby&&(o="li > ul.list-group >"+o,r=this.$el.find(">"+o)),!r.length||!r.find("button:visible").length)return i;this.resetState(),this.li=n,this.position=r.attr("position"),this.initActionPanel(r),i=t>0?{strictUpper:!1,lower:0,center:0,upper:this.limit}:{strictLower:!1,lower:-this.limit,center:0,upper:0}}return i},t.prototype.context=function(){var e=this;return{computeActionTransition:function(t,n){var i=n>0?1:-1;return i*n>e.limit?n-i*e.limit+e.transitionProportions[t]*i*e.limit:e.transitionProportions[t]*n}}},t.prototype.animation=function(){var e=this;return[{target:function(){return e.li},css:{transform:"translate3d(${{$D + $d}}px, 0, 0)"}},{target:function(){return e.actionPanel&&e.actionPanel.children()},css:{transform:"translate3d(${{computeActionTransition($i, $D + $d)}}px, 0, 0)"}}]},t.prototype.invokeFullSwipeEvt=function(e){var t,n,i;"left"===this.position?(n=this.actionItems.filter(function(e){return"left"===e.getAttr("swipe-position")&&e.$element.is(":visible")}),i=0):i=(n=this.actionItems.filter(function(e){return"right"===e.getAttr("swipe-position")&&e.$element.is(":visible")})).length-1,(t=n[i])&&t.hasEventCallback("tap")&&t.invokeEventCallback("tap",{$event:e}),this.resetState(),this.li=null},t.prototype.onAnimation=function(e,t){if(this.list.triggerListItemSelection(this.li,e),this.actionPanel&&"true"===this.actionPanel.attr("enablefullswipe")){var n=t>0?1:-1,i=this.getChildActionElement(this.actionPanel);if(i){var o="right"===this.position?this.rightChildrenCount-1:0;this.transitionProportions[o]*n*t*100/(this.li.outerWidth()-this.limit+i.width())>50&&this.invokeFullSwipeEvt(e)}}},t.prototype.onLower=function(){"left"===this.position&&(this.resetState(),this.li=null)},t.prototype.onUpper=function(){"right"===this.position&&(this.resetState(),this.li=null)},t.prototype.threshold=function(){return 10},t}(l.SwipeAnimation),v={widgetType:"wm-list",hostClass:"app-livelist app-panel"},y=function(e){function t(t,n,i,r,a,l,c,p,u,d,m,h){var f=this,g=s.noop,y=new Promise(function(e){return g=e});return(f=e.call(this,t,v,y)||this).propsInitPromise=y,f.promiseResolverFn=g,o.styler(f.nativeElement,f,o.APPLY_STYLES_TYPE.SHELL),f.cdRef=n,f.ngZone=l,f.datePipe=i,f.binditemclass=c,f.binddisableitem=p,f.binddataset=u,f.mouseEnterCB=m,f.mouseLeaveCB=h,f.binddatasource=d,f.app=r,f.appDefaults=a,f.variableInflight=!1,f.noDataFound=!u,f.app.subscribe("toggle-variable-state",f.handleLoading.bind(f)),f}return p(t,e),Object.defineProperty(t.prototype,"selecteditem",{get:function(){return this.multiselect?s.getClonedObject(this._items):_.isEmpty(this._items)?{}:s.getClonedObject(this._items[0])},set:function(e){var t=this;this._items.length=0,this.deselectListItems(),_.isArray(e)?e.forEach(function(e){return t.selectItem(e)}):this.selectItem(e),s.$appDigest()},enumerable:!0,configurable:!0}),t.prototype.getWidgets=function(e,t){var n,i=[];if(e)return s.isDefined(t)?(t=+t||0,(n=_.get(this.listItems.toArray(),t))?[_.get(n.currentItemWidgets,e)]:void 0):(_.forEach(this.listItems.toArray(),function(t){(n=_.get(t.currentItemWidgets,e))&&i.push(n)}),i)},t.prototype.getItem=function(e){return this.getListItemByIndex(e)},t.prototype.getIndex=function(e){return this.getListItemIndex(e)},t.prototype.handleLoading=function(e){var t=this,n=this.datasource;n&&n.execute(s.DataSource.Operation.IS_API_AWARE)&&s.isDataSourceEqual(e.variable,n)&&this.ngZone.run(function(){t.variableInflight=e.active})},t.prototype.resetNavigation=function(){this.showNavigation=!1,this.navControls=void 0,this.infScroll=!1,this.onDemandLoad=!1},t.prototype.enableBasicNavigation=function(){this.navControls=o.NAVIGATION_TYPE.BASIC,this.showNavigation=!0},t.prototype.enableInlineNavigation=function(){this.navControls=o.NAVIGATION_TYPE.INLINE},t.prototype.enableClassicNavigation=function(){this.navControls=o.NAVIGATION_TYPE.CLASSIC,this.showNavigation=!0},t.prototype.enablePagerNavigation=function(){this.navControls=o.NAVIGATION_TYPE.PAGER,this.showNavigation=!0},t.prototype.setNavigationTypeNone=function(){this.navControls=o.NAVIGATION_TYPE.NONE,this.showNavigation=!1},t.prototype.enableInfiniteScroll=function(){this.infScroll=!0},t.prototype.enableOnDemandLoad=function(){this.onDemandLoad=!0,this.showNavigation=!0},t.prototype.setListClass=function(){var e="";this.itemsperrow?isNaN(parseInt(this.itemsperrow,10))?(_.split(this.itemsperrow," ").forEach(function(t){var n=_.split(t,"-");t=n[0]+"-"+12/parseInt(n[1],10),e+=" col-"+t}),this.itemsPerRowClass=e.trim()):this.itemsPerRowClass="col-xs-"+12/parseInt(this.itemsperrow,10):this.itemsPerRowClass="col-xs-12"},t.prototype.onNavigationTypeChange=function(e){switch(this.resetNavigation(),e){case o.NAVIGATION_TYPE.BASIC:this.enableBasicNavigation();break;case o.NAVIGATION_TYPE.INLINE:this.enableInlineNavigation();break;case o.NAVIGATION_TYPE.ADVANCED:case o.NAVIGATION_TYPE.CLASSIC:this.enableClassicNavigation();break;case o.NAVIGATION_TYPE.PAGER:this.enablePagerNavigation();break;case o.NAVIGATION_TYPE.NONE:this.setNavigationTypeNone();break;case o.NAVIGATION_TYPE.SCROLL:this.enableInfiniteScroll();break;case o.NAVIGATION_TYPE.ONDEMAND:this.enableOnDemandLoad()}},t.prototype.fetchNextDatasetOnScroll=function(){this.dataNavigator.navigatePage("next")},t.prototype.setIscrollHandlers=function(e){var t=this,n=0,i=_.get(e.iscroll,"wrapper"),o=e.iscroll;e.iscroll.on("scrollEnd",function(){var r=i.clientHeight,a=i.scrollHeight,s=Math.abs(e.iscroll.y);n<s&&.9*a<s+r&&(t.debouncedFetchNextDatasetOnScroll(),o.indicatorRefresh&&o.indicatorRefresh()),n=s})},t.prototype.bindIScrollEvt=function(){var e=this,t=this.$element.closest('[wmsmoothscroll="true"]');if(_.get(t[0],"iscroll"))this.setIscrollHandlers(t[0]);else{var n=this.app.subscribe("iscroll-update",function(i){!_.isEmpty(i)&&i.isSameNode(t[0])&&(e.setIscrollHandlers(t[0]),n())});this.app.notify("no-iscroll",t[0])}},t.prototype.bindScrollEvt=function(){var e,t,n=this,i=this.$element.find("> ul"),o=i.children().first(),r=this,a=0;o.length&&((t=(e=o.scrollParent(!1))[0]===document?document.body:e[0]).scrollHeight>t.clientHeight?(e.each(function(e,t){a=t===document?t.body.scrollTop||$(window).scrollTop():t.scrollTop}).off("scroll.scroll_evt").on("scroll.scroll_evt",function(e){var t,n,i,o=e.target;t=(o=o===document?o.scrollingElement||document.body:o).clientHeight,n=o.scrollHeight,i=o===document.body?$(window).scrollTop():o.scrollTop,a<i&&.9*n<i+t&&($(this).off("scroll.scroll_evt"),r.debouncedFetchNextDatasetOnScroll()),a=i}),i.off("wheel.scroll_evt")):i.on("wheel.scroll_evt",function(e){e.originalEvent.deltaY>0&&(i.off("wheel.scroll_evt"),n.debouncedFetchNextDatasetOnScroll())}))},t.prototype.updateFieldDefs=function(e){if(this.infScroll||this.onDemandLoad){if(!s.isDefined(this.fieldDefs)||this.dataNavigator.isFirstPage())this.fieldDefs=[],this.currentPage=1;else if(this.fieldDefs.length/this.pagesize<=this.dataNavigator.pageCount){var t=void 0,n=[];if(this.fieldDefs.length===this.currentPage*this.pagesize&&this.currentPage+1===this.dataNavigator.dn.currentPage)n=e,this.currentPage++;else if(this.fieldDefs.length<this.currentPage*this.pagesize){this.fieldDefs.length===(this.currentPage-1)*this.pagesize&&this.currentPage-1===this.dataNavigator.dn.currentPage?e=[]:this.dataNavigator.dataSize<this.currentPage*this.pagesize?t=this.dataNavigator.dataSize-this.fieldDefs.length:(t=this.currentPage*this.pagesize-this.fieldDefs.length,this.currentPage++);var i=e.length-t;n=e.slice(i)}else this.fieldDefs.length===this.currentPage*this.pagesize&&this.currentPage===this.dataNavigator.dn.currentPage&&(n=[]);e=n}this.fieldDefs=m(this.fieldDefs,e)}else this.fieldDefs=e;this.orderby&&(this.fieldDefs=o.getOrderedDataset(this.fieldDefs,this.orderby)),this.groupby&&(this.groupedData=o.groupData(this,this.fieldDefs,this.groupby,this.match,this.orderby,this.dateformat,this.datePipe,void 0,this.appDefaults)),this.fieldDefs.length||(this.noDataFound=!0,this.selecteditem=void 0),s.$appDigest(),this.listItems.setDirty()},t.prototype.onDataChange=function(e){_.isEmpty(e)?this.updateFieldDefs([]):(this.noDataFound=!1,this.isDataChanged=!0,this.datasource&&this.datasource.execute(s.DataSource.Operation.IS_API_AWARE)&&(e=_.cloneDeep(e)),s.isObject(e)&&!_.isArray(e)&&(e=_.isEmpty(e)?[]:[e]),_.isString(e)&&(e=e.split(",")),this.datasource&&"App"===this.datasource.owner&&(this.infScroll||this.onDemandLoad)&&!this.currentPage&&this.datasource.execute(s.DataSource.Operation.GET_PAGING_OPTIONS).number>0&&(e=this.datasource.execute(s.DataSource.Operation.LIST_RECORDS,{page:1})),_.isArray(e)&&(e.length&&this.invokeEventCallback("beforedatarender",{$data:e}),this.updateFieldDefs(e)))},t.prototype.setupDataSource=function(){var e=this,t=this.dataNavigator;t.options={maxResults:this.pagesize||5},this.dataNavigatorWatched=!0,this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorResultWatch=t.resultEmitter.subscribe(function(t){e.onDataChange(t)},!0),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),this.navigatorMaxResultWatch=t.maxResultsEmitter.subscribe(function(t){e.pagesize=t}),t.maxResults=this.pagesize||5,this.removePropertyBinding("dataset");var n=this.getAttr("datasetboundexpr");this.dataNavigator.setBindDataSet(this.binddataset,this.viewParent,n?this.context:this.datasource,this.dataset,this.binddatasource,n)},t.prototype.onDataSetChange=function(e){this.dataNavigatorWatched?this.navigation&&this.navigation!==o.NAVIGATION_TYPE.NONE&&this.dataNavigator.setDataSource(this.datasource):this.navigation&&this.navigation!==o.NAVIGATION_TYPE.NONE?this.setupDataSource():this.onDataChange(e)},t.prototype.deselectListItems=function(){this.listItems.forEach(function(e){return e.isActive=!1})},t.prototype.clearSelectedItems=function(){this.deselectListItems(),this._items.length=0,s.$appDigest()},t.prototype.getListItemByModel=function(e){var t=this;return this.listItems.find(function(n){var i=n.item;if(t.groupby&&!_.has(e,"_groupIndex")&&delete(i=_.clone(i))._groupIndex,_.isEqual(i,e))return!0})||null},t.prototype.updateSelectedItemsWidgets=function(){var e=this;this.multiselect&&(this.selectedItemWidgets.length=0),this.listItems.forEach(function(t){t.isActive&&(e.multiselect?e.selectedItemWidgets.push(t.currentItemWidgets):e.selectedItemWidgets=t.currentItemWidgets)})},t.prototype.toggleListItemSelection=function(e){if(e&&!e.disableItem){var t=e.item;this.groupby&&_.has(t,"_groupIndex")&&delete(t=_.clone(t))._groupIndex,e.isActive?(this._items=_.pullAllWith(this._items,[t],_.isEqual),e.isActive=!1):(this.multiselect||this.clearSelectedItems(),this._items.push(t),this.invokeEventCallback("select",{widget:e,$data:t}),e.isActive=!0),this.updateSelectedItemsWidgets()}},t.prototype.onListRender=function(e){var t=this;this.isDataChanged&&(s.$invokeWatchers(!0),this.invokeEventCallback("render",{$data:this.fieldDefs}));var n=_.isArray(this.selecteditem)?this.selecteditem:[this.selecteditem];if(this.firstSelectedItem=this.lastSelectedItem=null,!e.length||!this.selectfirstitem||this._items.length&&this.multiselect)this.deselectListItems(),n.forEach(function(e){var n=t.getListItemByModel(e);n&&(n.isActive=!0,t.lastSelectedItem=n,n.nativeElement.focus())});else{var i=e.first;i.disableItem||!this.isDataChanged||(this.infScroll||this.onDemandLoad)&&this._items.length||(this.clearSelectedItems(),this.firstSelectedItem=this.lastSelectedItem=i,this.selectItem(0))}if(this.fieldDefs.length&&this.infScroll){var o=this.$element.closest("[wmsmoothscroll]");s.isMobileApp()&&o.length&&"true"===o.attr("wmsmoothscroll")?this.bindIScrollEvt():this.bindScrollEvt()}this.isDataChanged=!1},t.prototype.triggerListItemSelection=function(e,t){if(e&&e[0]){var n=e.data("listItemContext");n.listComponent===this&&this.onItemClick(t,n)}},t.prototype.setupHandlers=function(){var e=this;this.listItems.changes.subscribe(function(t){e.onListRender(t),e.cdRef.detectChanges()}),this.nativeElement.querySelector("ul.app-livelist-container").addEventListener("click",function(t){for(var n=$(t.target).closest(".app-list-item");n.get(0)&&n.closest("ul.app-livelist-container").get(0)!==t.currentTarget;)n=n.parent().closest(".app-list-item");e.triggerListItemSelection(n,t)},!0)},t.prototype.onReorderStart=function(e,t){t.placeholder.height(t.item.height()),this.$ulEle.data("oldIndex",t.item.index())},t.prototype.onUpdate=function(e,t){var n=this.fieldDefs,i=t.item.index(),o=this.$ulEle.data("oldIndex"),r=_.min([i,o]),a=_.max([i,o]),s=_.pullAt(n,o)[0];this.reorderProps.minIndex=_.min([r,this.reorderProps.minIndex]),this.reorderProps.maxIndex=_.max([a,this.reorderProps.maxIndex]),n.splice(i,0,s),this.cdRef.markForCheck(),this.cdRef.detectChanges();var l={oldIndex:o,newIndex:i,item:n[i]};this.invokeEventCallback("reorder",{$event:e,$data:n,$changedItem:l}),this.$ulEle.removeData("oldIndex")},t.prototype.configureDnD=function(){var e=$(this.nativeElement);this.$ulEle=e.find(".app-livelist-container"),o.configureDnD(this.$ulEle,{appendTo:"body"},this.onReorderStart.bind(this),this.onUpdate.bind(this)),this.$ulEle.droppable({accept:".app-list-item"})},t.prototype.checkSelectionLimit=function(e){return!this.selectionlimit||e<this.selectionlimit},t.prototype.getListItemByIndex=function(e){return this.listItems.toArray()[e]},t.prototype.getListItemIndex=function(e){return this.listItems.toArray().indexOf(e)},t.prototype.execute=function(e,t){return![s.DataSource.Operation.IS_API_AWARE,s.DataSource.Operation.IS_PAGEABLE,s.DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(e)&&this.datasource.execute(e,t)},t.prototype.handleKeyDown=function(e,t){e.stopPropagation();var n=this.listItems,i=this.getListItemIndex(this.lastSelectedItem);if(this.multiselect){var o=this.getListItemIndex(this.firstSelectedItem),r=_.isArray(this.selecteditem)?this.selecteditem.length:_.isObject(this.selecteditem)?1:0;"selectPrev"===t?i>0&&(i<=o&&this.checkSelectionLimit(r)?(this.lastSelectedItem=this.getListItemByIndex(i-1),this.toggleListItemSelection(this.lastSelectedItem)):i>o?(this.toggleListItemSelection(this.getListItemByIndex(i)),this.lastSelectedItem=this.getListItemByIndex(i-1)):this.invokeEventCallback("selectionlimitexceed",{$event:e})):"selectNext"===t&&i<n.length-1&&(i>=o&&this.checkSelectionLimit(r)?(this.lastSelectedItem=this.getListItemByIndex(i+1),this.toggleListItemSelection(this.lastSelectedItem)):i<o?(this.toggleListItemSelection(this.getListItemByIndex(i)),this.lastSelectedItem=this.getListItemByIndex(i+1)):this.invokeEventCallback("selectionlimitexceed",{$event:e}))}if("focusPrev"===t)i=i<=0?0:i-1,this.lastSelectedItem=this.getListItemByIndex(i),this.lastSelectedItem.nativeElement.focus();else if("focusNext"===t)i=i<n.length-1?i+1:n.length-1,this.lastSelectedItem=this.getListItemByIndex(i),this.lastSelectedItem.nativeElement.focus();else if("select"===t){if(-1===i||!$(e.target).closest(this.lastSelectedItem.nativeElement)){var a=$(e.target).closest("li.app-list-item");i=a.closest("ul.app-livelist-container").find("li.app-list-item").index(a)}this.onItemClick(e,this.getListItemByIndex(i))}},t.prototype.onPropertyChange=function(t,n,i){var o=this;if("dataset"===t){if(!n&&this.binddatasource&&!this.datasource)return;this.onDataSetChange(n)}else if("datasource"===t)this.dataset&&this.onDataSetChange(this.dataset);else if("navigation"===t){if("Advanced"===n)return void(this.navigation="Classic");s.switchClass(this.nativeElement,n,i),this.onNavigationTypeChange(n),this.dataNavigator&&(this.dataNavigator.navigationClass=this.paginationclass)}else if("itemsperrow"===t)this.setListClass();else{if("tabindex"===t)return;"pulltorefresh"===t&&n?(this.app.notify("pullToRefresh:enable"),this.subscribeToPullToRefresh()):"paginationclass"===t?this.dataNavigator&&setTimeout(function(){return o.dataNavigator.navigationClass=n}):e.prototype.onPropertyChange.call(this,t,n,i)}},t.prototype.onItemClick=function(e,t){var n,i=this;if(!t.disableItem){if(this.firstSelectedItem=this.firstSelectedItem||t,n=_.isArray(this.selecteditem)?this.selecteditem.length:_.isObject(this.selecteditem)?1:0,this.multiselect&&s.isMobileApp())this.checkSelectionLimit(n)||t.isActive?this.toggleListItemSelection(t):this.invokeEventCallback("selectionlimitexceed",{$event:e});else if((e.ctrlKey||e.metaKey)&&this.multiselect)this.checkSelectionLimit(n)||t.isActive?(this.firstSelectedItem=this.lastSelectedItem=t,this.toggleListItemSelection(t)):this.invokeEventCallback("selectionlimitexceed",{$event:e});else if(e.shiftKey&&this.multiselect){var o=t.context.index,r=this.firstSelectedItem.context.index;o>r&&(r=[o,o=r][0]),this.checkSelectionLimit(r-o)?(this.clearSelectedItems(),this.listItems.forEach(function(e){var t=e.context.index;t>=o&&t<=r&&i.toggleListItemSelection(e)}),this.lastSelectedItem=t):this.invokeEventCallback("selectionlimitexceed",{$event:e})}else(!t.isActive||n>1)&&(this.clearSelectedItems(),this.toggleListItemSelection(t),this.firstSelectedItem=this.lastSelectedItem=t);s.$appDigest()}},t.prototype.clear=function(){this.updateFieldDefs([])},t.prototype.getItemRefByIndexOrModel=function(e){return s.isNumber(e)?this.getListItemByIndex(e):this.getListItemByModel(e)},t.prototype.deselectItem=function(e){var t=this.getItemRefByIndexOrModel(e);t&&t.isActive&&this.toggleListItemSelection(t)},t.prototype.selectItem=function(e){var t=this.getItemRefByIndexOrModel(e);t&&(t.isActive||this.toggleListItemSelection(t),t.nativeElement.focus())},t.prototype.beforePaginationChange=function(e,t){this.invokeEventCallback("paginationchange",{$event:e,$index:t})},t.prototype.handleEvent=function(e,t,n,i){var o=this;_.includes(["click","tap","dblclick","doubletap"],t)&&this.eventManager.addEventListener(this.nativeElement,{tap:"click",doubletap:"dblclick"}[t]||t,function(e){var n=$(e.target).closest(".app-list-item");if(n.length){var i=n.data("listItemContext");i.disableItem||o.invokeEventCallback(t,{widget:i,$event:e,item:i.item})}})},t.prototype.subscribeToPullToRefresh=function(){var e=this;this.cancelSubscription=this.app.subscribe("pulltorefresh",function(){e.datasource&&e.datasource.listRecords&&e.datasource.listRecords()})},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.handleHeaderClick=s.noop,this._items=[],this.fieldDefs=[],this.debouncedFetchNextDatasetOnScroll=_.debounce(this.fetchNextDatasetOnScroll,o.DEBOUNCE_TIMES.PAGINATION_DEBOUNCE_TIME),this.reorderProps={minIndex:null,maxIndex:null}},t.prototype.ngAfterViewInit=function(){var t=this;this.promiseResolverFn(),this.propsInitPromise.then(function(){e.prototype.ngAfterViewInit.call(t),t.selectedItemWidgets=t.multiselect?[]:{},t.enablereorder&&!t.groupby&&t.configureDnD(),t.groupby&&t.collapsible&&(t.handleHeaderClick=o.handleHeaderClick,t.toggleAllHeaders=o.toggleAllHeaders.bind(void 0,t)),t.setListClass()}),this.setupHandlers();var n=this.nativeElement.querySelector("ul.app-livelist-container");o.styler(n,this,o.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),s.isMobileApp()&&n.querySelector(".app-list-item-action-panel")&&(this._listAnimator=new g(this))},t.prototype.ngOnDestroy=function(){this._listAnimator&&this._listAnimator.$btnSubscription&&this._listAnimator.$btnSubscription.unsubscribe(),this.cancelSubscription&&this.cancelSubscription()},t.initializeProps=h(),t.decorators=[{type:r.Component,args:[{selector:"div[wmList]",template:'<div class="panel-heading" *ngIf="title || subheading || iconclass">\n    <h3 class="panel-title">\n        <div class="pull-left">\n            <i class="app-icon panel-icon {{iconclass}}" aria-hidden="true" [hidden]="!iconclass"></i>\n        </div>\n        <div class="pull-left">\n            <div class="heading" [innerHTML]="title | trustAs: \'html\'"></div>\n            <div class="description" [innerHTML]="subheading | trustAs: \'html\'"></div>\n        </div>\n    </h3>\n</div>\n\n<nav class="app-datanavigator" aria-label="Page navigation" *ngIf="navigation === \'Inline\' && !noDataFound">\n    <ul class="pager">\n        <li class="previous" [ngClass]="{\'disabled\': (dataNavigator ? dataNavigator.isDisablePrevious : true)}">\n            <a href="javascript:void(0);" (click)="dataNavigator.navigatePage(\'prev\', $event)">\n                <i class="wi wi-chevron-left" aria-hidden="true"></i>\n                <span class="sr-only">Previous</span>\n            </a>\n        </li>\n    </ul>\n</nav>\n\n<ul tabindex="0" class="app-livelist-container clearfix {{listclass}}"\n    (keydown.enter)="handleKeyDown($event, \'select\')"\n\n    (keydown.arrowup)="handleKeyDown($event, \'focusPrev\')"\n    (keydown.arrowdown)="handleKeyDown($event, \'focusNext\')"\n    (keydown.arrowleft)="handleKeyDown($event, \'focusPrev\')"\n    (keydown.arrowright)="handleKeyDown($event, \'focusNext\')"\n\n    (keydown.shift.arrowup)="handleKeyDown($event, \'selectPrev\')"\n    (keydown.shift.arrowdown)="handleKeyDown($event, \'selectNext\')"\n    (keydown.shift.arrowleft)="handleKeyDown($event, \'selectPrev\')"\n    (keydown.shift.arrowright)="handleKeyDown($event, \'selectNext\')"\n>\n    <ng-template [ngIf]="!groupby" [ngIfElse]="groupedListTemplate">\n        <li *ngFor="let item of fieldDefs; index as $index; first as $first; last as $last;" class="app-list-item {{itemsPerRowClass}}" [ngClass]="listItemRef.itemClass"\n            [wmListItem]="item"\n            #listItemRef="listItemRef"\n            tabindex="0">\n            <ng-container [ngTemplateOutlet]="listTemplate" [ngTemplateOutletContext]="{item: item, $index: $index, itemRef: listItemRef, $first: $first, $last: $last, currentItemWidgets: listItemRef.currentItemWidgets}"></ng-container>\n        </li>\n    </ng-template>\n    <ng-container [ngTemplateOutlet]="listLeftActionTemplate"></ng-container>\n    <ng-container [ngTemplateOutlet]="listRightActionTemplate"></ng-container>\n</ul>\n\n<div class="no-data-msg" *ngIf="noDataFound && !variableInflight" [textContent]="nodatamessage"></div>\n\n<div class="loading-data-msg" *ngIf="variableInflight && !pulltorefresh">\n    <span>\n        <i class="app-icon panel-icon fa-spin" aria-hidden="true" [ngClass]="loadingicon"></i>\n        <span class="sr-only">Loading</span>\n        <span class="loading-text" [textContent]="loadingdatamsg"></span>\n    </span>\n</div>\n\n<nav class="app-datanavigator" *ngIf="navigation === \'Inline\' && !noDataFound">\n    <ul class="pager">\n        <li class="next" [ngClass]="{\'disabled\': (dataNavigator ? dataNavigator.isDisableNext  : true)}">\n            <a href="javascript:void(0);" (click)="dataNavigator.navigatePage(\'next\', $event)">\n                <i class="wi wi-chevron-right" aria-hidden="true"></i>\n                <span class="sr-only">Next</span>\n            </a>\n        </li>\n    </ul>\n</nav>\n\n<div class="panel-footer" *ngIf="navigation !== \'None\'" [hidden]="!showNavigation || (onDemandLoad && dataNavigator.isDisableNext) || (dataNavigator.dataSize <= pagesize) || !dataNavigator.dataSize">\n    <nav wmPagination\n         navigationalign.bind="navigationalign"\n         navigation.bind="navControls"\n         showrecordcount.bind="showrecordcount"\n         maxsize.bind="maxsize"\n         boundarylinks.bind="boundarylinks"\n         forceellipses.bind="forceellipses"\n         directionlinks.bind="directionlinks"\n         show.bind="!onDemandLoad"\n         paginationchange.event="beforePaginationChange($event, $index)"\n    ></nav>\n    <a *ngIf="onDemandLoad" href="javascript:void(0);"\n       (click)="dataNavigator.navigatePage(\'next\', $event)"\n       class="app-button btn btn-block"\n       [ngClass]="paginationclass"\n       [textContent]="ondemandmessage"\n    ></a>\n</div>\n\n\x3c!--This template will be displayed when groupby is specified--\x3e\n<ng-template #groupedListTemplate>\n    <li *ngFor="let groupObj of groupedData" class="app-list-item-group clearfix">\n        <ul class="list-group item-group" [ngClass]="listclass">\n            <li class="app-list-item-header list-item list-group-header" (click)="handleHeaderClick($event)" [ngClass]="{\'collapsible-content\': collapsible}">\n            <h4>{{groupObj.key}}\n                <div class="header-action">\n                    <i class="app-icon wi action wi-chevron-up" *ngIf="collapsible"></i>\n                    <span *ngIf="showcount" class="label label-default">{{groupObj.data.length}}</span>\n                    </div>\n                </h4>\n            </li>\n            <li *ngFor="let item of groupObj.data; index as $index; first as $first; last as $last;" tabindex="0"\n                class="app-list-item group-list-item {{itemsPerRowClass}}"\n                [ngClass]="listItemRef.itemClass"\n                [wmListItem]="item" #listItemRef="listItemRef">\n                <ng-container [ngTemplateOutlet]="listTemplate" [ngTemplateOutletContext]="{item: item, $index: $index, itemRef: listItemRef, $first: $first, $last: $last, currentItemWidgets: listItemRef.currentItemWidgets}"></ng-container>\n            </li>\n        </ul>\n    </li>\n</ng-template>\n',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:r.Injector},{type:r.ChangeDetectorRef},{type:o.ToDatePipe},{type:s.App},{type:s.AppDefaults},{type:r.NgZone},{type:String,decorators:[{type:r.Attribute,args:["itemclass.bind"]}]},{type:String,decorators:[{type:r.Attribute,args:["disableitem.bind"]}]},{type:String,decorators:[{type:r.Attribute,args:["dataset.bind"]}]},{type:String,decorators:[{type:r.Attribute,args:["datasource.bind"]}]},{type:String,decorators:[{type:r.Attribute,args:["mouseenter.event"]}]},{type:String,decorators:[{type:r.Attribute,args:["mouseleave.event"]}]}]},t.propDecorators={listTemplate:[{type:r.ContentChild,args:["listTemplate"]}],listLeftActionTemplate:[{type:r.ContentChild,args:["listLeftActionTemplate"]}],listRightActionTemplate:[{type:r.ContentChild,args:["listRightActionTemplate"]}],btnComponents:[{type:r.ContentChildren,args:[i.ButtonComponent]}],dataNavigator:[{type:r.ViewChild,args:[n.PaginationComponent]}],listItems:[{type:r.ViewChildren,args:[f]}]},t}(o.StylableComponent),b=[y,f],w=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,n.PaginationModule,o.WmComponentsModule],declarations:m(b),exports:m(b),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275b=h,e.ListModule=w,e.ListComponent=y,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-bootstrap/tooltip"),require("ngx-bootstrap/dropdown"),require("@wm/components/basic"),require("@wm/components/input"),require("@wm/components/navigation/menu"),require("rxjs"),require("@wm/components/data/pagination"),require("@wm/components/data/list"),require("@angular/forms"),require("@wm/core"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/data/table",["exports","@angular/common","ngx-bootstrap/tooltip","ngx-bootstrap/dropdown","@wm/components/basic","@wm/components/input","@wm/components/navigation/menu","rxjs","@wm/components/data/pagination","@wm/components/data/list","@angular/forms","@wm/core","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.table={}),e.ng.common,e.ngxBootstrap,e.ngxBootstrap,e.wm.components.basic,e.wm.components.input,e.wm.components.navigation.menu,e.rxjs,e.wm.components.data.pagination,e.wm.components.data.list,e.ng.forms,e.wm.core,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i,o,r,a,s,l,c,p,u,d,m){"use strict";var h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function f(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}var w=function(){m.register("wm-table",new Map([["boundarylinks",g({value:!1},m.PROP_BOOLEAN)],["class",m.PROP_STRING],["confirmdelete",g({value:"Are you sure you want to delete this?"},m.PROP_STRING)],["datasource",m.PROP_STRING],["dataset",m.PROP_ANY],["deletecanceltext",m.PROP_STRING],["deleteoktext",m.PROP_STRING],["deletemessage",g({value:"Record deleted successfully"},m.PROP_STRING)],["directionlinks",g({value:!0},m.PROP_BOOLEAN)],["editmode",m.PROP_STRING],["enablecolumnselection",g({value:!1},m.PROP_BOOLEAN)],["enablesort",g({value:!0},m.PROP_BOOLEAN)],["errormessage",m.PROP_STRING],["exportformat",m.PROP_STRING],["exportdatasize",g({value:100},m.PROP_NUMBER)],["filtermode",m.PROP_STRING],["filternullrecords",g({value:!0},m.PROP_BOOLEAN)],["forceellipses",g({value:!0},m.PROP_BOOLEAN)],["formposition",m.PROP_STRING],["gridclass",g({value:"table-bordered table-striped table-hover"},m.PROP_STRING)],["gridfirstrowselect",m.PROP_BOOLEAN],["iconclass",m.PROP_STRING],["insertmessage",g({value:"Record added successfully"},m.PROP_STRING)],["isdynamictable",m.PROP_BOOLEAN],["loadingdatamsg",g({value:"Loading..."},m.PROP_STRING)],["loadingicon",g({value:"fa fa-circle-o-notch fa-spin"},m.PROP_STRING)],["maxsize",g({value:5},m.PROP_NUMBER)],["multiselect",m.PROP_BOOLEAN],["name",m.PROP_STRING],["navigation",g({value:"Basic"},m.PROP_STRING)],["navigationalign",g({value:"left"},m.PROP_STRING)],["nodatamessage",g({value:"No data found."},m.PROP_STRING)],["pagesize",m.PROP_NUMBER],["radioselect",m.PROP_BOOLEAN],["rowclass",m.PROP_STRING],["rowngclass",m.PROP_STRING],["searchlabel",g({value:"Search"},m.PROP_STRING)],["show",g({value:!0},m.PROP_BOOLEAN)],["showheader",g({value:!0},m.PROP_BOOLEAN)],["shownewrow",g({value:!0},m.PROP_BOOLEAN)],["showrecordcount",m.PROP_BOOLEAN],["showrowindex",m.PROP_BOOLEAN],["spacing",g({value:"normal"},m.PROP_STRING)],["subheading",m.PROP_STRING],["tabindex",g({value:0},m.PROP_NUMBER)],["title",m.PROP_STRING],["updatemessage",g({value:"Record updated successfully"},m.PROP_STRING)]]))},P={widgetType:"wm-table",hostClass:"app-grid app-panel panel"},O={EXCEL:"fa fa-file-excel-o",CSV:"fa fa-file-text-o"},R=function(){},E=R,T=function(e){var t=!1;[".dropdown-menu",".uib-typeahead-match",".modal-dialog",".toast"].forEach(function(n){if(e.closest(n).length)return t=!0,!1});return t||["bsdatepickerdaydecorator"].forEach(function(n){if(e[0].hasAttribute(n))return t=!0,!1}),t},S=T,C=function(e){function t(t,n,i,o,r,a,l,c,p){var d=e.call(this,t,P)||this;return d.inj=t,d.fb=n,d.app=i,d.dynamicComponentProvider=o,d.parentList=r,d.binddataset=a,d.binddatasource=l,d.readonlygrid=c,d.ngZone=p,d.rowActionsCompiledTl={},d.rowFilterCompliedTl={},d.inlineCompliedTl={},d.inlineNewCompliedTl={},d.customExprCompiledTl={},d.rowDefInstances={},d.rowDefMap={},d.rowExpansionActionTl={},d.columns={},d.formfields={},d.enablesort=!0,d.selectedItems=[],d.selectedItemChange=new s.Subject,d.selectedItemChange$=d.selectedItemChange.asObservable(),d.actions=[],d._actions={header:[],footer:[]},d.exportOptions=[],d.headerConfig=[],d.items=[],d.rowActions=[],d.shownavigation=!1,d.documentClickBind=R,d.fieldDefs=[],d.rowDef={},d.rowInstance={},d.fullFieldDefs=[],d.applyProps=new Map,d.redraw=_.debounce(d._redraw,150),d.debouncedHandleLoading=_.debounce(d.handleLoading,350),d.rowFilter={},d._searchSortHandler=R,d.searchSortHandler=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];d._searchSortHandler.apply(d,e)},d.onRowFilterChange=R,d.onFilterConditionSelect=R,d.showClearIcon=R,d.clearRowFilter=R,d.gridOptions={data:[],colDefs:[],startRowIndex:1,sortInfo:{field:"",direction:""},filtermode:"",searchLabel:"",rowActions:[],headerConfig:[],rowClass:"",editmode:"",formPosition:"",isMobile:!1,rowExpansionEnabled:!1,rowDef:{position:"0"},name:"",messages:{selectField:"Select Field"},onDataRender:function(){d.ngZone.run(function(){d.gridData.length&&d.invokeEventCallback("datarender",{$data:d.gridData,data:d.gridData}),d.multiselect||(d.items.length=0),d.callDataGridMethod("selectRows",d.items),d.selectedItems=d.callDataGridMethod("getSelectedRows"),d.selectedItemChange.next(d.selectedItems),d._isPageSearch&&d.filterInfo&&d.searchSortHandler(d.filterInfo,void 0,"search")})},onRowSelect:function(e,t){d.ngZone.run(function(){d.selectedItems=d.callDataGridMethod("getSelectedRows"),d.selectedItemChange.next(d.selectedItems);var n=d.addRowIndex(e);d.invokeEventCallback("rowselect",{$data:n,$event:t,row:n})})},assignSelectedItems:function(e,t){d.ngZone.run(function(){d.multiselect?-1===_.findIndex(d.items,e)&&d.items.push(e):(d.items.length=0,d.items.push(e))})},onRowDblClick:function(e,t){var n=d.addRowIndex(e);d.invokeEventCallback("rowdblclick",{$data:n,$event:t,row:n})},onRowDeselect:function(e,t){d.multiselect&&d.ngZone.run(function(){d.items=_.pullAllWith(d.items,[e],_.isEqual),d.selectedItems=d.callDataGridMethod("getSelectedRows"),d.invokeEventCallback("rowdeselect",{$data:e,$event:t,row:e})})},callOnRowDeselectEvent:function(e,t){d.items=d.selectedItems=d.callDataGridMethod("getSelectedRows"),d.invokeEventCallback("rowdeselect",{$data:e,$event:t,row:e})},callOnRowClickEvent:function(e,t){if(t&&t.hasOwnProperty("originalEvent")){var n=d.addRowIndex(e);d.invokeEventCallback("rowclick",{$data:n,$event:t,row:n})}},closePopover:u.closePopover,onColumnSelect:function(e,t){d.selectedColumns=d.callDataGridMethod("getSelectedColumns"),d.invokeEventCallback("columnselect",{$data:e,$event:t})},onColumnDeselect:function(e,t){d.selectedColumns=d.callDataGridMethod("getSelectedColumns"),d.invokeEventCallback("columndeselect",{$data:e,$event:t})},onHeaderClick:function(e,t){d.invokeEventCallback("headerclick",{$event:t,$data:e,column:e})},onRowDelete:function(e,t,n,i,o){d.ngZone.run(function(){d.deleteRecord(_.extend({},o,{row:e,cancelRowDeleteCallback:t,evt:n,callBack:i}))})},onRowInsert:function(e,t,n,i){d.insertRecord(_.extend({},i,{row:e,event:t,callBack:n}))},beforeRowUpdate:function(e,t){d._liveTableParent&&d._liveTableParent.updateRow(e,t),d.prevData=u.getClonedObject(e)},afterRowUpdate:function(e,t,n,i){d.updateRecord(_.extend({},i,{row:e,prevData:d.prevData,event:t,callBack:n}))},onBeforeRowUpdate:function(e,t,n){return d.invokeEventCallback("beforerowupdate",{$event:t,$data:e,row:e,options:n})},onBeforeRowInsert:function(e,t,n){return d.invokeEventCallback("beforerowinsert",{$event:t,$data:e,row:e,options:n})},onBeforeRowDelete:function(e,t,n){var i=d.addRowIndex(e);return d.invokeEventCallback("beforerowdelete",{$event:t,row:i,options:n})},onFormRender:function(e,t,n,i){var o=i?"inlineInstanceNew":"inlineInstance";setTimeout(function(){d.formWidgets={},d.fieldDefs.forEach(function(e){e[o]&&(d.formWidgets[e.field]=e[o],d.setDisabledOnField(n,e,o))}),d.invokeEventCallback("formrender",{$event:t,formWidgets:d.formWidgets,$operation:n})},250)},onBeforeFormRender:function(e,t,n){return d.invokeEventCallback("beforeformrender",{$event:t,row:e,$operation:n})},registerRowNgClassWatcher:function(e,t){if(d.rowngclass){var n=d.getClonedRowObject(e),i=d.widgetId+"_rowNgClass_"+t;u.$unwatch(i),d.registerDestroyListener(u.$watch(d.rowngclass,d.viewParent,{row:n},function(e,n){d.callDataGridMethod("applyRowNgClass",m.getConditionalClasses(e,n),t)},i))}},registerColNgClassWatcher:function(e,t,n,i){if(t["col-ng-class"]){var o=d.getClonedRowObject(e),r=d.widgetId+"_colNgClass_"+n+"_"+i;u.$unwatch(r),d.registerDestroyListener(u.$watch(t["col-ng-class"],d.viewParent,{row:o},function(e,t){d.callDataGridMethod("applyColNgClass",m.getConditionalClasses(e,t),n,i)},r))}},clearCustomExpression:function(){d.customExprViewRef.clear(),d.customExprCompiledTl={}},clearRowDetailExpression:function(){d.rowDetailViewRef.clear(),d.rowDefMap={},d.rowDefInstances={}},generateCustomExpressions:function(e,t){var n=d.getClonedRowObject(e),i=function(e){if(e){var i={},o={row:n,colDef:i};d.addEventsToContext(o);var r=d.customExprViewRef.createEmbeddedView(e,o).rootNodes[0],a=r.getAttribute("data-col-identifier");_.extend(i,d.columns[a]),d.customExprCompiledTl[a+t]=r}};d.isdynamictable?d.fieldDefs.forEach(function(e){i(e.customExprTmpl)}):d.customExprTmpl.forEach(i.bind(d))},generateRowExpansionCell:function(e,t){var n=d.getClonedRowObject(e);d.rowExpansionActionTmpl.forEach(function(e){d.rowExpansionActionTl[t]=d.rowExpansionActionViewRef.createEmbeddedView(e,{row:n}).rootNodes})},getRowExpansionAction:function(e){return d.rowExpansionActionTl[e]},generateRowDetailView:function(e,t,n,i,o,r){var a=d.getClonedRowObject(t),s=u.getClonedObject(d.rowDef);if(!1!==d.rowInstance.invokeEventCallback("beforerowexpand",{$event:e,$data:s,row:a})&&s.content)if(r(),d.rowDefMap[n]&&d.rowDefMap[n].content===s.content)d.rowInstance.invokeEventCallback("rowexpand",{$event:e,row:a,$data:d.rowDefInstances[n]});else{d.rowDefMap[n]=s,i.empty(),i.hide(),o.show();var l={row:a,rowDef:s,containerLoad:function(t){setTimeout(function(){o.hide(),i.show(),d.rowDefInstances[n]=t,d.rowInstance.invokeEventCallback("rowexpand",{$event:e,row:a,$data:t})},500)}},c=d.rowDetailViewRef.createEmbeddedView(d.rowExpansionTmpl,l).rootNodes[0];i[0].appendChild(c),u.$appDigest()}},onBeforeRowCollapse:function(e,t,n){return d.rowInstance.invokeEventCallback("beforerowcollapse",{$event:e,row:t,$data:d.rowDefInstances[n]})},onRowCollapse:function(e,t){d.rowInstance.invokeEventCallback("rowcollapse",{$event:e,row:t})},getCustomExpression:function(e,t){return d.customExprCompiledTl[e+t]||""},clearRowActions:function(){d.rowActionsViewRef.clear(),d.rowActionsCompiledTl={},d.rowExpansionActionViewRef.clear(),d.rowExpansionActionTl={}},generateRowActions:function(e,t){var n=d.getClonedRowObject(e);d.rowActionsCompiledTl[t]=[],d.rowActionTmpl.forEach(function(e){var i;(i=d.rowActionsCompiledTl[t]).push.apply(i,b(d.rowActionsViewRef.createEmbeddedView(e,{row:n}).rootNodes))})},getRowAction:function(e){return d.rowActionsCompiledTl[e]},generateInlineEditRow:function(e,t){var n=d.getClonedRowObject(e);if(t)return d.inlineEditNewViewRef.clear(),d.inlineNewCompliedTl={},d.inlineWidgetNewTmpl.forEach(function(e){var t,i={row:n,getControl:function(){return d.ngform.controls[t+"_new"]||{}},getValidationMessage:function(){return d.columns[t]&&d.columns[t].validationmessage}},o=d.inlineEditNewViewRef.createEmbeddedView(e,i).rootNodes[0];t=o.getAttribute("data-col-identifier"),d.inlineNewCompliedTl[t]=o}),void d.clearForm(!0);d.inlineEditViewRef.clear(),d.inlineCompliedTl={},d.clearForm(),d.inlineWidgetTmpl.forEach(function(e){var t,i={row:n,getControl:function(){return d.ngform.controls[t]||{}},getValidationMessage:function(){return d.columns[t]&&d.columns[t].validationmessage}},o=d.inlineEditViewRef.createEmbeddedView(e,i).rootNodes[0];t=o.getAttribute("data-col-identifier"),d.inlineCompliedTl[t]=o})},getInlineEditWidget:function(e,t,n){return n?(d.gridOptions.setFieldValue(e+"_new",t),d.inlineNewCompliedTl[e]):(d.gridOptions.setFieldValue(e,t),d.inlineCompliedTl[e])},setFieldValue:function(e,t){var n=d.ngform.controls&&d.ngform.controls[e];n&&n.setValue(t)},getFieldValue:function(e){var t=d.ngform.controls&&d.ngform.controls[e];return t&&t.value},generateFilterRow:function(){d.filterViewRef.clear(),d.rowFilterCompliedTl={},d.filterTmpl.forEach(function(e){var t=d.filterViewRef.createEmbeddedView(e,{changeFn:d.onRowFilterChange.bind(d),isDisabled:function(e){return d.emptyMatchModes.indexOf(d.rowFilter[e]&&d.rowFilter[e].matchMode)>-1}}).rootNodes[0];d.rowFilterCompliedTl[t.getAttribute("data-col-identifier")]=t})},getFilterWidget:function(e){return d.rowFilterCompliedTl[e]},setGridEditMode:function(e){d.ngZone.run(function(){d.isGridEditMode=e,u.$appDigest()})},setGridState:function(e){d.isLoading="loading"===e},noChangesDetected:function(){d.toggleMessage(!0,"info","No Changes Detected")},redrawWidgets:function(){d.fieldDefs.forEach(function(e){u.triggerFn(e.inlineInstance&&e.inlineInstance.redraw),u.triggerFn(e.inlineInstanceNew&&e.inlineInstanceNew.redraw),u.triggerFn(e.filterInstance&&e.filterInstance.redraw)})},searchHandler:d.searchSortHandler.bind(d),sortHandler:d.searchSortHandler.bind(d),timeoutCall:function(e,t){setTimeout(e,t)},runInNgZone:function(e){d.ngZone.run(e)},safeApply:function(){u.$appDigest()},setTouched:function(e){var t=d.ngform.controls[e];t&&t.markAsTouched()},clearForm:d.clearForm.bind(d)},d._onChange=function(){},d._onTouched=function(){},m.styler(d.nativeElement,d),d.ngform=n.group({}),d.addEventsToContext(d.context),d.app.subscribe("toggle-variable-state",function(e){d.datasource&&d.datasource.execute(u.DataSource.Operation.IS_API_AWARE)&&u.isDataSourceEqual(e.variable,d.datasource)&&(u.isDefined(d.variableInflight)?d.debouncedHandleLoading(e):d.handleLoading(e))}),d.deleteoktext=d.appLocale.LABEL_OK,d.deletecanceltext=d.appLocale.LABEL_CANCEL,d}return f(t,e),Object.defineProperty(t.prototype,"gridData",{get:function(){return this._gridData||[]},set:function(e){this._gridData=e;var t,n=0;if(this._onChange(e),this._onTouched(),u.isDefined(e)){if(this.isNavigationEnabled()&&this.dataNavigator.dn.currentPage&&(n=(this.dataNavigator.dn.currentPage-1)*(this.dataNavigator.maxResults||1)+1,this.setDataGridOption("startRowIndex",n)),!(t=this.callDataGridMethod("getOptions")))return;!t.colDefs.length&&this.fieldDefs.length&&this.setDataGridOption("colDefs",u.getClonedObject(this.fieldDefs)),this.isdynamictable||_.isEmpty(e)||!t.colDefs.length||this.invokeEventCallback("beforedatarender",{$data:e,$columns:this.columns,data:e,columns:this.columns}),this.setDataGridOption("data",u.getClonedObject(e))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selecteditem",{get:function(){return this.multiselect?u.getClonedObject(this.items):_.isEmpty(this.items)?{}:u.getClonedObject(this.items[0])},set:function(e){this.items.length=0,this.callDataGridMethod("selectRows",e)},enumerable:!0,configurable:!0}),t.prototype.onKeyPress=function(e){13===e.which&&this.invokeEventCallback("enterkeypress",{$event:e,$data:this.gridData})},t.prototype.ngAfterContentInit=function(){var t=this;e.prototype.ngAfterContentInit.call(this);this._liveTableParent&&(this.isPartOfLiveGrid=!0),!this.readonlygrid&&this.editmode||("true"===this.readonlygrid?this.editmode="":this.isPartOfLiveGrid?this.editmode="inline"===this.isPartOfLiveGrid.formlayout?m.EDIT_MODE.FORM:m.EDIT_MODE.DIALOG:this.editmode=this.readonlygrid?m.EDIT_MODE.INLINE:""),this.gridOptions.colDefs=this.fullFieldDefs,this.gridOptions.rowActions=this.rowActions,this.gridOptions.headerConfig=this.headerConfig,this.gridOptions.rowClass=this.rowclass,this.gridOptions.editmode=this.editmode,this.gridOptions.formPosition=this.formposition,this.gridOptions.filtermode=this.filtermode,this.gridOptions.searchLabel=this.searchlabel,this.gridOptions.isMobile=u.isMobile(),this.gridOptions.name=this.name,_.isEmpty(this.gridData)||(this.gridOptions.data=u.getClonedObject(this.gridData)),this.gridOptions.messages={selectField:"Select Field"},this.datagridElement=$(this._tableElement.nativeElement),this.gridElement=this.$element,this.$element.css({position:"relative"}),_.forEach({showrowindex:"showRowIndex",multiselect:"multiselect",radioselect:"showRadioColumn",filternullrecords:"filterNullRecords",enablesort:"enableSort",showheader:"showHeader",enablecolumnselection:"enableColumnSelection",shownewrow:"showNewRow",gridfirstrowselect:"selectFirstRow"},function(e,n){u.isDefined(t[n])&&(t.gridOptions[e]="true"===t[n]||!0===t[n])}),this.renderOperationColumns(),this.gridOptions.colDefs=this.fieldDefs,this.datagridElement.datatable(this.gridOptions),this.callDataGridMethod("setStatus","loading",this.loadingdatamsg),this.applyProps.forEach(function(e){return t.callDataGridMethod.apply(t,b(e))}),this.editmode===m.EDIT_MODE.QUICK_EDIT&&(this.documentClickBind=this._documentClickBind.bind(this),document.addEventListener("click",this.documentClickBind))},t.prototype.ngOnDestroy=function(){document.removeEventListener("click",this.documentClickBind),this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),e.prototype.ngOnDestroy.call(this)},t.prototype.addRowIndex=function(e){var t=u.getClonedObject(e),n=_.indexOf(this.gridOptions.data,e);return n<0?e:(t.$index=n+1,t.$isFirst=1===t.$index,t.$isLast=this.gridData.length===t.$index,t)},t.prototype.addEventsToContext=function(e){var t=this;e.addNewRow=function(){return t.addNewRow()},e.deleteRow=function(){return t.deleteRow()},e.editRow=function(){return t.editRow()}},t.prototype.execute=function(e,t){return![u.DataSource.Operation.IS_API_AWARE,u.DataSource.Operation.IS_PAGEABLE,u.DataSource.Operation.SUPPORTS_SERVER_FILTER].includes(e)&&(this.datasource?this.datasource.execute(e,t):{})},t.prototype.isNavigationEnabled=function(){return this.shownavigation&&this.dataNavigator&&this.dataNavigatorWatched},t.prototype.getClonedRowObject=function(e){var t=u.getClonedObject(e);return t.getProperty=function(e){return _.get(t,e)},t.$isFirst=1===t.$index,t.$isLast=this.gridData.length===t.$index,delete t.$$index,delete t.$$pk,t},t.prototype.handleLoading=function(e){this.variableInflight=e.active,e.active?this.callDataGridMethod("setStatus","loading",this.loadingdatamsg):!this.isGridEditMode&&_.isEmpty(this.dataset)?this.callDataGridMethod("setStatus","nodata",this.nodatamessage):this.callDataGridMethod("setStatus","ready")},t.prototype.setDisabledOnField=function(e,t,n){"new"===e||!t["primary-key"]||"assigned"!==t.generator||t["related-entity-name"]||t.period||(t[n].disabled=!0)},t.prototype.resetFormControl=function(e){e.markAsUntouched(),e.markAsPristine()},t.prototype.clearForm=function(e){var t=this,n=this.ngform.controls;_.keys(this.ngform.controls).forEach(function(i){!i.endsWith("_filter")&&(i.endsWith("_new")&&e||!i.endsWith("_new")&&!e)&&(n[i].setValue(""),t.resetFormControl(n[i]))})},t.prototype.isEmptyRecord=function(e){var t,n=this;return Object.keys(e).every(function(i,o){return t=e[i],!(n.fieldDefs.length&&u.isDefined(n.fieldDefs[o])&&(u.isMobile()?n.fieldDefs[o].mobileDisplay:n.fieldDefs[o].pcDisplay)||!0)||(null==t||""===t)})},t.prototype.removeEmptyRecords=function(e){var t=this,n=e,i=[];return n&&n.length&&(i=n.filter(function(e){return e&&!t.isEmptyRecord(e)})),i},t.prototype.setGridData=function(e){var t=this.filternullrecords?this.removeEmptyRecords(e):e;this.variableInflight||(t&&0===t.length?this.callDataGridMethod("setStatus","nodata",this.nodatamessage):this.callDataGridMethod("setStatus","ready")),this.gridData=t},t.prototype.setDataGridOption=function(e,t,n){if(void 0===n&&(n=!1),this.datagridElement&&this.datagridElement.datatable&&this.datagridElement.datatable("instance")){var i={};!u.isDefined||_.isEqual(t,this.gridOptions[e])&&!n||(i[e]=t,this.datagridElement.datatable("option",i),this.gridOptions[e]=t)}},t.prototype.callDataGridMethod=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.datagridElement&&this.datagridElement.datatable("instance"))return this.datagridElement.datatable.apply(this.datagridElement,e);this.applyProps.set(e[1],e)},t.prototype.renderOperationColumns=function(){var e,t,n=m.getRowOperationsColumn(),i={name:n.field,field:n.field,isPredefined:!0};this.fieldDefs.length&&(e=_.find(this.fullFieldDefs,{field:"rowOperations",type:"custom"}),_.remove(this.fieldDefs,{type:"custom",field:"rowOperations"}),_.remove(this.headerConfig,{field:n.field}),this.rowActions.length&&(e?(t=e.rowactionsposition?_.toNumber(e.rowactionsposition):this.fieldDefs.length,this.fieldDefs.splice(t,0,e),0===t?this.headerConfig.unshift(i):this.headerConfig.push(i)):(this.fieldDefs.push(n),this.headerConfig.push(i))),this.setDataGridOption("headerConfig",this.headerConfig))},t.prototype.enablePageNavigation=function(){var e=this;this.dataset&&this.binddataset&&this.dataNavigator&&(this.dataNavigatorWatched=!0,this.navigatorResultWatch&&this.navigatorResultWatch.unsubscribe(),this.navigatorResultWatch=this.dataNavigator.resultEmitter.subscribe(function(t){u.isDefined(t)?_.isEqual(e.dataset,t)?e.watchVariableDataSet(t):_.isArray(t)?e.widget.dataset=[].concat(t):_.isObject(t)?e.widget.dataset=_.extend({},t):e.widget.dataset=t:e.widget.dataset=void 0},!0),this.navigatorMaxResultWatch&&this.navigatorMaxResultWatch.unsubscribe(),this.navigatorMaxResultWatch=this.dataNavigator.maxResultsEmitter.subscribe(function(t){e.pagesize=t}),this.__fullData=this.dataset,this.dataNavigator.widget.maxResults=this.pagesize||5,this.dataNavigator.options={maxResults:this.pagesize||5},this.removePropertyBinding("dataset"),this.dataNavigator.setBindDataSet(this.binddataset,this.viewParent,this.datasource,this.dataset,this.binddatasource))},t.prototype.resetPageNavigation=function(){this.dataNavigator&&this.dataNavigator.resetPageNavigation()},t.prototype.isDataValid=function(){var e,t=this.dataset||{};return t.error&&(e=t.error),t.data&&t.data.error&&t.data.errorMessage&&(e=t.data.errorMessage),!e||(this.setGridData([]),this.callDataGridMethod("setStatus","error",e),!1)},t.prototype.populateGridData=function(e){var t;e=m.transformData(e,this.name),!this.isNavigationEnabled()&&this._isClientSearch?(t=u.getClonedObject(e),t=this.getSearchResult(t,this.filterInfo),t=this.getSortResult(t,this.sortInfo),this.serverData=t):this.serverData=e,this.isdynamictable?this.createGridColumns(this.serverData):this.setGridData(this.serverData)},t.prototype.generateDynamicColumns=function(e){return t=this,n=void 0,o=function(){var t,n,i,o=this;return v(this,function(r){switch(r.label){case 0:return this.fieldDefs=[],this.filterTmpl._results=[],_.isEmpty(e)?[2]:(t="",e.forEach(function(e){var n="",i="";_.forEach(e,function(e,t){e&&("customExpression"===t?i=e:n+=" "+t+'="'+e+'"')}),t+="<wm-table-column "+n+' tableName="'+o.name+'">'+i+"</wm-table-column>"}),this.dynamicTableRef.clear(),this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext[this.getAttr("wmTable")]=this),this.noOfColumns=e.length,[4,this.dynamicComponentProvider.getComponentFactoryRef("app-table-dynamic-"+this.widgetId,t,{noCache:!0,transpile:!0})]);case 1:return n=r.sent(),i=this.dynamicTableRef.createComponent(n,0,this.inj),u.extendProto(i.instance,this._dynamicContext),this.$element.find(".dynamic-table-container")[0].appendChild(i.location.nativeElement),[2]}})},new((i=void 0)||(i=Promise))(function(e,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(a,s)}l((o=o.apply(t,n||[])).next())});var t,n,i,o},t.prototype.prepareColDefs=function(e){var t,n,i=this;this.fieldDefs=[],this.headerConfig=[],this.columns={},n=e,t=m.prepareFieldDefs(n),_.forEach(t,function(e){e.binding=e.field,e.caption=e.displayName,e.pcDisplay=!0,e.mobileDisplay=!0,e.searchable=!0,e.type="string"}),t.forEach(function(e){i.columns[e.field]=e}),this.invokeEventCallback("beforedatarender",{$data:e,$columns:this.columns,data:e,columns:this.columns}),t=[],_.forEach(this.columns,function(e){t.push(e)}),this.generateDynamicColumns(t)},t.prototype.createGridColumns=function(e){var t=e&&!e.error;t&&!_.isArray(e)&&(e=[e]),_.isEmpty(e)?this.setGridData(e):t&&(this.prepareColDefs(e),this.serverData=e,this.setGridData(this.serverData))},t.prototype.getSortExpr=function(){var e,t;return this.datasource&&this.datasource.execute(u.DataSource.Operation.IS_PAGEABLE)&&(t=this.datasource.execute(u.DataSource.Operation.GET_PAGING_OPTIONS),e=_.isEmpty(t)?"":m.getOrderByExpr(t.sort)),e||""},t.prototype.watchVariableDataSet=function(e){var t;if(!(this.dataNavigatorWatched&&_.isUndefined(e)&&this.__fullData)&&(this.variableInflight&&this.callDataGridMethod("setStatus","loading",this.loadingdatamsg),(t=u.getValidJSON(e))&&(e=t),this.isDataValid())){if(e){if(this.shownavigation&&!this.dataNavigatorWatched)return void this.enablePageNavigation()}else this.resetPageNavigation(),this.variableInflight||this.callDataGridMethod("setStatus","nodata",this.nodatamessage),this.setDataGridOption("selectFirstRow",this.gridfirstrowselect);!this.isNavigationEnabled()&&e&&this.checkFiltersApplied(this.getSortExpr()),!_.isObject(e)||""===e||e&&""===e.dataValue?this.variableInflight||this.setGridData([]):e&&this.populateGridData(e)}},t.prototype.onDataSourceChange=function(){this.fieldDefs.forEach(function(e){u.triggerFn(e.onDataSourceChange&&e.onDataSourceChange.bind(e))})},t.prototype.onPropertyChange=function(t,n,i){var o,r=this;switch(t){case"datasource":this.watchVariableDataSet(this.dataset),this.onDataSourceChange();break;case"dataset":if(this.binddatasource&&!this.datasource)return;this.parentList&&!this.datasource&&_.startsWith(this.binddataset,"item")&&(this.datasource=u.getDatasourceFromExpr(this.widget.$attrs.get("datasetboundexpr"),this)),this.watchVariableDataSet(n);break;case"filtermode":this.setDataGridOption("filtermode",n);break;case"searchlabel":this.setDataGridOption("searchLabel",n);break;case"navigation":if("Advanced"===n)return void(this.navigation="Classic");"None"!==n&&(this.shownavigation=!0),this.navControls=n;break;case"gridfirstrowselect":this.setDataGridOption("selectFirstRow",n);break;case"gridclass":this.callDataGridMethod("option","cssClassNames.grid",n);break;case"nodatamessage":this.callDataGridMethod("option","dataStates.nodata",n);break;case"loadingdatamsg":this.callDataGridMethod("option","dataStates.loading",n);break;case"loadingicon":this.callDataGridMethod("option","loadingicon",n);break;case"spacing":this.callDataGridMethod("option","spacing",n),this.navigationSize="condensed"===n?"small":"";break;case"exportformat":this.exportOptions=[],n&&_.forEach(_.split(n,","),function(e){r.exportOptions.push({label:e,icon:O[e]})});break;case"shownewrow":o=n||_.some(this.actions,function(e){return _.includes(e.action,"addNewRow()")}),this.callDataGridMethod("option","actionsEnabled.new",o);break;case"show":n?this.invokeEventCallback("show"):this.invokeEventCallback("hide");default:e.prototype.onPropertyChange.call(this,t,n,i)}},t.prototype.onStyleChange=function(t,n,i){switch(t){case"width":this.callDataGridMethod("setGridDimensions","width",n);break;case"height":this.callDataGridMethod("setGridDimensions","height",n)}e.prototype.onStyleChange.call(this,t,n,i)},t.prototype.populateActions=function(){var e=this;this._actions.header=[],this._actions.footer=[],_.forEach(this.actions,function(t){_.includes(t.position,"header")&&e._actions.header.push(t),_.includes(t.position,"footer")&&e._actions.footer.push(t)})},t.prototype.renderDynamicFilterColumn=function(e){this.isdynamictable&&this.filterTmpl._results.push(e)},t.prototype.registerColumns=function(e){var t=this;if(u.isMobile()){if(!e.mobileDisplay)return}else if(!e.pcDisplay)return;var n=this.fieldDefs.push(e);this.fullFieldDefs.push(e),this.rowFilter[e.field]={value:void 0},this.fieldDefs.forEach(function(e){t.columns[e.field]=e}),this.isdynamictable&&n===this.noOfColumns&&(this.renderOperationColumns(),this.setDataGridOption("colDefs",this.fieldDefs))},t.prototype.registerFormField=function(e,t){this.formfields[e]=t},t.prototype.registerActions=function(e){this.actions.push(e),this.populateActions()},t.prototype.registerRow=function(e,t){this.rowDef=e,this.rowInstance=t,this.callDataGridMethod("option","cssClassNames.rowExpandIcon",this.rowDef.expandicon),this.callDataGridMethod("option","cssClassNames.rowCollapseIcon",this.rowDef.collapseicon),this.gridOptions.rowExpansionEnabled=!0,this.gridOptions.rowDef=this.rowDef},t.prototype.registerRowActions=function(e){this.rowActions.push(e)},t.prototype.selectItem=function(e,t){t&&(this.serverData=t),_.isObject(e)&&(e=_.omitBy(e,function(e){return _.isArray(e)&&_.isEmpty(e)})),this.callDataGridMethod("selectRow",e,!0)},t.prototype.deselectItem=function(e){this.callDataGridMethod("deselectRow",e)},t.prototype.onDataNavigatorDataSetChange=function(e){var t;return this.__fullData=e,this.checkFiltersApplied(this.getSortExpr()),this._isClientSearch?(t=u.getClonedObject(this.__fullData),_.isObject(t)&&!_.isArray(t)&&(t=[t]),t=this.getSearchResult(t,this.filterInfo),t=this.getSortResult(t,this.sortInfo)):e},t.prototype.toggleMessage=function(e,t,n,i){e&&n&&this.app.notifyApp(n,t,i)},t.prototype.export=function(e){var t,n=_.isEmpty(this.sortInfo)?"":this.sortInfo.field+" "+this.sortInfo.direction,i={};this.fieldDefs.forEach(function(e){if("rowOperations"!==e.field&&e.show){var t={header:e.displayName};e.exportexpression?t.expression=e.exportexpression:t.field=e.field,i[e.field]=t}}),t={matchMode:"anywhereignorecase",filterFields:this.getFilterFields(this.filterInfo),orderBy:n,exportType:e.label,logicalOp:"AND",exportSize:this.exportdatasize,columns:i},!1!==this.invokeEventCallback("beforeexport",{$data:t})&&(t.fields=_.values(t.columns),this.datasource.execute(u.DataSource.Operation.DOWNLOAD,{data:t}))},t.prototype.expandRow=function(e){this.callDataGridMethod("expandRow",e)},t.prototype.collapseRow=function(e){this.callDataGridMethod("collapseRow",e)},t.prototype._documentClickBind=function(e){var t=e.target;this.$element[0].contains(t)||e.target.doctype||T($(t))||this.callDataGridMethod("saveRow")},t.prototype._redraw=function(e){var t=this;e?this.datagridElement.datatable(this.gridOptions):setTimeout(function(){t.callDataGridMethod("setColGroupWidths"),t.callDataGridMethod("addOrRemoveScroll")})},t.prototype.invokeActionEvent=function(e,t){u.$parseEvent(t)(this.viewParent,Object.assign(this.context,{$event:e}))},t.prototype.handleEvent=function(t,n,i,o){"select"!==n&&e.prototype.handleEvent.call(this,this.nativeElement,n,i,o)},t.prototype.triggerUploadEvent=function(e,t,n,i){var o={$event:e,row:i};this.columns[n]&&("change"===t&&(o.newVal=e.target.files,o.oldVal=this.columns[n]._oldUploadVal,this.columns[n]._oldUploadVal=o.newVal),this.columns[n].invokeEventCallback(t,o))},t.prototype.registerFormWidget=function(){},t.prototype.writeValue=function(){},t.prototype.registerOnChange=function(e){this._onChange=e},t.prototype.registerOnTouched=function(e){this._onTouched=e},t.initializeProps=w(),t.decorators=[{type:d.Component,args:[{selector:"[wmTable]",template:'<div class="panel-heading" *ngIf="title || subheading || iconclass || exportOptions.length || _actions.header.length">\n    <h3 class="panel-title">\n        <div class="pull-left">\n            <i class="app-icon panel-icon {{iconclass}}" *ngIf="iconclass"></i>\n        </div>\n        <div class="pull-left">\n            <div class="heading" [innerHTML]="title | trustAs: \'html\'"></div>\n            <div class="description" [innerHTML]="subheading | trustAs: \'html\'"></div>\n        </div>\n        <div class="panel-actions app-datagrid-actions" *ngIf="exportOptions.length || _actions.header.length">\n            <ng-container *ngFor="let btn of _actions.header"\n                          [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n            </ng-container>\n            <div wmMenu dropdown caption.bind="appLocale.LABEL_EXPORT" *ngIf="exportOptions.length"  autoclose="always" attr.name="{{name}}-export"\n                dataset.bind="exportOptions" select.event="export($item)" menuposition="down,left"></div>\n        </div>\n    </h3>\n</div>\n<div class="app-datagrid" #datagridElement></div>\n<div class="panel-footer clearfix" [hidden]="!_actions.footer.length && (!shownavigation || dataNavigator?.dataSize <= pagesize)">\n    <div class="app-datagrid-paginator" [hidden]="!dataNavigator?.dataSize || !shownavigation || dataNavigator?.dataSize <= pagesize">\n        <nav wmPagination show.bind="shownavigation" navigationalign.bind="navigationalign"\n             navigationsize.bind="navigationSize"\n             navigation.bind="navControls" showrecordcount.bind="showrecordcount" maxsize.bind="maxsize"\n             boundarylinks.bind="boundarylinks"\n             forceellipses.bind="forceellipses" directionlinks.bind="directionlinks"></nav>\n    </div>\n    <div class="app-datagrid-actions" *ngIf="_actions.footer.length">\n        <ng-container *ngFor="let btn of _actions.footer"\n                      [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n        </ng-container>\n    </div>\n</div>\n\n<ng-template #buttonRef let-btn="btn">\n    <button wmButton caption.bind="btn.displayName" show.bind="btn.show" class.bind="btn.class"  iconclass.bind="btn.iconclass" (click)="invokeActionEvent($event, btn.action)"\n            [ngClass]="{\'btn-sm\': spacing === \'condensed\', \'disabled-new\': btn.key === \'addNewRow\' && (isGridEditMode || isLoading)}"\n            type="button" shortcutkey.bind="btn.shortcutkey" tabindex.bind="btn.tabindex" hint.bind="btn.title" disabled.bind="btn.disabled" conditionalclass.bind="btn.conditionalclass" conditionalstyle.bind="btn.conditionalstyle"></button>\n</ng-template>\n\n<ng-template #anchorRef let-btn="btn">\n    <a wmAnchor caption.bind="btn.displayName" show.bind="btn.show" class.bind="btn.class"  iconclass.bind="btn.iconclass" (click)="invokeActionEvent($event, btn.action)"\n            [ngClass]="{\'btn-sm\': spacing === \'condensed\', \'disabled-new\': btn.key === \'addNewRow\' && (isGridEditMode || isLoading)}"\n            shortcutkey.bind="btn.shortcutkey" tabindex.bind="btn.tabindex" hint.bind="btn.title"\n            hyperlink.bind="btn.hyperlink" target.bind="btn.target" conditionalclass.bind="btn.conditionalclass" conditionalstyle.bind="btn.conditionalstyle"></a>\n</ng-template>\n\n<div hidden>\n    <ng-container #multiColumnFilterView></ng-container>\n\n    <ng-container #inlineEditView></ng-container>\n\n    <ng-container #inlineEditNewView></ng-container>\n\n    <ng-container #rowActionsView></ng-container>\n\n    <ng-container #rowExpansionActionView></ng-container>\n\n    <ng-container #customExprView></ng-container>\n\n    <ng-container #dynamicTable></ng-container>\n\n    <ng-container #rowDetailView></ng-container>\n\n    <div class="dynamic-table-container"></div>\n</div>\n',providers:[m.provideAs(t,p.NG_VALUE_ACCESSOR,!0),m.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:p.FormBuilder},{type:u.App},{type:u.DynamicComponentRefProvider},{type:c.ListComponent,decorators:[{type:d.Optional}]},{type:void 0,decorators:[{type:d.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:d.Attribute,args:["datasource.bind"]}]},{type:void 0,decorators:[{type:d.Attribute,args:["readonlygrid"]}]},{type:d.NgZone}]},t.propDecorators={dataNavigator:[{type:d.ViewChild,args:[l.PaginationComponent]}],_tableElement:[{type:d.ViewChild,args:["datagridElement"]}],rowActionTmpl:[{type:d.ContentChildren,args:["rowActionTmpl"]}],rowActionsViewRef:[{type:d.ViewChild,args:["rowActionsView",{read:d.ViewContainerRef}]}],filterTmpl:[{type:d.ContentChildren,args:["filterTmpl",{descendants:!0}]}],filterViewRef:[{type:d.ViewChild,args:["multiColumnFilterView",{read:d.ViewContainerRef}]}],inlineWidgetTmpl:[{type:d.ContentChildren,args:["inlineWidgetTmpl",{descendants:!0}]}],inlineEditViewRef:[{type:d.ViewChild,args:["inlineEditView",{read:d.ViewContainerRef}]}],inlineWidgetNewTmpl:[{type:d.ContentChildren,args:["inlineWidgetTmplNew",{descendants:!0}]}],inlineEditNewViewRef:[{type:d.ViewChild,args:["inlineEditNewView",{read:d.ViewContainerRef}]}],customExprTmpl:[{type:d.ContentChildren,args:["customExprTmpl",{descendants:!0}]}],customExprViewRef:[{type:d.ViewChild,args:["customExprView",{read:d.ViewContainerRef}]}],rowExpansionActionTmpl:[{type:d.ContentChildren,args:["rowExpansionActionTmpl"]}],rowExpansionTmpl:[{type:d.ContentChild,args:["rowExpansionTmpl"]}],rowDetailViewRef:[{type:d.ViewChild,args:["rowDetailView",{read:d.ViewContainerRef}]}],rowExpansionActionViewRef:[{type:d.ViewChild,args:["rowExpansionActionView",{read:d.ViewContainerRef}]}],dynamicTableRef:[{type:d.ViewChild,args:["dynamicTable",{read:d.ViewContainerRef}]}],onKeyPress:[{type:d.HostListener,args:["keypress",["$event"]]}]},t}(m.StylableComponent),I="new",A="edit",D="delete",N=function(){function e(e,t,n){this.table=e,this.dialogService=t,this.app=n,e.initiateSelectItem=this.initiateSelectItem.bind(this),e.updateVariable=this.updateVariable.bind(this),e.updateRecord=this.updateRecord.bind(this),e.deleteRecord=this.deleteRecord.bind(this),e.insertRecord=this.insertRecord.bind(this),e.editRow=this.editRow.bind(this),e.addNewRow=this.addNewRow.bind(this),e.addRow=this.addNewRow.bind(this),e.deleteRow=this.deleteRow.bind(this),e.onRecordDelete=this.onRecordDelete.bind(this),e.hideEditRow=this.hideEditRow.bind(this),e.saveRow=this.saveRow.bind(this),e.cancelRow=this.cancelRow.bind(this)}return e.prototype.selectItemOnSuccess=function(e,t,n){var i=this;setTimeout(function(){t||i.table.selectItem(e,i.table.dataset),u.triggerFn(n)},250)},e.prototype.initiateSelectItem=function(e,t,n,i,o){var r=this;"last"===e&&(i||(this.table.dataNavigator.dataSize+=1),this.table.isNavigationEnabled()||(e="current")),this.table.dataNavigator.calculatePagingValues(),this.table.dataNavigator.__fullData=this.table.__fullData,this.table.dataNavigator.navigatePage(e,null,!0,function(){(r.table.isNavigationEnabled()||i)&&r.selectItemOnSuccess(t,n,o)})},e.prototype.updateVariable=function(e,t){var n=this,i=this.table.datasource;if(i&&(i.execute(u.DataSource.Operation.FETCH_DISTINCT_VALUES),!this.table.isNavigationEnabled())){var o=this.table.sortInfo,r=o&&o.direction?o.field+" "+o.direction:"";m.refreshDataSource(i,{page:1,filterFields:this.table.getFilterFields(this.table.filterInfo),orderBy:r,matchMode:"anywhereignorecase"}).then(function(){u.$appDigest(),n.selectItemOnSuccess(e,!0,t)})}},e.prototype.insertSuccessHandler=function(e,t){if(e.error)this.table.invokeEventCallback("error",{$event:t.event,$operation:I,$data:e.error}),this.table.toggleMessage(!0,"error",this.table.errormessage||e.error),u.triggerFn(t.error,e);else{if(t.event){var n=$(t.event.target).closest("tr");this.table.callDataGridMethod("hideRowEditMode",n)}this.table.toggleMessage(!0,"success",this.table.insertmessage),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)?(this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),e,void 0,!1,t.callBack),this.updateVariable(e,t.callBack)):this.table.datasource.execute(u.DataSource.Operation.IS_API_AWARE)||this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),e,void 0,!1,t.callBack),u.triggerFn(t.success,e),this.table.invokeEventCallback("rowinsert",{$event:t.event,$data:e,row:e})}},e.prototype.generatePath=function(e){var t,n,i=this.table.widget.$attrs.get("datasetboundexpr");if(_.startsWith(e,"item")&&i){_.startsWith(i,"Widgets.")&&(i=u.extractCurrentItemExpr(i,this.table));for(var o=this.table.$element.parents(".app-list-item"),r=_.map(o,function(e){return _.parseInt($(e).attr("listitemindex"))}),a=r.length-1;a>=0;a--)i=i.replace("$i",r[a]);n=_.last(r),t=i.replace(/^Variables\..*\.dataSet([^.])*(\.|$)/g,"")}else{/^Variables\..*\.dataSet([\[][0-9]])/g.test(e)&&(n=_.parseInt(e.replace(/^Variables\..*\.dataSet([\[])/g,""))),t=e.replace(/^Variables\..*\.dataSet([^.])*(\.|$)/g,"")}return{path:t,index:n}},e.prototype.insertRecord=function(e){var t=this,n=this.table.datasource;if(n){var i={row:e.row,skipNotification:!0,period:e.period};if(n.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!n.execute(u.DataSource.Operation.IS_API_AWARE)){if(!n.execute(u.DataSource.Operation.IS_API_AWARE)){var o=this.generatePath(this.table.binddataset);return n.execute(u.DataSource.Operation.ADD_ITEM,{item:e.row,path:o.path,parentIndex:o.index}),void this.insertSuccessHandler(e.row,e)}n.execute(u.DataSource.Operation.INSERT_RECORD,i).then(function(n){t.insertSuccessHandler(n,e)},function(n){t.table.invokeEventCallback("error",{$event:e.event,$operation:I,$data:n}),t.table.toggleMessage(!0,"error",t.table.errormessage||n),u.triggerFn(e.error,n),u.triggerFn(e.callBack,void 0,!0)})}else this.table.invokeEventCallback("rowinsert",{$event:e.event,row:e.row})}},e.prototype.updateSuccessHandler=function(e,t){if(e.error)this.table.invokeEventCallback("error",{$event:t.event,$operation:A,$data:e.error}),this.table.toggleMessage(!0,"error",this.table.errormessage||e.error),u.triggerFn(t.error,e);else{if(t.event){var n=$(t.event.target).closest("tr");this.table.callDataGridMethod("hideRowEditMode",n)}this.table.toggleMessage(!0,"success",this.table.updatemessage),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)?(this.table.initiateSelectItem("current",e,void 0,!1,t.callBack),this.updateVariable(e,t.callBack)):this.table.datasource.execute(u.DataSource.Operation.IS_API_AWARE)||this.table.initiateSelectItem("current",e,void 0,!1,t.callBack),u.triggerFn(t.success,e),this.table.invokeEventCallback("rowupdate",{$event:t.event,$data:e,row:e})}},e.prototype.updateRecord=function(e){var t=this,n=this.table.datasource;if(n){var i={row:e.row,prevData:e.prevData,skipNotification:!0,period:e.period};if(n.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!n.execute(u.DataSource.Operation.IS_API_AWARE)){if(!n.execute(u.DataSource.Operation.IS_API_AWARE)){var o=this.generatePath(this.table.binddataset);return n.execute(u.DataSource.Operation.SET_ITEM,{prevItem:e.prevData,item:e.row,path:o.path,parentIndex:o.index}),void this.updateSuccessHandler(e.row,e)}n.execute(u.DataSource.Operation.UPDATE_RECORD,i).then(function(n){t.updateSuccessHandler(n,e)},function(n){t.table.invokeEventCallback("error",{$event:e.event,$operation:A,$data:n}),t.table.toggleMessage(!0,"error",t.table.errormessage||n),u.triggerFn(e.error,n),u.triggerFn(e.callBack,void 0,!0)})}else this.table.invokeEventCallback("rowupdate",{$event:e.event,row:e.row})}},e.prototype.onRecordDelete=function(e){var t;this.table.dataNavigator&&(this.table.dataNavigator.dataSize-=1,this.table.dataNavigator.calculatePagingValues(),t=this.table.dataNavigator.pageCount<this.table.dataNavigator.dn.currentPage?"prev":void 0,this.table.dataNavigator.__fullData=this.table.__fullData,this.table.dataNavigator.navigatePage(t,null,!0,function(){setTimeout(function(){u.triggerFn(e)},void 0,!1)}))},e.prototype.deleteSuccessHandler=function(e,t,n,i){t&&t.error?this.table.toggleMessage(!0,"error",this.table.errormessage||t.error):(this.onRecordDelete(i),this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_CRUD)&&this.updateVariable(e,i),this.table.toggleMessage(!0,"success",this.table.deletemessage),this.table.invokeEventCallback("rowdelete",{$event:n,$data:e,row:e}),this.table.invokeEventCallback("rowdeleted",{$event:n,$data:e,row:e}))},e.prototype.deleteFn=function(e){var t=this,n=this.table.datasource;if(n){if(n.execute(u.DataSource.Operation.SUPPORTS_CRUD)||!n.execute(u.DataSource.Operation.IS_API_AWARE)){if(!n.execute(u.DataSource.Operation.IS_API_AWARE)){var i=this.generatePath(this.table.binddataset);return n.execute(u.DataSource.Operation.REMOVE_ITEM,{item:e.row,path:i.path,parentIndex:i.index}),void this.deleteSuccessHandler(e.row,void 0,e.evt,e.callBack)}n.execute(u.DataSource.Operation.DELETE_RECORD,{row:e.row,skipNotification:!0,period:e.period}).then(function(n){t.deleteSuccessHandler(n,e.row,e.evt,e.callBack)},function(n){u.triggerFn(e.callBack,void 0,!0),t.table.invokeEventCallback("error",{$event:e.evt,$operation:D,$data:n}),t.table.toggleMessage(!0,"error",t.table.errormessage||n)})}else this.table.invokeEventCallback("rowdelete",{$event:e.evt,row:e.row});u.triggerFn(e.cancelRowDeleteCallback)}},e.prototype.deleteRecord=function(e){var t=this;if(!this.table.confirmdelete)return this.deleteFn(e),void u.triggerFn(e.cancelRowDeleteCallback);this.dialogService.showAppConfirmDialog({title:this.app.appLocale.MESSAGE_DELETE_RECORD||"Delete Record",iconclass:"wi wi-delete fa-lg",message:this.table.confirmdelete,oktext:this.table.deleteoktext,canceltext:this.table.deletecanceltext,onOk:function(){t.deleteFn(e),t.dialogService.closeAppConfirmDialog()},onCancel:function(){u.triggerFn(e.cancelRowDeleteCallback),t.dialogService.closeAppConfirmDialog()},onOpen:function(){$(".cancel-action").focus()}})},e.prototype.editRow=function(e){var t,n=this;e&&e.target?this.table.callDataGridMethod("toggleEditRow",e,{selectRow:!0,action:"edit"}):"form"===this.table.editmode||"dialog"===this.table.editmode?(t=e||this.table.selectedItems[0],this.table.gridOptions.beforeRowUpdate(t)):setTimeout(function(){(t=n.table.datagridElement.find("tr.active")).length&&n.table.callDataGridMethod("toggleEditRow",void 0,{$row:t,action:"edit"})})},e.prototype.addNewRow=function(){this.table.isGridEditMode||(this.table.callDataGridMethod("addNewRow"),this.table._liveTableParent&&this.table._liveTableParent.addNewRow())},e.prototype.deleteRow=function(e){var t,n=this;e&&e.target?this.table.callDataGridMethod("deleteRowAndUpdateSelectAll",e):setTimeout(function(){t=e||n.table.selectedItems[0],n.deleteRecord({row:t})})},e.prototype.hideEditRow=function(){var e=this.table.datagridElement.find("tr.row-editing");e.length&&this.table.callDataGridMethod("hideRowEditMode",e)},e.prototype.saveRow=function(){this.table.callDataGridMethod("saveRow")},e.prototype.cancelRow=function(){var e=this.table.datagridElement.find("tr.row-editing");e.length&&this.table.callDataGridMethod("cancelEdit",e)},e.decorators=[{type:d.Directive,args:[{selector:"[wmTableCUD]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Self},{type:d.Inject,args:[C]}]},{type:u.AbstractDialogService},{type:u.App}]},e}(),x=["null","empty","nullorempty","isnotnull","isnotempty"],M=function(e,t){if(u.isDefined(e)&&""!==e)return u.isNumberType(t)?_.toNumber(e):t===u.DataType.DATETIME?moment(e).valueOf():_.toString(e).toLowerCase()},k=function(e,t){var n,i=M(t.value,t.type);return u.isDefined(i)||_.includes(x,t.matchMode)?e=e.filter(function(e){var o;switch(n=t.field?M(_.get(e,t.field),t.type):_.values(e).join(" ").toLowerCase(),t.matchMode){case"start":o=_.startsWith(n,i);break;case"end":o=_.endsWith(n,i);break;case"exact":o=_.isEqual(n,i);break;case"notequals":o=!_.isEqual(n,i);break;case"null":o=_.isNull(n);break;case"isnotnull":o=!_.isNull(n);break;case"empty":o=_.isEmpty(n);break;case"isnotempty":o=!_.isEmpty(n);break;case"nullorempty":o=_.isNull(n)||_.isEmpty(n);break;case"lessthan":o=n<i;break;case"lessthanequal":o=n<=i;break;case"greaterthan":o=n>i;break;case"greaterthanequal":o=n>=i;break;default:o=u.isNumberType(t.type)?_.isEqual(n,i):_.includes(n,i)}return o}):e},L=function(e,t){var n=t&&t.field;n&&(e[n]={value:t.value,logicalOp:"AND"},t.matchMode&&(e[n].matchMode=t.matchMode))},F=function(e,t){t.field&&(e[t.field]={value:t.value,matchMode:t.matchMode,type:t.type})},B=function(){function e(e){this.table=e,e._searchSortHandler=this.searchSortHandler.bind(this),e.getSearchResult=this.getSearchResult.bind(this),e.getSortResult=this.getSortResult.bind(this),e.checkFiltersApplied=this.checkFiltersApplied.bind(this),e.getFilterFields=this.getFilterFields.bind(this),e.onRowFilterChange=this.onRowFilterChange.bind(this),e.onFilterConditionSelect=this.onFilterConditionSelect.bind(this),e.showClearIcon=this.showClearIcon.bind(this),e.clearRowFilter=this.clearRowFilter.bind(this),e.matchModeTypesMap=m.getMatchModeTypesMap(),e.matchModeMsgs=m.getMatchModeMsgs(e.appLocale),e.emptyMatchModes=x,e.getNavigationTargetBySortInfo=this.getNavigationTargetBySortInfo.bind(this),e.refreshData=this.refreshData.bind(this),e.clearFilter=this.clearFilter.bind(this)}return e.prototype.getNavigationTargetBySortInfo=function(){return this.table.sortInfo&&"desc"===this.table.sortInfo.direction&&_.includes(this.table.primaryKey,this.table.sortInfo.field)?"first":"last"},e.prototype.getFilterFields=function(e){var t={};return _.isArray(e)?_.forEach(e,function(e){L(t,e)}):L(t,e),t},e.prototype.resetSortStatus=function(e){var t;!_.isEmpty(this.table.sortInfo)&&this.table.datasource&&(t=this.table.sortInfo.field+" "+this.table.sortInfo.direction,(e=this.table.datasource.execute(u.DataSource.Operation.GET_OPTIONS).orderBy||e)&&(e=_.head(_.split(e,","))),t!==e&&(this.table.callDataGridMethod("resetSortIcons"),this.table.sortInfo={},this.table.setDataGridOption("sortInfo",{})))},e.prototype.clearFilter=function(e){var t;this.table.filterInfo={},"multicolumn"===this.table.filtermode?(this.table.fieldDefs.forEach(function(e){e.resetFilter&&e.resetFilter()}),e||this.table.onRowFilterChange()):"search"===this.table.filtermode&&((t=this.table.datagridElement).find('[data-element="dgSearchText"]').val(""),t.find('[data-element="dgFilterValue"]').val(""),e||t.find(".app-search-button").trigger("click"))},e.prototype.checkFiltersApplied=function(e){if(this.table.datasource)return this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_SERVER_FILTER)?(_.isEmpty(this.table.datasource.execute(u.DataSource.Operation.GET_OPTIONS).filterFields)&&_.isEmpty(this.table.filterInfo)&&this.clearFilter(!0),void this.resetSortStatus(e)):void(this.table.datasource.execute(u.DataSource.Operation.IS_PAGEABLE)&&this.resetSortStatus(e))},e.prototype.getSearchResult=function(e,t){return t?(_.isArray(t)?t.forEach(function(t){e=k(e,t)}):e=k(e,t),e):e},e.prototype.getSortResult=function(e,t){return t&&t.direction&&(e=_.orderBy(e,t.field,t.direction)),e},e.prototype.handleClientSideSortSearch=function(e,t,n){var i;this.table._isClientSearch=!0,i=this.table.isNavigationEnabled()?u.getClonedObject(this.table.__fullData):u.getClonedObject(this.table.dataset),"search"===n?this.table.filterInfo=e:this.table.sortInfo=e,_.isObject(i)&&!_.isArray(i)&&(i=[i]),i=this.getSearchResult(i,this.table.filterInfo),i=this.getSortResult(i,this.table.sortInfo),this.table.serverData=i,"sort"===n&&this.table.invokeEventCallback("sort",{$event:t,$data:{data:this.table.serverData,sortDirection:this.table.sortInfo.direction,colDef:this.table.columns[this.table.sortInfo.field]}}),this.table.isNavigationEnabled()?(this.table.dataNavigator.dn.currentPage=1,this.table.dataNavigator.setPagingValues(i)):this.table.setGridData(this.table.serverData)},e.prototype.handleSinglePageSearch=function(e){this.table._isPageSearch=!0;var t=u.getClonedObject(this.table.gridData),n=this.table.datagridElement.find("tbody tr.app-datagrid-row");this.table.filterInfo=e,t=this.getSearchResult(t,e),_.forEach(this.table.gridData,function(e,i){var o=$(n[i]);_.find(t,function(t){return _.isEqual(t,e)})?o.show():o.hide()}),t&&t.length?(this.table.callDataGridMethod("setStatus","ready"),this.table.gridfirstrowselect&&!this.table.multiselect&&this.table.callDataGridMethod("selectFirstRow",!0,!0)):(this.table.callDataGridMethod("setStatus","nodata",this.table.nodatamessage),this.table.selecteditem=void 0),this.table.callDataGridMethod("updateSelectAllCheckboxState")},e.prototype.handleServerSideSearch=function(e){var t=this;if(this.table.filterInfo=e,this.table.datasource){var n=this.table.sortInfo,i=n&&n.direction?n.field+" "+n.direction:"",o=this.getFilterFields(e);m.refreshDataSource(this.table.datasource,{page:1,filterFields:o,orderBy:i}).then(function(){u.$appDigest()},function(){t.table.toggleMessage(!0,"error",t.table.nodatamessage)})}},e.prototype.handleSeverSideSort=function(e,t){var n=this;this.table.gridOptions.sortInfo.field=e.field,this.table.gridOptions.sortInfo.direction=e.direction,this.table.sortInfo=u.getClonedObject(e);var i=e&&e.direction?e.field+" "+e.direction:"",o=this.getFilterFields(this.table.filterInfo);m.refreshDataSource(this.table.datasource,{page:1,filterFields:o,orderBy:i}).then(function(i){u.$appDigest();var o=i&&i.data?i.data:i;n.table.invokeEventCallback("sort",{$event:t,$data:{data:o,sortDirection:e.direction,colDef:n.table.columns[e.field]}})})},e.prototype.searchHandler=function(e,t,n){var i=u.getClonedObject(e),o=this.table.datasource;if(o){var r={};_.isArray(i)?i.forEach(function(e){F(r,e)}):F(r,i),!1!==this.table.invokeEventCallback("beforefilter",{$event:t,$data:r,columns:r})&&(i=[],_.forEach(r,function(e,t){i.push({field:t,matchMode:e.matchMode,type:e.type,value:e.value})}),o.execute(u.DataSource.Operation.SUPPORTS_SERVER_FILTER)?this.handleServerSideSearch(i):o.execute(u.DataSource.Operation.IS_API_AWARE)&&o.execute(u.DataSource.Operation.IS_PAGEABLE)?this.handleSinglePageSearch(i):this.handleClientSideSortSearch(i,t,n))}},e.prototype.sortHandler=function(e,t,n){var i=this.table.datasource;i&&(i.execute(u.DataSource.Operation.IS_PAGEABLE)?this.handleSeverSideSort(e,t):this.handleClientSideSortSearch(e,t,n))},e.prototype.searchSortHandler=function(e,t,n){"search"===n?this.searchHandler(e,t,n):this.sortHandler(e,t,n)},e.prototype.showClearIcon=function(e){var t=this.table.rowFilter[e]&&this.table.rowFilter[e].value;return u.isDefined(t)&&""!==t&&null!==t},e.prototype.clearRowFilter=function(e){this.table.rowFilter&&this.table.rowFilter[e]&&(this.table.columns[e].resetFilter(),this.onRowFilterChange(e))},e.prototype.onFilterConditionSelect=function(e,t){var n=this;this.table.rowFilter[e]=this.table.rowFilter[e]||{},this.table.rowFilter[e].matchMode=t,_.includes(this.table.emptyMatchModes,t)?(this.table.columns[e].resetFilter(),this.table.onRowFilterChange()):u.isDefined(this.table.rowFilter[e].value)&&""!==this.table.rowFilter[e].value?this.table.onRowFilterChange():setTimeout(function(){n.table.columns[e].filterInstance.focus()})},e.prototype.getFilterOnFieldValues=function(e){var t=this;if(this.table.datasource&&this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API)){var n=e.field,i=this.table.fullFieldDefs,o=_.filter(i,{filteronfilter:n}),r=_.get(this.table.rowFilter,[n,"value"]);_.forEach(o,function(e){var n=e.filteronfilter,i=e.field,o={},a=e.filterwidget;m.isDataSetWidget(a)&&n!==i&&!e.isFilterDataSetBound&&(o[n]=u.isDefined(r)&&""!==r&&null!==r?{value:r}:{},a===u.FormWidgetType.AUTOCOMPLETE&&e.filterInstance.dataoptions?e.filterInstance.dataoptions.filterFields=o:t.table.datasource.execute(u.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS,{fields:i,filterFields:o}).then(function(t){e.filterdataset=t.data}))})}},e.prototype.onRowFilterChange=function(e){var t=this,n=[],i=_.find(this.table.fullFieldDefs,{field:e});_.forEach(this.table.rowFilter,function(e,o){(u.isDefined(e.value)&&""!==e.value||_.includes(t.table.emptyMatchModes,e.matchMode))&&(i&&o===i.field&&(e.type=e.type||i.type,e.matchMode=e.matchMode||_.get(t.table.matchModeTypesMap[e.type],0)),n.push({field:o,value:e.value,matchMode:e.matchMode,type:e.type}))}),this.table.gridOptions.searchHandler(n,void 0,"search"),i&&this.getFilterOnFieldValues(i)},e.prototype.refreshData=function(e){if(this.table.datasource){var t=e?this.table.dataNavigator.dn.currentPage:1,n=this.table.sortInfo,i=n&&n.direction?n.field+" "+n.direction:"",o=this.getFilterFields(this.table.filterInfo);m.refreshDataSource(this.table.datasource,{page:t,filterFields:o,orderBy:i})}},e.decorators=[{type:d.Directive,args:[{selector:"[wmTableFilterSort]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:d.Self},{type:d.Inject,args:[C]}]}]},e}(),G=function(){m.register("wm-table-action",new Map([["accessroles",m.PROP_STRING],["action",m.PROP_STRING],["caption",m.PROP_STRING],["class",m.PROP_STRING],["conditionalclass",m.PROP_ANY],["conditionalstyle",m.PROP_ANY],["disabled",g({value:!1},m.PROP_BOOLEAN)],["display-name",m.PROP_STRING],["hyperlink",m.PROP_STRING],["icon",m.PROP_STRING],["iconclass",m.PROP_STRING],["key",m.PROP_STRING],["position",g({value:"footer"},m.PROP_STRING)],["shortcutkey",m.PROP_STRING],["show",g({value:!0},m.PROP_BOOLEAN)],["tabindex",g({value:0},m.PROP_NUMBER)],["title",m.PROP_STRING],["target",m.PROP_STRING],["widget-type",g({value:"button"},m.PROP_STRING)]]))},j={widgetType:"wm-table-action",hostClass:""},V=function(e){function t(t,n){var i=e.call(this,t,j)||this;return i.table=n,i}return f(t,e),t.prototype.populateAction=function(){this.buttonDef={key:this.key,displayName:this["display-name"]||this.caption||"",show:this.show,class:this.class||"",iconclass:this.iconclass||"",title:_.isUndefined(this.title)?this["display-name"]||"":this.title,action:this.action,accessroles:this.accessroles,shortcutkey:this.shortcutkey,disabled:this.disabled,tabindex:this.tabindex,icon:this.icon,position:this.position,widgetType:this["widget-type"],hyperlink:this.hyperlink,target:this.target||"",conditionalclass:this.conditionalclass||"",conditionalstyle:this.conditionalstyle||{}},this._propsInitialized=!0},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateAction(),this.table.registerActions(this.buttonDef)},t.prototype.onPropertyChange=function(e,t){this._propsInitialized&&("display-name"===e?this.buttonDef.displayName=t:this.buttonDef[e]=t)},t.initializeProps=G(),t.decorators=[{type:d.Directive,args:[{selector:"[wmTableAction]",providers:[m.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:C,decorators:[{type:d.Optional}]}]},t}(m.BaseComponent),U=function(){m.register("wm-table-column",new Map([["accessroles",m.PROP_STRING],["backgroundcolor",m.PROP_STRING],["binding",m.PROP_STRING],["caption",m.PROP_STRING],["checkedvalue",m.PROP_STRING],["col-class",m.PROP_STRING],["col-ng-class",m.PROP_STRING],["currencypattern",m.PROP_STRING],["customExpression",m.PROP_BOOLEAN],["dataentrymode",g({value:"default"},m.PROP_STRING)],["datafield",m.PROP_STRING],["dataoptions",m.PROP_ANY],["dataset",m.PROP_ANY],["datasource",m.PROP_STRING],["datepattern",m.PROP_STRING],["debouncetime",g({value:250},m.PROP_NUMBER)],["defaultvalue",m.PROP_STRING],["disabled",m.PROP_BOOLEAN],["displayfield",m.PROP_STRING],["displaylabel",m.PROP_STRING],["editdatepattern",m.PROP_STRING],["edit-widget-type",m.PROP_STRING],["editinputtype",m.PROP_STRING],["exportexpression",m.PROP_STRING],["filterdataset",m.PROP_STRING],["filterdatafield",m.PROP_STRING],["filterdisplayfield",m.PROP_STRING],["filterdisplaylabel",m.PROP_STRING],["filterexpressions",g({value:"{}"},m.PROP_STRING)],["filtersearchkey",m.PROP_STRING],["filter-on",m.PROP_STRING],["filteronfilter",m.PROP_STRING],["filterplaceholder",m.PROP_STRING],["filterwidget",m.PROP_STRING],["filterinputtype",m.PROP_STRING],["formatpattern",m.PROP_STRING],["fractionsize",m.PROP_STRING],["generator",m.PROP_STRING],["limit",m.PROP_NUMBER],["matchmode",m.PROP_STRING],["maxchars",m.PROP_NUMBER],["maxvalue",m.PROP_NUMBER],["mobiledisplay",g({value:!0},m.PROP_BOOLEAN)],["minvalue",m.PROP_NUMBER],["pcdisplay",g({value:!0},m.PROP_BOOLEAN)],["period",m.PROP_BOOLEAN],["placeholder",m.PROP_STRING],["prefix",m.PROP_STRING],["primary-key",m.PROP_BOOLEAN],["readonly",m.PROP_BOOLEAN],["regexp",m.PROP_ANY],["related-entity-name",m.PROP_STRING],["required",m.PROP_BOOLEAN],["rowactionsposition",m.PROP_STRING],["searchkey",m.PROP_STRING],["searchable",g({value:!0},m.PROP_BOOLEAN)],["suffix",m.PROP_STRING],["show",g({value:!0},m.PROP_BOOLEAN)],["showdropdownon",g({value:"default"},m.PROP_STRING)],["sortable",g({value:!0},m.PROP_BOOLEAN)],["textalignment",g({value:"left"},m.PROP_STRING)],["textcolor",m.PROP_STRING],["type",g({value:"string"},m.PROP_STRING)],["uncheckedvalue",m.PROP_STRING],["validationmessage",m.PROP_STRING],["widget-type",m.PROP_STRING],["width",m.PROP_STRING]]))},W=function(){m.register("wm-table-column-group",new Map([["backgroundcolor",m.PROP_STRING],["caption",m.PROP_STRING],["col-class",m.PROP_STRING],["name",m.PROP_STRING],["textalignment",g({value:"center"},m.PROP_STRING)]]))},q={widgetType:"wm-table-column-group",hostClass:""},H=function(e){function t(t,n,i){var o=e.call(this,t,q)||this;return o.group=n,o.table=i,o.config={},o}return f(t,e),t.prototype.populateConfig=function(){this.config={field:this.name,displayName:this.caption||"",columns:[],isGroup:!0,accessroles:this.accessroles,textAlignment:this.textalignment||"center",backgroundColor:this.backgroundcolor,class:this["col-class"]}},t.prototype.onPropertyChange=function(t,n,i){"caption"===t?(this.config.displayName=n||"",this.table.callDataGridMethod("setColumnProp",this.config.field,"displayName",n,!0)):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateConfig(),m.setHeaderConfigForTable(this.table.headerConfig,this.config,this.group&&this.group.name)},t.initializeProps=W(),t.decorators=[{type:d.Directive,args:[{selector:"[wmTableColumnGroup]",providers:[m.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:t,decorators:[{type:d.SkipSelf},{type:d.Optional}]},{type:C,decorators:[{type:d.Optional}]}]},t}(m.BaseComponent),z={widgetType:"wm-table-column",hostClass:""},Y=["datafield","displayfield","placeholder","searchkey","matchmode","displaylabel","checkedvalue","uncheckedvalue","showdropdownon","dataentrymode","dataset"],K=["maxchars","regexp","minvalue","maxvalue","required"];Y=b(Y,K);var Q=function(){function e(e){this.widget=e}return e.prototype.focus=function(){this.widget.focus()},e.prototype.setProperty=function(e,t){e="value"===e?"datavalue":e,this.widget[e]=t},e.prototype.getProperty=function(e){return e="value"===e?"datavalue":e,this.widget[e]},e}(),X=function(e){function t(t,n,i,o,r,a){var s=e.call(this,t,z)||this;return s.appDefaults=n,s.table=i,s.group=o,s.bindfilterdataset=r,s.binddataset=a,s._debounceSetUpValidators=u.debounce(s.setUpValidators.bind(s,"inlineInstance"),250),s._debounceSetUpValidatorsNew=u.debounce(s.setUpValidators.bind(s,"inlineInstanceNew"),250),s}return f(t,e),Object.defineProperty(t.prototype,"dataoptions",{get:function(){return this._dataoptions},set:function(e){this._dataoptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datasource",{get:function(){return this._datasource},set:function(e){this._datasource=e},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateFieldDef(),m.setHeaderConfigForTable(this.table.headerConfig,{field:this.field,displayName:this.displayName},this.group&&this.group.name),this.table.registerColumns(this.widget),this._isRowFilter="multicolumn"===this.table.filtermode&&this.searchable,this._isInlineEditable=!this.readonly&&this.table.editmode!==m.EDIT_MODE.DIALOG&&this.table.editmode!==m.EDIT_MODE.FORM,this._isNewEditableRow=this._isInlineEditable&&this.table.editmode===m.EDIT_MODE.QUICK_EDIT&&this.table.shownewrow,this.setUpControls(),this._propsInitialized=!0},t.prototype.ngAfterContentInit=function(){var t=this;if(this._isRowFilter){var n=this._filterInstances.changes.subscribe(function(e){t.filterInstance=e.first&&e.first.widget,t.setUpFilterWidget()});this.registerDestroyListener(function(){return n.unsubscribe()})}if(this._isInlineEditable){var i=this._inlineInstances.changes.subscribe(function(e){t.inlineInstance=e.first&&e.first.widget,t.table.registerFormField(t.binding,new Q(t.inlineInstance)),t.setUpInlineWidget("inlineInstance")});if(this.registerDestroyListener(function(){return i.unsubscribe()}),this._isNewEditableRow){var o=this._inlineInstancesNew.changes.subscribe(function(e){t.inlineInstanceNew=e.first&&e.first.widget,t.setUpInlineWidget("inlineInstanceNew")});this.registerDestroyListener(function(){return o.unsubscribe()})}}e.prototype.ngAfterContentInit.call(this)},t.prototype.ngAfterViewInit=function(){this.filterTemplateRef&&this.table.renderDynamicFilterColumn(this.filterTemplateRef)},t.prototype.addFormControl=function(e){var t=e?this.binding+e:this.binding;this.table.ngform.addControl(t,this.table.fb.control(""))},t.prototype.getFormControl=function(e){var t=e?this.binding+e:this.binding;return this.table.ngform.controls[t]},t.prototype.setUpControls=function(){if(this._isInlineEditable){if(this.editWidgetType===u.FormWidgetType.UPLOAD)return;this.addFormControl();var e=this.getFormControl();if(e){var t=e.valueChanges.subscribe(this.onValueChange.bind(this));this.registerDestroyListener(function(){return t.unsubscribe()})}if(this._isNewEditableRow){this.addFormControl("_new");var n=this.getFormControl("_new");if(n){var i=n.valueChanges.subscribe(this.onValueChange.bind(this));this.registerDestroyListener(function(){return i.unsubscribe()})}}}if(this._isRowFilter&&(this.addFormControl("_filter"),this.filterControl=this.getFormControl("_filter"),this.filterControl)){var o=this.filterControl.valueChanges.subscribe(this.onFilterValueChange.bind(this));this.registerDestroyListener(function(){return o.unsubscribe()})}},t.prototype.resetFilter=function(){this.filterControl&&this.filterControl.setValue(""),this.filterwidget===u.FormWidgetType.AUTOCOMPLETE&&(this.filterInstance.query="",this.filterInstance.queryModel="")},t.prototype.onFilterValueChange=function(e){this.table.rowFilter[this.field].value=e},t.prototype.onValueChange=function(e){null!==e&&m.applyFilterOnField(this.table.datasource,this.widget,this.table.fieldDefs,e,{widget:"edit-widget-type"})},t.prototype.loadFilterData=function(){var e=this;this._isRowFilter&&m.isDataSetWidget(this.filterwidget)&&!this.bindfilterdataset&&(this.table.datasource.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API)?(this.relatedEntityName&&(this.widget["is-related"]=!0,this.widget["lookup-type"]=this.relatedEntityName,this.widget["lookup-field"]=_.last(_.split(this.field,"."))),this.filterwidget===u.FormWidgetType.AUTOCOMPLETE?(this.filterInstance.dataoptions=m.getDistinctFieldProperties(this.table.datasource,this),this.filterInstance.datasource=this.table.datasource):m.getDistinctValues(this.table.datasource,this.widget,"filterwidget").then(function(t){e._filterDataSet=t.data,e.setFilterWidgetDataSet()})):this.registerDestroyListener(u.$watch(this.table.binddataset,this.viewParent,{},function(t){return e.widget.filterdataset=t},m.getWatchIdentifier(this.widgetId,"filterdataset"))))},t.prototype.loadInlineWidgetData=function(){if(m.isDataSetWidget(this["edit-widget-type"])&&!this.binddataset&&!this.readonly){var e=this.table.datasource;if(this["related-entity-name"]&&this["primary-key"]){this.isDataSetBound=!0;var t=_.split(this.binding,".");m.fetchRelatedFieldData(e,this.widget,{relatedField:_.head(t),datafield:_.last(t),widget:"edit-widget-type"})}else e.execute(u.DataSource.Operation.SUPPORTS_DISTINCT_API)&&m.getDistinctValuesForField(e,this.widget,{widget:"edit-widget-type"})}},t.prototype.onDataSourceChange=function(){this.loadFilterData(),this.loadInlineWidgetData()},t.prototype.setFilterWidgetDataSet=function(){this.filterInstance&&(this.filterInstance.dataset=this._filterDataSet)},t.prototype.setUpFilterWidget=function(){var e=this;this.filterInstance.registerReadyStateListener(function(){if(m.isDataSetWidget(e.filterwidget)){var t=_.last(e.binding.split("."));e.filterInstance.dataset=e._filterDataSet,e.filterInstance.datafield=e.filterdatafield||t,e.filterInstance.displayfield=e.filterdisplayfield||t,e.filterwidget===u.FormWidgetType.AUTOCOMPLETE&&(e.filterInstance.displaylabel=e.filterdisplaylabel||t,e.filterInstance.searchkey=e.filtersearchkey||t)}e.filterwidget===u.FormWidgetType.TIME&&(e.filterInstance.timepattern=e.appDefaults.timeFormat||"hh:mm:ss a"),e.filterInstance.placeholder=e.filterplaceholder||""})},t.prototype.setUpValidators=function(e){var t=this.getFormControl("inlineInstanceNew"===e?"_new":void 0);if(t){var n=[];this.required&&(this.editWidgetType===u.FormWidgetType.CHECKBOX||this.editWidgetType===u.FormWidgetType.TOGGLE?n.push(p.Validators.requiredTrue):n.push(p.Validators.required)),this.maxchars&&n.push(p.Validators.maxLength(this.maxchars)),this.minvalue&&n.push(p.Validators.min(this.minvalue)),this.maxvalue&&n.push(p.Validators.max(this.maxvalue)),this.regexp&&n.push(p.Validators.pattern(this.regexp)),this[e]&&_.isFunction(this[e].validate)&&n.push(this[e].validate.bind(this[e])),t.setValidators(n),t.updateValueAndValidity()}},t.prototype.setInlineWidgetProp=function(e,t,n){"datepattern"===t&&this.editWidgetType===u.FormWidgetType.TIME&&(t="timepattern"),this[e]&&u.isDefined(n)&&(this[e][t]=n),K.includes(t)&&(this._debounceSetUpValidators(),this._debounceSetUpValidatorsNew())},t.prototype.setUpInlineWidget=function(e){var t=this;this[e].registerReadyStateListener(function(){m.isDataSetWidget(t["edit-widget-type"])&&(t[e].dataset=t.dataset),Y.forEach(function(n){t.setInlineWidgetProp(e,n,t[n])}),t[e].datasource=t._datasource,t[e].dataoptions=t._dataoptions,t.setInlineWidgetProp(e,"datepattern",t.editdatepattern)})},t.prototype.getStyleDef=function(){return"width: "+(this.width||"")+"; background-color: "+(this.backgroundcolor||"")+"; color: "+(this.textcolor||"")+";"},t.prototype.populateFieldDef=function(){if(this.width="px"===this.width?"":this.width||"",this.field=this.binding,this.displayName=this.caption||"",this.pcDisplay=this.pcdisplay,this.mobileDisplay=this.mobiledisplay,this.textAlignment=this.textalignment,this.backgroundColor=this.backgroundcolor,this.textColor=this.textcolor,this.primaryKey=this["primary-key"],this.relatedEntityName=this["related-entity-name"],this.style=this.getStyleDef(),this.class=this["col-class"],this.ngclass=this["col-ng-class"],this.formatpattern="toNumber"===this.formatpattern?"numberToString":this.formatpattern,this.searchable="blob"!==this.type&&"clob"!==this.type&&this.searchable,this.limit=this.limit?+this.limit:void 0,this.editWidgetType=this["edit-widget-type"]=this["edit-widget-type"]||m.getEditModeWidget(this),this.filterOn=this["filter-on"],this.readonly=u.isDefined(this.getAttr("readonly"))?"true"===this.getAttr("readonly"):this["related-entity-name"]?!this["primary-key"]:_.includes(["identity","uniqueid","sequence"],this.generator),this.filterwidget=this.filterwidget||m.getDataTableFilterWidget(this.type||"string"),this.isFilterDataSetBound=!!this.bindfilterdataset,this.defaultvalue=m.getDefaultValue(this.defaultvalue,this.type,this.editWidgetType),u.isDateTimeType(this.type)&&"toDate"===this.formatpattern&&!this.datepattern){var e=u.getDisplayDateTimeFormat(this.type);this.type===u.DataType.DATE?this.datepattern=this.appDefaults.dateFormat||e:this.type===u.DataType.TIME?this.datepattern=this.appDefaults.timeFormat||e:this.type!==u.DataType.TIMESTAMP&&this.type!==u.DataType.DATETIME||(this.datepattern=this.appDefaults.dateTimeFormat||e)}},t.prototype.onPropertyChange=function(t,n,i){if(this._propsInitialized){switch(t){case"caption":this.displayName=n||"",this.setProperty("displayName",this.displayName);break;case"defaultvalue":this.defaultvalue=m.getDefaultValue(this.defaultvalue,this.type,this.editWidgetType);break;case"show":this.table.redraw(!0);break;case"filterdataset":this._filterDataSet=n,this.setFilterWidgetDataSet();break;case"editdatepattern":this.setInlineWidgetProp("inlineInstance","datepattern",n),this.setInlineWidgetProp("inlineInstanceNew","datepattern",n);break;default:Y.includes(t)&&(this.setInlineWidgetProp("inlineInstance",t,n),this.setInlineWidgetProp("inlineInstanceNew",t,n))}e.prototype.onPropertyChange.call(this,t,n,i)}},t.prototype.setProperty=function(e,t){switch(this[e]=t,e){case"displayName":this.table.callDataGridMethod("setColumnProp",this.field,e,t);break;default:this.table.redraw(!0)}},t.initializeProps=U(),t.decorators=[{type:d.Directive,args:[{selector:"[wmTableColumn]",providers:[m.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:u.AppDefaults},{type:C,decorators:[{type:d.Optional}]},{type:H,decorators:[{type:d.Optional}]},{type:void 0,decorators:[{type:d.Attribute,args:["filterdataset.bind"]}]},{type:void 0,decorators:[{type:d.Attribute,args:["dataset.bind"]}]}]},t.propDecorators={_filterInstances:[{type:d.ContentChildren,args:["filterWidget"]}],_inlineInstances:[{type:d.ContentChildren,args:["inlineWidget"]}],_inlineInstancesNew:[{type:d.ContentChildren,args:["inlineWidgetNew"]}],customExprTmpl:[{type:d.ContentChild,args:["customExprTmpl"]}],filterTemplateRef:[{type:d.ContentChild,args:["filterTmpl"]}]},t}(m.BaseComponent),Z=function(){m.register("wm-table-row",new Map([["class",m.PROP_STRING],["closeothers",g({value:!0},m.PROP_BOOLEAN)],["content",m.PROP_STRING],["columnwidth",g({value:"30px"},m.PROP_STRING)],["collapseicon",m.PROP_STRING],["expandicon",m.PROP_STRING],["height",m.PROP_STRING],["position",g({value:"0"},m.PROP_STRING)]]))},J={widgetType:"wm-table-row",hostClass:""},ee=function(e){function t(t,n){var i=e.call(this,t,J)||this;return i.table=n,i}return f(t,e),t.prototype.populateConfig=function(){this.config={closeothers:this.closeothers,content:this.content,columnwidth:this.columnwidth,expandicon:this.expandicon,collapseicon:this.collapseicon,height:this.height,position:this.position}},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateConfig(),this.table.registerRow(this.config,this)},t.prototype.onPropertyChange=function(e,t){"content"===e&&this.config&&(this.config.content=this.content)},t.initializeProps=Z(),t.decorators=[{type:d.Directive,args:[{selector:"[wmTableRow]",providers:[m.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:C,decorators:[{type:d.Optional},{type:d.SkipSelf}]}]},t}(m.BaseComponent),te=function(){m.register("wm-table-row-action",new Map([["accessroles",m.PROP_STRING],["action",m.PROP_STRING],["caption",m.PROP_STRING],["class ",g({value:"btn-secondary"},m.PROP_STRING)],["disabled",g({value:!1},m.PROP_BOOLEAN)],["display-name",m.PROP_STRING],["hyperlink",m.PROP_STRING],["iconclass",m.PROP_STRING],["key",m.PROP_STRING],["show",g({value:!0},m.PROP_BOOLEAN)],["tabindex",g({value:0},m.PROP_NUMBER)],["target",m.PROP_STRING],["title",m.PROP_STRING],["widget-type",g({value:"button"},m.PROP_STRING)]]))},ne={widgetType:"wm-table-row-action",hostClass:""},ie={},oe=function(e){function t(t,n,i){var o=e.call(this,t,ne)||this;return o.table=n,i[0].editRow=function(e){return o.table.editRow(e)},i[0].deleteRow=function(e){return o.table.deleteRow(e)},i[0].addNewRow=function(e){return o.table.addNewRow(e)},o}return f(t,e),t.prototype.getTitle=function(){return _.isUndefined(this.title)?this["display-name"]||"":this.title},t.prototype.populateAction=function(){this.buttonDef={key:this.key,displayName:this["display-name"]||this.caption||"",show:this.show,class:this.class||"",iconclass:this.iconclass||"",title:this.getTitle(),action:this.action,accessroles:this.accessroles,disabled:this.disabled,tabindex:this.tabindex?+this.tabindex:void 0,widgetType:this["widget-type"]||"button",hyperlink:this.hyperlink,target:this.target||"",conditionalclass:this.conditionalclass||"",conditionalstyle:this.conditionalstyle||{}}},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateAction(),this.table.registerRowActions(this.buttonDef)},t.initializeProps=te(),t.decorators=[{type:d.Directive,args:[{selector:"[wmTableRowAction]",providers:[m.provideAsWidgetRef(t),{provide:m.Context,useValue:ie,multi:!0}]}]}],t.ctorParameters=function(){return[{type:d.Injector},{type:C,decorators:[{type:d.Optional}]},{type:Array,decorators:[{type:d.Self},{type:d.Inject,args:[m.Context]}]}]},t}(m.BaseComponent),re=[C,N,B,V,X,H,ee,oe],ae=function(){function e(){}return e.decorators=[{type:d.NgModule,args:[{imports:[o.BasicModule,i.BsDropdownModule,t.CommonModule,p.FormsModule,p.ReactiveFormsModule,r.InputModule,c.ListModule,a.MenuModule,l.PaginationModule,n.TooltipModule,m.WmComponentsModule],declarations:b(re),exports:b(re),entryComponents:[]}]}],e}();e.\u0275d=V,e.\u0275e=G,e.\u0275g=H,e.\u0275h=W,e.\u0275f=X,e.\u0275i=U,e.\u0275b=N,e.\u0275c=B,e.\u0275l=oe,e.\u0275m=te,e.\u0275j=ee,e.\u0275k=Z,e.\u0275a=w,e.TableModule=ae,e.TableComponent=C,e.\u02750=E,e.\u02751=S,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs/operators"),require("@wm/core"),require("@wm/components/data/table"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/data/live-table",["exports","@angular/common","@angular/core","rxjs/operators","@wm/core","@wm/components/data/table","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.livetable={}),e.ng.common,e.ng.core,e.rxjs.operators,e.wm.core,e.wm.components.data.table,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-livetable",new Map([["class",a.PROP_STRING],["formlayout",a.PROP_STRING],["name",a.PROP_STRING],["show",l({value:!0},a.PROP_BOOLEAN)]]))},d={widgetType:"wm-livetable",hostClass:"app-livegrid"},m=function(e){function t(t,n,i,o,r,s,l){var c=e.call(this,t,d)||this;return c.dialogService=o,c.app=r,c.$queue=[],c.tableOptions={multiselect:!1,setGridEditMode:""},a.styler(c.nativeElement,c),"dialog"===s&&(c.isLayoutDialog=!0,c.dialogId=l),c}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.ngAfterContentInit=function(){var t=this;e.prototype.ngAfterContentInit.call(this),this.table&&(this.table._liveTableParent=this,this.table.datagridElement.datatable("option",this.tableOptions),this.table.selectedItemChange$.pipe(i.debounceTime(250)).subscribe(this.onSelectedItemChange.bind(this)),this.isLayoutDialog||this.form||this.table.datagridElement.datatable("option",{beforeRowUpdate:function(){t.showErrorMessage()},beforeRowDelete:function(){t.showErrorMessage()},beforeRowInsert:function(){t.showErrorMessage()}}))},t.prototype.openDialog=function(){this.dialogService.open(this.dialogId),o.$appDigest()},t.prototype.closeDialog=function(){this.dialogService.close(this.dialogId)},t.prototype.focusFirstInput=function(){var e=$(this.form.$element).find('[role="input"]:first');e.focus(),e.select()},t.prototype.onDialogOpen=function(){this.focusFirstInput()},t.prototype.setFormData=function(e){this.form.isDestroyed||(this.form.getWidget().formdata=e)},t.prototype._addNewRow=function(){this.form.isSelected=!0,this.setFormData(""),this.form.new(),this.isLayoutDialog&&this.onDialogOpen()},t.prototype.addNewRow=function(){if(this.isLayoutDialog)return this.openDialog(),void this.$queue.push(this._addNewRow.bind(this));this._addNewRow()},t.prototype._updateRow=function(e,t){this.setFormData(e),this.form.isSelected=!0,this.form.edit(),this.isLayoutDialog&&(this.form.isUpdateMode="dblclick"!==t||this.form.updateMode,this.onDialogOpen())},t.prototype.updateRow=function(e,t){if(this.isLayoutDialog)return this.openDialog(),void this.$queue.push(this._updateRow.bind(this,e,t));this._updateRow(e,t)},t.prototype.onSelectedItemChange=function(e){var t;this.form&&this.table&&(e&&e.length>0&&!this.form.isSelected&&(this.form.isSelected=!0),e&&e.length>0?(t=this.table.multiselect?e[0]:e[e.length-1],this.setFormData(o.getClonedObject(t)),this.form.isUpdateMode&&this.form.edit()):(this.form.isSelected=!1,this.setFormData(""),this.form.clearData()))},t.prototype.onCancel=function(){this.form.isUpdateMode=!1,this.isLayoutDialog&&this.closeDialog()},t.prototype.onResult=function(e,t,n,i){switch(this.form.isUpdateMode=o.isDefined(i)?i:!!n,e){case"insert":n?(this.table.gridfirstrowselect=!1,this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),t,!0)):this.table.initiateSelectItem(this.table.getNavigationTargetBySortInfo(),t);break;case"update":n?(this.table.gridfirstrowselect=!1,this.table.initiateSelectItem("current",t,!0)):this.table.initiateSelectItem("current",t);break;case"delete":this.table.onRecordDelete()}this.table.updateVariable(),this.isLayoutDialog&&(n?"insert"===e?this.form.new():"update"===e&&this.form.edit():this.closeDialog())},t.prototype.showErrorMessage=function(){this.app.notifyApp(this.appLocale.LABEL_ACCESS_DENIED,"error")},t.prototype.onFormReady=function(e){var t=this;this.form=e,setTimeout(function(){o.triggerFn(t.$queue.pop())})},t.initializeProps=u(),t.decorators=[{type:n.Component,args:[{selector:"[wmLiveTable]",template:"<ng-content></ng-content>",providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:o.AbstractDialogService},{type:o.App},{type:String,decorators:[{type:n.Attribute,args:["formlayout"]}]},{type:String,decorators:[{type:n.Attribute,args:["dialogid"]}]}]},t.propDecorators={table:[{type:n.ContentChild,args:[r.TableComponent]}]},t}(a.StylableComponent),h=[m],f=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,a.WmComponentsModule],declarations:p(h),exports:p(h),entryComponents:[]}]}],e}();e.\u0275a=u,e.LiveTableModule=f,e.LiveTableComponent=m,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/basic"),require("@wm/components/input"),require("@wm/components/dialogs/design-dialog"),require("@wm/components/prefab"),require("@wm/components/data/table"),require("@angular/forms"),require("rxjs/operators"),require("@wm/components/data/list"),require("@angular/core"),require("@wm/core"),require("@wm/components/base"),require("@wm/components/data/live-table")):"function"==typeof define&&define.amd?define("@wm/components/data/form",["exports","@angular/common","@wm/components/basic","@wm/components/input","@wm/components/dialogs/design-dialog","@wm/components/prefab","@wm/components/data/table","@angular/forms","rxjs/operators","@wm/components/data/list","@angular/core","@wm/core","@wm/components/base","@wm/components/data/live-table"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.data=e.wm.components.data||{},e.wm.components.data.form={}),e.ng.common,e.wm.components.basic,e.wm.components.input,e.wm.components.dialogs.designdialog,e.wm.components.prefab,e.wm.components.data.table,e.ng.forms,e.rxjs.operators,e.wm.components.data.list,e.ng.core,e.wm.core,e.wm.components.base,e.wm.components.data.livetable)}(this,function(e,t,n,i,o,r,a,s,l,c,p,u,d,m){"use strict";var h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function f(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var g=function(){return(g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function v(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}var w=new Map([["autocomplete",g({value:!1},d.PROP_BOOLEAN)],["captionalign",g({value:"left"},d.PROP_STRING)],["captionposition",g({value:"left"},d.PROP_STRING)],["captionsize",d.PROP_STRING],["captionwidth",g({value:"xs-12 sm-3 md-3 lg-3"},d.PROP_STRING)],["class",d.PROP_STRING],["collapsible",d.PROP_BOOLEAN],["dataset",d.PROP_ANY],["datasource",d.PROP_STRING],["expanded",g({value:!0},d.PROP_BOOLEAN)],["formdatasource",d.PROP_STRING],["name",d.PROP_STRING],["show",g({value:!0},d.PROP_BOOLEAN)],["showindevice",g({displayType:"inline-block",value:"all"},d.PROP_STRING)],["subheading",d.PROP_STRING],["tabindex",g({value:0},d.PROP_NUMBER)],["title",d.PROP_STRING]]),P=function(){u.isMobileApp()&&w.set("captionwidth",g({value:"xs-4 sm-4 md-4 lg-4"},d.PROP_STRING));var e=new Map(w);e.set("action",d.PROP_STRING),e.set("defaultmode",g({value:"Edit"},d.PROP_STRING)),e.set("metadata",d.PROP_STRING),e.set("method",d.PROP_STRING),e.set("postmessage",g({value:"Data posted successfully"},d.PROP_STRING)),e.set("target",d.PROP_STRING),e.set("enctype",d.PROP_STRING),e.set("errormessage",g({value:"An error occured. Please try again!"},d.PROP_STRING)),e.set("messagelayout",g({value:"Inline"},d.PROP_STRING)),e.set("formdata",d.PROP_STRING),e.set("novalidate",d.PROP_BOOLEAN),e.set("validationtype",g({value:"default"},d.PROP_STRING)),e.set("iconclass",d.PROP_STRING),d.register("wm-form",e)},O=function(){u.isMobileApp()&&w.set("captionwidth",g({value:"xs-4 sm-4 md-4 lg-4"},d.PROP_STRING));var e=new Map(w);e.set("defaultmode",g({value:"View"},d.PROP_STRING)),e.set("formlayout",g({value:"inline"},d.PROP_STRING)),e.set("insertmessage",g({value:"Record added successfully"},d.PROP_STRING)),e.set("updatemessage",g({value:"Record updated successfully"},d.PROP_STRING)),e.set("deletemessage",g({value:"Record deleted successfully"},d.PROP_STRING)),e.set("errormessage",g({value:"An error occured. Please try again!"},d.PROP_STRING)),e.set("messagelayout",g({value:"Toaster"},d.PROP_STRING)),e.set("formdata",d.PROP_STRING),e.set("novalidate",d.PROP_BOOLEAN),e.set("validationtype",g({value:"default"},d.PROP_STRING)),e.set("iconclass",d.PROP_STRING),d.register("wm-liveform",e)},R=function(){u.isMobileApp()&&w.set("captionwidth",g({value:"xs-4 sm-4 md-4 lg-4"},d.PROP_STRING));var e=new Map(w);e.set("autoupdate",d.PROP_BOOLEAN),e.set("enableemptyfilter",g({value:" "},d.PROP_STRING)),e.set("pagesize",g({value:20},d.PROP_NUMBER)),e.set("iconclass",g({value:"wi wi-filter-list"},d.PROP_STRING)),d.register("wm-livefilter",e)},E={widgetType:"wm-form",hostClass:"panel app-panel app-form"},T={widgetType:"wm-form",hostClass:"app-form app-login-form"},S={widgetType:"wm-liveform",hostClass:"panel app-panel app-liveform liveform-inline"},C={widgetType:"wm-livefilter",hostClass:"panel app-panel app-livefilter clearfix liveform-inline"},I=function(e,t,n){var i=E;return null!==e?i=S:null!==t?i=C:"app-login"===n&&(i=T),i},A=I,D=function(e,t){var n="";return _.forEach(e,function(e,t){n=n+" "+t+'="'+e+'"'}),'<wm-gridcolumn columnwidth="'+t+'">\n                  <wm-form-field '+n+"></wm-form-field>\n            </wm-gridcolumn>"},N=D,x=function(e,t){var n=e.find("form.ng-invalid:visible, [formControlName].ng-invalid:visible").first(),i=t;return n.is("form")&&(i=t&&t.controls[n.attr("formControlName")||n.attr("name")])?x(n,i):{ngForm:i,$ele:n}},M=x,k=function(e){e.valid||(e.controls?_.forEach(e.controls,function(e){k(e)}):e.markAsTouched())},L=k,F=function(e){function t(t,n,i,o,r,a,s,l,c,p,m,h,f,g,v,y,b,w,P){var O=e.call(this,t,I(v,y,b))||this;O.fb=n,O.app=i,O.dynamicComponentProvider=o,O.ngZone=r,O.parentList=a,O.parentForm=s,O.parentPrefab=l,O.parentPartial=c,O.onBeforeSubmitEvt=p,O.onSubmitEvt=m,O.onBeforeRenderEvt=h,O.binddataset=f,O.bindformdata=g,O._widgetClass="",O._captionClass="",O.formFields=[],O.formfields={},O.formWidgets={},O.filterWidgets={},O.buttonArray=[],O.dataoutput={},O.formdata={},O.statusMessage={caption:"",type:""},O.primaryKey=[],O._debouncedUpdateFieldSource=_.debounce(O.updateFieldSource,350),O.validationMessages=[],O._debouncedSubmitForm=u.debounce(function(e){O.ngZone.run(function(){O.submitForm(e)})},250),d.styler(O.nativeElement,O),O.isUpdateMode=!0,O.dialogId=O.nativeElement.getAttribute("dialogId"),O.ngform=n.group({}),O.bindingValue=w||P;var R=O.ngform.valueChanges.subscribe(O.updateDataOutput.bind(O));return O.registerDestroyListener(function(){return R.unsubscribe()}),O.elScope=O,O.addEventsToContext(O.context),O}return f(t,e),Object.defineProperty(t.prototype,"isLayoutDialog",{get:function(){return this._isLayoutDialog},set:function(e){e&&u.removeClass(this.nativeElement,"panel app-panel liveform-inline"),this._isLayoutDialog=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateMode",{get:function(){return this._isUpdateMode},set:function(e){this._isUpdateMode=e,this.formFields.forEach(function(t){t.setReadOnlyState(e)})},enumerable:!0,configurable:!0}),t.prototype.submit=function(e){this._debouncedSubmitForm(e)},t.prototype.onReset=function(){this.reset()},Object.defineProperty(t.prototype,"parentFormArray",{get:function(){return this.parentForm&&this.isParentList&&this.parentForm.ngform.get(this.parentList.name)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isParentList",{get:function(){if(this.parentList&&this.parentForm&&!u.isDefined(this._formIsInList)){var e=this.$element.closest('.app-livelist[name="'+this.parentList.name+'"]');e.length&&(this._formIsInList=!e.find('form[widget-id="'+this.parentForm.widgetId+'"]').length)}return u.isDefined(this._formIsInList)?this._formIsInList:this.parentList},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var e=this;setTimeout(function(){e.componentRefs.forEach(function(t){t.name&&(e.formWidgets[t.name]=t)})},250)},t.prototype.ngAfterViewInit=function(){this.parentForm&&this.parentForm.ngform&&this.isParentList&&(_.get(this.parentForm.ngform.controls,this.parentList.name)||this.parentForm.ngform.setControl(this.parentList.name,new s.FormArray([])),this.parentFormArray.push(this.ngform),this.formArrayIndex=this.parentFormArray.length-1),this.addInnerNgFormToForm(this.bindingValue)},t.prototype.findOperationType=function(){},t.prototype.addInnerNgFormToForm=function(e){if(this.parentForm&&this.parentForm.ngform){if(this.isParentList)return;var t=this.parentPrefab||this.parentPartial;if(t){var n=(this.parentPrefab?t.$element.find("[wmprefabcontainer]"):t.$element).find("form").first();_.get(n[0],"widget.widgetId")===this.widgetId&&(n.isParentList||n.siblings("form").length||(e=_.get(t,"name")))}for(var i=1,o=e;this.parentForm.ngform.controls.hasOwnProperty(o);)o=e+"_"+i,i++;this.formGroupName=o,this.parentForm.ngform.addControl(o,this.ngform)}},t.prototype.addEventsToContext=function(e){var t=this;e.cancel=function(){return t.cancel()},e.reset=function(){return t.reset()},e.save=function(e){return t.save(e)},e.saveAndNew=function(){return t.saveAndNew()},e.saveAndView=function(){return t.saveAndView()},e.delete=function(){return t.delete()},e.new=function(){return t.new()},e.edit=function(){return t.edit()},e.highlightInvalidFields=function(){return t.highlightInvalidFields()},e.filter=function(){return t.filter()},e.clearFilter=function(){return t.clearFilter()},e.submit=function(e){return t.submit(e)}},t.prototype.setValidationOnInnerForms=function(e){var t=this,n=this.getNativeElement().querySelectorAll(".app-form");_.forEach(n,function(n){var i=n.widget,o=_.get(i,"formGroupName")||i.name;u.isDefined(i.formArrayIndex)&&(o=o+"["+i.formArrayIndex+"]");for(var r=i;_.get(r,"parentForm");){var a=r.parentForm.formGroupName||r.parentForm.name;r.parentForm.parentFormArray&&(a=a+"["+r.parentForm.formArrayIndex+"]"),o=a+"."+o,r=r.parentForm}t.setValidationOnFields(i,o,e)})},t.prototype.setValidationOnFields=function(e,t,n){var i=this,o=e.ngform.controls,r=e.formFields;r&&_.forEach(o,function(o,a){var s=r.find(function(e){return e.key===a});!s||n&&!o.touched||(i.prepareValidationObj(o,a,s,t),i.prepareValidationObj.call(e,o,a,s,t))})},t.prototype.prepareValidationObj=function(e,t,n,i){var o=this.validationMessages.findIndex(function(e){return e.field===t&&e.fullyQualifiedFormName===i});e.invalid?-1===o?this.validationMessages.push({field:t,value:n.value,errorType:_.keys(e.errors),message:n.validationmessage||"",getElement:function(){return n.$element.find("[focus-target]")},formName:_.last(i.split(".")),fullyQualifiedFormName:i}):(this.validationMessages[o].value=n.value,this.validationMessages[o].errorType=_.keys(e.errors)):e.valid&&o>-1&&this.validationMessages.splice(o,1)},t.prototype.setValidationMsgs=function(e){!this.formFields.length&&_.isEmpty(this.ngform.controls)||(this.setValidationOnFields(this,this.name,e),this.setValidationOnInnerForms(e))},t.prototype.handleEvent=function(t,n,i,o){"submit"!==n&&e.prototype.handleEvent.call(this,this.nativeElement,n,i,o)},t.prototype.updateFieldSource=function(){var e=this;this.formdatasource&&this.formdatasource.execute(u.DataSource.Operation.IS_API_AWARE)||this.formdatasource&&!this.formdatasource.twoWayBinding||this.formFields.forEach(function(t){t.setFormWidget("datavaluesource",e.formdatasource),t.setFormWidget("binddatavalue",e.bindformdata+"."+t.key)})},t.prototype.highlightInvalidFields=function(){k(this.ngform)},t.prototype.validateFieldsOnSubmit=function(){if(this.setValidationMsgs(),"delete"!==this.operationType&&("html"===this.validationtype||"default"===this.validationtype)&&this.ngform&&this.ngform.invalid){if(this.ngform.invalid){"default"===this.validationtype&&this.highlightInvalidFields();var e=x(this.$element,this.ngform),t=e.ngForm,n=e.$ele;if((n=n.parent().find("[focus-target]")).length){n.hasClass("app-search-input")||n.focus();var i=t&&t.controls[n.attr("formControlName")||n.attr("name")];return i&&i.markAsTouched&&i.markAsTouched(),u.$appDigest(),!0}return!0}return!1}return!1},t.prototype.onPropertyChange=function(t,n,i){switch(t){case"captionalign":this.captionAlignClass="align-"+n;break;case"captionposition":case"captionwidth":this.setLayoutConfig();break;case"captionsize":this.captionsize=n;break;case"novalidate":this.widget.validationtype=!0===n||"true"===n?"none":"default";break;case"formdata":_.isArray(n)?this.setFormData(_.last(n)):this.setFormData(n),!this.isDataSourceUpdated&&this.datasource&&this.onDataSourceChange();break;case"defaultmode":this.isLayoutDialog||(this.updateMode=!(!n||"Edit"!==n),this.isUpdateMode=this.updateMode);break;case"datasource":this.onDataSourceChange();break;case"formdatasource":this.onFormDataSourceChange();break;case"metadata":this.generateFormFields();break;case"dataset":this.getFormFields().forEach(function(e){!e.isDataSetBound&&_.get(e.formWidget,"dataset$")&&e.formWidget.dataset$.next()});break;default:e.prototype.onPropertyChange.call(this,t,n,i)}},t.prototype.onResult=function(e,t,n){var i={$event:n,$data:e,$operation:this.operationType};this.invokeEventCallback("result",i),t?this.invokeEventCallback("success",i):this.invokeEventCallback("error",i)},t.prototype.toggleMessage=function(e,t,n,i){var o;e&&t?(o="error"===n&&this.errormessage?this.errormessage:t,"Inline"===this.messagelayout?(this.statusMessage={caption:o||"",type:n},this.messageRef&&this.messageRef.showMessage(this.statusMessage.caption,this.statusMessage.type)):this.app.notifyApp(o,n,i)):this.statusMessage.caption=""},t.prototype.clearMessage=function(){this.toggleMessage(!1)},t.prototype.setLayoutConfig=function(){var e;e=d.getFieldLayoutConfig(this.captionwidth,this.captionposition,_.get(this.app.selectedViewPort,"os")),this._widgetClass=e.widgetCls,this._captionClass=e.captionCls,u.$appDigest()},t.prototype.registerFormWidget=function(e){var t=e.name||e.key;this.formWidgets[t]=e},t.prototype.registerFormFields=function(e){this.formFields.push(e),this.formfields[e.key]=e,this.registerFormWidget(e),this._debouncedUpdateFieldSource(),this.parentForm&&(this.parentForm.formFields.push(e),this.parentForm.formfields[e.key]=e,this.parentForm.setFormData(this.parentForm.formdata,this.formFields,this.formdata||{}))},t.prototype.registerActions=function(e){this.buttonArray.push(e)},t.prototype.updateFormDataOutput=function(e){var t=this;_.forEach(this.ngform.value,function(n,i){_.find(t.formFields,{key:i})||(e[i]=n)}),this.dataoutput=e},t.prototype.constructDataObject=function(){var e=this,t={};return this.getFormFields().forEach(function(n){var i,o;if(o=null===(o=n.datavalue||n._control.value)||""===o?void 0:o,"file"===n.type&&(o=u.getFiles(e.name,n.key+"_formWidget",n.multiple)),i=n.key||n.target||n.name,n.form.widgetId!==e.widgetId&&n.form.formGroupName)(r=_.get(t,n.form.formGroupName,{}))[i]=o,_.set(t,n.form.formGroupName,r);else if(n.form.isParentList){var r;(r=_.get(t,n.form.parentList.name,[]))[n.form.formArrayIndex]=r[n.form.formArrayIndex]||{},r[n.form.formArrayIndex][i]=o,_.set(t,n.form.parentList.name,r)}else _.set(t,i,o)}),this.updateFormDataOutput(t),this.dataoutput},t.prototype.updateDataOutput=function(){this.constructDataObject(),this.ngform.touched&&this.setValidationMsgs(!0)},t.prototype.getFormFields=function(){var e=this;return _.filter(this.formFields,function(t){return t.form.name===e.name})},t.prototype.setFieldValue=function(e,t,n){var i=e.key||e.name,o=n||t;o&&(o.hasOwnProperty(i)?e.value=_.get(o,i):_.includes(i,".")&&o.hasOwnProperty(_.split(i,".")[0])&&(e.value=_.get(o,i)));var r=e.form.formGroupName;r&&_.get(t,r)&&this.setFormData.call(e.form,t[r]),_.get(e.form,"parentFormArray")&&this.setFormDataFromParentFormData.call(e.form,t)},t.prototype.setFormData=function(e,t,n){var i=this;(t||this.formFields).forEach(function(t){i.setFieldValue(t,e,n)}),this.constructDataObject()},t.prototype.resetFormState=function(){var e=this;this.validationMessages.length&&(this.validationMessages=[]),this.ngform&&setTimeout(function(){e.ngform.markAsUntouched(),e.ngform.markAsPristine()})},t.prototype.reset=function(){this.resetFormState(),this.formFields.forEach(function(e){e.value=""}),this.constructDataObject(),this.clearMessage()},t.prototype.submitForm=function(e){var t,n,i,o=this,r=this.datasource;this.validateFieldsOnSubmit()||(this.resetFormState(),t=u.getClonedObject(this.constructDataObject()),i={$event:e,$formData:t,$data:t},this.onBeforeSubmitEvt&&!1===this.invokeEventCallback("beforesubmit",i)||(this.onSubmitEvt||r?r?d.performDataOperation(r,t,{}).then(function(t){o.onResult(t,!0,e),o.toggleMessage(!0,o.postmessage,"success"),o.invokeEventCallback("submit",i)},function(t){n=o.errormessage||t.error||t,o.onResult(t,!1,e),o.toggleMessage(!0,n,"error"),o.invokeEventCallback("submit",i),u.$appDigest()}):(this.onResult({},!0,e),this.invokeEventCallback("submit",i)):this.onResult({},!0,e)))},t.prototype.showButtons=function(e){var t=this;return _.some(this.buttonArray,function(n){return _.includes(n.position,e)&&n.updateMode===t.isUpdateMode})},t.prototype.expandCollapsePanel=function(){this.collapsible&&(this.expanded=!this.expanded)},t.prototype.getNearestParentFormData=function(e){return e.parentForm?e.bindformdata||!_.get(e.parentForm,"formdata")||_.isEmpty(e.parentForm.formdata)?this.getNearestParentFormData(e.parentForm):e.parentForm.formdata:{}},t.prototype.setFormDataFromParentFormData=function(e){if(_.isEmpty(this.formdata)&&this.parentForm&&e)if(this.parentFormArray){var t=_.get(e,this.parentList.name);if(t)_.isArray(t)||(t=[t]),this.parentFormArray.patchValue(t),this.bindformdata||(this.formdata=t[this.formArrayIndex]),this.setFormData(this.formdata);else if(this.isParentList&&this.parentForm.formGroupName){var n=_.get(e,this.parentForm.formGroupName);this.setFormDataFromParentFormData(n)}}else this.setFormData(e)},t.prototype.onDataSourceChange=function(){if(_.get(this.formFields,"length")&&!this.bindformdata){this.isDataSourceUpdated=!0;var e=this.getNearestParentFormData(this);this.setFormDataFromParentFormData(e)}},t.prototype.onFormDataSourceChange=function(){this.updateFieldSource()},t.prototype.onFieldDefaultValueChange=function(e,t){e.value=d.parseValueByType(t,void 0,e.widgettype)},t.prototype.onFieldValueChange=function(){},t.prototype.generateFormFields=function(){return e=this,t=void 0,i=function(){var e,t,n,i,o,r,a,s,l,c,p;return v(this,function(d){switch(d.label){case 0:if(_.isUndefined(this._isGridLayoutPresent)&&(this._isGridLayoutPresent=this.$element.find(".panel-body [wmlayoutgrid]").length>0),this._isGridLayoutPresent?(t=this.$element.find(".form-elements [wmlayoutgrid]:first"),e=Number(t.attr("columns"))||1):((t=this.$element.find(".form-elements .dynamic-form-container")).length||(this.$element.find(".form-elements").prepend('<div class="dynamic-form-container"></div>'),t=this.$element.find(".form-elements .dynamic-form-container")),e=1),n=12/e,i="",o=0,s=this.metadata?this.metadata.data||this.metadata:[],this.formFields=[],_.isEmpty(s))return[2];if(this.onBeforeRenderEvt&&(a=this.invokeEventCallback("beforerender",{$metadata:s}))&&(s=a),!_.isArray(s))return[2];for(;s[o];){for(l="",r=0;r<e;r++)s[o]&&(l+=D(s[o],n)),o++;i+="<wm-gridrow>"+l+"</wm-gridrow>"}return this._isGridLayoutPresent||(i="<wm-layoutgrid>"+i+"</wm-layoutgrid>"),this.dynamicFormRef.clear(),this._dynamicContext||(this._dynamicContext=Object.create(this.viewParent),this._dynamicContext.form=this),[4,this.dynamicComponentProvider.getComponentFactoryRef("app-form-dynamic-"+this.widgetId,i,{noCache:!0,transpile:!0})];case 1:return c=d.sent(),p=this.dynamicFormRef.createComponent(c,0,this.inj),u.extendProto(p.instance,this._dynamicContext),t[0].appendChild(p.location.nativeElement),this.setFormData(this.formdata),[2]}})},new((n=void 0)||(n=Promise))(function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())});var e,t,n,i},Object.defineProperty(t.prototype,"mode",{get:function(){return this.operationType||this.findOperationType()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.ngform&&this.ngform.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.ngform&&this.ngform.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.ngform&&this.ngform.touched},enumerable:!0,configurable:!0}),t.prototype.invokeActionEvent=function(e,t){u.$parseEvent(t)(this.viewParent,Object.assign(this.context,{$event:e}))},t.prototype.ngOnDestroy=function(){var e=this.parentForm&&_.get(this.parentForm,"ngform.controls");e&&(_.get(this.parentList,"name")&&e.hasOwnProperty(this.parentList.name)&&this.parentForm.ngform.removeControl(this.parentList.name),this.formGroupName&&e.hasOwnProperty(this.formGroupName)?this.parentForm.ngform.removeControl(this.formGroupName):this.parentForm.ngform.removeControl(this.name))},t.initializeProps=P(),t.decorators=[{type:p.Component,args:[{selector:"form[wmForm]",template:'<ng-template #content><ng-content></ng-content></ng-template>\n\n<ng-container *ngIf="formlayout === \'page\'; then pageLayoutTemplate else defaultTemplate">\n</ng-container>\n\n<ng-template #defaultTemplate>\n    <div class="panel-heading" *ngIf="!isLayoutDialog && (title || subheading || iconclass || showButtons(\'header\'))">\n        <h3 class="panel-title">\n            <div class="pull-left">\n                <i class="app-icon panel-icon" aria-hidden="true" [ngClass]="iconclass" *ngIf="iconclass"></i>\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title | trustAs: \'html\'"></div>\n                <div class="description" [innerHTML]="subheading | trustAs: \'html\'"></div>\n            </div>\n            <div class="form-action panel-actions basic-btn-grp">\n                <ng-container *ngFor="let btn of buttonArray | filter : \'position\' : \'header\'"\n                              [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n                </ng-container>\n                <button type="button" class="app-icon wi panel-action" *ngIf="collapsible" title="Collapse/Expand"\n                        [ngClass]="expanded ? \'wi-minus\': \'wi-plus\'" (click)="expandCollapsePanel();"></button>\n            </div>\n        </h3>\n    </div>\n    <div class="panel-body" [ngClass]="{\'form-elements\': isLayoutDialog, \'form-body\': !isLayoutDialog}" [class.hidden]="!expanded">\n        <p wmMessage [hidden]="!statusMessage.caption.toString()" caption.bind="statusMessage.caption" type.bind="statusMessage.type"></p>\n        <div [ngClass]="{\'form-elements\': !isLayoutDialog, \'form-content\': isLayoutDialog}">\n            <ng-container *ngTemplateOutlet="content"></ng-container>\n        </div>\n        <div class="basic-btn-grp form-action panel-footer clearfix" [ngClass]="{\'modal-footer\': isLayoutDialog}" [class.hidden]="!expanded || !showButtons(\'footer\')">\n            <ng-container *ngFor="let btn of buttonArray | filter : \'position\' : \'footer\'"\n                          [ngTemplateOutlet]="btn.widgetType === \'button\' ? buttonRef : anchorRef" [ngTemplateOutletContext]="{btn:btn}">\n            </ng-container>\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #pageLayoutTemplate>\n    <ng-container *ngTemplateOutlet="content"></ng-container>\n</ng-template>\n\n<ng-template #buttonRef let-btn="btn">\n    <button  wmButton name="{{btn.key}}" caption.bind="btn.displayName" class.bind="btn.class" iconclass.bind="btn.iconclass" show.bind="btn.show"\n             (click)="invokeActionEvent($event, btn.action)" type.bind="btn.type" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey" disabled.bind="ngform.status === \'PENDING\' || btn.disabled"\n             tabindex.bind="btn.tabindex" [class.hidden]="btn.updateMode ? !isUpdateMode : isUpdateMode"></button>\n</ng-template>\n\n<ng-template #anchorRef let-btn="btn">\n    <a wmAnchor name="{{btn.key}}" caption.bind="btn.displayName" class.bind="btn.class" iconclass.bind="btn.iconclass" show.bind="btn.show"\n             (click)="invokeActionEvent($event, btn.action)" hint.bind="btn.title" shortcutkey.bind="btn.shortcutkey"\n             hyperlink.bind="btn.hyperlink" target.bind="btn.target"\n             tabindex.bind="btn.tabindex" [class.hidden]="btn.updateMode ? !isUpdateMode : isUpdateMode"></a>\n</ng-template>\n\n<ng-container #dynamicForm></ng-container>\n',providers:[d.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:p.Injector},{type:s.FormBuilder},{type:u.App},{type:u.DynamicComponentRefProvider},{type:p.NgZone},{type:c.ListComponent,decorators:[{type:p.Optional}]},{type:t,decorators:[{type:p.SkipSelf},{type:p.Optional}]},{type:r.PrefabDirective,decorators:[{type:p.SkipSelf},{type:p.Optional}]},{type:d.PartialDirective,decorators:[{type:p.SkipSelf},{type:p.Optional}]},{type:void 0,decorators:[{type:p.Attribute,args:["beforesubmit.event"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["submit.event"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["beforerender.event"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["dataset.bind"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["formdata.bind"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["wmLiveForm"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["wmLiveFilter"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["role"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["key"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["name"]}]}]},t.propDecorators={dynamicFormRef:[{type:p.ViewChild,args:["dynamicForm",{read:p.ViewContainerRef}]}],messageRef:[{type:p.ViewChild,args:[d.MessageComponent]}],componentRefs:[{type:p.ContentChildren,args:[d.WidgetRef,{descendants:!0}]}],action:[{type:p.HostBinding,args:["action"]}],submit:[{type:p.HostListener,args:["submit",["$event"]]}],onReset:[{type:p.HostListener,args:["reset"]}]},t}(d.StylableComponent),B=function(){function e(e,t,n,i,o,r){var a=this;this.componentInstance=n,this.name=o,this.key=r,this.fb=i,this.parent=e||t,this.ngform=this.parent.ngform,this.componentInstance.registerPropertyChangeListener(function(e,t){"datavalue"===e&&a._control?a._control.setValue(t):"name"!==e||a._control||a.addControl(a.key||t)})}return Object.defineProperty(e.prototype,"_control",{get:function(){var e=this.key||this.name;if(e)return this.ngform&&this.ngform.controls[e]},enumerable:!0,configurable:!0}),e.prototype.addControl=function(e){this.ngform.addControl(e,this.createControl())},e.prototype.createControl=function(){return this.fb.control(this.componentInstance.datavalue)},e.prototype.ngOnInit=function(){var e=this.key||this.name;e&&!this._control&&(this.addControl(e),this.parent.registerFormWidget(this.componentInstance))},e.decorators=[{type:p.Directive,args:[{selector:"[wmFormWidget]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:p.Optional},{type:p.Inject,args:[F]}]},{type:void 0,decorators:[{type:p.Optional},{type:p.Inject,args:[a.TableComponent]}]},{type:void 0,decorators:[{type:p.Self},{type:p.Inject,args:[d.WidgetRef]}]},{type:s.FormBuilder},{type:void 0,decorators:[{type:p.Attribute,args:["name"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["key"]}]}]},e}(),G=function(){d.register("wm-form-action",new Map([["accessroles",d.PROP_STRING],["action",d.PROP_STRING],["class",d.PROP_STRING],["binding",d.PROP_STRING],["disabled",d.PROP_BOOLEAN],["display-name",d.PROP_STRING],["hyperlink",d.PROP_STRING],["iconclass",d.PROP_STRING],["iconname",d.PROP_STRING],["key",d.PROP_STRING],["position",g({value:"footer"},d.PROP_STRING)],["shortcutkey",d.PROP_STRING],["show",g({value:!0},d.PROP_BOOLEAN)],["tabindex",g({value:0},d.PROP_NUMBER)],["target",d.PROP_STRING],["title",d.PROP_STRING],["type",g({value:"button"},d.PROP_STRING)],["update-mode",g({value:!0},d.PROP_BOOLEAN)],["widget-type",g({value:"button"},d.PROP_STRING)]]))},j={widgetType:"wm-form-action",hostClass:""},V=function(e){function t(t,n){var i=e.call(this,t,j)||this;return i.form=n,i}return f(t,e),t.prototype.populateAction=function(){this.buttonDef={key:this.key||this.binding,displayName:this["display-name"],show:this.show,class:this.class?this.class:"button"===this["widget-type"]?"btn-secondary":"",iconclass:this.iconclass||"",title:_.isUndefined(this.title)?this["display-name"]||"":this.title,action:this.action,accessroles:this.accessroles,shortcutkey:this.shortcutkey,disabled:this.disabled,tabindex:this.tabindex,iconname:this.iconname,type:this.type,updateMode:this["update-mode"],position:this.position,widgetType:this["widget-type"],hyperlink:this.hyperlink,target:this.target},this._propsInitialized=!0},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.populateAction(),this.form.registerActions(this.buttonDef)},t.prototype.onPropertyChange=function(e,t,n){if(this._propsInitialized)switch(e){case"display-name":this.buttonDef.displayName=t;default:this.buttonDef[e]=t}},t.initializeProps=G(),t.decorators=[{type:p.Directive,args:[{selector:"[wmFormAction]",providers:[d.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:p.Injector},{type:F,decorators:[{type:p.Optional}]}]},t}(d.BaseComponent),U=function(){var e=new Map([["dataentrymode",g({value:"default"},d.PROP_STRING)],["debouncetime",g({value:250},d.PROP_NUMBER)],["defaultvalue",d.PROP_STRING],["displayname",d.PROP_STRING],["display-name",d.PROP_STRING],["field",d.PROP_STRING],["filterexpressions",d.PROP_STRING],["filter-on",d.PROP_STRING],["generator",d.PROP_STRING],["hint",d.PROP_STRING],["inputtype",d.PROP_STRING],["is-primary-key",d.PROP_BOOLEAN],["is-range",d.PROP_BOOLEAN],["is-related",d.PROP_BOOLEAN],["isformfield",{value:!0}],["key",d.PROP_STRING],["limit",d.PROP_NUMBER],["lookup-type",d.PROP_STRING],["lookup-field",d.PROP_STRING],["name",d.PROP_STRING],["matchmode",d.PROP_STRING],["maxdefaultvalue",d.PROP_STRING],["maxplaceholder",d.PROP_STRING],["mobile-display",g({value:!0},d.PROP_BOOLEAN)],["period",d.PROP_BOOLEAN],["pc-display",g({value:!0},d.PROP_BOOLEAN)],["placeholder",d.PROP_STRING],["primary-key",d.PROP_BOOLEAN],["related-entity-name",d.PROP_STRING],["required",d.PROP_BOOLEAN],["show",g({value:!0},d.PROP_BOOLEAN)],["type",d.PROP_STRING],["validationmessage",d.PROP_STRING],["viewmodewidget",d.PROP_STRING],["widgettype",d.PROP_STRING]]),t=function(t){var n="wm-form-field-"+u.FormWidgetType[t],i=d.getWidgetPropsByType(n);e.forEach(function(e,t){null==i.get(t)&&i.set(t,e)})};for(var n in u.FormWidgetType)t(n)},W=function(){return{custom:!0}},q={image:"image/*",video:"video/*",audio:"audio/*"},H={pattern:"regexp",max:"maxvalue",min:"minvalue",required:"required",maxlength:"maxchars",mindate:"mindate",maxdate:"maxdate",excludedates:"excludedates",excludedays:"excludedays"},z={},Y=function(e){function t(t,n,i,o,r,a,s,l,c,p,d,m,h,f){var g=this,v={widgetType:"wm-form-field",hostClass:"",widgetSubType:"wm-form-field-"+(l||u.FormWidgetType.TEXT).trim()};return(g=e.call(this,t,v,new Promise(function(e){return g._initPropsRes=e}))||this)._validators=[],g.class="",g.binddataset=r,g.binddisplayexpression=a,g.binddisplaylabel=s,g.form=n,g.fb=i,g._fieldName=p||c,g.isRange=d,g.excludeProps=new Set(["type","name"]),g.widgettype=l,g.parentList=o,g.defaultValidatorMessages=[],g.notifyForFields=[],(g.binddataset||g.$element.attr("dataset"))&&(g.isDataSetBound=!0),f[0]._onFocusField=g._onFocusField.bind(g),f[0]._onBlurField=g._onBlurField.bind(g),g._debounceSetUpValidators=u.debounce(function(){return g.setUpValidators()},500),g}return f(t,e),t.prototype._onFocusField=function(e){this._activeField=!0,$(e.target).closest(".live-field").addClass("active")},t.prototype._onBlurField=function(e){$(e.target).closest(".live-field").removeClass("active"),this._activeField=!1},t.prototype.evaluateExpr=function(e,t){if(t||(t=Object.keys(e)[0]))return d.getEvaluatedData(e,{expression:t},this.viewParent)},t.prototype.getDisplayExpr=function(){var e=this,t=[],n=this.value,i=this.displayexpression||this.displayfield||this.displaylabel;return _.isObject(n)?(_.isArray(n)?_.forEach(n,function(n){_.isObject(n)&&t.push(e.evaluateExpr(n,i))}):t.push(this.evaluateExpr(n,i)),_.join(t,",")):null==n?"":this.value},t.prototype.getCaption=function(){return void 0===this.value||null===this.value?_.get(this.form.dataoutput,this._fieldName)||"":this.value},t.prototype.getDefaultValidators=function(){var e=[];return this.required&&!1!==this.show&&(this.widgettype===u.FormWidgetType.CHECKBOX||this.widgettype===u.FormWidgetType.TOGGLE?e.push(s.Validators.requiredTrue):e.push(s.Validators.required)),this.maxchars&&e.push(s.Validators.maxLength(this.maxchars)),this.minvalue&&e.push(s.Validators.min(this.minvalue)),this.maxvalue&&this.widgettype!==u.FormWidgetType.RATING&&e.push(s.Validators.max(this.maxvalue)),this.regexp&&e.push(s.Validators.pattern(this.regexp)),_.isFunction(this.formWidget.validate)&&e.push(this.formWidget.validate.bind(this.formWidget)),e},t.prototype.setUpValidators=function(e){if(!this.hasValidators&&(this._validators=this.getDefaultValidators(),e&&this._validators.push(e),this.ngform)){this._control.setValidators(this._validators);var t={};this.value===this.formWidget.prevDatavalue&&(t.emitEvent=!1),this._control.updateValueAndValidity(t)}},t.prototype.getPromiseList=function(e){var t=this,n=[];return _.forEach(e,function(e,i){var o=e;e instanceof Function&&e.bind&&(o=e(t,t.form)),o instanceof Promise&&n.push(o)}),n},t.prototype.setAsyncValidators=function(e){var t=this;this._asyncValidatorFn=function(){return function(){return Promise.all(t.getPromiseList(e)).then(function(){return t.validationmessage="",null},function(e){if(e.hasOwnProperty("errorMessage"))t.validationmessage=_.get(e,"errorMessage");else{var n=_.keys(e);t.validationmessage=e[n[0]].toString()}return e}).then(function(e){var n=function(){setTimeout(function(){"PENDING"===t._control.status?n():t.onStatusChange(t._control.status)},100)};return n(),e})}},this._control.setAsyncValidators([this._asyncValidatorFn()]),this._control.updateValueAndValidity()},t.prototype.isDefaultValidator=function(e){return _.get(u.VALIDATOR,_.toUpper(e))},t.prototype.setDefaultValidator=function(e,t){t.bind?this.watchDefaultValidatorExpr(t,e):(this.widget[e]=t,this[e]=t)},t.prototype.setValidators=function(e){var t=this;this.hasValidators=!0,this._syncValidators=[],_.forEach(e,function(n,i){if(n.bind)e[i]=n.bind(void 0,t,t.form),t._syncValidators.push(e[i]);else{var o=_.get(n,"type");if(t.defaultValidatorMessages[o]=_.get(n,"errorMessage"),t.isDefaultValidator(o)){var r=_.get(n,"validator");t.setDefaultValidator(o,r),e[i]=""}}}),this._syncValidators=_.filter(e,function(e){if(e)return e}),this.applyDefaultValidators()},t.prototype.observeOn=function(e){var t=this;_.forEach(e,function(e){var n=_.find(t.form.formfields,{key:e});n&&(n.notifyForFields||(n.notifyForFields=[]),n.notifyForFields.push(t))})},t.prototype.notifyChanges=function(){_.forEach(this.notifyForFields,function(e){e.validate()})},t.prototype.validate=function(){this.applyDefaultValidators(),this._asyncValidatorFn&&(this._control.setAsyncValidators([this._asyncValidatorFn()]),this._control.updateValueAndValidity()),this.form.touched&&this._control.markAsTouched()},t.prototype.setFormWidget=function(e,t){this.formWidget&&this.formWidget.widget&&(this.formWidget.widget[e]=t)},t.prototype.boundFn=function(e){return e()},t.prototype.watchDefaultValidatorExpr=function(e,t){var n=this,i=this.widgetId+"_"+t+"_formField";u.$unwatch(i),this.registerDestroyListener(u.$watch("boundFn(fn)",_.extend(this,this.viewParent),{fn:e},function(e,i){n.widget[t]=e,n.applyDefaultValidators()},i))},t.prototype.applyDefaultValidators=function(){var e=this.getDefaultValidators();this._control.setValidators(_.concat(this._syncValidators||[],e)),this._control.updateValueAndValidity(),this.setCustomValidationMessage()},t.prototype.setMaxFormWidget=function(e,t){this.formWidgetMax&&(this.formWidgetMax.widget[e]=t)},t.prototype.onPropertyChange=function(t,n,i){if("tabindex"!==t&&e.prototype.onPropertyChange.call(this,t,n,i),!this.excludeProps.has(t)){if(this.widgettype===u.FormWidgetType.UPLOAD)return"required"===t&&this._debounceSetUpValidators(),void e.prototype.onPropertyChange.call(this,t,n,i);switch(this.setFormWidget(t,n),"placeholder"!==t&&this.setMaxFormWidget(t,n),t){case"defaultvalue":this.form.onFieldDefaultValueChange(this,n);break;case"maxdefaultvalue":this.maxValue=n,this.setMaxFormWidget("datavalue",n),this.form.onMaxDefaultValueChange();break;case"maxplaceholder":this.setMaxFormWidget("placeholder",n);break;case"required":case"maxchars":case"minvalue":case"maxvalue":case"regexp":case"show":this._debounceSetUpValidators();break;case"primary-key":n&&this.form.setPrimaryKey(this._fieldName);break;case"display-name":this.displayname=n;break;case"readonly":this.setReadOnlyState()}}},t.prototype.onStyleChange=function(t,n,i){this.setFormWidget(t,n),this.setMaxFormWidget(t,n),e.prototype.onStyleChange.call(this,t,n,i)},Object.defineProperty(t.prototype,"datavalue",{get:function(){return this.formWidget&&this.formWidget.datavalue},set:function(e){this._control&&this.widgettype!==u.FormWidgetType.UPLOAD&&this._control.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.datavalue},set:function(e){this.datavalue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.formWidgetMax&&this.formWidgetMax.datavalue},set:function(e){this._maxControl&&this._maxControl.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_control",{get:function(){return this.ngform&&this.ngform.controls[this._fieldName]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_maxControl",{get:function(){return this.ngform&&this.ngform.controls[this._fieldName+"_max"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayValue",{get:function(){return this.formWidget&&this.formWidget.displayValue},enumerable:!0,configurable:!0}),t.prototype.createControl=function(){return this.fb.control(void 0,{validators:this._validators})},t.prototype.onValueChange=function(e){this.isDestroyed||(this.form.onFieldValueChange(this,e),this.notifyChanges(),this.form.touched&&this.setCustomValidationMessage())},t.prototype.onStatusChange=function(e){this.isDestroyed||(this.showPendingSpinner="PENDING"===e,"PENDING"===e?this.formWidget.disabled=!0:this.formWidget.disabled!==this.disabled&&(this.formWidget.disabled=this.disabled))},t.prototype.setValidationMessage=function(e){var t=this;setTimeout(function(){t.validationmessage=e,t.setUpValidators(W)})},t.prototype.setCustomValidationMessage=function(){var e=this._control.errors;if(e)if(e.hasOwnProperty("errorMessage"))this.validationmessage=_.get(e,"errorMessage");else{var t=_.keys(e)[0],n=_.get(H,t)||this.formWidget.validateType;this.validationmessage=n?_.get(this.defaultValidatorMessages,n)||this.validationmessage:""}},t.prototype.setReadOnlyState=function(){var e;e=!this.form.isUpdateMode||(!this["primary-key"]||this["is-related"]||this.period?this.readonly:!("assigned"===this.generator&&"update"!==this.form.operationType)),this.setFormWidget("readonly",e)},t.prototype.resetDisplayInput=function(){u.isDefined(this.value)&&""!==this.value||this.formWidget&&this.formWidget.resetDisplayInput&&this.formWidget.resetDisplayInput()},t.prototype.triggerUploadEvent=function(e,t){var n={$event:e};"change"===t&&(n.newVal=e.target.files,n.oldVal=this._oldUploadVal,this._oldUploadVal=n.newVal),this.invokeEventCallback(t,n)},t.prototype.registerFormField=function(){var e=this._fieldName;if(this.parentList&&this.form.parentList!==this.parentList){for(var t=1,n=e;this.ngform.controls.hasOwnProperty(n);)n=e+"_"+t,t++;this.ngform.addControl(n,this.createControl()),this._fieldName=n}else this.ngform.addControl(e,this.createControl());var i=this._control.valueChanges.pipe(l.debounceTime(200)).subscribe(this.onValueChange.bind(this));this.registerDestroyListener(function(){return i.unsubscribe()});var o=this._control.statusChanges.pipe(l.debounceTime(100)).subscribe(this.onStatusChange.bind(this));if(this.registerDestroyListener(function(){return o.unsubscribe()}),"true"===this.isRange){this.ngform.addControl(e+"_max",this.createControl());var r=this._maxControl.valueChanges.pipe(l.debounceTime(200)).subscribe(this.onValueChange.bind(this));this.registerDestroyListener(function(){return r.unsubscribe()})}this.value=_.get(this.form.formdata,this._fieldName)},t.prototype.ngOnInit=function(){this.ngform=this.form.ngform,this.registerFormField(),e.prototype.ngOnInit.call(this)},t.prototype.ngAfterContentInit=function(){var t=this;e.prototype.ngAfterContentInit.call(this),this.formWidget&&(this._initPropsRes(),this.setFormWidget("binddisplaylabel",this.binddisplaylabel),this.setFormWidget("binddisplayexpression",this.binddisplayexpression)),this.registerReadyStateListener(function(){if(t.key=t._fieldName||t.target||t.binding,t.viewmodewidget=t.viewmodewidget||d.getDefaultViewModeWidget(t.widgettype),t.widgettype===u.FormWidgetType.UPLOAD){var e;e=t.filetype?q[t.filetype]:"",t.permitted=e+(t.extensions?(e?",":"")+t.extensions:"")}u.isMobile()?t["mobile-display"]||(t.widget.show=!1):t["pc-display"]||(t.widget.show=!1),t.form.registerFormFields(t.widget),u.addForIdAttributes(t.nativeElement),t.setReadOnlyState()})},t.initializeProps=U(),t.decorators=[{type:p.Directive,args:[{selector:"[wmFormField]",exportAs:"wmFormField",providers:[d.provideAsWidgetRef(t),d.provideAs(t,s.NG_VALUE_ACCESSOR,!0),{provide:d.Context,useValue:z,multi:!0}]}]}],t.ctorParameters=function(){return[{type:p.Injector},{type:F},{type:s.FormBuilder},{type:c.ListComponent,decorators:[{type:p.Optional}]},{type:void 0,decorators:[{type:p.Attribute,args:["dataset.bind"]}]},{type:String,decorators:[{type:p.Attribute,args:["displayexpression.bind"]}]},{type:String,decorators:[{type:p.Attribute,args:["displaylabel.bind"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["widgettype"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["name"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["key"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["is-range"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["pc-display"]}]},{type:void 0,decorators:[{type:p.Attribute,args:["mobile-display"]}]},{type:Array,decorators:[{type:p.Self},{type:p.Inject,args:[d.Context]}]}]},t.propDecorators={formWidget:[{type:p.ContentChild,args:["formWidget"]}],formWidgetMax:[{type:p.ContentChild,args:["formWidgetMax"]}]},t}(d.StylableComponent),K=function(){function e(e,t,n){this.subscribedWidget=e,this.app=t,this.dialogService=n,e.addRow=this.addRow.bind(this),e.updateRow=this.updateRow.bind(this),e.deleteRow=this.deleteRow.bind(this),e.call=this.call.bind(this)}return e.prototype.addRow=function(){this.app.notify("wm-event",{eventName:d.Live_Operations.INSERT,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})},e.prototype.updateRow=function(){this.app.notify("wm-event",{eventName:d.Live_Operations.UPDATE,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})},e.prototype.deleteRow=function(){this.app.notify("wm-event",{eventName:d.Live_Operations.DELETE,widgetName:this.subscribedWidget.name,row:this.subscribedWidget.selecteditem})},e.prototype.successHandler=function(e,t){u.triggerFn(e.success,t)},e.prototype.errorHandler=function(e,t){this.app.notifyApp(t,"error","ERROR"),u.triggerFn(e.error,t)},e.prototype.getRecords=function(e,t){var n,i,o=this;"None"!==this.subscribedWidget.navigation&&this.subscribedWidget.dataNavigator?(i=this.subscribedWidget.dataNavigator,t===d.Live_Operations.DELETE?(i.dataSize-=1,i.calculatePagingValues(),n=i.pageCount<i.dn.currentPage?"prev":void 0):("last"===(n=t===d.Live_Operations.INSERT?"last":"current")&&(i.dataSize+=1),i.calculatePagingValues()),i.navigatePage(n,null,!0,function(t){o.successHandler(e,t)})):this.subscribedWidget.datasource.execute(u.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0}).then(function(t){o.successHandler(e,t)},function(t){o.errorHandler(e,t)})},e.prototype.performCUDOperation=function(e,t,n){var i=this;d.performDataOperation(this.subscribedWidget.datasource,e,{operationType:t}).then(function(e){e.error?i.errorHandler(n,e.error):(i.getRecords(n,t),"delete"===t&&i.app.notifyApp(i.app.appLocale.MESSAGE_DELETE_RECORD_SUCCESS,"success"))},function(e){i.errorHandler(n,e)})},e.prototype.insertRecord=function(e,t,n){this.performCUDOperation(e,t,n)},e.prototype.updateRecord=function(e,t,n){this.performCUDOperation(e,t,n)},e.prototype.deleteRecord=function(e,t,n){var i=this;this.dialogService.showAppConfirmDialog({title:this.app.appLocale.MESSAGE_DELETE_RECORD||"Delete Record",iconclass:"wi wi-delete fa-lg",message:this.subscribedWidget.confirmdelete||"Are you sure you want to delete this?",oktext:this.subscribedWidget.deleteoktext||"Ok",canceltext:this.subscribedWidget.deletecanceltext||"Cancel",onOk:function(){i.performCUDOperation(e,t,n),i.dialogService.closeAppConfirmDialog()},onCancel:function(){u.triggerFn(n.cancelDeleteCallback),i.dialogService.closeAppConfirmDialog()}})},e.prototype.performOperation=function(e,t){var n={row:t.row,prevData:{},rowData:{},transform:!0,skipNotification:!0};switch(e===d.Live_Operations.UPDATE&&(n.rowData=t.rowData,n.prevData=t.prevData),e){case d.Live_Operations.INSERT:this.insertRecord(n,e,t);break;case d.Live_Operations.UPDATE:this.updateRecord(n,e,t);break;case d.Live_Operations.DELETE:this.deleteRecord(n,e,t);break;case d.Live_Operations.READ:this.getRecords(t,e)}},e.prototype.call=function(e,t,n,i){t.success=n,t.error=i,this.performOperation(e,t)},e.decorators=[{type:p.Directive,args:[{selector:"[wmLiveActions]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:p.Self},{type:p.Inject,args:[c.ListComponent]}]},{type:u.App},{type:u.AbstractDialogService}]},e}(),Q="EMPTY_NULL_FILTER",X=function(){function e(e){var t=this;this.form=e,this._filter=u.debounce(function(e){t.filter(e)},250),e.clearFilter=this.clearFilter.bind(this),e.applyFilter=this.applyFilter.bind(this),e.filter=this.filter.bind(this),e.filterOnDefault=this.filterOnDefault.bind(this),e.execute=this.execute.bind(this),e.onFieldDefaultValueChange=this.onFieldDefaultValueChange.bind(this),e.onMaxDefaultValueChange=this.onMaxDefaultValueChange.bind(this),e.onDataSourceChange=this.onDataSourceChange.bind(this),e.onFieldValueChange=this.onFieldValueChange.bind(this),e.submitForm=this.submitForm.bind(this),e.registerFormWidget=this.registerFormWidget.bind(this)}return e.prototype.execute=function(e,t){return e===u.DataSource.Operation.LIST_RECORDS||e===u.DataSource.Operation.DOWNLOAD?this.applyFilter(t):e===u.DataSource.Operation.GET_OPTIONS?this._options||{}:e===u.DataSource.Operation.GET_PAGING_OPTIONS?this.form.pagination:this.form.datasource?e===u.DataSource.Operation.FETCH_DISTINCT_VALUES?d.fetchDistinctValues(this.form.datasource,this.form.formFields,{widget:"widgettype",enableemptyfilter:this.form.enableemptyfilter,EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}):this.form.datasource.execute(e,t):{}},e.prototype.onFieldDefaultValueChange=function(e,t){e.minValue=t,e.value=t,this.filterOnDefault()},e.prototype.onFieldValueChange=function(e,t){d.applyFilterOnField(this.form.datasource,e.widget,this.form.formFields,t,{EMPTY_VALUE:this.form.appLocale.LABEL_NO_VALUE}),this.form.autoupdate&&u.isDefined(t)&&this._filter()},e.prototype.onMaxDefaultValueChange=function(){var e=this;setTimeout(function(){e.filterOnDefault()})},e.prototype.onDataSourceChange=function(){var e=this,t=this.form.datasource;t&&(this.form.formFields.forEach(function(n){d.isDataSetWidget(n.widgettype)&&(d.getDistinctValuesForField(t,n.widget,{widget:"widgettype",enableemptyfilter:e.form.enableemptyfilter,EMPTY_VALUE:e.form.appLocale.LABEL_NO_VALUE}),d.applyFilterOnField(t,n.widget,e.form.formFields,n.value,{isFirst:!0,EMPTY_VALUE:e.form.appLocale.LABEL_NO_VALUE}))}),this._filter(this._options))},e.prototype.clearFilter=function(){var e=this;this.form.resetFormState(),this.form.formFields.forEach(function(t){!t.readonly&&t.show&&(t.widgettype!==u.FormWidgetType.AUTOCOMPLETE&&t.widgettype!==u.FormWidgetType.TYPEAHEAD||e.form.$element.find("div[name="+t.name+"] input").val(""),t["is-range"]?(t.minValue="",t.maxValue=""):(t.value="",t.resetDisplayInput()))}),setTimeout(function(){e._filter()})},e.prototype.submitForm=function(){this.filter()},e.prototype.applyFilter=function(e){return(e=e?e.data||e:{}).page=e.page||1,e.orderBy=u.isDefined(e.orderBy)?e.orderBy:this.orderBy,this.filter(e)},e.prototype.filter=function(e){var t=this;if(this.form.datasource){var n,i,o={},r={},a=1;a=(e=e||{}).page||a,n=u.isDefined(e.orderBy)?e.orderBy:this.orderBy||"",this.orderBy=n,this.form.formFields.forEach(function(e){var n,i="div[name="+e.name+"] input",o=t.form.$element;if((e.widgettype===u.FormWidgetType.AUTOCOMPLETE||e.widgettype===u.FormWidgetType.TYPEAHEAD)&&o)return n=o.find(i),void(e["is-range"]?r[e.field]={minValue:u.isDefined(e.minValue)?e.minValue:n.first().val(),maxValue:u.isDefined(e.maxValue)?e.maxValue:n.last().val()}:r[e.field]={value:u.isDefined(e.value)?e.value:n.val()});e["is-range"]?r[e.field]={minValue:e.minValue,maxValue:e.maxValue}:r[e.field]={value:e.value}});try{if(!1===(i=this.form.invokeEventCallback("beforeservicecall",{$data:r})))return;if(i&&i.error)return void this.form.toggleMessage(!0,i.error,"error","ERROR");this.form.formFields.forEach(function(e){e["is-range"]?(e._minValue=r[e.field].minValue,e._maxValue=r[e.field].maxValue):e._value=r[e.field].value})}catch(e){if("Abort"===e.message)return}return this.form.formFields.forEach(function(e){var n,i,r=e.field,a=e._minValue,s=e._maxValue;if(e["is-related"]&&(r+="."+e["lookup-field"]),e["is-range"])n=d.getRangeFieldValue(a,s),i=d.getRangeMatchMode(a,s),u.isDefined(n)&&(o[r]={value:n,matchMode:i,logicalOp:"AND"});else{switch(e.widgettype){case u.FormWidgetType.SELECT:case u.FormWidgetType.RADIOSET:d.getEnableEmptyFilter(t.form.enableemptyfilter)&&e._value===Q?(i=d.getEmptyMatchMode(t.form.enableemptyfilter),n=e._value):e.type===u.DataType.BOOLEAN?u.isDefined(e._value)&&""!==e._value&&(n=JSON.parse(e._value)):n=e._value;break;case u.FormWidgetType.CHECKBOXSET:case u.FormWidgetType.CHIPS:e._value&&e._value.length&&(n=e._value);break;case u.FormWidgetType.CHECKBOX:case u.FormWidgetType.TOGGLE:u.isDefined(e._value)&&""!==e._value&&(n=e.type===u.DataType.BOOLEAN?JSON.parse(e._value):e._value);break;default:n=e._value}u.isDefined(n)&&""!==n&&null!==n&&(o[r]={},i?(o[r].matchMode=i,n=void 0):(e.type===u.DataType.STRING||e.isRelated)&&(o[r].matchMode=i||e.matchmode||t.form.datasource.execute(u.DataSource.Operation.GET_MATCH_MODE)),o[r].value=n,o[r].logicalOp="AND",o[r].type=e.type)}}),e.exportType?this.form.datasource.execute(u.DataSource.Operation.DOWNLOAD,{data:{matchMode:"anywhereignorecase",filterFields:o,orderBy:n,exportType:e.exportType,logicalOp:"AND",exportSize:e.exportSize,fields:e.fields,fileName:e.fileName}}):this.form.datasource.execute(u.DataSource.Operation.LIST_RECORDS,{filterFields:o,orderBy:n,page:a,pagesize:this.form.pagesize||20,skipDataSetUpdate:!0,inFlightBehavior:"executeAll"}).then(function(e){var i=e.data;return t.form.pagination=e.pagination,i.error?(t.form.toggleMessage(!0,i.error,"error","ERROR"),t.form.onResult(i,!1)):(t._options={page:a,orderBy:n},t.form.result=u.getClonedObject(i),t.form.onResult(i,!0)),u.$appDigest(),t.form.result},function(e){return t.form.toggleMessage(!0,e,"error","ERROR"),t.form.onResult(e,!1),e})}},e.prototype.filterOnDefault=function(){_.find(this.form.formFields,function(e){return u.isDefined(e.value)||u.isDefined(e.minValue)||u.isDefined(e.maxValue)})&&this._filter(this._options)},e.prototype.registerFormWidget=function(e){var t=e.key||e.name;this.form.filterWidgets[t]=e},e.initializeProps=R(),e.decorators=[{type:p.Directive,args:[{selector:"[wmLiveFilter]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:p.Self},{type:p.Inject,args:[F]}]}]},e}(),Z=function(){function e(e,t,n,i,o){var r=this;this.form=e,this.datePipe=n,this.dialogService=i,this._debouncedSavePrevDataValues=u.debounce(function(){r.savePrevDataValues()},250),t&&!this.form.parentForm?(this.form._liveTableParent=t,this.form.isLayoutDialog=t.isLayoutDialog,t.onFormReady(this.form)):this.form.isLayoutDialog="dialog"===o,e.edit=this.edit.bind(this),e.cancel=this.cancel.bind(this),e.reset=this.reset.bind(this),e.new=this.new.bind(this),e.delete=this.delete.bind(this),e.save=this.save.bind(this),e.saveAndNew=this.saveAndNew.bind(this),e.saveAndView=this.saveAndView.bind(this),e.setPrimaryKey=this.setPrimaryKey.bind(this),e.constructDataObject=this.constructDataObject.bind(this),e.changeDataObject=this.setFormData.bind(this),e.setFormData=this.setFormData.bind(this),e.findOperationType=this.findOperationType.bind(this),e.clearData=this.clearData.bind(this),e.onFieldDefaultValueChange=this.onFieldDefaultValueChange.bind(this),e.onDataSourceChange=this.onDataSourceChange.bind(this),e.onFieldValueChange=this.onFieldValueChange.bind(this),e.submitForm=this.submitForm.bind(this)}return e.prototype.onDataSourceChange=function(){var e=this;_.get(this.form.formFields,"length")&&(this.form.isDataSourceUpdated=!0);var t=this.form.getFormFields();t.forEach(function(n){!n.isDataSetBound&&d.isDataSetWidget(n.widgettype)&&(n["is-related"]?(n.isDataSetBound=!0,d.fetchRelatedFieldData(e.form.datasource,n.widget,{relatedField:n.key,datafield:d.ALLFIELDS,widget:"widgettype"})):(d.getDistinctValuesForField(e.form.datasource,n.widget,{widget:"widgettype",enableemptyfilter:e.form.enableemptyfilter}),d.applyFilterOnField(e.form.datasource,n.widget,t,n.value,{isFirst:!0})))})},e.prototype.onFieldDefaultValueChange=function(e,t){"update"!==this.form.operationType&&(u.isDefined(t)&&null!==t&&""!==t&&"null"!==t?e.value=d.parseValueByType(t,e.type,e.widgettype):e.value=void 0,this._debouncedSavePrevDataValues())},e.prototype.onFieldValueChange=function(e,t){d.applyFilterOnField(this.form.datasource,e.widget,this.form.formFields,t)},e.prototype.getBlobURL=function(e,t,n){var i,o="";return null!=n&&this.form.datasource?(i=e[(this.form.datasource.execute(u.DataSource.Operation.GET_PRIMARY_KEY)||[])[0]],o+=this.form.datasource.execute(u.DataSource.Operation.GET_BLOB_URL,{primaryValue:i,columnName:t}),o+="?"+Math.random()):o},e.prototype.resetFileUploadWidget=function(e,t){this.form.$element.find('[name="'+e.key+'_formWidget"]').val(""),e._control.reset(),t||(e.href="",e.value=null)},e.prototype.setDefaultValues=function(){var e=this;this.form.formFields.forEach(function(t){e.onFieldDefaultValueChange(t,t.defaultvalue)})},e.prototype.setFormData=function(e,t){var n=this;e&&((t=t||this.form.formFields).forEach(function(t){var i=_.get(e,t.key||t.name);!function(e){return e.widgettype===u.DataType.TIME||e.type===u.DataType.TIME&&!e.widgettype}(t)?t.type===u.DataType.BLOB?(n.resetFileUploadWidget(t,!0),t.href=n.getBlobURL(e,t.key,i),t.value=_.isString(i)?"":i):n.form.setFieldValue(t,e):t.value=function(e){if(e){var t=(new Date).toDateString();return new Date(t+" "+e).getTime()}}(i)}),this.savePrevDataValues(),this.form.constructDataObject())},e.prototype.onDataSourceUpdate=function(e,t,n){t?this.form.new():(this.form.setFormData(e),this.closeDialog()),this.form.isUpdateMode=!u.isDefined(n)||n},e.prototype.savePrevformFields=function(){this.form.prevformFields=u.getClonedObject(this.form.formFields.map(function(e){return{key:e.key,type:e.type,widgettype:e.widgettype,outputformat:e.outputformat,value:e.value}}))},e.prototype.getPrevformFields=function(){var e=this;this.form.formFields.map(function(t){var n=e.form.prevformFields.find(function(e){return e.key===t.key});t.value=n.value})},e.prototype.getDataObject=function(){return this.form.operationType===d.Live_Operations.INSERT?{}:u.isDefined(this.form.prevDataObject)&&!u.isEmptyObject(this.form.prevDataObject)?u.getClonedObject(this.form.prevDataObject):u.getClonedObject(this.form.formdata||{})},e.prototype.constructDataObject=function(e){var t=this,n=this.getDataObject(),i=this.form.name;return(e?this.form.prevformFields:this.form.getFormFields()).forEach(function(e){var o,r,a=_.split(e.key,"."),s=a[0]||e.key;e.widgettype&&u.isDateTimeType(e.widgettype)||u.isDateTimeType(e.type)?e.value?(o=u.getValidDateObject(e.value),r=e.outputformat===u.DataType.TIMESTAMP||e.type===u.DataType.TIMESTAMP?e.value?o:null:e.outputformat?t.datePipe.transform(o,e.outputformat):e.value):r=void 0:r=e.type===u.DataType.BLOB?u.getFiles(i,s+"_formWidget",e.multiple):e.type===u.DataType.LIST?e.value||void 0:null===e.value||""===e.value?void 0:e.value,1===a.length?n[s]=r:(n[s]=n[s]||{},n[s][a[1]]=r)}),e?n:(this.form.updateFormDataOutput(n),this.form.dataoutput)},e.prototype.setPrimaryKey=function(e){this.form.primaryKey=this.form.primaryKey||[],-1===this.form.primaryKey.indexOf(e)&&this.form.primaryKey.push(e)},e.prototype.findOperationType=function(){var e,t=this,n=!1,i=this.form.datasource&&this.form.datasource.execute(u.DataSource.Operation.GET_OPERATION_TYPE);return i&&"read"!==i?i:(this.form.primaryKey&&!_.isEmpty(this.form.formdata)&&(1===this.form.primaryKey.length?this.form.formdata[this.form.primaryKey[0]]&&(e=d.Live_Operations.UPDATE):0===this.form.primaryKey.length?(_.forEach(this.form.formdata,function(e){e&&(n=!0)}),n&&(e=d.Live_Operations.UPDATE)):(n=_.some(this.form.primaryKey,function(e){if(t.form.formdata[e])return!0}))&&(e=d.Live_Operations.UPDATE)),e||d.Live_Operations.INSERT)},e.prototype.getPrevDataValues=function(){var e=_.fromPairs(_.map(this.form.prevDataValues,function(e){return[e.key,e.value]}));return this.form.formFields.forEach(function(t){t.value=e[t.key]||"",t.resetDisplayInput()}),e},e.prototype.savePrevDataValues=function(){this.form.prevDataValues=this.form.formFields.map(function(e){return{key:e.key,value:e.value}})},e.prototype.emptyDataModel=function(){var e=this;this.form.formFields.forEach(function(t){u.isDefined(t)&&(t.type===u.DataType.BLOB?e.resetFileUploadWidget(t):t.datavalue="")})},e.prototype.clearData=function(){this.form.toggleMessage(!1),this.emptyDataModel()},e.prototype.setReadonlyFields=function(){this.form.formFields.forEach(function(e){e.setReadOnlyState()})},e.prototype.edit=function(){this.form.resetFormState(),this.form.clearMessage(),this.form.operationType=d.Live_Operations.UPDATE,this.form.isSelected&&(this.savePrevformFields(),this.savePrevDataValues()),this.form.prevDataObject=u.getClonedObject(this.form.formdata||{}),this.setReadonlyFields(),this.form.isUpdateMode=!0,u.$appDigest()},e.prototype.reset=function(){var e,t=this;this.form.resetFormState(),e=this.getPrevDataValues(),this.form.formFields.forEach(function(n){n.type===u.DataType.BLOB&&(t.resetFileUploadWidget(n,!0),n.href=t.getBlobURL(e,n.key,n.value))}),this.form.constructDataObject()},e.prototype.closeDialog=function(){this.form.isLayoutDialog&&this.dialogService.close(this.form.dialogId)},e.prototype.cancel=function(){this.form.clearMessage(),this.form.isUpdateMode=!1,this.form.reset(),this.form.isSelected&&this.getPrevformFields(),this.form.isUpdateMode=!1,this.closeDialog(),this.form._liveTableParent&&this.form._liveTableParent.onCancel(),u.$appDigest()},e.prototype.new=function(){var e=this;this.form.resetFormState(),this.form.operationType=d.Live_Operations.INSERT,this.form.clearMessage(),this.form.isSelected&&this.savePrevformFields(),this.emptyDataModel(),setTimeout(function(){e.setDefaultValues(),e.savePrevDataValues(),e.form.constructDataObject()}),this.form.isUpdateMode=!0},e.prototype.delete=function(e){this.form.resetFormState(),this.form.operationType=d.Live_Operations.DELETE,this.form.prevDataObject=u.getClonedObject(this.form.formdata||{}),this.form.save(void 0,void 0,void 0,e)},e.prototype.saveAndNew=function(){this.save(void 0,!0,!0)},e.prototype.saveAndView=function(){this.save(void 0,!1)},e.prototype.submitForm=function(e){this.save(e)},e.prototype.save=function(e,t,n){var i=this;if(this.form.datasource){var o,r,a,s,l={};if(a=this.form.operationType=this.form.operationType||this.findOperationType(),!this.form.validateFieldsOnSubmit()){o=u.getClonedObject(this.form.constructDataObject()),r=this.form.prevformFields?this.form.constructDataObject(!0):o;try{if(!1===(s=this.form.invokeEventCallback("beforeservicecall",{$event:e,$operation:this.form.operationType,$data:o,options:l})))return;if(s&&s.error)return void this.form.toggleMessage(!0,s.error,"error")}catch(e){if("Abort"===e.message)return}if(this.form.operationType===d.Live_Operations.UPDATE&&this.form.ngform&&this.form.ngform.pristine&&this.form.isSelected&&_.isEqual(o,r))return this.form.toggleMessage(!0,this.form.appLocale.MESSAGE_NO_CHANGES,"info",""),void u.$appDigest();l.row=o,l.transform=!0,l.skipNotification=!0,a===d.Live_Operations.UPDATE&&(l.rowData=this.form.formdata,l.prevData=r),d.performDataOperation(this.form.datasource,l,{operationType:a}).then(function(o){var r=a===d.Live_Operations.INSERT?i.form.insertmessage:a===d.Live_Operations.UPDATE?i.form.updatemessage:i.form.deletemessage;a===d.Live_Operations.DELETE?(i.form.onResult(l.row,!0,e),i.emptyDataModel(),i.form.prevDataValues=[],i.form.isSelected=!1):i.form.onResult(o,!0,e),i.form.toggleMessage(!0,r,"success"),i.form._liveTableParent?i.form._liveTableParent.onResult(a,o,n,t):(i.form.datasource.execute(u.DataSource.Operation.LIST_RECORDS,{skipToggleState:!0}),i.onDataSourceUpdate(o,n,t))},function(t){i.form.onResult(t,!1,e),i.form.toggleMessage(!0,t,"error"),u.$appDigest()}).then(this.form.resetFormState.bind(this.form))}}},e.initializeProps=O(),e.decorators=[{type:p.Directive,args:[{selector:"[wmLiveForm]"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:p.Self},{type:p.Inject,args:[F]}]},{type:m.LiveTableComponent,decorators:[{type:p.Optional}]},{type:d.ToDatePipe},{type:u.AbstractDialogService},{type:String,decorators:[{type:p.Attribute,args:["formlayout"]}]}]},e}(),J=[F,B,V,Y,K,X,Z],ee=function(){function e(){}return e.decorators=[{type:p.NgModule,args:[{imports:[n.BasicModule,t.CommonModule,o.DesignDialogModule,i.InputModule,d.WmComponentsModule],declarations:b(J),exports:b(J),entryComponents:[]}]}],e}();e.\u0275e=V,e.\u0275f=G,e.\u0275g=Y,e.\u0275h=U,e.\u0275d=B,e.\u0275a=P,e.\u0275c=R,e.\u0275b=O,e.\u0275i=K,e.\u0275j=X,e.\u0275k=Z,e.FormModule=ee,e.FormComponent=F,e.\u02750=A,e.\u02751=N,e.\u02752=M,e.\u02753=L,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/basic"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/dialogs"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/iframe-dialog",["exports","@angular/common","@wm/components/basic","@wm/components/input","@angular/core","@wm/core","@wm/components/dialogs","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.iframedialog={}),e.ng.common,e.wm.components.basic,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.dialogs,e.wm.components.base)}(this,function(e,t,n,i,o,r,a,s){"use strict";var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var d=function(){s.register("wm-iframedialog",new Map([["animation",s.PROP_STRING],["class",s.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:s.PROP_BOOLEAN}],["encodeurl",c({value:!1},s.PROP_BOOLEAN)],["height",c({value:"400px"},s.PROP_STRING)],["iconclass",{value:"wi wi-globe",PROP_STRING:s.PROP_STRING}],["iconheight",s.PROP_STRING],["iconmargin",s.PROP_STRING],["iconurl",s.PROP_STRING],["iconwidth",s.PROP_STRING],["modal",c({value:!1},s.PROP_BOOLEAN)],["name",s.PROP_STRING],["oktext",c({value:"OK"},s.PROP_STRING)],["showactions",c({value:!0},s.PROP_BOOLEAN)],["showheader",c({value:!0},s.PROP_BOOLEAN)],["tabindex",c({value:0},s.PROP_NUMBER)],["title",c({value:"External Content"},s.PROP_STRING)],["url",c({value:"//www.wavemaker.com"},s.PROP_STRING)]]))},m="app-dialog modal-dialog app-iframe-dialog",h={widgetType:"wm-iframedialog"},f=function(e){function t(t,n,i,o){null==i&&(i=!1),null==o&&(o=!0);var a=!r.toBoolean(i)||"static";return e.call(this,t,h,{class:m+" "+(n||""),backdrop:a,keyboard:!r.toBoolean(i)})||this}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getTemplateRef=function(){return this.dialogTemplate},t.prototype.onOk=function(e){this.invokeEventCallback("ok",{$event:e})},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.register(this.viewParent)},t.initializeProps=d(),t.decorators=[{type:o.Component,args:[{selector:"div[wmIframeDialog]",template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n         *ngIf="showheader"\n    ></div>\n    <div wmDialogBody>\n        <div wmIframe encodeurl.bind="encodeurl" iframesrc.bind="url" height.bind="height" width.bind="width" hint.bind="hint"></div>\n    </div>\n    <div wmDialogFooter *ngIf="showactions">\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n',providers:[s.provideAsWidgetRef(t),s.provideAsDialogRef(t)]}]}],t.ctorParameters=function(){return[{type:o.Injector},{type:String,decorators:[{type:o.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:o.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:o.Attribute,args:["closable"]}]}]},t.propDecorators={dialogTemplate:[{type:o.ViewChild,args:["dialogTemplate"]}]},t}(a.BaseDialog),g=[f],v=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[n.BasicModule,t.CommonModule,a.DialogModule,i.InputModule,s.WmComponentsModule],declarations:u(g),exports:u(g),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275b=d,e.IframeDialogModule=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/dialogs"),require("@wm/components/dialogs/design-dialog"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/base"),require("@wm/components/data/form")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/login-dialog",["exports","@angular/common","@wm/components/dialogs","@wm/components/dialogs/design-dialog","@wm/components/input","@angular/core","@wm/core","@wm/components/base","@wm/components/data/form"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.logindialog={}),e.ng.common,e.wm.components.dialogs,e.wm.components.dialogs.designdialog,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.base,e.wm.components.data.form)}(this,function(e,t,n,i,o,r,a,s,l){"use strict";function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){function e(e,t){var n=this;this.contexts=e,this.dialogRef=t,this.contexts[0].doLogin=function(){return n.doLogin()}}return e.prototype.hideMsg=function(){this.msgCmp&&this.msgCmp.hideMessage()},e.prototype.showError=function(e){this.msgCmp&&this.msgCmp.showMessage(e,"error")},e.prototype.showLoading=function(){this.msgCmp&&this.msgCmp.showMessage("Loading...","loading")},e.prototype.onSuccess=function(){this.hideMsg()},e.prototype.onError=function(e){this.showError(e)},e.prototype.getLoginDetails=function(){return this.formCmp.first.dataoutput},e.prototype.doLogin=function(){var e=this.getLoginDetails(),t=this.dialogRef.eventsource;t&&(this.showLoading(),t.invoke({loginInfo:e},this.onSuccess.bind(this),this.onError.bind(this)))},e.prototype.ngAfterViewInit=function(){var e=this;this.dialogOpenSubscription=this.dialogRef.bsModal.onShown.subscribe(function(){setTimeout(function(){$(".app-textbox").keypress(function(t){13===t.which&&(t.stopPropagation(),a.$appDigest(),e.doLogin())})})})},e.prototype.ngOnDestroy=function(){this.dialogOpenSubscription.unsubscribe()},e.decorators=[{type:r.Directive,args:[{selector:"[wmDialog][wmLoginDialog]"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:r.Self},{type:r.Inject,args:[s.Context]}]},{type:s.DialogRef,decorators:[{type:r.Self}]}]},e.propDecorators={formCmp:[{type:r.ContentChildren,args:[l.FormComponent]}],msgCmp:[{type:r.ContentChild,args:[s.MessageComponent]}]},e}(),d=[u],m=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[t.CommonModule,i.DesignDialogModule,n.DialogModule,o.InputModule,s.WmComponentsModule],declarations:p(d),exports:p(d),entryComponents:[]}]}],e}();e.\u0275a=u,e.LoginDialogModule=m,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/components/input"),require("@angular/core"),require("@wm/core"),require("@wm/components/dialogs"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/dialogs/partial-dialog",["exports","@angular/common","@wm/components/input","@angular/core","@wm/core","@wm/components/dialogs","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.dialogs=e.wm.components.dialogs||{},e.wm.components.dialogs.partialdialog={}),e.ng.common,e.wm.components.input,e.ng.core,e.wm.core,e.wm.components.dialogs,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-partialdialog",new Map([["animation",a.PROP_STRING],["class",a.PROP_STRING],["closable",{value:!0,PROP_BOOLEAN:a.PROP_BOOLEAN}],["content",a.PROP_STRING],["iconclass",{value:"wi wi-file",PROP_STRING:a.PROP_STRING}],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["modal",l({value:!1},a.PROP_BOOLEAN)],["name",a.PROP_STRING],["oktext",l({value:"OK"},a.PROP_STRING)],["showactions",l({value:!0},a.PROP_BOOLEAN)],["tabindex",l({value:0},a.PROP_NUMBER)],["title",l({value:"Page Content"},a.PROP_STRING)]]))},d="app-dialog modal-dialog app-page-dialog",m={widgetType:"wm-partialdialog"},h=function(e){function t(t,n,i,r){null==i&&(i=!1),null==r&&(r=!0);var a=!o.toBoolean(i)||"static";return e.call(this,t,m,{class:d+" "+(n||""),backdrop:a,keyboard:!o.toBoolean(i)})||this}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getTemplateRef=function(){return this.dialogTemplate},t.prototype.onOk=function(e){this.invokeEventCallback("ok",{$event:e})},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.register(this.viewParent)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"div[wmPartialDialog]",template:'<ng-template #dialogTemplate>\n    <div wmDialogHeader [closable]="closable"\n         [iconclass]="iconclass"\n         [iconurl]="iconurl"\n         [iconwidth]="iconwidth"\n         [iconheight]="iconheight"\n         [iconmargin]="iconmargin"\n         [heading]="title"\n    ></div>\n    <div wmDialogBody>\n        <ng-container *ngTemplateOutlet="dialogContent"></ng-container>\n    </div>\n    <div wmDialogFooter *ngIf="showactions">\n        <button wmButton class="btn-primary ok-action" caption.bind="oktext" aria-label="Submit button" (click)="onOk($event)"></button>\n    </div>\n</ng-template>\n',providers:[a.provideAsWidgetRef(t),a.provideAsDialogRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["class"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["modal"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["closable"]}]}]},t.propDecorators={dialogTemplate:[{type:i.ViewChild,args:["dialogTemplate"]}],dialogContent:[{type:i.ContentChild,args:[i.TemplateRef]}]},t}(r.BaseDialog),f=[h],g=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.DialogModule,n.InputModule,a.WmComponentsModule],declarations:p(f),exports:p(f),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=u,e.PartialDialogModule=g,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/accordion",["exports","@angular/common","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.accordion={}),e.ng.common,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){o.register("wm-accordion",new Map([["class",o.PROP_STRING],["closeothers",s({value:!0},o.PROP_BOOLEAN)],["defaultpaneindex",s({value:0},o.PROP_NUMBER)],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["tabindex",s({value:0},o.PROP_NUMBER)]]))},u=function(){o.register("wm-accordionpane",new Map([["badgetype",s({value:"default"},o.PROP_STRING)],["badgevalue",o.PROP_STRING],["class",o.PROP_STRING],["content",o.PROP_STRING],["iconclass",o.PROP_STRING],["isdefaultpane",o.PROP_BOOLEAN],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)],["smoothscroll",s({value:!0},o.PROP_BOOLEAN)],["subheading",o.PROP_STRING],["tabindex",s({value:0},o.PROP_NUMBER)],["title",s({value:"Title"},o.PROP_STRING)]]))},d={widgetType:"wm-accordionpane",hostClass:"app-accordion-panel panel"},m=function(e){function t(t,n){var r=e.call(this,t,d)||this;return r.accordionRef=n,r.isActive=!1,r.$lazyLoad=i.noop,o.styler(r.nativeElement,r,o.APPLY_STYLES_TYPE.SHELL),i.removeAttr(r.nativeElement,"title"),r}return a(t,e),t.prototype.expand=function(e){this.isActive||(this.isActive=!0,this.$lazyLoad(),this.redrawChildren(),this.invokeEventCallback("expand",{$event:e}),this.notifyParent(!0,e))},t.prototype.collapse=function(e){this.isActive&&(this.isActive=!1,this.invokeEventCallback("collapse",{$event:e}),this.notifyParent(!1,e))},t.prototype.toggle=function(e){this.isActive?this.collapse(e):this.expand(e)},t.prototype.redrawChildren=function(){var e=this;setTimeout(function(){e.reDrawableComponents&&e.reDrawableComponents.forEach(function(e){return e.redraw()})},100)},t.prototype.notifyParent=function(e,t){this.accordionRef.notifyChange(this,e,t)},t.prototype.onPropertyChange=function(t,n,i){var o=this;"content"===t?this.isActive&&setTimeout(function(){return o.$lazyLoad()},100):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),o.styler(this.nativeElement.querySelector(".panel-body"),this,o.APPLY_STYLES_TYPE.INNER_SHELL)},t.initializeProps=u(),t.decorators=[{type:n.Component,args:[{selector:"div[wmAccordionPane]",template:'<div class="panel-heading clearfix" role="tab" (click)="toggle($event)" [ngClass]="{active: isActive}">\n    <h3 class="panel-title">\n        <a href="javascript:void(0);" role="button" class="accordion-toggle" [attr.aria-expanded]="isActive" [attr.aria-controls]="name">\n            <div class="pull-left">\n                <i class="app-icon panel-icon {{iconclass}}" [hidden]="!iconclass"></i>\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title | trustAs: \'html\'"></div>\n                <div class="description" [innerHTML]="subheading | trustAs: \'html\'"></div>\n            </div>\n        </a>\n    </h3>\n    <div class="panel-actions">\n        <span class="label label-{{badgetype}}">{{badgevalue}}</span>\n        <button type="button" aria-label="Collapse/Expand" [attr.aria-expanded]="isActive" [attr.aria-controls]="name"\n                class="app-icon panel-action wi"\n                title="{{appLocale.LABEL_COLLAPSE}}/{{appLocale.LABEL_EXPAND}}">\n            <i [ngClass]="isActive ? \'wi-minus\' : \'wi-plus\'"></i>\n        </button>\n    </div>\n</div>\n<div class="panel-collapse collapse" role="tabpanel" aria-labelledby="panel description" [ngClass]="isActive ? \'collapse in\' : \'collapse\'">\n    <div class="panel-body" [wmSmoothscroll]="smoothscroll" partial-container-target>\n        <ng-content></ng-content>\n    </div>\n</div>\n',providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:f}]},t.propDecorators={reDrawableComponents:[{type:n.ContentChildren,args:[o.RedrawableDirective,{descendants:!0}]}]},t}(o.StylableComponent),h={widgetType:"wm-accordion",hostClass:"app-accordion panel-group"},f=function(e){function t(t){var n=this,r=i.noop;return(n=e.call(this,t,h,new Promise(function(e){return r=e}))||this).promiseResolverFn=r,o.styler(n.nativeElement,n,o.APPLY_STYLES_TYPE.SCROLLABLE_CONTAINER),n}return a(t,e),t.prototype.notifyChange=function(e,t,n){if(t){this.closePanesExcept(e);var i=this.getPaneIndexByRef(e);this.activePane=e.getWidget(),n&&this.invokeEventCallback("change",{$event:n,newPaneIndex:i,oldPaneIndex:this.activePaneIndex}),this.activePaneIndex=i}},t.prototype.isValidPaneIndex=function(e){return e>=0&&e<this.panes.length},t.prototype.getPaneIndexByRef=function(e){return this.panes.toArray().indexOf(e)},t.prototype.getPaneRefByIndex=function(e){return this.panes.toArray()[e]},t.prototype.closePanesExcept=function(e){i.isNumber(e)&&(e=this.getPaneRefByIndex(e)),this.closeothers&&this.panes.forEach(function(t){t!==e&&t.collapse()})},t.prototype.expandPane=function(e){this.closePanesExcept(e),this.panes.toArray()[e].expand()},t.prototype.onPropertyChange=function(t,n,i){"defaultpaneindex"===t?this.isValidPaneIndex(n)&&this.expandPane(n):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterContentInit=function(){e.prototype.ngAfterContentInit.call(this),this.promiseResolverFn()},t.initializeProps=p(),t.decorators=[{type:n.Directive,args:[{selector:"div[wmAccordion]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={panes:[{type:n.ContentChildren,args:[m]}]},t}(o.StylableComponent),g=[m,f],v=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:c(g),exports:c(g),entryComponents:[]}]}],e}();e.\u0275a=m,e.\u0275d=u,e.\u0275b=f,e.\u0275c=p,e.AccordionModule=v,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/layout-grid",["exports","@angular/common","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.layoutgrid={}),e.ng.common,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){o.register("wm-layoutgrid",new Map([["class",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]))},u={widgetType:"wm-layoutgrid",hostClass:"app-grid-layout clearfix"},d=function(e){function t(t){var n=e.call(this,t,u)||this;return o.styler(n.nativeElement,n,o.APPLY_STYLES_TYPE.CONTAINER),n}return a(t,e),t.initializeProps=p(),t.decorators=[{type:n.Directive,args:[{selector:"[wmLayoutGrid]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(o.StylableComponent),m=function(){o.register("wm-layout-grid-row",new Map([["class",o.PROP_STRING],["name",o.PROP_STRING],["show",s({value:!0},o.PROP_BOOLEAN)]]))},h={widgetType:"wm-layout-grid-row",hostClass:"app-grid-row clearfix"},f=function(e){function t(t){var n=e.call(this,t,h)||this;return o.styler(n.nativeElement,n,o.APPLY_STYLES_TYPE.CONTAINER),n}return a(t,e),t.initializeProps=m(),t.decorators=[{type:n.Directive,args:[{selector:"[wmLayoutGridRow]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(o.StylableComponent),g=function(){o.register("wm-gridcolumn",new Map([["class",o.PROP_STRING],["name",o.PROP_STRING],["columnwidth",o.PROP_NUMBER],["show",s({value:!0},o.PROP_BOOLEAN)]]))},v={widgetType:"wm-gridcolumn",hostClass:"app-grid-column"},y=function(e){function t(t,n){var r=e.call(this,t,v)||this;return n&&i.setCSS(r.nativeElement,"overflow","auto"),o.styler(r.nativeElement,r,o.APPLY_STYLES_TYPE.CONTAINER),r}return a(t,e),t.prototype.onPropertyChange=function(t,n,o){var r=i.isMobileApp()?"xs":"sm";"columnwidth"===t?i.switchClass(this.nativeElement,"col-"+r+"-"+n,o?"col-"+r+"-"+o:""):e.prototype.onPropertyChange.call(this,t,n,o)},t.initializeProps=g(),t.decorators=[{type:n.Directive,args:[{selector:"[wmLayoutGridColumn]",providers:[o.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:void 0,decorators:[{type:n.Attribute,args:["height"]}]}]},t}(o.StylableComponent),b=[d,f,y],w=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.WmComponentsModule],declarations:c(b),exports:c(b),entryComponents:[]}]}],e}();e.\u0275e=y,e.\u0275f=g,e.\u0275c=f,e.\u0275d=m,e.\u0275a=d,e.\u0275b=p,e.LayoutGridModule=w,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-bootstrap/dropdown"),require("@angular/core"),require("@wm/core"),require("@wm/components/navigation/menu"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/panel",["exports","@angular/common","ngx-bootstrap/dropdown","@angular/core","@wm/core","@wm/components/navigation/menu","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.panel={}),e.ng.common,e.ngxBootstrap,e.ng.core,e.wm.core,e.wm.components.navigation.menu,e.wm.components.base)}(this,function(e,t,n,i,o,r,a){"use strict";var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){a.register("wm-panel",new Map([["actions",{}],["animation",a.PROP_STRING],["autoclose",a.PROP_STRING],["badgetype",l({value:"default"},a.PROP_STRING)],["badgevalue",a.PROP_STRING],["class",a.PROP_STRING],["closable",a.PROP_BOOLEAN],["collapsible",a.PROP_BOOLEAN],["conditionalclass",a.PROP_ANY],["conditionalstyle",a.PROP_ANY],["content",a.PROP_STRING],["datafield",a.PROP_STRING],["enablefullscreen",a.PROP_BOOLEAN],["expanded",l({value:!0},a.PROP_BOOLEAN)],["fullscreen",a.PROP_BOOLEAN],["helptext",a.PROP_STRING],["iconclass",a.PROP_STRING],["iconheight",a.PROP_STRING],["iconmargin",a.PROP_STRING],["iconurl",a.PROP_STRING],["iconwidth",a.PROP_STRING],["itemaction",a.PROP_STRING],["itemchildren",a.PROP_STRING],["itemicon",a.PROP_STRING],["itemlabel",a.PROP_STRING],["itemlink",a.PROP_STRING],["name",a.PROP_STRING],["show",l({value:!0},a.PROP_BOOLEAN)],["subheading",a.PROP_STRING],["title",a.PROP_STRING],["userrole",a.PROP_STRING]]))},d={widgetType:"wm-panel",hostClass:"app-panel panel"},m=function(e){function t(t){var n=e.call(this,t,d)||this;return n.$lazyLoad=o.noop,n.expanded=!0,n.helpClass="",n.helptext="",a.styler(n.nativeElement,n,a.APPLY_STYLES_TYPE.SHELL),n.fullScreenTitle=n.appLocale.LABEL_FULLSCREEN+"/"+n.appLocale.LABEL_EXITFULLSCREEN,n.expandCollapseTitle=n.appLocale.LABEL_COLLAPSE+"/"+n.appLocale.LABEL_EXPAND,o.removeAttr(n.nativeElement,"title"),n}return function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"hideFooter",{get:function(){return!this.hasFooter||!this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.iconurl||this.iconclass||this.collapsible||this.actions||this.title||this.subheading||this.enablefullscreen},enumerable:!0,configurable:!0}),t.prototype.toggle=function(e){this.collapsible&&(this.invokeEventCallback(this.expanded?"collapse":"expand",{$event:e}),this.expanded=!this.expanded,this.expanded&&(this.$lazyLoad(),this.reDrawChildren()))},t.prototype.expand=function(e){this.expanded||this.toggle(e)},t.prototype.collapse=function(e){this.expanded&&this.toggle(e)},t.prototype.toggleFullScreen=function(e){this.enablefullscreen&&(this.invokeEventCallback(this.fullscreen?"exitfullscreen":"fullscreen",{$event:e}),this.fullscreen=!this.fullscreen,o.toggleClass(this.nativeElement,"fullscreen",this.fullscreen),this.reDrawChildren()),this.computeDimensions()},t.prototype.toggleHelp=function(){this.helpClass=this.helpClass?"":"show-help",o.toggleClass(this.nativeElement,"show-help",!!this.helpClass),o.$appDigest()},t.prototype.menuActionItemClick=function(e,t){this.selectedAction=_.omit(t,["children","value"]),this.invokeEventCallback("actionsclick",{$event:e,$item:this.selectedAction})},t.prototype.close=function(e){this.getWidget().show=!1,this.invokeEventCallback("close",{$event:e})},t.prototype.computeDimensions=function(){var e,t=this.panelHeader.nativeElement.offsetHeight,n=this.nativeElement.querySelector(".panel-footer"),i=this.panelContent.nativeElement,r=window.innerHeight;e=this.fullscreen?this.hideFooter?r-t:r-(n.offsetHeight+t):this.height||"",o.setCSS(i,"height",e)},t.prototype.reDrawChildren=function(){var e=this;setTimeout(function(){e.reDrawableComponents&&e.reDrawableComponents.forEach(function(e){return e.redraw()})},100)},t.prototype.onPropertyChange=function(t,n,i){var o=this;"expanded"===t?this.expanded=n:"content"===t?setTimeout(function(){!o.expanded&&o.collapsible||o.$lazyLoad()},20):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterContentInit=function(){e.prototype.ngAfterContentInit.call(this),this.hasFooter=!!this.nativeElement.querySelector("[wmPanelFooter]"),a.styler(this.panelBody.nativeElement,this,a.APPLY_STYLES_TYPE.INNER_SHELL)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"[wmPanel]",template:'<div class="panel-heading {{helpClass}}" *ngIf="showHeader" #panelHeading>\n    <h3 class="panel-title">\n        <a href="javascript:void(0)" class="panel-toggle" (click)="toggle($event)">\n            <div class="pull-left">\n                <i class="app-icon panel-icon {{iconclass}}" *ngIf="iconclass && !iconurl"></i>\n                <img data-identifier="img" title="iconurl" alt="Panel icon" class="panel-image-icon"\n                     [src]="iconurl | image" *ngIf="iconurl"\n                     [ngStyle]="{width: iconwidth ,height: iconheight, margin: iconmargin}" />\n            </div>\n            <div class="pull-left">\n                <div class="heading" [innerHTML]="title | trustAs: \'html\'" [title]="title"></div>\n                <div class="description" [innerHTML]="subheading | trustAs: \'html\'"></div>\n            </div>\n        </a>\n        <div class="panel-actions">\n            <span *ngIf="badgevalue" aria-label="badge"\n                  class="app-badge label label-{{badgetype}}">{{badgevalue}}</span>\n            <div wmMenu aria-label="dropdown" dropdown type="anchor" class="panel-action" dataset.bind="actions"\n                 *ngIf="actions" caption="" menuposition="down,left" iconclass="wi wi-more-vert"\n                 autoclose.bind="autoclose" datafield.bind="datafield" select.event="menuActionItemClick($event,$item)">\n            </div>\n            <button type="button" aria-label="Help" class="app-icon panel-action wi" [title]="appLocale.LABEL_HELP"\n                    *ngIf="helptext" (click)="toggleHelp()"><i class="wi-question"></i></button>\n            <button type="button" aria-label="Collapse/Expand" class="app-icon wi panel-action" *ngIf="collapsible"\n                    [title]="expandCollapseTitle" (click)="toggle($event);"><i\n                   [ngClass]="expanded ? \'wi-minus\' : \'wi-plus\'"></i></button>\n            <button type="button" aria-label="Fullscreen/Exit" class="app-icon panel-action wi" *ngIf="enablefullscreen"\n                    [title]="fullScreenTitle" (click)="toggleFullScreen($event);"><i\n                   [ngClass]="fullscreen ? \'wi-fullscreen-exit\' : \'wi-fullscreen\'"></i></button>\n            <button type="button" aria-label="Close button" class="app-icon panel-action"\n                    title="{{appLocale.LABEL_CLOSE}}" *ngIf="closable" (click)="close($event)"><i\n                   class="wi wi-close"></i></button>\n        </div>\n    </h3>\n</div>\n<div class="panel-content" [hidden]="!expanded" #panelContent>\n    \x3c!-- Todo Bandhavya - implement smooth scroll --\x3e\n    <div partial-container-target #panelBody [ngClass]="[\'panel-body\', helpClass]">\n        <ng-content></ng-content>\n    </div>\n    <aside class="panel-help-message" [ngClass]="helpClass">\n        <h5 class="panel-help-header" [textContent]="appLocale.LABEL_HELP"></h5>\n        <div class="panel-help-content" [innerHTML]="helptext | trustAs : \'html\'"></div>\n    </aside>\n</div>\n<div class="app-panel-footer panel-footer clearfix" [hidden]="hideFooter">\n    <ng-content select="[wmPanelFooter]"></ng-content>\n</div>',providers:[a.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t.propDecorators={panelHeader:[{type:i.ViewChild,args:["panelHeading"]}],panelContent:[{type:i.ViewChild,args:["panelContent"]}],panelBody:[{type:i.ViewChild,args:["panelBody"]}],reDrawableComponents:[{type:i.ContentChildren,args:[a.RedrawableDirective,{descendants:!0}]}]},t}(r.MenuAdapterComponent),h=[m],f=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[n.BsDropdownModule,t.CommonModule,r.MenuModule,a.WmComponentsModule],declarations:p(h),exports:p(h),entryComponents:[]}]}],e}();e.\u0275a=m,e.\u0275b=u,e.PanelModule=f,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@swipey"),require("@angular/core"),require("@wm/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/tabs",["exports","@angular/common","@swipey","@angular/core","@wm/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.tabs={}),e.ng.common,e.swipey,e.ng.core,e.wm.core,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(e){function t(t){var n,i,r=e.call(this)||this;r.tabs=t,r._$el=$(r.tabs.getNativeElement()).find(">.tab-content");var a=r._$el.find(">[wmTabPane]");r._noOfTabs=a.length;var s=100*r._noOfTabs+"%";o.addClass(r.tabs.getNativeElement(),"has-transition"),o.setCSSFromObj(r._$el[0],{maxWidth:s,width:s});var l=100/r._noOfTabs+"%";try{for(var c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(Array.from(a)),p=c.next();!p.done;p=c.next()){var u=p.value;o.setCSS(u,"width",l)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return r.init(r._$el),r}return s(t,e),t.prototype.bounds=function(){var e=this.tabs.getActiveTabIndex(),t=this._$el.find(">.tab-pane:first").width(),n=this._$el.find(">.tab-pane:visible").length,i=-1*e*t;return this.clearContentFocus(),{strict:!1,lower:e===n-1?0:-t,center:i,upper:0===e?i:t}},t.prototype.context=function(){return{w:this._$el.width()}},t.prototype.animation=function(){return{transform:"translate3d(${{ ($D + $d)/w * 100 + '%'}}, 0, 0)","-webkit-transform":"translate3d(${{ ($D + $d)/w * 100 + '%'}}, 0, 0)"}},t.prototype.clearContentFocus=function(){var e=this._$el.find(">.tab-pane.active");e.length&&e.find(document.activeElement).length&&document.activeElement.blur()},t.prototype.transitionTabIntoView=function(){var e=this.tabs.getActiveTabIndex();o.setCSS(this._$el[0],"transform","translate3d("+-1*e/this._noOfTabs*100+"%, 0, 0)")},t.prototype.onUpper=function(){this.tabs.prev(),o.$appDigest()},t.prototype.onLower=function(){this.tabs.next(),o.$appDigest()},t.prototype.threshold=function(){return 5},t}(n.SwipeAnimation),d=function(){var e=new Map([["class",r.PROP_STRING],["defaultpaneindex",l({value:0},r.PROP_NUMBER)],["justified",r.PROP_BOOLEAN],["tabsposition",l({value:"top"},r.PROP_STRING)],["name",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["transition",r.PROP_STRING]]);o.isMobileApp()&&e.set("transition",l({value:"slide"},r.PROP_STRING)),r.register("wm-tabs",e)},m=function(){r.register("wm-tabpane",new Map([["badgevalue",r.PROP_STRING],["badgetype",l({value:"default"},r.PROP_STRING)],["class",r.PROP_STRING],["content",r.PROP_STRING],["disabled",r.PROP_BOOLEAN],["heading",r.PROP_STRING],["isdefaulttab",r.PROP_STRING],["name",r.PROP_STRING],["paneicon",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["smoothscroll",l({value:!0},r.PROP_BOOLEAN)],["tabindex",l({value:0},r.PROP_NUMBER)],["title",l({value:"Tab Title"},r.PROP_STRING)]]))},h={widgetType:"wm-tabpane",hostClass:"tab-pane"},f=function(e){function t(t,n,i,r){var a=e.call(this,t,h)||this;return a.tabsRef=n,a.heading=i,a.title=r,a._isFirstLoad=!0,a.$lazyLoad=o.noop,a.isActive=!1,a.disabled=!1,o.removeAttr(a.nativeElement,"title"),a}return s(t,e),t.prototype.invokeOnSelectCallback=function(e){this.invokeEventCallback("select",{$event:e})},t.prototype.select=function(e){this.isActive||this.disabled||(this.isActive=!0,this.$lazyLoad(),this.redrawChildren(),this.notifyParent(e))},t.prototype.deselect=function(){this.isActive&&(this.isActive=!1,this.invokeEventCallback("deselect"))},t.prototype.redrawChildren=function(){var e=this;setTimeout(function(){e.reDrawableComponents&&e.reDrawableComponents.forEach(function(e){return e.redraw()})},100)},t.prototype.notifyParent=function(e){this.tabsRef.notifyChange(this,e)},t.prototype.handleSwipeLeft=function(){this.tabsRef.next()},t.prototype.handleSwipeRight=function(){this.tabsRef.prev()},t.prototype.handleEvent=function(t,n,i,o){"select"!==n&&e.prototype.handleEvent.call(this,this.nativeElement,n,i,o)},t.prototype.onPropertyChange=function(t,n,i){var o=this;"content"===t?this.isActive&&setTimeout(function(){return o.$lazyLoad()},100):"show"===t?(this.nativeElement.hidden=!n,this._isFirstLoad&&this.tabsRef.selectDefaultPaneByIndex(this.tabsRef.defaultpaneindex),this._isFirstLoad=!1):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.title=this.title||this.heading},t.prototype.ngAfterViewInit=function(){r.styler(this.nativeElement.querySelector(".tab-body"),this,r.APPLY_STYLES_TYPE.CONTAINER),e.prototype.ngAfterViewInit.call(this)},t.initializeProps=m(),t.decorators=[{type:i.Component,args:[{selector:"div[wmTabPane]",template:'<div class="tab-body" partial-container-target [wmSmoothscroll]="smoothscroll">\n    <ng-content></ng-content>\n</div>',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:v},{type:void 0,decorators:[{type:i.Attribute,args:["heading"]}]},{type:void 0,decorators:[{type:i.Attribute,args:["title"]}]}]},t.propDecorators={isActive:[{type:i.HostBinding,args:["class.active"]}],disabled:[{type:i.HostBinding,args:["class.disabled"]}],reDrawableComponents:[{type:i.ContentChildren,args:[r.RedrawableDirective,{descendants:!0}]}]},t}(r.StylableComponent),g={widgetType:"wm-tabs",hostClass:"app-tabs clearfix"},v=function(e){function t(t,n,i){var a=this,s=o.noop;return(a=e.call(this,t,g,new Promise(function(e){return s=e}))||this).transition=n,a.tabsposition=i,a.promiseResolverFn=s,r.styler(a.nativeElement,a,r.APPLY_STYLES_TYPE.CONTAINER),a}return s(t,e),t.prototype.animateIn=function(e){var t=$(e);t.siblings(".active").removeClass("active"),t.addClass("active");var n=this.nativeElement.querySelector("ul.nav.nav-tabs"),i=t.prev();i.length?n.scrollLeft=i[0].offsetLeft:n.scrollLeft=0},t.prototype.notifyChange=function(e,t){if(this.isSelectableTab(e)){var n;this.activeTab&&this.activeTab.deselect(),e.invokeOnSelectCallback(t),this.activeTab=e.getWidget();var i=this.getPaneIndexByRef(e);t&&this.invokeEventCallback("change",{$event:t,newPaneIndex:i,oldPaneIndex:this._oldPaneIndex||0}),this._oldPaneIndex=i,n=t?$(t.target).closest("li.tab-header"):this.nativeElement.querySelector("li[data-paneid="+e.widgetId+"]"),this.animateIn(n),this.canSlide()&&(this.tabsAnimator||(this.tabsAnimator=new u(this),this.tabsAnimator.setGesturesEnabled(this.canSlide())),this.tabsAnimator.transitionTabIntoView())}},t.prototype.goToTab=function(e){this.isValidPaneIndex(e-1)&&this.getPaneRefByIndex(e-1).select()},t.prototype.getPaneIndexByRef=function(e){return this.panes.toArray().indexOf(e)},t.prototype.getActiveTabIndex=function(){return _.findIndex(this.panes.toArray(),{isActive:!0})},t.prototype.isValidPaneIndex=function(e){return e>=0&&e<this.panes.length},t.prototype.getPaneRefByIndex=function(e){return this.panes.toArray()[e]},t.prototype.isSelectableTab=function(e){return e.show&&!e.disabled},t.prototype.canSlide=function(){return"slide"===this.transition&&!this.vertical},t.prototype.getSelectableTabAfterIndex=function(e){for(var t=e+1;t<this.panes.length;t++){var n=this.getPaneRefByIndex(t);if(this.isSelectableTab(n))return n}},t.prototype.getSelectableTabBeforeIndex=function(e){for(var t=e-1;t>=0;t--){var n=this.getPaneRefByIndex(t);if(this.isSelectableTab(n))return n}},t.prototype.next=function(){var e=this.getSelectableTabAfterIndex(this.getActiveTabIndex());e&&e.select()},t.prototype.prev=function(){var e=this.getSelectableTabBeforeIndex(this.getActiveTabIndex());e&&e.select()},t.prototype.selectDefaultPaneByIndex=function(e){if(this.isValidPaneIndex(e)){var t=this.getPaneRefByIndex(e);this.isSelectableTab(t)||(t=this.getSelectableTabAfterIndex(0)),t&&t.select()}},t.prototype.setTabsPosition=function(){var e=this.nativeElement.children[0];this.vertical="left"===this.tabsposition||"right"===this.tabsposition,o.removeClass(this.nativeElement,"inverted"),"bottom"!==this.tabsposition&&"right"!==this.tabsposition||(o.appendNode(e,this.nativeElement),o.addClass(this.nativeElement,"inverted"))},t.prototype.onPropertyChange=function(t,n,i){var o=this;"defaultpaneindex"===t?setTimeout(function(){return o.selectDefaultPaneByIndex(n||0)},20):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.registerTabsScroll=function(){var e=this;setTimeout(function(){var t,n=e.$element.find("> ul");(t=n.children().last().position())&&t.left>n.width()&&n.on("mousewheel",function(e){var t=n[0].scrollLeft,i=-1*e.originalEvent.wheelDelta;e.stopPropagation(),e.preventDefault(),n.animate({scrollLeft:t+i},{duration:10})})})},t.prototype.ngAfterContentInit=function(){this.promiseResolverFn(),e.prototype.ngAfterContentInit.call(this),this.setTabsPosition()},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),this.registerTabsScroll()},t.initializeProps=d(),t.decorators=[{type:i.Component,args:[{selector:"div[wmTabs]",template:'<ul class="nav nav-tabs" [ngClass]="{\'nav-stacked\': vertical, \'nav-justified\': justified}" role="tablist">\n    <li class="tab-header" *ngFor="let pane of panes;" [attr.data-paneid]="pane.widgetId" [ngClass]="{\'active\': pane.isActive, \'disabled\': pane.disabled}"\n        [hidden]="!pane.show" (click)="pane.select($event)" role="tab">\n        <a href="javascript:void(0);" role="button" [attr.aria-label]="pane.title" [attr.title]="pane.title" [tabindex]="pane.tabindex">\n            <div class="tab-heading">\n                <i [ngClass]="[\'app-icon\', pane.paneicon]" *ngIf="pane.paneicon"></i>\n                <span [textContent]="pane.title"></span>\n                <span *ngIf="pane.badgevalue" class="label label-{{pane.badgetype}}" [textContent]="pane.badgevalue"></span>\n            </div>\n        </a>\n    </li>\n</ul>\n<div class="tab-content" [ngClass]="{\'tab-stacked\': vertical, \'tab-justified\': justified}">\n    <ng-content select="div[wmTabPane]"></ng-content>\n</div>\n',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:String,decorators:[{type:i.Attribute,args:["transition"]}]},{type:String,decorators:[{type:i.Attribute,args:["tabsposition"]}]}]},t.propDecorators={panes:[{type:i.ContentChildren,args:[f]}]},t}(r.StylableComponent),y=[f,v],b=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.WmComponentsModule],declarations:p(y),exports:p(y),entryComponents:[]}]}],e}();e.\u0275a=f,e.\u0275d=m,e.\u0275b=v,e.\u0275c=d,e.TabsModule=b,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/tile",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.tile={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(){i.register("wm-tile",new Map([["animation",i.PROP_STRING],["class",i.PROP_STRING],["conditionalclass",i.PROP_ANY],["conditionalstyle",i.PROP_ANY],["name",i.PROP_STRING],["show",r({value:!0},i.PROP_BOOLEAN)]]))},c={widgetType:"wm-tile",hostClass:"app-tile"},p=function(e){function t(t){var n=e.call(this,t,c)||this;return i.styler(n.nativeElement,n,i.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.initializeProps=l(),t.decorators=[{type:n.Directive,args:[{selector:"[wmTile]",providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(i.StylableComponent),u=[p],d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:s(u),exports:s(u),entryComponents:[]}]}],e}();e.\u0275a=p,e.\u0275b=l,e.TileModule=d,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@wm/core"),require("@angular/core"),require("@angular/forms"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/containers/wizard",["exports","@angular/common","@wm/core","@angular/core","@angular/forms","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.containers=e.wm.components.containers||{},e.wm.components.containers.wizard={}),e.ng.common,e.wm.core,e.ng.core,e.ng.forms,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){r.register("wm-wizard",new Map([["actionsalignment",l({value:"right"},r.PROP_STRING)],["cancelable",l({value:!0},r.PROP_BOOLEAN)],["cancelbtnlabel",l({value:"Cancel"},r.PROP_STRING)],["class",r.PROP_STRING],["defaultstep",l({value:"none"},r.PROP_STRING)],["donebtnlabel",l({value:"Done"},r.PROP_STRING)],["name",r.PROP_STRING],["nextbtnlabel",l({value:"Next"},r.PROP_STRING)],["previousbtnlabel",l({value:"Previous"},r.PROP_STRING)],["show",l({value:!0},r.PROP_BOOLEAN)],["stepstyle",l({value:"auto"},r.PROP_STRING)]]))},d=function(){r.register("wm-wizardstep",new Map([["class",r.PROP_STRING],["enableskip",l({value:!1},r.PROP_BOOLEAN)],["iconclass",r.PROP_STRING],["name",r.PROP_STRING],["show",l({value:!0},r.PROP_BOOLEAN)],["title",l({value:"Step Title"},r.PROP_STRING)]]))},m={widgetType:"wm-wizardstep",hostClass:"app-wizard-step-content"},h=function(e){function t(t,n){var i=e.call(this,t,m)||this;return i.ngForm=n,i.status=2,i}return s(t,e),Object.defineProperty(t.prototype,"isCurrent",{get:function(){return this.active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this.ngForm.valid&&this.areEmbeddedFormsValid()},enumerable:!0,configurable:!0}),t.prototype.areEmbeddedFormsValid=function(){var e,t,n=this.getAllEmbeddedForms();try{for(var i=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(n),o=i.next();!o.done;o=i.next()){if(!o.value.widget.ngform.valid)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return!0},t.prototype.getAllEmbeddedForms=function(){return this.$element.find("form")},Object.defineProperty(t.prototype,"enableNext",{get:function(){return!this.disablenext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableDone",{get:function(){return!this.disabledone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enablePrev",{get:function(){return!this.disableprevious},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return 1===this.status},set:function(e){var t=this.active;this.status=1,e&&!t&&this.redrawChildren()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return 3===this.status},set:function(e){e&&(this.status=3)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return 2===this.status},set:function(e){e&&(this.status=2)},enumerable:!0,configurable:!0}),t.prototype.onNext=function(e){return this.invokeEventCallback("next",{currentStep:this,stepIndex:e})},t.prototype.onPrev=function(e){return this.invokeEventCallback("prev",{currentStep:this,stepIndex:e})},t.prototype.onSkip=function(e){return this.invokeEventCallback("skip",{currentStep:this,stepIndex:e})},t.prototype.redrawChildren=function(){var e=this;setTimeout(function(){e.reDrawableComponents&&e.reDrawableComponents.forEach(function(e){return e.redraw()}),e.invokeEventCallback("load")},100)},t.initializeProps=d(),t.decorators=[{type:i.Directive,args:[{selector:"form[wmWizardStep]",providers:[r.provideAsWidgetRef(t)],exportAs:"wmWizardStep"}]}],t.ctorParameters=function(){return[{type:i.Injector},{type:o.NgForm,decorators:[{type:i.Self}]}]},t.propDecorators={reDrawableComponents:[{type:i.ContentChildren,args:[r.RedrawableDirective,{descendants:!0}]}],isCurrent:[{type:i.HostBinding,args:["class.current"]}]},t}(r.BaseComponent),f={widgetType:"wm-wizard",hostClass:"app-wizard panel clearfix"},g=function(e){function t(t){var i=this,o=n.noop;return i=e.call(this,t,f,new Promise(function(e){return o=e}))||this,r.styler(i.nativeElement,i,r.APPLY_STYLES_TYPE.SHELL),i.promiseResolverFn=o,i.message={caption:"",type:""},i}return s(t,e),Object.defineProperty(t.prototype,"hasPrevStep",{get:function(){return!this.isFirstStep(this.currentStep)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNextStep",{get:function(){return!this.isLastStep(this.currentStep)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDoneBtn",{get:function(){if(this.currentStep)return!this.hasNextStep&&this.currentStep.enableDone},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enablePrev",{get:function(){if(this.currentStep)return this.currentStep.enablePrev},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableNext",{get:function(){if(this.currentStep)return this.currentStep.enableNext&&this.currentStep.isValid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableDone",{get:function(){if(this.currentStep)return this.currentStep.enableDone&&this.currentStep.isValid},enumerable:!0,configurable:!0}),t.prototype.getNextValidStepFormIndex=function(e){for(var t=e;t<this.steps.length;t++){var n=this.getStepRefByIndex(t);if(n.show)return n}},t.prototype.getPreviousValidStepFormIndex=function(e){for(var t=e;t>=0;t--){var n=this.getStepRefByIndex(t);if(n.show)return n}},t.prototype.getCurrentStepIndex=function(){return this.getStepIndexByRef(this.currentStep)},t.prototype.getStepRefByIndex=function(e){return this.steps.toArray()[e]},t.prototype.getStepIndexByRef=function(e){return this.steps.toArray().indexOf(e)},t.prototype.getStepRefByName=function(e){return this.steps.find(function(t){return t.name===e})},t.prototype.setDefaultStep=function(e){if(e&&e.show){this.currentStep=e,e.active=!0,e.isInitialized=!0;for(var t=this.getStepIndexByRef(e)-1;t>=0;){var n=this.getStepRefByIndex(t);n.done=!0,n.isInitialized=!0,t--}}else(e=this.getNextValidStepFormIndex(0))&&this.setDefaultStep(e)},t.prototype.onWizardHeaderClick=function(e,t){var n=this;t.done&&(this.steps.forEach(function(e,i){i<n.getStepIndexByRef(t)?e.done=!0:e.disabled=!0}),this.currentStep=t,this.currentStep.active=!0)},t.prototype.next=function(e){void 0===e&&(e="next");var t,n=this.currentStep,i=this.getCurrentStepIndex();if("skip"===e){if(!1===n.onSkip(i))return}else if("next"===e&&!1===n.onNext(i))return;(t=this.getNextValidStepFormIndex(i+1)).isInitialized=!0,t&&(n.done=!0,t.active=!0,this.currentStep=t)},t.prototype.prev=function(){var e,t=this.currentStep,n=this.getCurrentStepIndex();!1!==t.onPrev(n)&&(e=this.getPreviousValidStepFormIndex(n-1))&&(t.disabled=!0,e.active=!0,this.currentStep=e)},t.prototype.skip=function(){this.next("skip")},t.prototype.done=function(){this.invokeEventCallback("done",{steps:this.steps.toArray()})},t.prototype.cancel=function(){this.invokeEventCallback("cancel",{steps:this.steps.toArray()})},t.prototype.isFirstStep=function(e){return this.steps.first===e},t.prototype.isLastStep=function(e){return this.steps.last===e},t.prototype.onPropertyChange=function(t,n,i){"stepstyle"===t?this.stepClass="justified"===n?"nav-justified":"":"defaultstep"===t?this.setDefaultStep(this.getStepRefByName(n)):e.prototype.onPropertyChange.call(this,t,n,i)},t.prototype.ngAfterContentInit=function(){e.prototype.ngAfterContentInit.call(this),this.promiseResolverFn()},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this),r.styler(this.nativeElement.querySelector(".panel-body"),this,r.APPLY_STYLES_TYPE.INNER_SHELL)},t.initializeProps=u(),t.decorators=[{type:i.Component,args:[{selector:"div[wmWizard]",template:'<div class="app-wizard-heading" role="tab">\n    <ul class="app-wizard-steps nav nav-pills {{stepClass}}">\n        <li class="app-wizard-step" *ngFor="let step of steps" [hidden]="!step.show"\n            [ngClass]="{active: step.done, current: step.active, disabled: step.disabled}"\n            (click)="onWizardHeaderClick($event, step)">\n            <a href="javascript:void(0)" [attr.aria-label]="step.title" [attr.title]="step.title">\n                <span class="arrow"></span>\n                <i class="app-icon {{step.iconclass}}" *ngIf="step.iconclass"></i>\n                <span class="step-title" [textContent]="step.title"></span>\n            </a>\n        </li>\n    </ul>\n</div>\n<div class="app-wizard-body panel-body" role="tabpanel">\n    <p wmMessage *ngIf="message.caption" caption.bind="message.caption" type.bind="message.type"></p>\n    <ng-content select="form[wmWizardStep]"></ng-content>\n</div>\n<div class="app-wizard-actions panel-footer {{actionsalignment}}">\n    <a class="app-wizard-skip" name="skipStep_{{name}}" *ngIf="currentStep?.enableskip" title="Skip step" (click)="skip()">Skip &raquo;</a>\n    <div class="app-wizard-actions-right">\n        <button type="button" name="cancelBtn_{{name}}" class="btn app-button btn-secondary" *ngIf="cancelable"\n                (click)="cancel()" [title]="cancelbtnlabel" [textContent]="cancelbtnlabel"></button>\n        <button type="button" name="previousBtn_{{name}}" class="btn app-button btn-secondary"\n                *ngIf="hasPrevStep" (click)="prev()" [disabled]="!enablePrev">\n            <i class="app-icon wi wi-chevron-left"></i>\n            <span class="btn-caption" [textContent]="previousbtnlabel"></span>\n        </button>\n        <button type="button" name="nextBtn_{{name}}" class="btn app-button btn-primary"\n                *ngIf="hasNextStep" (click)="next()" [disabled]="!enableNext">\n            <span class="btn-caption" [textContent]="nextbtnlabel"></span>\n            <i class="app-icon wi wi-chevron-right"></i>\n        </button>\n        <button type="button" name="doneBtn_{{name}}" class="btn app-button btn-success"\n                *ngIf="showDoneBtn" (click)="done()"\n                [disabled]="!enableDone">\n            <i class="app-icon wi wi-done"></i>\n            <span class="btn-caption" [textContent]="donebtnlabel"></span>\n        </button>\n    </div>\n</div>\n',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:i.Injector}]},t.propDecorators={steps:[{type:i.ContentChildren,args:[h]}]},t}(r.StylableComponent),v=[h,g],y=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.WmComponentsModule],declarations:p(v),exports:p(v),entryComponents:[]}]}],e}();e.\u0275a=h,e.\u0275b=d,e.\u0275c=g,e.\u0275d=u,e.WizardModule=y,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("ngx-bootstrap/carousel"),require("@swipey"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/advanced/carousel",["exports","@angular/common","ngx-bootstrap/carousel","@swipey","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.carousel={}),e.ng.common,e.ngxBootstrap,e.swipey,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var u=function(){r.register("wm-carousel",new Map([["animation",l({value:"auto"},r.PROP_STRING)],["animationinterval",l({value:3},r.PROP_NUMBER)],["controls",l({value:"both"},r.PROP_STRING)],["dataset",r.PROP_ANY],["nodatamessage",l({value:"No Data Found"},r.PROP_STRING)],["show",r.PROP_BOOLEAN]]))},d=function(e){function t(t,n,i){var o=e.call(this)||this;o.carousel=t,o.interval=n,o.ngZone=i,o._activeIndex=0,o._animationPaused=!1,o._pauseCaroselTill=0,o._oldIndex=0;var r=o;return o._$el=$(o.carousel.getNativeElement()).find(">.carousel"),o.init(o._$el.find(">.carousel-inner")),o._items=o._$el.find(">.carousel-inner >.carousel-item"),o._indicators=o._$el.find(">.carousel-indicators"),o._indicators.find("li").each(function(e){$(this).on("click",function(){r._activeIndex=e,r.setActiveItem()})}),o._$el.find(">.left.carousel-control").on("click",function(){o._pauseCaroselTill=Date.now()+o.interval,o.goToUpper()}),o._$el.find(">.right.carousel-control").on("click",function(){o._pauseCaroselTill=Date.now()+o.interval,o.goToLower()}),o.setActiveItem(),o.interval&&o.start(),o}return s(t,e),t.prototype.bounds=function(){return this._width=this._items.width(),this._swiping=!0,{lower:-this._width,center:0,upper:this._width}},t.prototype.context=function(){return{w:this._width}},t.prototype.animation=function(){return[{target:this.getTarget.bind(this),css:{transform:"translate3d(${{ (($D + $d) / w) * 100 + '%'}}, 0, 0)","-webkit-transform":"translate3d(${{ (($D + $d) / w) * 100 + '%'}}, 0, 0)"}}]},t.prototype.onUpper=function(){this.resetTransition(),this._activeIndex-=1,this.setActiveItem(),this._swiping=!1},t.prototype.onLower=function(){this.resetTransition(),this._activeIndex+=1,this.setActiveItem(),this._swiping=!1},t.prototype.onAnimation=function(){var e=(this._items.length+this._activeIndex)%this._items.length;this.carousel.onChangeCB(e,this._oldIndex),this._oldIndex=e},t.prototype.start=function(){var e=this;this.ngZone.runOutsideAngular(function(){e._intervalId=setInterval(function(){!e._swiping&&e._pauseCaroselTill<Date.now()&&e.goToLower(600)},e.interval)})},t.prototype.pause=function(){this._animationPaused=!0,this._intervalId||this.start()},t.prototype.resume=function(){this._animationPaused=!1},t.prototype.stop=function(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=0)},t.prototype.threshold=function(){return 5},t.prototype.getTarget=function(){var e=this._items.length,t=this._items.eq((e+this._activeIndex)%e),n=this._items.eq((e+this._activeIndex-1)%e),i=this._items.eq((e+this._activeIndex+1)%e);return t.add(i).add(n)},t.prototype.resetTransition=function(){this.getTarget().css({"-webkit-transition":"none","-webkit-transform":"",transition:"none",transform:""})},t.prototype.setActiveItem=function(){var e=this._items,t=this._activeIndex-1,n=this._activeIndex+1;1!==e.length?(this._indicators.find(">.active").removeClass("active"),this._indicators.find("> li").eq((e.length+this._activeIndex)%e.length).addClass("active"),e.filter(".active").removeClass("active"),e.addClass("left-item"),e.eq((e.length+t)%e.length).addClass("left-item").removeClass("right-item"),e.eq((e.length+this._activeIndex)%e.length).removeClass("left-item right-item").addClass("active"),e.eq((e.length+n)%e.length).addClass("right-item").removeClass("left-item")):e.eq(0).removeClass("left-item right-item")},t}(i.SwipeAnimation),m={widgetType:"wm-carousel"},h={indicators:"hide-navs",navs:"hide-indicators",none:"hide-both"},f=function(e){function t(t,n,i){var o=e.call(this,n,m)||this;return o.component=t,o.ngZone=i,r.styler(o.nativeElement,o),o}return s(t,e),t.prototype.onDataChange=function(e){this.fieldDefs=r.createArrayFrom(e)},t.prototype.stopAnimation=function(){this.animator&&this.animator.stop()},t.prototype.startAnimation=function(){this.animator&&(this.animator.interval=1e3*this.animationinterval,this.animator.start())},t.prototype.onSlidesRender=function(e){var t=this;this.fieldDefs&&this.fieldDefs.length&&(this.currentslide=this.fieldDefs[0]),setTimeout(function(){t.animator=new d(t,t.interval,t.ngZone)},50)},t.prototype.setupHandlers=function(){var e=this;this.slides.changes.subscribe(function(t){e.stopAnimation(),e.onSlidesRender(t)}),this.slides.setDirty()},t.prototype.onChangeCB=function(e,t){this.currentslide=this.fieldDefs&&this.fieldDefs[e],this.previousslide=this.fieldDefs&&this.fieldDefs[t],this.invokeEventCallback("change",{newIndex:e,oldIndex:t})},t.prototype.ngAfterContentInit=function(){this.setupHandlers()},t.prototype.ngOnDestroy=function(){this.stopAnimation(),e.prototype.ngOnDestroy.call(this)},t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),"auto"===this.animation?this.interval=1e3*this.animationinterval:this.interval=0},t.prototype.onPropertyChange=function(t,n,i){"dataset"===t?this.onDataChange(n):"controls"===t?this.navigationClass=h[this.controls]:"animation"===t||"animationinterval"===t?"none"===this.animation?this.stopAnimation():this.startAnimation():e.prototype.onPropertyChange.call(this,t,n,i)},t.initializeProps=u(),t.decorators=[{type:o.Directive,args:[{selector:"[wmCarousel]",exportAs:"wmCarousel"}]}],t.ctorParameters=function(){return[{type:n.CarouselComponent},{type:o.Injector},{type:o.NgZone}]},t.propDecorators={slides:[{type:o.ContentChildren,args:[n.SlideComponent]}]},t}(r.StylableComponent),g=function(){r.register("wm-carousel-template",new Map([["show",r.PROP_BOOLEAN]]))},v={widgetType:"wm-carousel-template",hostClass:"app-carousel-item"},y=function(e){function t(t){var n=e.call(this,t,v)||this;return r.styler(n.nativeElement,n),n}return s(t,e),t.initializeProps=g(),t.decorators=[{type:o.Directive,args:[{selector:"[wmCarouselTemplate]"}]}],t.ctorParameters=function(){return[{type:o.Injector}]},t}(r.StylableComponent),b=[f,y],w=function(){function e(){}return e.decorators=[{type:o.NgModule,args:[{imports:[t.CommonModule,n.CarouselModule,r.WmComponentsModule],declarations:p(b),exports:p(b),entryComponents:[]}]}],e}();e.\u0275c=y,e.\u0275d=g,e.\u0275a=f,e.\u0275b=u,e.CarouselModule=w,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/advanced/marquee",["exports","@angular/common","@angular/core","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.marquee={}),e.ng.common,e.ng.core,e.wm.components.base)}(this,function(e,t,n,i){"use strict";var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}var l=function(){i.register("wm-marquee",new Map([["class",i.PROP_STRING],["direction",i.PROP_STRING],["name",i.PROP_STRING],["scrollamount",i.PROP_NUMBER],["scrolldelay",i.PROP_NUMBER],["show",r({value:!0},i.PROP_BOOLEAN)]]))},c={widgetType:"wm-marquee",hostClass:"app-marquee app-container"},p=function(e){function t(t){var n=e.call(this,t,c)||this;return i.styler(n.nativeElement,n),n}return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.initializeProps=l(),t.decorators=[{type:n.Directive,args:[{selector:"[wmMarquee]",providers:[i.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t}(i.StylableComponent),u=[p],d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,i.WmComponentsModule],declarations:s(u),exports:s(u),entryComponents:[]}]}],e}();e.\u0275a=p,e.\u0275b=l,e.MarqueeModule=d,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@wm/components/data/form"),require("@wm/components/input"),require("@wm/components/base")):"function"==typeof define&&define.amd?define("@wm/components/advanced/login",["exports","@angular/common","@angular/core","@wm/components/data/form","@wm/components/input","@wm/components/base"],t):t((e.wm=e.wm||{},e.wm.components=e.wm.components||{},e.wm.components.advanced=e.wm.components.advanced||{},e.wm.components.advanced.login={}),e.ng.common,e.ng.core,e.wm.components.data.form,e.wm.components.input,e.wm.components.base)}(this,function(e,t,n,i,o,r){"use strict";var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e}var c=function(){r.register("wm-login",new Map([["errormessage",r.PROP_STRING],["eventsource",r.PROP_ANY]]))},p={widgetType:"wm-login",hostClass:"app-login"},u=function(e){function t(t){var n=e.call(this,t,p)||this;return r.styler(n.nativeElement,n,r.APPLY_STYLES_TYPE.CONTAINER),n}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.onSuccessCB=function(){this.invokeEventCallback("success")},t.prototype.onErrorCB=function(e){this.loginMessage={type:"error",caption:this.errormessage||e||this.appLocale.LABEL_INVALID_USERNAME_OR_PASSWORD,show:!0},this.messageCmp.showMessage(this.loginMessage.caption,this.loginMessage.type),this.invokeEventCallback("error")},t.prototype.getLoginDetails=function(){return this.formCmp.dataoutput},t.prototype.doLogin=function(){this.eventsource?this.eventsource.invoke({loginInfo:this.getLoginDetails()},this.onSuccessCB.bind(this),this.onErrorCB.bind(this)):console.warn('Default action "loginAction" does not exist. Either create the Action or assign an event to onSubmit of the login widget')},t.prototype.initLoginButtonActions=function(){var e=this;this.loginBtnCmp.getNativeElement().addEventListener("click",function(t){e.nativeElement.hasAttribute("submit.event")||e.loginBtnCmp.getNativeElement().hasAttribute("click.event")||e.loginBtnCmp.getNativeElement().hasAttribute("tap.event")||e.doLogin()})},t.prototype.ngAfterViewInit=function(){var t=this;e.prototype.ngAfterViewInit.call(this),this.formCmp.getNativeElement().addEventListener("submit",function(e){return e.preventDefault()}),this.buttonComponents.forEach(function(e){if("loginButton"===e.getNativeElement().getAttribute("name")||_.includes(e.getNativeElement().classList,"app-login-button")){if(t.loginBtnCmp)return;t.loginBtnCmp=e,t.initLoginButtonActions()}})},t.initializeProps=c(),t.decorators=[{type:n.Component,args:[{selector:"div[wmLogin]",template:'<p wmMessage class="app-login-message" #message show.bind="loginMessage.show" caption.bind="loginMessage.caption" type.bind="loginMessage.type"></p>\n<ng-content></ng-content>\n',providers:[r.provideAsWidgetRef(t)]}]}],t.ctorParameters=function(){return[{type:n.Injector}]},t.propDecorators={formCmp:[{type:n.ContentChild,args:[i.FormComponent]}],buttonComponents:[{type:n.ContentChildren,args:[o.ButtonComponent,{descendants:!0}]}],messageCmp:[{type:n.ViewChild,args:[r.MessageComponent]}]},t}(r.StylableComponent),d=[u],m=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.WmComponentsModule],declarations:l(d),exports:l(d),entryComponents:[]}]}],e}();e.\u0275a=u,e.\u0275b=c,e.LoginModule=m,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("angular2-websocket/angular2-websocket"),require("@angular/router"),require("@wm/core"),require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("ngx-toastr"),require("@wm/http"),require("@wm/security"),require("@wm/oAuth")):"function"==typeof define&&define.amd?define("@wm/variables",["exports","angular2-websocket/angular2-websocket","@angular/router","@wm/core","@angular/core","@angular/common","@angular/common/http","ngx-toastr","@wm/http","@wm/security","@wm/oAuth"],t):t((e.wm=e.wm||{},e.wm.variables={}),e.angularWebSocket,e.ng.router,e.wm.core,e.ng.core,e.ng.common,e.ng.common.http,e.ngxToastr,e.wm.http,e.wm.security,e.wm.oAuth)}(this,function(e,t,n,i,o,r,a,s,l,c,p){"use strict";var u={hasCordova:void 0!==window.cordova,isWaveLens:void 0!==window.WaveLens,isStudioMode:!1,isRunMode:!0,XSRF_COOKIE_NAME:"wm_xsrf_token",DEFAULT_TIMER_DELAY:500,WIDGET_DOESNT_EXIST:"The widget you're trying to navigate to doesn't exist on this page"},d={CATEGORY:{MODEL:"wm.Variable",LIVE:"wm.LiveVariable",SERVICE:"wm.ServiceVariable",WEBSOCKET:"wm.WebSocketVariable",NAVIGATION:"wm.NavigationVariable",NOTIFICATION:"wm.NotificationVariable",TIMER:"wm.TimerVariable",LOGIN:"wm.LoginVariable",LOGOUT:"wm.LogoutVariable",DEVICE:"wm.DeviceVariable"},EVENTS:["onBefore","onBeforeUpdate","onResult","onBeforeOpen","onOpen","onBeforeMessageSend","onMessageReceive","onProgress","onError","onBeforeDatasetReady","onCanUpdate","onClick","onHide","onOk","onCancel","onBeforeClose","onClose","onTimerFire","onSuccess","onOnline","onOffline"],EVENT:{CAN_UPDATE:"onCanUpdate",BEFORE:"onBefore",BEFORE_UPDATE:"onBeforeUpdate",PREPARE_SETDATA:"onBeforeDatasetReady",RESULT:"onResult",ERROR:"onError",ABORT:"onAbort",PROGRESS:"onProgress",CLICK:"onClick",HIDE:"onHide",OK:"onOk",CANCEL:"onCancel",CLOSE:"onClose",TIMER_FIRE:"onTimerFire",SUCCESS:"onSuccess",BEFORE_OPEN:"onBeforeOpen",OPEN:"onOpen",BEFORE_SEND:"onBeforeMessageSend",MESSAGE_RECEIVE:"onMessageReceive",BEFORE_CLOSE:"onBeforeClose"},OWNER:{APP:"App",PAGE:"Page"},REST_SUPPORTED_SERVICES:["JavaService","SoapService","FeedService","RestService","SecurityServiceType","DataService","WebSocketService"],PAGINATION_PARAMS:["page","size","sort"],REST_SERVICE:{BASE_PATH_KEY:"x-WM-BASE_PATH",RELATIVE_PATH_KEY:"x-WM-RELATIVE_PATH",OAUTH_PROVIDER_KEY:"x-WM-PROVIDER_ID",AUTH_HDR_KEY:"Authorization",SECURITY_DEFN:{BASIC:"basic",OAUTH2:"oauth2"},AUTH_TYPE:{BASIC:"BASIC",OAUTH:"OAUTH2",NONE:"NONE"},CONTENT_TYPE_KEY:"x-WM-CONTENT_TYPE",ACCESSTOKEN_PLACEHOLDER:{LEFT:"",RIGHT:".access_token"},ERR_TYPE:{NO_ACCESSTOKEN:"missing_accesstoken",NO_CREDENTIALS:"no_credentials",METADATA_MISSING:"metadata_missing",USER_UNAUTHORISED:"user_unauthorised",REQUIRED_FIELD_MISSING:"required_field_missing"},ERR_MSG:{NO_ACCESSTOKEN:"Access token missing",NO_CREDENTIALS:"No credentials present",METADATA_MISSING:"Metadata missing",USER_UNAUTHORISED:"Unauthorized User",REQUIRED_FIELD_MISSING:'Required field(s) missing: "${0}"'},UNCLOAKED_HEADERS:["CONTENT-TYPE","ACCEPT","CONTENT-LENGTH","ACCEPT-ENCODING","ACCEPT-LANGUAGE"],PREFIX:{AUTH_HDR_VAL:{BASIC:"Basic",OAUTH:"Bearer"},CLOAK_HEADER_KEY:"X-WM-"}},SERVICE_TYPE:{JAVA:"JavaService",REST:"RestService",SOAP:"SoapService",FEED:"FeedService",DATA:"DataService",SECURITY:"SecurityServiceType",WEBSOCKET:"WebSocketService"},CONTROLLER_TYPE:{QUERY:"QueryExecution",PROCEDURE:"ProcedureExecution"},HTTP_STATUS_CODE:{CORS_FAILURE:-1,UNAUTHORIZED:401,FORBIDDEN:403},EXPORT_TYPES_MAP:{EXCEL:".xlsx",CSV:".csv"},DEFAULT_VAR:{NOTIFICATION:"appNotification"}},m={NON_BODY_HTTP_METHODS:["GET","HEAD"],CONTENT_TYPES:{FORM_URL_ENCODED:"application/x-www-form-urlencoded",MULTIPART_FORMDATA:"multipart/form-data",OCTET_STREAM:"application/octet-stream"}},h={DATABASE_MATCH_MODES:{like:"LIKE",start:"STARTING_WITH",startignorecase:"STARTING_WITH_IGNORECASE",end:"ENDING_WITH",endignorecase:"ENDING_WITH_IGNORECASE",anywhere:"CONTAINING",anywhereignorecase:"CONTAINING_IGNORECASE",exact:"EQUALS",exactignorecase:"EQUALS_IGNORECASE",notequals:"NOT_EQUALS",notequalsignorecase:"NOT_EQUALS_IGNORECASE",between:"BETWEEN",in:"IN",notin:"NOTIN",lessthan:"LESS_THAN",lessthanequal:"LESS_THAN_OR_EQUALS",greaterthan:"GREATER_THAN",greaterthanequal:"GREATER_THAN_OR_EQUALS",null:"NULL",isnotnull:"IS_NOT_NULL",empty:"EMPTY",isnotempty:"IS_NOT_EMPTY",nullorempty:"NULL_OR_EMPTY"},DATABASE_EMPTY_MATCH_MODES:["NULL","IS_NOT_NULL","EMPTY","IS_NOT_EMPTY","NULL_OR_EMPTY"],DATABASE_RANGE_MATCH_MODES:["IN","NOTIN","BETWEEN","LESS_THAN","LESS_THAN_OR_EQUALS","GREATER_THAN","GREATER_THAN_OR_EQUALS","NOT_EQUALS"],DATABASE_NULL_EMPTY_MATCH:{NULL:"NULL",IS_NOT_NULL:"IS_NOT_NULL",EMPTY:"NULL",IS_NOT_EMPTY:"IS_NOT_NULL",NULL_OR_EMPTY:"NULL"},DATABASE_MATCH_MODES_WITH_QUERY:{LIKE:"${0} like ${1}",STARTING_WITH:"${0} like ${1}",STARTING_WITH_IGNORECASE:"${0} like ${1}",ENDING_WITH:"${0} like ${1}",ENDING_WITH_IGNORECASE:"${0} like ${1}",CONTAINING:"${0} like ${1}",CONTAINING_IGNORECASE:"${0} like ${1}",EQUALS:"${0}=${1}",EQUALS_IGNORECASE:"${0}=${1}",NOT_EQUALS:"${0}!=${1}",NOT_EQUALS_IGNORECASE:"${0}!=${1}",BETWEEN:"${0} between ${1}",IN:"${0} in ${1}",NOTIN:"${0} not in ${1}",LESS_THAN:"${0}<${1}",LESS_THAN_OR_EQUALS:"${0}<=${1}",GREATER_THAN:"${0}>${1}",GREATER_THAN_OR_EQUALS:"${0}>=${1}",NULL:"${0} is null",IS_NOT_NULL:"${0} is not null",EMPTY:"${0}=''",IS_NOT_EMPTY:"${0}<>''",NULL_OR_EMPTY:"${0} is null or ${0}=''"},DATABASE_STRING_MODES:["LIKE","STARTING_WITH","STARTING_WITH_IGNORECASE","ENDING_WITH","ENDING_WITH_IGNORECASE","CONTAINING","CONTAINING_IGNORECASE","EQUALS","EQUALS_IGNORECASE","NOT_EQUALS","NOT_EQUALS_IGNORECASE"]},f={WM_DATA_JSON:"wm_data_json",WM_HTTP_JSON:"wm_httpRequestDetails"},g={DATABASE:{searchTableData:{url:"/:service/:dataModelName/:entityName/search?page=:page&size=:size&:sort",method:"POST"},searchTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/filter?page=:page&size=:size&:sort",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}},readTableData:{url:"/:service/:dataModelName/:entityName?page=:page&size=:size&:sort",method:"GET"},insertTableData:{url:"/:service/:dataModelName/:entityName",method:"POST"},insertMultiPartTableData:{url:"/:service/:dataModelName/:entityName",method:"POST",headers:{}},updateTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"PUT"},updateMultiPartTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"POST",headers:{}},deleteTableData:{url:"/:service/:dataModelName/:entityName/:id",method:"DELETE"},updateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"PUT"},periodUpdateCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"PUT"},updateMultiPartCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"POST",headers:{}},deleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id?:id",method:"DELETE"},periodDeleteCompositeTableData:{url:"/:service/:dataModelName/:entityName/composite-id/periods?:id",method:"DELETE"},getDistinctDataByFields:{url:"/:service/:dataModelName/:entityName/aggregations?page=:page&size=:size&:sort",method:"POST"},exportTableData:{url:"/services/:dataModelName/:entityName/export?:sort",method:"POST"},readTableRelatedData:{url:"/:service/:dataModelName/:entityName/:id/:relatedFieldName?page=:page&size=:size&:sort",method:"GET"},executeNamedQuery:{url:"/:service/:dataModelName/queryExecutor/queries/:queryName?page=:page&size=:size&:queryParams",method:"GET"},executeCustomQuery:{url:"/:service/:dataModelName/queries/execute?page=:page&size=:size",method:"POST"},executeAggregateQuery:{url:"/services/:dataModelName/:entityName/aggregations?page=:page&size=:size&sort=:sort",method:"POST"},executeNamedProcedure:{url:"/:service/:dataModelName/procedureExecutor/procedure/execute/:procedureName?page=:page&size=:size&:procedureParams",method:"GET"},countTableDataWithQuery:{url:"/:service/:dataModelName/:entityName/count",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}},oauthConfiguration:{getAuthorizationUrl:{url:"services/oauth2/:providerId/authorizationUrl",method:"GET"}}},v={project:{deployedUrl:"./",id:"temp_id"},projectName:"test_project_name",isApplicationType:!0},y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function b(e,t){function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var w,P,O={EXCEL:".xlsx",CSV:".csv"},R=/^\[("|')[\w\W]*(\1)\]$/,E=new Map,T=new Map,S=function(e,t){var n,i,o=_.noop;T.has(e)&&(o=T.get(e).cancel),o(),n=_.debounce(function(){(i=e[t]())instanceof Promise&&i.catch(_.noop)},100),T.set(e,n),n()},C=function(e,t,n,i,o){switch(i.category){case d.CATEGORY.LIVE:"read"===i.operation?("dataBinding"===e?_.forEach(t,function(e,t){i.filterFields[t]={value:e}}):i.filterFields[e]={value:t,type:n},i.autoUpdate&&!_.isUndefined(t)&&_.isFunction(i.listRecords)&&!o&&S(i,"listRecords")):("dataBinding"===e?i.inputFields=t:i.inputFields[e]=t,i.autoUpdate&&!_.isUndefined(t)&&_.isFunction(i[i.operation+"Record"])&&!o&&S(i,i.operation+"Record"));break;case d.CATEGORY.SERVICE:case d.CATEGORY.LOGIN:i.autoUpdate&&!_.isUndefined(t)&&_.isFunction(i.invoke)&&!o&&S(i,"invoke");break;case d.CATEGORY.DEVICE:i[e]=t,i.autoUpdate&&!_.isUndefined(t)&&_.isFunction(i.invoke)&&!o&&S(i,"invoke")}},I=C,A=function(t,n){switch(t){case"appManager":e.appManager=n;break;case"http":e.httpService=n;break;case"metadata":e.metadataService=n;break;case"navigationService":e.navigationService=n;break;case"router":e.routerService=n;break;case"toaster":e.toasterService=n;break;case"oAuth":e.oauthService=n;break;case"security":e.securityService=n;break;case"dialog":e.dialogService=n}},D=function(e,t,n,o,r){var a,s=t[e],l=t._context;e!==d.EVENT.ERROR||r||s||(a=l.Actions[d.DEFAULT_VAR.NOTIFICATION])&&(n=a.getMessage()||n,n=_.isString(n)?n:"An error has occured. Please check the app logs.",a.invoke({message:n},void 0,void 0));var c=i.$parseEvent(t[e]);return e===d.EVENT.BEFORE_UPDATE?"wm.LiveVariable"===t.category&&"read"===t.operation?c(t._context,{variable:t,dataFilter:n,options:o}):c(t._context,{variable:t,inputData:n,options:o}):c(t._context,{variable:t,data:n,options:o})},N=function(e){setTimeout(function(){i.triggerFn(e)},500)},x=N,M=function(e,t,n,o){var r,a,s,l,c,p="",u=t.get("Content-Disposition");if(u&&-1!==u.indexOf("attachment")&&null!==(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(u))&&r[1]&&(p=r[1].replace(/['"]/g,"")),a=t.get("Content-Type"),s=new Blob([e],{type:a}),void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(s,p)?N(n):i.triggerFn(o);else{if(l=window.URL||window.webkitURL,c=l.createObjectURL(s),p){var d,m=document.createElement("a");void 0===m.download?((d=new FileReader).onloadend=function(){var e=d.result.replace(/^data:[^;]*;/,"data:attachment/file;");window.open(e,"_blank")||(window.location.href=e)},d.onload=N.bind(void 0,n),d.onerror=o,d.readAsDataURL(s)):(m.href=c,m.download=p,document.body.appendChild(m),m.click(),N(n))}else window.open(c,"_blank")||(window.location.href=c);setTimeout(function(){l.revokeObjectURL(c)},100)}},k=M,L=function(e){if(e)return e},F=function(e,t){e=_.split(e,"&"),_.forEach(e,function(e){e=_.split(e,"="),t[e[0]]=decodeURIComponent(_.join(_.slice(e,1),"="))})},B=F,G=function(e,t){"/"===e.url[1]&&"/"===e.url[2]&&(e.url=e.url.slice(0,1)+e.url.slice(2));var n,o,r,a="",s=e.url,l=_.get(e.headers,"Content-Type"),c=_.pickBy(e.headers,function(e,t){return"Content-Type"!==t});(n=$("#fileDownloadIFrame")).length&&n.first().remove(),n=$('<iframe id="fileDownloadIFrame" name="fileDownloadIFrame" class="ng-hide"></iframe>'),(o=$('<form id="fileDownloadForm" name="fileDownloadForm"></form>')).attr({target:n.attr("name"),action:s,method:e.method,enctype:l}),a+=-1!==s.indexOf("?")?s.substring(s.indexOf("?")+1):"",a+=l===m.CONTENT_TYPES.FORM_URL_ENCODED?(a?"&":"")+e.dataParams:"",_.includes(m.NON_BODY_HTTP_METHODS,_.toUpper(e.method))&&F(a,c),F(e.data,c),_.forEach(c,function(e,t){(r=$('<input type="hidden">')).attr({name:t,value:e}),o.append(r)}),$("body").append(n),setTimeout(function(){n.contents().find("body").append(o),o.submit(),i.triggerFn(t)},100)},j=G,V=function(t,n,o){var r=t.url,a=t.method,s=t.dataParams||t.data,l=t.headers;l["Content-Type"]=l["Content-Type"]||"application/x-www-form-urlencoded",e.httpService.send({target:"WebService",action:"invokeRuntimeRestCall",method:a,url:r,headers:l,data:s,responseType:"arraybuffer"}).then(function(e){setTimeout(function(){M(e.body,e.headers,n,o)},900)},function(e){i.triggerFn(o,e)})},U=V,W=function(e,t){var n,i=Date.now();return t?n=O[t]:(n="."+_.last(_.split(e,".")),e=_.replace(e,n,"")),e+"_"+i+n},q=function(e){return"cookie"},H=function(){return!!u.hasCordova&&localStorage.getItem(u.XSRF_COOKIE_NAME)},z=H,Y=function(e,t,n){var o,r=e.target,a=n[t];return R.test(r)?o=a:(r=r.substr(0,r.lastIndexOf(".")),o=e.target===t?n:r?i.findValueOf(a,r,!0):a),o},K=Y,Q=function(e){return R.test(e)?e.replace(/^(\[["'])|(["']\])$/g,""):e.split(".").pop()},X=Q,Z=function(e,t,n,i,o,r){var a=Q(e),s=Y(t,n,i);o=_.isUndefined(o)?t.value:o,s&&(s[a]=o),C(a,o,t.type,i,r)},J=Z,ee=function(e,t,n){var i,o=_.keys(_.get(E.get(n),[n.name,t])),r=Q(e);(i=_.filter(o,function(e){return e!==r&&_.includes(e,r)||(r===t||"dataBinding"===r)&&e!==r})).length&&_.forEach(i,function(e){Z(e,{target:e},t,n,_.get(E.get(n),[n.name,t,e]))})},te=ee,ne=function(e,t,n,o){var r=e.target,a=Y(e,n,o),s=Q(r),l=t.registerDestroyListener?t.registerDestroyListener.bind(t):_.noop;i.stringStartsWith(e.value,"bind:")?l(i.$watch(e.value.replace("bind:",""),t,{},function(t,l){t===l&&_.isUndefined(t)||!(!_.isUndefined(t)||_.isUndefined(l)&&_.isUndefined(a[s]))||(_.includes(["blob","file"],e.type)||(t=i.getClonedObject(t)),Z(r,e,n,o,t),E.has(o)||E.set(o,{}),_.set(E.get(o),[o.name,n,r],t),_.isObject(t)&&ee(r,n,o))})):_.isUndefined(e.value)||(Z(r,e,n,o,e.value,!0),n!==s&&(E.has(o)||E.set(o,{}),_.set(E.get(o),[o.name,n,r],e.value)))},ie=ne,oe=function(e,t,n,i){i=i||"dataBinding";var o=e[n=n||"dataBinding"];e[n]={},e["_bind"+n]=o,o&&o.forEach(function(n){"wm.Variable"===e.category&&"dataBinding"===n.target&&(n.target="dataSet"),ne(n,t,i,e)})},re=function(t,n,i,o,r){if(u.hasCordova){var a=void 0;i&&(a=O[i]),e.appManager.notify("device-file-download",{url:t.url,name:n,extension:a,successCb:o,errorCb:r})}else!_.isEmpty(t.headers)||H()?V(t,o,r):G(t,o)},ae=function(e,t,n,o){e=e||{};var r,a,s={};if(_.isObject(o))switch(o.type){case"file":n=i.getBlob(n,o.contentType);break;case"number":n=_.isNumber(n)?n:parseInt(n,10)}return _.isObject(t)?s=t:t.indexOf(".")>-1?(a=(r=t.split(".")).pop(),e=i.findValueOf(e,r.join("."),!0),s[t=a]=n):s[t]=n,_.forEach(s,function(t,n){e[n]=t}),e},se=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},le=function(e,t){var n,i;return!t||_.isEmpty(t)?e:e?(e=_.split(e,","),t=_.split(t,","),n=_.map(t,function(e){return _.split(_.trim(e)," ")[0]}),_.remove(e,function(e){return _.includes(n,_.split(_.trim(e)," ")[0])}),i=e.length?","+_.join(e,","):"",_.join(t,",")+i):t},ce=function(e){return _.forEach(e,function(e){e.expression&&(e.expression="${"+e.expression+"}")}),e},pe=S,ue=function(e){return i.DEFAULT_FORMATS[_.toUpper(e)]},de=ue,me=function(t,n){var o;return _.isDate(t)?o=t.getTime():(isNaN(t)||(t=parseInt(t,10)),o=t&&moment(t).valueOf()),n===i.DataType.TIMESTAMP?o:(n!==i.DataType.TIME||o||(o=moment((new Date).toDateString()+" "+t).valueOf()),t&&e.appManager.getPipe("date").transform(o,ue(n)))},he=me,fe=function(e,t){return _.includes(t,".")&&(t=_.toLower(i.extractType(t))),_.isArray(e)?_.map(e,function(e){return me(e,t)}):me(e,t)},ge=function(){function t(){}return t.prototype.initBinding=function(e,t,n){oe(e,e._context,t,n)},t.prototype.notifyInflight=function(t,n,i){e.appManager.notify("toggle-variable-state",{variable:t,active:n,data:i})},t.prototype.httpCall=function(t,n,i){var o=this;return new Promise(function(r,a){n._observable=e.httpService.sendCallAsObservable(t,i).subscribe(function(e){e&&e.type&&r(e)},function(t){e.httpService.isPlatformSessionTimeout(t)?(o.notifyInflight(n,!1,t),t._401Subscriber.asObservable().subscribe(function(e){return r(e)},function(e){return a(e)})):a(t)})})},t.prototype.prepareCallbackOptions=function(e,t){var n={};return n.xhrObj=e,t&&_.extend(n,t),n},t}(),ve=function(e){var t=!0;return _.forEach(e,function(e){if(!_.isEmpty(e))return t=!!_.isObject(e)&&(_.isArray(e)?_.isEmpty(e)||1===e.length&&_.isEmpty(e[0]):ve(e))}),t},ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.removeFirstEmptyObject=function(e){_.isArray(e.dataSet)&&1===e.dataSet.length&&ve(e.dataSet[0])&&(e.dataSet=[])},t}(ge),be=function(){return function(e){var t=[],n=function(e){t.forEach(function(t){t(e)})},i=function(){t.length=0},o=new Promise(function(t,i){e(t,i,n)});return o.superThen=o.then.bind(o),o.then=function(e,n,r){o.superThen(function(t){e(t),i()},function(t){e(t),i()}),r&&t.push(r)},o}}();!function(e){e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User"}(w||(w={})),function(e){e.QUEUED="queued",e.IN_PROGRESS="inprogress",e.SUCCESS="success",e.ERROR="error",e.ABORTED="abort"}(P||(P={}));!function(e){function t(t,n,i,o){return e.call(this,t,n,i,o)||this}b(t,e)}(function(){function e(e,t,n,i){this.name=e.name,this.size=e.size||"",this.status=P.QUEUED,this.transferFn=t,this.promise=n,this.abortFn=i}return e.prototype.start=function(){this.status===P.QUEUED&&(this.status=P.IN_PROGRESS,i.triggerFn(this.transferFn))},e.prototype.then=function(e,t,n){var o=this;return this.promise.then(function(t){o.status=P.SUCCESS,i.triggerFn(e,t)},function(e){o.status=P.ERROR,i.triggerFn(t,e)},function(e){o.progress=Math.round(e.loaded/e.total*100),i.triggerFn(n,e)}),this},e.prototype.finally=function(e){this.promise.finally(e)},e.prototype.abort=function(){this.status=P.ABORTED,i.triggerFn(this.abortFn),this.finally()},e}());function we(t,n,i,o){var r=new FormData,a=function(e,t){var n=_.isArray(e)?e[0]:e;n instanceof File||n instanceof Blob||r.append(t,e)};return n.forEach?n.forEach(a):_.forEach(n,a),function(e,t,n){_.isArray(e)?_.forEach(e,function(e){t.append(n.paramName,e.content||e,e.name)}):_.isObject(e)&&t.append(n.paramName,e.content||e,e.name)}(t,r,o),new be(function(n,o,a){var s=e.httpService.upload(i,r).subscribe(function(e){if(e.type===w.UploadProgress){var t=Math.round(100*e.loaded/e.total);a(t)}e.type===w.Response&&n(e.body)});t._uploadProgress=s})}var Pe=function(t,n){return e.oauthService.getAccessToken(t,n)},_e=function(e,t,n){var o=_.toLower(i.extractType(_.get(t,"items.type")||t.type)),r=u.isStudioMode?t["x-WM-CONTENT_TYPE"]:t.contentType;if(se())return"file"===o||"string"!==r&&r?_.isArray(n)&&"file"===o?_.forEach(n,function(n){e.append(t.name,n&&n.content||i.getBlob(n),n.name)}):e.append(t.name,i.getBlob(n,r),n&&n.name):(_.isObject(n)&&(n=JSON.stringify(n)),e.append(t.name,n)),e},Oe=function(e,t){var n,o={},r=[];return _.forEach(t,function(t){n=_.get(e,t.name),_.isUndefined(n)||""===n||null===n||t.readOnly?t.required&&r.push(t.name||t.id):(n=i.isDateTimeType(t.type)?fe(n,t.type):n,_.isArray(n)&&"string"===_.toLower(i.extractType(t.type))&&(n=_.join(n,",")),o[t.name]=n)}),{requestBody:o,missingParams:r}},Re=function(){function e(){}return e.constructRequestParams=function(e,t,n){if(e=e||{},null===t)return{error:{type:d.REST_SERVICE.ERR_TYPE.USER_UNAUTHORISED,message:d.REST_SERVICE.ERR_MSG.USER_UNAUTHORISED,field:"_wmServiceOperationInfo"}};if(_.isEmpty(t))return{error:{type:d.REST_SERVICE.ERR_TYPE.METADATA_MISSING,message:d.REST_SERVICE.ERR_MSG.METADATA_MISSING,field:"_wmServiceOperationInfo"}};var o,r,a,s,l,c,p,h,g,y,b,w,P,O,R,E=t.directPath||"",T=t.basePath?t.basePath+t.relativePath:t.relativePath,S=function(e){return _.includes(["QueryExecution","ProcedureExecution"],e.controller)&&_.includes(["put","post"],e.operationType)}(e),C="",I={},A=[],D=null;function N(){return g||(g=new FormData)}if(P=_.get(t.securityDefinitions,"0"))switch(P.type){case d.REST_SERVICE.SECURITY_DEFN.OAUTH2:if(!(O=Pe(P[d.REST_SERVICE.OAUTH_PROVIDER_KEY],null)))return{error:{type:d.REST_SERVICE.ERR_TYPE.NO_ACCESSTOKEN,message:d.REST_SERVICE.ERR_MSG.NO_ACCESSTOKEN},securityDefnObj:P};I[d.REST_SERVICE.AUTH_HDR_KEY]=d.REST_SERVICE.PREFIX.AUTH_HDR_VAL.OAUTH+" "+O;break;case d.REST_SERVICE.SECURITY_DEFN.BASIC:if(c=n.wm_auth_username,p=n.wm_auth_password,!c||!p)return{error:{type:d.REST_SERVICE.ERR_TYPE.NO_CREDENTIALS,message:d.REST_SERVICE.ERR_MSG.NO_CREDENTIALS},securityDefnObj:P};I[d.REST_SERVICE.AUTH_HDR_KEY]=d.REST_SERVICE.PREFIX.AUTH_HDR_VAL.BASIC+" "+btoa(c+":"+p),D={type:d.REST_SERVICE.AUTH_TYPE.BASIC}}return t.proxySettings=t.proxySettings||{web:!0,mobile:!1},h=t.httpMethod||t.methodType,y=u.hasCordova?t.proxySettings.mobile:t.proxySettings.web,R=t.proxySettings.withCredentials,a=y?T:E,_.forEach(t.parameters,function(s){function c(){n?(b=n[s.name]&&_.isObject(n[s.name])?n[s.name]:n,w=_.get(t,["definitions",s.type])):(b=m||{},w=s.children)}var p,u,m=s.sampleValue;if(i.isDefined(m)&&null!==m&&""!==m||S&&"file"!==s.type)switch(e.serviceType===d.SERVICE_TYPE.DATA&&i.isDateTimeType(s.type)&&(m=fe(m,s.type)),_.isArray(m)&&"string"===_.toLower(i.extractType(s.type))&&e.serviceType===d.SERVICE_TYPE.DATA&&(m=_.join(m,",")),s.parameterType.toUpperCase()){case"QUERY":if(_.isNull(m)&&(p=e.controller,u=e.serviceType,p===d.CONTROLLER_TYPE.QUERY&&u===d.SERVICE_TYPE.DATA))break;C?C+="&"+s.name+"="+encodeURIComponent(m):C="?"+s.name+"="+encodeURIComponent(m);break;case"PATH":l=new RegExp("\\s*\\{\\s*"+s.name+"(:\\.\\+)?\\s*\\}\\s*"),a=a.replace(l,m);break;case"HEADER":I[s.name]=m;break;case"BODY":S?(c(),o=Oe(b,w),r=o.requestBody,A=_.concat(A,o.missingParams)):r=m;break;case"FORMDATA":S&&s.name===f.WM_DATA_JSON?(c(),o=Oe(b,w),r=_e(N(),s,o.requestBody),A=_.concat(A,o.missingParams)):r=_e(N(),s,m)}else s.required&&A.push(s.name||s.id)}),A.length?{error:{type:d.REST_SERVICE.ERR_TYPE.REQUIRED_FIELD_MISSING,field:A.join(","),message:i.replace(d.REST_SERVICE.ERR_MSG.REQUIRED_FIELD_MISSING,[A.join(",")]),skipDefaultNotification:!0}}:(_.includes(m.NON_BODY_HTTP_METHODS,_.toUpper(h))||t.consumes&&t.consumes[0]===m.CONTENT_TYPES.MULTIPART_FORMDATA||(I["Content-Type"]=t.consumes&&t.consumes[0]||"application/json"),_.includes(t.consumes,m.CONTENT_TYPES.FORM_URL_ENCODED)&&!_.includes(m.NON_BODY_HTTP_METHODS,(h||"").toUpperCase())?(C&&(r=(r?r+"&":"")+C.substring(1)),I["Content-Type"]=m.CONTENT_TYPES.FORM_URL_ENCODED):a+=C,y&&(I=e.serviceType!==d.SERVICE_TYPE.REST||t.skipCloakHeaders?I:function(e){var t={},n=d.REST_SERVICE.UNCLOAKED_HEADERS,i=d.REST_SERVICE.PREFIX.CLOAK_HEADER_KEY;return _.forEach(e,function(e,o){_.includes(n,o.toUpperCase())?t[o]=e:t[i+o]=e}),t}(I),e.getPrefabName()&&-1!==d.REST_SUPPORTED_SERVICES.indexOf(e.serviceType)?(a="prefabs/"+e.getPrefabName()+a,s="invokePrefabRestService"):e.getPrefabName()||(a="services"+a),a=v.project.deployedUrl+a),{projectID:v.project.id,url:a,target:s,method:h,headers:I,data:r,authDetails:D,isDirectCall:!y,isExtURL:e.serviceType===d.SERVICE_TYPE.REST,withCredentials:R})},e.isFileUploadRequest=function(e){return"FileService"===e.service&&"uploadFile"===e.operation},e.excludePaginationParams=function(e){return _.map(_.reject(e,function(e){return _.includes(d.PAGINATION_PARAMS,e.name)}),function(e){return e.name})},e}(),Ee=new(function(){function e(){this.requestsQueue=new Map}return e.prototype.addToQueue=function(e,t){if(this.requestsQueue.has(e))this.requestsQueue.get(e).push(t);else{var n=[];n.push({resolve:t.resolve,reject:t.reject,active:!1}),this.requestsQueue.set(e,n)}},e.prototype.rejectProcess=function(e){e.reject('Process rejected in the queue. Check the "Inflight behavior" for more info.')},e.prototype.clear=function(e){this.requestsQueue.delete(e)},e.prototype.process=function(e){var t,n=this.requestsQueue.get(e);if(n&&n.length)if(1!==n.length)switch(e.inFlightBehavior){case"executeLast":for(var i=0;i<n.length-2;i++)this.rejectProcess(n[i]);n.splice(0,n.length-1),this.process(e);break;case"executeAll":(t=n.splice(0,1)[0]).active&&(t=n.splice(0,1)[0]),t.active=!0,t.resolve();break;default:for(i=0;i<n.length-1;i++)this.rejectProcess(n[i]);this.clear(e)}else(t=n[0]).active?this.clear(e):(t.active=!0,t.resolve());else this.clear(e)},e.prototype.submit=function(e){var t=this;return new Promise(function(n,i){t.addToQueue(e,{resolve:n,reject:i}),1===t.requestsQueue.get(e).length&&t.process(e)})},e}()),Te=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.fileUploadResponse=[],e.fileUploadCount=0,e.totalFilesCount=0,e.successFileUploadCount=0,e.failedFileUploadCount=0,e}return b(n,t),n.prototype.processErrorResponse=function(t,n,o,r,a,s){var l,c=this.getMethodInfo(t,{},{}),p=_.get(c,"securityDefinitions.0"),m=this.prepareCallbackOptions(r);a||D(d.EVENT.ERROR,t,n,m,s),_.get(p,"type")===d.REST_SERVICE.SECURITY_DEFN.OAUTH2&&_.includes([d.HTTP_STATUS_CODE.UNAUTHORIZED,d.HTTP_STATUS_CODE.FORBIDDEN],_.get(r,"status"))&&(l=p["x-WM-PROVIDER_ID"],e.oauthService.removeAccessToken(l)),i.triggerFn(o,n),u.isStudioMode||(t.canUpdate=!0,Ee.process(t),D(d.EVENT.CAN_UPDATE,t,n,m))},n.prototype.processSuccessResponse=function(e,t,n,o){var r,a,s,l={},c=i.getValidJSON(e);e=i.isDefined(c)?c:i.xmlToJson(e)||e;var p=i.isPageable(e);return p?(r=e.content,l=_.omit(e,"content")):r=e,s=this.prepareCallbackOptions(n.xhrObj,{pagination:l,rawData:r}),D(d.EVENT.RESULT,t,e,s),i.triggerFn(o,e,l),t.transformationColumns&&this.transformData(e,t),r=_.isObject(r)?r:{value:r},a=D(d.EVENT.PREPARE_SETDATA,t,r,s),i.isDefined(a)&&(r=a),n.forceRunMode||n.skipDataSetUpdate||(t.pagination=l,t.dataSet=r,p&&Object.defineProperty(t.dataSet,"content",{get:function(){return t.dataSet}})),i.$invokeWatchers(!0),setTimeout(function(){D(d.EVENT.SUCCESS,t,r,s),u.isStudioMode||(t.canUpdate=!0,Ee.process(t)),D(d.EVENT.CAN_UPDATE,t,r,s)}),{data:t.dataSet,pagination:t.pagination}},n.prototype.uploadFileInFormData=function(t,n,i,o,r,a){var s=this,l=function(e,t,n,i){return i=_.extend({paramName:n.fileParamName},i),we(e,t,n.url,i)}(r,a.data,{fileParamName:"files",url:a.url});return l.then(function(o){return s.fileUploadCount++,s.successFileUploadCount++,s.fileUploadResponse.push(o[0]),s.totalFilesCount===s.fileUploadCount&&(0===s.failedFileUploadCount?(s.processSuccessResponse(s.fileUploadResponse,t,n,i),s.fileUploadResponse=[],e.appManager.notifyApp(e.appManager.getAppLocale().MESSAGE_FILE_UPLOAD_SUCCESS,"success")):(D(d.EVENT.ERROR,t,s.fileUploadResponse),s.fileUploadResponse=[],e.appManager.notifyApp(e.appManager.getAppLocale().MESSAGE_FILE_UPLOAD_ERROR,"error")),s.fileUploadCount=0,s.successFileUploadCount=0,s.totalFilesCount=0),o},function(e){return s.fileUploadCount++,s.failedFileUploadCount++,s.fileUploadResponse.push(e),s.totalFilesCount===s.fileUploadCount&&(s.processErrorResponse(t,s.fileUploadResponse,o,n.xhrObj,n.skipNotification),D(d.EVENT.ERROR,t,s.fileUploadResponse),s.fileUploadResponse=[],s.fileUploadCount=0,s.failedFileUploadCount=0,s.totalFilesCount=0),e},function(e){return t._progressObservable&&t._progressObservable.next({progress:e,status:d.EVENT.PROGRESS,fileName:r.name}),D(d.EVENT.PROGRESS,t,e),e}),l},n.prototype.handleAuthError=function(t,n,i,o){var r;return _.get(e.securityService.get(),"authenticated")?r={error:{message:"You're not authorised to access the resource \""+t.service+'".'}}:(r={error:{message:"You're not authenticated to access the resource \""+t.service+'".',skipDefaultNotification:!0}},e.appManager.pushToSessionFailureRequests(t.invoke.bind(t,o,n,i)),e.appManager.handle401()),r},n.prototype.handleRequestMetaError=function(t,n,i,o,r){var a,s,l,c;switch(_.get(t,"error.type")){case d.REST_SERVICE.ERR_TYPE.NO_ACCESSTOKEN:a=void 0,s=t.securityDefnObj[d.REST_SERVICE.OAUTH_PROVIDER_KEY],l=this.invoke.bind(this,n,r,null,o),c=null,e.oauthService.perfromOAuthorization(a,s,l,c),this.processErrorResponse(n,t.error.message,o,r.xhrObj,!0,!0);break;case d.REST_SERVICE.ERR_TYPE.USER_UNAUTHORISED:t=this.handleAuthError(n,i,o,r),this.processErrorResponse(n,t.error.message,o,r.xhrObj,r.skipNotification,t.error.skipDefaultNotification);break;case d.REST_SERVICE.ERR_TYPE.METADATA_MISSING:this.processErrorResponse(n,t.error.message,o,r.xhrObj,r.skipNotification,t.error.skipDefaultNotification);break;default:t.error.message&&(console.warn(t.error.message,n.name),this.processErrorResponse(n,t.error.message,o,r.xhrObj,r.skipNotification,t.error.skipDefaultNotification))}return t},n.prototype.transformData=function(e,t){e.wmTransformedData=[];var n=t.transformationColumns,i=_.get(e,t.dataField)||[],o=e.wmTransformedData;_.forEach(i,function(e,t){o[t]={},_.forEach(n,function(n,i){o[t][n]=e[i]})})},n.prototype.getMethodInfo=function(t,n,o){var r=i.getClonedObject(e.metadataService.getByOperationId(t.operationId,t.getPrefabName())),a=null===r?null:_.get(r,"wmServiceOperationInfo");if(!a)return a;var s=_.get(a.securityDefinitions,"0"),l=s&&s.type===d.REST_SERVICE.SECURITY_DEFN.OAUTH2;return a.parameters&&a.parameters.forEach(function(e){e.readOnly||(e.sampleValue=n[e.name],-1!==d.PAGINATION_PARAMS.indexOf(e.name)?"size"===e.name?e.sampleValue=o.size||e.sampleValue||parseInt(t.maxResults,10):"page"===e.name?e.sampleValue=o.page||e.sampleValue||1:"sort"===e.name&&(e.sampleValue=le(t.orderBy,o.orderBy)||e.sampleValue||""):"access_token"===e.name&&l&&(e.sampleValue=Pe(s[d.REST_SERVICE.OAUTH_PROVIDER_KEY],null)))}),a},n.prototype.isFileUploadInProgress=function(e){var t=!1;return _.forEach(e,function(e){_.isArray(e)&&e[0]instanceof File&&_.forEach(e,function(e){"onProgress"!==e.status||(t=!0)})}),t},n.prototype.uploadFile=function(e,t,n,i,o,r){var a=this,s=0,l=[],c=[];if(_.forEach(o,function(e){_.isArray(e)?(e[0]instanceof File&&s++,_.forEach(e,function(e){(e instanceof File||_.find(_.values(e),function(e){return e instanceof Blob}))&&(l.push(e),a.totalFilesCount++,s=s||1)})):e instanceof File&&(s++,a.totalFilesCount++,l.push(e))}),1===s)return o.files.length>1?(_.forEach(l,function(o){c.push(a.uploadFileInFormData(e,t,n,i,o,r))}),Promise.all(c)):this.uploadFileInFormData(e,t,n,i,l[0],r)},n.prototype._invoke=function(t,n,o,r){var a,s,l=this,c=i.getClonedObject(n.inputFields||t.dataBinding),p=D(d.EVENT.BEFORE_UPDATE,t,c,n);if(!1===p)return Ee.process(t),void i.triggerFn(r);_.isObject(p)&&(c=p);var u=this.getMethodInfo(t,c,n),h=Re.constructRequestParams(t,u,c);if(h.error){var f=this.handleRequestMetaError(h,t,o,r,n),g=(_.get(f,"error.message")||"An error occurred while triggering the variable: ")+": "+t.name;return i.triggerFn(r),Promise.reject(g)}if(Re.isFileUploadRequest(t)){var v=this.uploadFile(t,n,o,r,c,h);if(v)return v}return u&&_.isArray(u.produces)&&_.includes(u.produces,m.CONTENT_TYPES.OCTET_STREAM)?re(h,t.dataBinding.file||t.name,t.dataBinding.exportType,function(){D(d.EVENT.SUCCESS,t,null,null,null),Ee.process(t),i.triggerFn(o)},function(){D(d.EVENT.ERROR,t,null,null,null),Ee.process(t),i.triggerFn(r)}):(this.notifyInflight(t,!n.skipToggleState),a=function(e,i){if(e&&e.type){var r=l.processSuccessResponse(e.body,t,_.extend(n,{xhrObj:e}),o);l.notifyInflight(t,!1,r),i(e)}},s=function(i,o){var a=e.httpService.getErrMessage(i);l.notifyInflight(t,!1),l.processErrorResponse(t,a,r,i,n.skipNotification),o({error:a,details:i})},new Promise(function(e,n){h.responseType="text",l.httpCall(h,t).then(function(t){a(t,e)},function(e){s(e,n)})}))},n.prototype.invoke=function(e,t,n,o){return(t=t||{}).inputFields=t.inputFields||i.getClonedObject(e.dataBinding),Ee.submit(e).then(this._invoke.bind(this,e,t,n,o),o)},n.prototype.download=function(t,n,o,r){n=n||{};var a,s=i.getClonedObject(t.dataBinding),l=n.data||{},c=this.getMethodInfo(t,s,n);return c.relativePath+="/export",(a=Re.constructRequestParams(t,c,s)).data=l,a.data.fields=ce(l.fields||[]),a.method=n.httpMethod||"POST",a.url=n.url||a.url,_.hasIn(a,"error.message")?(i.triggerFn(r,a.error.message),Promise.reject(a.error.message)):e.httpService.send(a).then(function(e){e&&i.isValidWebURL(e.body.result)?(window.location.href=e.body.result,i.triggerFn(o,e)):(D(d.EVENT.ERROR,t,e),i.triggerFn(r,e))},function(e,n){D(d.EVENT.ERROR,t,e,n),i.triggerFn(r,e)})},n.prototype.getInputParms=function(t){var n=_.get(e.metadataService.getByOperationId(t.operationId),"wmServiceOperationInfo");return _.get(n,"parameters")},n.prototype.setInput=function(e,t,n,i){return ae(e.dataBinding,t,n,i)},n.prototype.cancel=function(e,t){Ee.requestsQueue.has(e)&&(Re.isFileUploadRequest(e)?(t._uploadProgress.unsubscribe(),t.status="abort",this.totalFilesCount--,D(d.EVENT.ABORT,e,t),this.isFileUploadInProgress(e.dataBinding)||0!==this.totalFilesCount||(Ee.process(e),this.notifyInflight(e,!1))):e._observable&&(e._observable.unsubscribe(),Ee.process(e),this.notifyInflight(e,!1)))},n.prototype.defineFirstLastRecord=function(e){e.isList&&(Object.defineProperty(e,"firstRecord",{configurable:!0,get:function(){var t=e.dataSet;return _.head(t&&t.content)||_.head(t)||{}}}),Object.defineProperty(e,"lastRecord",{configurable:!0,get:function(){var t=e.dataSet;return _.last(t&&t.content)||_.last(t)||{}}}))},n.prototype.getQueryParams=function(e,t,n){var i=this.getInputParms(n),o=Re.excludePaginationParams(i),r={};return _.map(n.dataBinding,function(e,t){r[t]=e}),_.forEach(e,function(e){_.includes(o,e)&&(r[e]=t)}),r},n.prototype.searchRecords=function(e,t,n,o){var r=this.getQueryParams(_.split(t.searchKey,","),t.query,e),a={page:t.page,pagesize:t.pagesize,skipDataSetUpdate:!0,skipToggleState:!0,inFlightBehavior:"executeAll",inputFields:r};return t.onBeforeservicecall&&t.onBeforeservicecall(r),this.invoke(e,a,n,o).catch(i.noop)},n}(ge),Se=function(){function e(){}return e.isCompositeKey=function(e){return!e||e&&(!e.length||e.length>1)},e.isNoPrimaryKey=function(e){return!e||e&&!e.length},e.getCompositeIDURL=function(e){var t="";return _.forEach(e,function(e,n){t+=n+"="+encodeURIComponent(e)+"&"}),t=t.slice(0,-1)},e.hasBlob=function(e){return _.find(_.get(e,["propertiesMap","columns"]),{type:"blob"})},e.getPrimaryKey=function(e){if(!e.propertiesMap)return[];if(e.propertiesMap.primaryFields)return e.propertiesMap.primaryFields;var t=[];return _.forEach(e.propertiesMap.columns,function(e,n){n.isPrimaryKey&&(n.isRelated&&!_.includes(n.relatedFieldName,t)?t.push(n.relatedFieldName):_.includes(n.fieldName,t)||t.push(n.fieldName))}),t},e.processBlobColumns=function(t,n){if(t){var o,r=_.map(_.filter(n.propertiesMap.columns,{type:"blob"}),"fieldName"),a=_.trim(v.project.deployedUrl),s="";_.isEmpty(r)||(i.hasCordova()&&(s+=_.endsWith(a,"/")?a:a+"/"),s+=(""!==n._prefabName&&void 0!==n._prefabName?"prefabs/"+n._prefabName:"services")+"/"+n.liveSource+"/"+n.type+"/",o=n.propertiesMap.primaryFields||n.propertiesMap.primaryKeys,_.forEach(t,function(t){t&&_.forEach(r,function(n){var i={};null!==t[n]&&_.isEmpty(_.trim(t[n]))&&(e.isCompositeKey(o)?(o.forEach(function(e){i[e]=t[e]}),t[n]=s+"composite-id/content/"+n+"?"+e.getCompositeIDURL(i)):t[n]=s+t[_.join(o)]+"/content/"+n)})}))}},e.getHibernateOrSqlType=function(e,t,n,i){var o,r,a,s=e.propertiesMap.columns;if(_.includes(t,"."))return r=(o=_.find(s,function(e){return e.fieldName===t.split(".")[0]}))&&o.columns,(a=_.find(r,function(e){return e.fieldName===t.split(".")[1]}))&&a[n];if(!(o=_.find(s,function(e){return e.fieldName===t||e.relatedColumnName===t}))&&i){var l=_.find(s,function(e){return e.relatedEntityName===i});o=_.find(l.columns,function(e){return e.fieldName===t||e.relatedColumnName===t})}return o&&o[n]},e.getSqlType=function(t,n,i){return e.getHibernateOrSqlType(t,n,"type",i)},e.isRelatedFieldMany=function(e,t){var n,i=e.propertiesMap.columns,o=i.length;for(n=0;n<o;n+=1)if(i[n].fieldName===t)return!1;return!0},e.isStringType=function(e){return _.includes(["text","string"],_.toLower(e))},e.getSQLFieldType=function(t,n){return _.includes(["timestamp","datetime","date"],n.type)?n.type:e.getSqlType(t,n.fieldName)||n.type},e.getAttributeName=function(e,t){var n=t;return e.propertiesMap.columns.forEach(function(e){e.fieldName===t&&e.isRelated&&(n=e.relatedFieldName)}),n},e.getFilterCondition=function(e){return _.includes(h.DATABASE_RANGE_MATCH_MODES,e)?e:h.DATABASE_MATCH_MODES.exact},e.getFilterOption=function(t,n,o){var r,a,s,l=n.value,c=h.DATABASE_MATCH_MODES,p=n.fieldName,u=n.required||!1,d=e.getSQLFieldType(t,n);if(s=c[n.matchMode]||c[n.filterCondition]||n.filterCondition,n.type=d,_.isObject(l)&&!_.isArray(l)){var m=[];return _.forEach(l,function(e,t){e&&!_.isObject(e)&&m.push(p+"."+t+"="+e)}),m}if(_.includes(h.DATABASE_EMPTY_MATCH_MODES,s))return r=e.getAttributeName(t,p),d&&!e.isStringType(d)&&(s=h.DATABASE_NULL_EMPTY_MATCH[s]),a={attributeName:r,attributeValue:"",attributeType:_.toUpper(d),filterCondition:s,required:u},o.searchWithQuery&&(a.isVariableFilter=n.isVariableFilter),a;if(i.isDefined(l)&&null!==l&&""!==l){if(d)switch(d){case"integer":l=_.isArray(l)?_.reduce(l,function(e,t){return t=parseInt(t,10),_.isNaN(t)||e.push(t),e},[]):parseInt(l,10),s=s?e.getFilterCondition(s):c.exact;break;case"date":case"datetime":case"timestamp":l=fe(l,d),s=s?e.getFilterCondition(s):c.exact;break;case"text":case"string":s=_.isArray(l)?_.includes([c.in,c.notin],s)?s:c.exact:s||c.anywhereignorecase;break;default:s=s?e.getFilterCondition(s):c.exact}else s=_.isString(l)?c.anywhereignorecase:c.exact;return a={attributeName:r=e.getAttributeName(t,p),attributeValue:l,attributeType:_.toUpper(d),filterCondition:s,required:u},o.searchWithQuery&&(a.isVariableFilter=n.isVariableFilter),a}},e.getFilterOptions=function(t,n,i){var o=[];return _.each(n,function(n){var r=e.getFilterOption(t,n,i);_.isNil(r)||(_.isArray(r)?o=o.concat(r):o.push(r))}),o},e.wrapInLowerCase=function(t,n,i,o){var r=_.toLower(n.attributeType);if(!o){if("datetime"===r)return"wm_dt("+t+")";if("timestamp"===r)return"wm_ts("+t+")";if("float"===r)return"wm_float("+t+")";if("boolean"===r)return"wm_bool("+t+")"}return i&&(!r||e.isStringType(r))&&_.includes(h.DATABASE_STRING_MODES,n.filterCondition)?"lower("+t+")":t},e.encodeAndAddQuotes=function(e,t,n){var o=n?e:encodeURIComponent(e);return t=_.toLower(t),o=_.replace(o,/'/g,"''"),i.isNumberType(t)&&"float"!==t?o:"'"+o+"'"},e.getParamValue=function(t,n,o,r){var a,s=n.filterCondition,l=h.DATABASE_MATCH_MODES,c=n.attributeType;if(_.includes(h.DATABASE_EMPTY_MATCH_MODES,s))return"";switch(s){case l.startignorecase:case l.start:a=e.encodeAndAddQuotes(t+"%",c,r),a=e.wrapInLowerCase(a,n,o);break;case l.endignorecase:case l.end:a=e.encodeAndAddQuotes("%"+t,c,r),a=e.wrapInLowerCase(a,n,o);break;case l.anywhereignorecase:case l.anywhere:a=e.encodeAndAddQuotes("%"+t+"%",c,r),a=e.wrapInLowerCase(a,n,o);break;case l.between:a=_.join(_.map(t,function(t){return e.wrapInLowerCase(e.encodeAndAddQuotes(t,c,r),n,o)})," and ");break;case l.in:case l.notin:a="("+(a=_.join(_.map(t,function(t){return e.wrapInLowerCase(e.encodeAndAddQuotes(t,c,r),n,o)}),", "))+")";break;default:a=e.encodeAndAddQuotes(t,c,r),a=e.wrapInLowerCase(a,n,o)}return i.isDefined(a)?a:""},e.getSearchQuery=function(t,n,o,r){var a=[];return _.forEach(t,function(t){var n,s,l=t.attributeValue,c=h.DATABASE_MATCH_MODES,p=_.isArray(l),u=t.attributeName,d=t.filterCondition;p&&_.isEmpty(l)||!p&&isNaN(l)&&i.isNumberType(t.attributeType)||(p&&(d=d===c.between||d===c.notin?d:c.in,t.filterCondition=d),n=h.DATABASE_MATCH_MODES_WITH_QUERY[d],s=e.getParamValue(l,t,o,r),u=e.wrapInLowerCase(u,t,o,!0),a.push(i.replace(n,[u,s])))}),_.join(a,n)},e.processFilterFields=function(t,n,i){_.remove(t,function(e){return e&&(_.isString(e.value)&&0===e.value.indexOf("bind:")||"between"===e.matchMode&&(_.isString(e.secondvalue)&&0===e.secondvalue.indexOf("bind:")))}),_.forEach(t,function(o,r){if(o)if(o.rules)e.processFilterFields(o.rules,n,i);else if(!_.isNull(o.target)){var a=o.matchMode.toLowerCase()===h.DATABASE_MATCH_MODES.between.toLowerCase()?_.isArray(o.value)?o.value:[o.value,o.secondvalue]:o.matchMode.toLowerCase()===h.DATABASE_MATCH_MODES.in.toLowerCase()||o.matchMode.toLowerCase()===h.DATABASE_MATCH_MODES.notin.toLowerCase()?_.isArray(o.value)?o.value:o.value?o.value.split(",").map(function(e){return e.trim()}):"":o.value;t[r]=e.getFilterOption(n,{fieldName:o.target,type:o.type,value:a,required:o.required,filterCondition:o.matchMode||i.matchMode||n.matchMode},i)}})},e.getSearchField=function(t,n,o){var r,a,s=t.attributeName,l=t.filterCondition,c=t.attributeValue,p=_.isArray(c),u=h.DATABASE_MATCH_MODES;if(!(p&&_.isEmpty(c)||p&&_.some(c,function(e){return _.isNull(e)||_.isNaN(e)||""===e})||!p&&isNaN(c)&&i.isNumberType(t.attributeType)))return p&&(l=l===u.between||l===u.notin?l:u.in,t.filterCondition=l),r=h.DATABASE_MATCH_MODES_WITH_QUERY[l],a=e.getParamValue(c,t,n,o),s=e.wrapInLowerCase(s,t,n,!0),i.replace(r,[s,a])},e.getIgnoreCase=function(e,t){var n=h.DATABASE_MATCH_MODES;return-1===_.indexOf([n.anywhere,n.start,n.end,n.exact],e)&&(-1!==_.indexOf([n.anywhereignorecase,n.startignorecase,n.endignorecase,n.exactignorecase],e)||t)},e.generateSearchQuery=function(t,n,i,o){var r=[];return _.forEach(t,function(t){if(t)if(t.rules){var n=e.generateSearchQuery(t.rules,t.condition,i,o);""!==n&&r.push("("+n+")")}else{var a=e.getSearchField(t,e.getIgnoreCase(t.filterCondition,i),o);_.isNil(a)||r.push(a)}}),_.join(r," "+n+" ")},e.prepareTableOptionsForFilterExps=function(t,n,o){i.isDefined(n.searchWithQuery)||(n.searchWithQuery=!0);var r,a,s=h.DATABASE_MATCH_MODES,l=o||i.getClonedObject(t.filterExpressions);n.filterExpr&&!_.isEmpty(n.filterExpr)&&(l=n.filterExpr);var c={};if(_.isEmpty(n.filterFields)||(c={condition:n.logicalOp||"AND",rules:[]},_.forEach(n.filterFields,function(i,o){var r=s[i.matchMode]||s[i.filterCondition]||i.filterCondition;if(_.includes(h.DATABASE_EMPTY_MATCH_MODES,r)||!_.isNil(i.value)&&""!==i.value){var a=i.type||e.getSqlType(t,o,n.entityName),l={target:o,type:a,matchMode:i.matchMode||(e.isStringType(a)?"startignorecase":"exact"),value:i.value,required:i.required||!1};c.rules.push(l)}})),_.isEmpty(l))l=c;else if(!_.isNil(c.rules)&&c.rules.length){var p={condition:"AND",rules:[]};p.rules.push(i.getClonedObject(l)),p.rules.push(c),l=p}return e.processFilterFields(l.rules,t,n),a=e.generateSearchQuery(l.rules,l.condition,t.ignoreCase,n.skipEncode),{filter:[],sort:(r=le(t.orderBy,n.orderBy))?"sort="+r:"",query:a}},e.prepareTableOptions=function(t,n,o){if("read"===t.operation)return e.prepareTableOptionsForFilterExps(t,n,o);i.isDefined(n.searchWithQuery)||(n.searchWithQuery=!0);var r,a,s,l=[],c=[];return o=o||t.filterFields,_.forEach(o,function(i,o){!_.isObject(i)||n.filterFields&&n.filterFields[o]&&"AND"!==n.filterFields[o].logicalOp||(i.fieldName=o,e.isStringType(e.getSQLFieldType(t,i))&&(i.filterCondition=h.DATABASE_MATCH_MODES[i.matchMode||t.matchMode]),i.isVariableFilter=!0,l.push(i))}),_.forEach(n.filterFields,function(e,i){e.fieldName=i,e.filterCondition=h.DATABASE_MATCH_MODES[e.matchMode||n.matchMode||t.matchMode],l.push(e)}),"read"!==t.operation&&"read"!==n.operation||(c=e.getFilterOptions(t,l,n)),n.searchWithQuery&&c.length&&(a=e.getSearchQuery(_.filter(c,{isVariableFilter:!0})," AND ",t.ignoreCase,n.skipEncode),(s=e.getSearchQuery(_.filter(c,{isVariableFilter:void 0})," "+(n.logicalOp||"AND")+" ",t.ignoreCase,n.skipEncode))&&(a=a?a+" AND ( "+s+" )":s)),{filter:c,sort:(r=le(t.orderBy,n.orderBy))?"sort="+r:"",query:a}},e.getFieldType=function(e,t,n){var i,o,r;return t.propertiesMap&&(o=t.propertiesMap.columns||[],r=_.find(o,function(t){return t.fieldName===e}),n&&r&&(r=_.find(r.columns,function(e){return e.fieldName===n})),i=r&&r.type),i},e.prepareFormData=function(t,n){var i=new FormData;return i.rowData=_.clone(n),_.forEach(n,function(o,r){"blob"===e.getFieldType(r,t)&&(_.isObject(o)&&(_.isArray(o)?_.forEach(o,function(e){i.append(r,e,e.name)}):i.append(r,o,o.name)),n[r]=null!==o?"":null)}),i.append(f.WM_DATA_JSON,new Blob([JSON.stringify(n)],{type:"application/json"})),i},e.traverseFilterExpressions=function(t,n){t&&t.rules&&_.forEach(t.rules,function(o,r){if(!o.rules)return i.triggerFn(n,t,o);e.traverseFilterExpressions(o,n)})},e.getFilterExprFields=function(t){var n=!1;return e.traverseFilterExpressions(t,function(e,t){if(t&&t.required&&-1===_.indexOf(["null","isnotnull","empty","isnotempty","nullorempty"],t.matchMode)&&""===t.value)return n=!0,!1}),n?!n:t},e.getWhereClauseGenerator=function(t,n,o){return function(r,a){var s=e.getFilterExprFields(i.getClonedObject(o||t.filterExpressions));return i.isDefined(a)&&(n.skipEncode=a),r&&(n.filterFields?r(s,n):r(s)),e.prepareTableOptions(t,n,s).query}},e}(),Ce=function(e){var t,n,o,r=e.urlParams;if(g.hasOwnProperty(e.target)&&g[e.target].hasOwnProperty(e.action)){if(o=i.getClonedObject(g[e.target][e.action]),e.config)for(var a in o.url=(e.config.url||"")+o.url,o.method=e.config.method||o.method,o.headers=o.headers||{},e.config.headers)t=e.config.headers[a],o.headers[a]=t;if(r)for(n in r)r.hasOwnProperty(n)&&(t=r[n],_.isUndefined(t)||null===t||(o.url=o.url.replace(new RegExp(":"+n,"g"),t)));return e.params&&(o.params=e.params),_.isUndefined(e.data)||(o.data=e.data),e.dataParams&&(o.data.params=e.dataParams),e.headers&&(o.headers=e.headers),o.byPassResult=e.byPassResult,o.isDirectCall=e.isDirectCall,o.isExtURL=e.isExtURL,o.preventMultiple=e.preventMultiple,o.responseType=e.responseType,o}return null},Ie=function(e,t){var n,o;return o=e.data,n={target:"DATABASE",action:t,urlParams:{projectID:e.projectID,service:_.isUndefined(e.service)?"services":e.service,dataModelName:e.dataModelName,entityName:e.entityName,queryName:e.queryName,queryParams:e.queryParams,procedureName:e.procedureName,procedureParams:e.procedureParams,id:e.id,relatedFieldName:e.relatedFieldName,page:e.page,size:e.size,sort:e.sort},data:o||"",config:{url:e.url}},(n=Ce(n)).url=i.removeExtraSlashes(n.url),n},Ae=function(t,n,i,o,r){var a;return n.url,a=Ie(n,t),n.operation=t,e.httpService.sendCallAsObservable({url:a.url,method:a.method,data:a.data,headers:a.headers},n)},De=Ae,Ne={searchTableDataWithQuery:function(e,t,n){return Ae("searchTableDataWithQuery",e)},executeAggregateQuery:function(e,t,n){return Ae("executeAggregateQuery",e)},searchTableData:function(e,t,n){return Ae("searchTableData",e)},readTableData:function(e,t,n){return Ae("readTableData",e)},insertTableData:function(e,t,n){return Ae("insertTableData",e)},insertMultiPartTableData:function(e,t,n){return Ae("insertMultiPartTableData",e)},updateTableData:function(e,t,n){return Ae("updateTableData",e)},updateCompositeTableData:function(e,t,n){return Ae("updateCompositeTableData",e)},periodUpdateCompositeTableData:function(e,t,n){return Ae("periodUpdateCompositeTableData",e)},updateMultiPartTableData:function(e,t,n){return Ae("updateMultiPartTableData",e)},updateMultiPartCompositeTableData:function(e,t,n){return Ae("updateMultiPartCompositeTableData",e)},deleteTableData:function(e,t,n){return Ae("deleteTableData",e)},deleteCompositeTableData:function(e,t,n){return Ae("deleteCompositeTableData",e)},periodDeleteCompositeTableData:function(e,t,n){return Ae("periodDeleteCompositeTableData",e)},exportTableData:function(e){return Ae("exportTableData",e)},getDistinctDataByFields:function(e){return Ae("getDistinctDataByFields",e)},countTableDataWithQuery:function(e,t,n){return Ae("countTableDataWithQuery",e)}},xe=[],Me=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.getFilterExprFields=function(e){var t=!1;return Se.traverseFilterExpressions(e,function(e,n){if(n&&n.required&&-1===_.indexOf(["null","isnotnull","empty","isnotempty","nullorempty"],n.matchMode)&&""===n.value)return t=!0,!1}),t?!t:e},e.getDataFilterObj=function(e){return function(e){return{getFilterFields:function(){return e},getCriteria:function(t){var n=[];return Se.traverseFilterExpressions(e,function(e,i){t===i.target&&n.push(i)}),n}}}(e)},e}return b(n,t),n.prototype.initFilterExpressionBinding=function(e){var t=e._context,n=t.registerDestroyListener?t.registerDestroyListener.bind(t):_.noop,o=i.processFilterExpBindNode(t,e.filterExpressions).subscribe(function(t){"read"===e.operation?e.autoUpdate&&!_.isUndefined(t.newVal)&&_.isFunction(e.update)&&pe(e,"update"):e.autoUpdate&&!_.isUndefined(t.newVal)&&_.isFunction(e[e.operation+"Record"])&&pe(e,e.operation+"Record")});n(function(){return o.unsubscribe()})},n.prototype.updateDataset=function(e,t,n,i){e.pagination=i,e.dataSet=t,Object.defineProperty(e.dataSet,"data",{get:function(){return e.dataSet}}),Object.defineProperty(e.dataSet,"pagination",{get:function(){return e.pagination}})},n.prototype.setVariableOptions=function(e,t){e._options=e._options||{},e._options.orderBy=t&&t.orderBy,e._options.filterFields=t&&t.filterFields},n.prototype.handleError=function(e,t,n,o,r){var a;i.triggerFn(t,n),D(d.EVENT.RESULT,e,n,r),o.skipDataSetUpdate||this.updateDataset(e,xe,e.propertiesMap,null),a=this.prepareCallbackOptions(o.errorDetails),D(d.EVENT.ERROR,e,n,a),e.canUpdate=!0,D(d.EVENT.CAN_UPDATE,e,n,r)},n.prototype.makeCall=function(t,n,i){var o=this;return new Promise(function(r,a){var s=Ie(i,n);s={url:s.url,method:s.method,data:s.data,headers:s.headers},i.operation=n,o.httpCall(s,t,i).then(function(e){!function(e,t){e&&e.type&&t(e)}(e,r)},function(n){!function(n,i){var r=e.httpService.getErrMessage(n);o.notifyInflight(t,!1),i({error:r,details:n})}(n,a)})})},n.prototype.getEntityData=function(e,t,n,o){var r,a,s,l,c,p,m,h,f,g=this,y={};c=this.getFilterExprFields(i.getClonedObject(e.filterExpressions||{})),s=D(d.EVENT.BEFORE_UPDATE,e,this.getDataFilterObj(c),t);var b=_.isObject(s)?i.getClonedObject(s):void 0;return!1===s?(Ee.process(e),i.triggerFn(o,"Call stopped from the event: "+d.EVENT.BEFORE_UPDATE),Promise.reject("Call stopped from the event: "+d.EVENT.BEFORE_UPDATE)):(e.canUpdate=!1,r=Se.prepareTableOptions(e,t,_.isObject(s)?s:c),t.searchWithQuery?(a="searchTableDataWithQuery",p=r.query?"q="+r.query:""):(a=r.filter&&r.filter.length?"searchTableData":"readTableData",p=r.filter),m={projectID:v.project.id,service:e.getPrefabName()?"":"services",dataModelName:e.liveSource,entityName:e.type,page:t.page||1,size:t.pagesize||(u.isRunMode?e.maxResults||20:e.designMaxResults||20),sort:r.sort,data:p,filter:Se.getWhereClauseGenerator(e,t,b),url:e.getPrefabName()?v.project.deployedUrl+"/prefabs/"+e.getPrefabName():v.project.deployedUrl},h=function(r,a){if(r&&r.type){r=r.body,y.data=r.content,y.pagination=_.omit(r,"content");var s=g.prepareCallbackOptions(r,{pagination:y.pagination});return r&&r.error||!r||!_.isArray(r.content)?(g.handleError(e,o,r.error,t,s),Promise.reject(r.error)):(Se.processBlobColumns(r.content,e),t.skipDataSetUpdate||(D(d.EVENT.RESULT,e,y.data,s),(l=D(d.EVENT.PREPARE_SETDATA,e,y.data,s))&&(y.data=l),g.updateDataset(e,y.data,e.propertiesMap,y.pagination),g.setVariableOptions(e,t),i.$invokeWatchers(!0),setTimeout(function(){i.triggerFn(n,y.data,e.propertiesMap,y.pagination),D(d.EVENT.SUCCESS,e,y.data,s),e.canUpdate=!0,D(d.EVENT.CAN_UPDATE,e,y.data,s)})),a({data:y.data,pagination:y.pagination}))}},f=function(n,i){return g.setVariableOptions(e,t),g.handleError(e,o,n.error,_.extend(t,{errorDetails:n.details})),i(n.error)},new Promise(function(t,n){g.makeCall(e,a,m).then(function(e){h(e,t)},function(e){f(e,n)})}))},n.prototype.performCUD=function(e,t,n,o,r){var a=this;return(n=n||{}).inputFields=n.inputFields||i.getClonedObject(t.inputFields),Ee.submit(t).then(function(){return a.notifyInflight(t,!n.skipToggleState),a.doCUD(e,t,n,o,r).then(function(e){return Ee.process(t),a.notifyInflight(t,!1,e),Promise.resolve(e)},function(e){return Ee.process(t),a.notifyInflight(t,!1,e),Promise.reject(e)})},r)},n.prototype.doCUD=function(e,t,n,o,r){var a,s,l,c,p,u,m,h,f=this,g=v.project.id||v.projectName,y=Se.getPrimaryKey(t),b=window.File&&window.FileReader&&window.FileList&&window.Blob,w="",P={},O={},R={},E=n.inputFields||t.inputFields;if(p=i.getClonedObject(E),!1===(u=D(d.EVENT.BEFORE_UPDATE,t,p,n)))return i.triggerFn(r),Promise.reject("Call stopped from the event: "+d.EVENT.BEFORE_UPDATE);switch(E=_.isObject(u)?u:p,t.canUpdate=!1,n.row?(P=n.row,_.forEach(P,function(e,n){var o,r=Se.getFieldType(n,t);i.isDateTimeType(r)?(o=fe(e,r),P[n]=o):_.isArray(e)&&Se.isStringType(r)&&(o=_.join(e,","),P[n]=o)}),_.forEach(E,function(e,t){!i.isDefined(e)||""===e||i.isDefined(P[t])&&""!==P[t]||(P[t]=e)})):_.forEach(E,function(n,o){var r,a=t.propertiesMap.primaryFields||t.propertiesMap.primaryKeys;_.isUndefined(n)||""===n||("deleteTableData"===e&&(w=n),"updateTableData"===e&&a.forEach(function(e){o===e&&(w=n)}),("deleteTableData"!==e||Se.isCompositeKey(y))&&(r=Se.getFieldType(o,t),i.isDateTimeType(r)?n=fe(n,r):_.isArray(n)&&Se.isStringType(r)&&(n=_.join(n,",")),P[o]=n),_.isObject(n)&&!_.isArray(n)&&_.forEach(n,function(e,i){"blob"===Se.getFieldType(o,t,i)&&(n[i]=null===e?e:"")}))}),e){case"updateTableData":s=n.prevData||{},Se.isCompositeKey(y)?(Se.isNoPrimaryKey(y)?(R=s||n.rowData||P,O=P):y.forEach(function(e){O[e]=P[e],n.period?R[e]=P[e]:R[e]=s[e]||n.rowData&&n.rowData[e]||P[e]}),n.row=O,n.compositeKeysData=R):(y.forEach(function(e){-1===e.indexOf(".")?l=s[e]||n.rowData&&n.rowData[e]||P[e]:(c=e.split("."),l=s[c[0]][c[1]])}),n.id=l,n.row=P);break;case"deleteTableData":Se.isCompositeKey(y)?(Se.isNoPrimaryKey(y)?O=P:y.forEach(function(e){O[e]=P[e]}),n.compositeKeysData=O):_.isEmpty(P)||(y.forEach(function(e){-1===e.indexOf(".")?l=P[e]:(c=e.split("."),l=P[c[0]][c[1]])}),n.id=l)}if(("updateTableData"===e||"insertTableData"===e)&&Se.hasBlob(t)&&b&&(e="updateTableData"===e?"updateMultiPartTableData":"insertMultiPartTableData",P=Se.prepareFormData(t,P)),n.compositeKeysData){switch(e){case"updateTableData":e="updateCompositeTableData";break;case"deleteTableData":e="deleteCompositeTableData";break;case"updateMultiPartTableData":e="updateMultiPartCompositeTableData"}w=Se.getCompositeIDURL(n.compositeKeysData)}a=t.liveSource,_.isEmpty(P)&&"deleteTableData"===e&&(P=void 0),"updateCompositeTableData"!==e&&"deleteCompositeTableData"!==e||!n.period||(e="period"+e.charAt(0).toUpperCase()+e.substr(1));var T={projectID:g,service:t._prefabName?"":"services",dataModelName:a,entityName:t.type,id:_.isUndefined(n.id)?w:encodeURIComponent(n.id),data:P,url:t._prefabName?v.project.deployedUrl+"/prefabs/"+t._prefabName:v.project.deployedUrl};return m=function(e,o){var a=e.error,s=f.prepareCallbackOptions(e);D(d.EVENT.RESULT,t,a,s),n.skipNotification||D(d.EVENT.ERROR,t,a,s),t.canUpdate=!0,D(d.EVENT.CAN_UPDATE,t,a,s),i.triggerFn(r,a),o(a)},h=function(e,n){var a=e.body,s=f.prepareCallbackOptions(e);if(Ee.process(t),a&&a.error)return D(d.EVENT.RESULT,t,a,s),D(d.EVENT.ERROR,t,a.error,s),t.canUpdate=!0,D(d.EVENT.CAN_UPDATE,t,a.error,s),i.triggerFn(r,a.error),Promise.reject(a.error);if(D(d.EVENT.RESULT,t,a,s),"read"!==t.operation){var l=D(d.EVENT.PREPARE_SETDATA,t,a,s);l&&(a=l),t.dataSet=a}i.$invokeWatchers(!0),setTimeout(function(){D(d.EVENT.SUCCESS,t,a,s),t.canUpdate=!0,D(d.EVENT.CAN_UPDATE,t,a,s)}),i.triggerFn(o,a),n(a)},new Promise(function(n,i){f.makeCall(t,e,T).then(function(e){h(e,n)},function(e){m(e,i)})})},n.prototype.aggregateData=function(e,t,n,o,r){var a,s,l,c,p=this;return(n=n||{}).skipEncode=!0,t.filterFields&&(a=Se.prepareTableOptions(t,n),n.aggregations.filter=a.query),s={dataModelName:t.liveSource,entityName:t.type,page:n.page||1,size:n.size||t.maxResults,sort:n.sort||"",url:e,data:n.aggregations},l=function(e,t){if(e&&e.type){if(e&&e.error||!e)return void i.triggerFn(r,e.error);i.triggerFn(o,e),t(e)}},c=function(e,t){i.triggerFn(r,e),t(e)},new Promise(function(e,n){p.makeCall(t,"executeAggregateQuery",s).then(function(t){l(t,e)},function(e){c(e,n)})})},n.prototype.listRecords=function(e,t,n,o){var r=this;return(t=t||{}).filterFields=t.filterFields||i.getClonedObject(e.filterFields),Ee.submit(e).then(function(){return r.notifyInflight(e,!t.skipToggleState),r.getEntityData(e,t,n,o).then(function(t){return Ee.process(e),r.notifyInflight(e,!1,t),Promise.resolve(t)},function(t){return Ee.process(e),r.notifyInflight(e,!1,t),Promise.reject(t)})},o)},n.prototype.insertRecord=function(e,t,n,i){return this.performCUD("insertTableData",e,t,n,i)},n.prototype.updateRecord=function(e,t,n,i){return this.performCUD("updateTableData",e,t,n,i)},n.prototype.deleteRecord=function(e,t,n,i){return this.performCUD("deleteTableData",e,t,n,i)},n.prototype.setInput=function(e,t,n,i){return e.inputFields=e.inputFields||{},ae(e.inputFields,t,n,i)},n.prototype.setFilter=function(e,t,n){var i={},o={};return _.isObject(t)?i=t:i[t]=n,e.filterExpressions||(e.filterExpressions={condition:"AND",rules:[]}),o=e.filterExpressions,_.forEach(i,function(e,t){var n=function(e){var t=null;return Se.traverseFilterExpressions(o,function(n,i){if(e===i.target)return t=i}),t}(t);null!==n?n.value=e:o.rules.push({target:t,type:"",matchMode:"",value:e,required:!1})}),o},n.prototype.download=function(e,t,n,o){var r,a,s,l,c=this;t=t||{};var p={},u=v.project.id||v.projectName;return t.data.searchWithQuery=!0,t.data.skipEncode=!0,r=Se.prepareTableOptions(e,t.data,void 0),p.query=r.query?r.query:"",p.exportSize=t.data.exportSize,p.exportType=t.data.exportType,p.fields=ce(t.data.fields),t.data.fileName&&(p.fileName=t.data.fileName),a={projectID:u,service:e.getPrefabName()?"":"services",dataModelName:e.liveSource,entityName:e.type,sort:r.sort,url:e.getPrefabName()?v.project.deployedUrl+"/prefabs/"+e.getPrefabName():v.project.deployedUrl,data:p,filter:Se.getWhereClauseGenerator(e,t)},s=function(e,t){e&&e.type&&(window.location.href=e.body.result,i.triggerFn(n,e),t(e))},l=function(t,n){var r=c.prepareCallbackOptions(t.details);D(d.EVENT.ERROR,e,t.error,r),i.triggerFn(o,t.error),n(t)},new Promise(function(t,n){c.makeCall(e,"exportTableData",a).then(function(e){s(e,t)},function(e){l(e,n)})})},n.prototype.getRelatedTablePrimaryKeys=function(e,t){var n,i,o;if(e.propertiesMap&&(i=_.find(e.propertiesMap.columns||[],{fieldName:t}))){if(o=i.columns,(n=_.map(_.filter(o,"isPrimaryKey"),"fieldName")).length)return n;if(o&&o.length)return(o=_.find(o,{isRelated:!1}))&&o.fieldName}},n.prototype.getRelatedTableData=function(e,t,n,o,r){var a,s,l,c,p,u,d=this,m=v.project.id||v.projectName,f=_.find(e.relatedTables,function(e){return e.relationName===t||e.columnName===t}),g=_.map(_.filter(e.relatedTables,function(t){return t.type===e.type}),"relationName"),y=[];if(_.forEach(n.filterFields,function(n,i){n.fieldName=i,n.type=Se.getFieldType(t,e,i),n.filterCondition!==h.DATABASE_MATCH_MODES.in.toLowerCase()&&n.filterCondition!==h.DATABASE_MATCH_MODES.between.toLowerCase()||(n.value=n.value.split(",")),y.push(n)}),s=Se.getFilterOptions(e,y,n),l=Se.getSearchQuery(s," "+(n.logicalOp||"AND")+" ",e.ignoreCase),n.filterExpr){var b=i.getClonedObject(_.isObject(n.filterExpr)?n.filterExpr:JSON.parse(n.filterExpr));Se.processFilterFields(b.rules,e,n);var w=Se.generateSearchQuery(b.rules,b.condition,e.ignoreCase,n.skipEncode);""!==l?""!==w&&(l="("+l+") AND ("+w+")"):""!==w&&(l=w)}return l=l?"q="+l:"","searchTableDataWithQuery",a=_.isEmpty(n.orderBy)?"":"sort="+n.orderBy,c={projectID:m,service:e.getPrefabName()?"":"services",dataModelName:e.liveSource,entityName:f?f.type:"",page:n.page||1,size:n.pagesize||void 0,url:e.getPrefabName()?v.project.deployedUrl+"/prefabs/"+e.getPrefabName():v.project.deployedUrl,data:l||"",filter:Se.getWhereClauseGenerator(e,n),sort:a},p=function(e,t){if(e&&e.type){var n=e.body,r=_.map(n.content,function(e){return _.omit(e,g)}),a=Object.assign({},n);delete a.content;var s={data:r,pagination:a};i.triggerFn(o,s),t(s)}},u=function(e,t){i.triggerFn(r,e),t(e)},new Promise(function(t,n){d.makeCall(e,"searchTableDataWithQuery",c).then(function(e){p(e,t)},function(e){u(e,n)})})},n.prototype.getDistinctDataByFields=function(e,t,n,o){var r,a,s,l,c,p=this,u=v.project.id||v.projectName,d={};return t.skipEncode=!0,t.operation="read",t=t||{},(a=Se.prepareTableOptions(e,t)).query&&(d.filter=a.query),d.groupByFields=_.isArray(t.fields)?t.fields:[t.fields],r=(r=t.sort||d.groupByFields[0]+" asc")?"sort="+r:"",s={projectID:u,service:e.getPrefabName()?"":"services",dataModelName:e.liveSource,entityName:t.entityName||e.type,page:t.page||1,size:t.pagesize,sort:r,data:d,filter:Se.getWhereClauseGenerator(e,t),url:e.getPrefabName()?v.project.deployedUrl+"/prefabs/"+e.getPrefabName():v.project.deployedUrl},l=function(e,t){if(e&&e.type){if(e&&e.error||!e)return i.triggerFn(o,e.error),Promise.reject(e.error);var r=e.body,a=Object.assign({},e.body);delete a.content,r={data:r.content,pagination:a},i.triggerFn(n,r),t(r)}},c=function(e,t){i.triggerFn(o,e),t(e)},new Promise(function(t,n){p.makeCall(e,"getDistinctDataByFields",s).then(function(e){l(e,t)},function(){c(o,n)})})},n.prototype.getAggregatedData=function(t,n,i,o){var r=e.appManager.getDeployedURL();if(r)return this.aggregateData(r,t,n,i,o)},n.prototype.defineFirstLastRecord=function(e){"read"===e.operation&&(Object.defineProperty(e,"firstRecord",{configurable:!0,get:function(){return _.get(e.dataSet,"data[0]",{})}}),Object.defineProperty(e,"lastRecord",{configurable:!0,get:function(){var t=_.get(e.dataSet,"data",[]);return t[t.length-1]}}))},n.prototype.getPrimaryKey=function(e){return Se.getPrimaryKey(e)},n.prototype.prepareRequestParams=function(e){var t,n=_.split(e.searchKey,","),i=_.split(e.matchMode,","),o={};return _.forEach(n,function(t,n){o[t]={value:e.query,logicalOp:"AND",matchMode:i[n]||i[0]||"startignorecase"}}),t={filterFields:o,page:e.page,pagesize:e.limit||e.pagesize,skipDataSetUpdate:!0,skipToggleState:!0,inFlightBehavior:"executeAll",logicalOp:"OR",orderBy:e.orderby?_.replace(e.orderby,/:/g," "):""},e.onBeforeservicecall&&e.onBeforeservicecall(o),t},n.prototype.searchRecords=function(e,t,n,i){var o=this.prepareRequestParams(t);return this.listRecords(e,o,n,i)},n.prototype.upgradeInputDataToFilterExpressions=function(e,t,n){_.isObject(t)&&((n=t).condition="AND",n.rules=[]);var i=_.cloneDeep(n.rules);return n.rules=[],_.forEach(n,function(e,t){if("condition"!==t&&"rules"!==t){var o=_.find(i,function(e){return e.target===t});o?(o.value=e.value,o.matchMode=e.matchMode||e.filterCondition||o.matchMode||"",n.rules.push(o)):n.rules.push({target:t,type:"",matchMode:e.matchMode||e.filterCondition||"",value:e.value,required:!1}),delete n[t]}}),n},n.prototype.downgradeFilterExpressionsToInputData=function(e,t){return t.hasOwnProperty("getFilterFields")&&(t=t.getFilterFields()),_.forEach(t.rules,function(e){_.isNil(e.target)||""===e.target||(t[e.target]={value:e.value,matchMode:e.matchMode})}),t},n.prototype.cancel=function(e,t){Ee.requestsQueue.has(e)&&e._observable&&(e._observable.unsubscribe(),Ee.process(e),this.notifyInflight(e,!1))},n}(ge),ke=function(){function t(){}return t.prototype.initBinding=function(e,t,n){oe(e,e._context,t,n)},t.prototype.notifyInflight=function(t,n,i){e.appManager.notify("toggle-variable-state",{variable:t,active:n,data:i})},t}(),Le=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.invoke=function(t,n){!function(t,n){var i;t.dataSet=n&&n.data||t.dataSet;var o=t.dataBinding.pageName||t.pageName,r=t.operation,a=t.dataSet;switch(n=n||{},r){case"goToPreviousPage":e.navigationService.goToPrevious();break;case"gotoPage":e.navigationService.goToPage(o,{transition:t.pageTransitions,$event:n.$event,urlParams:a});break;case"gotoView":i=t.dataBinding&&t.dataBinding.viewName||t.viewName;break;case"gotoTab":i=t.dataBinding&&t.dataBinding.tabName||t.tabName;break;case"gotoAccordion":i=t.dataBinding&&t.dataBinding.accordionName||t.accordionName;break;case"gotoSegment":i=t.dataBinding&&t.dataBinding.segmentName||t.segmentName}i&&e.navigationService.goToView(i,{pageName:o,transition:t.pageTransitions,$event:n.$event,urlParams:a},t)}(t,n)},n}(ke),Fe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.onToasterClick=function(e){D("onClick",e,"")},n.prototype.onToasterHide=function(e){D("onHide",e,"")},n.prototype.notifyViaToaster=function(t,n){var i,o=(n.class||t.dataBinding.class||"info").toLowerCase(),r=n.message||t.dataBinding.text,a=n.title,s="toast-"+(n.position||t.dataBinding.toasterPosition||"bottom right").replace(" ","-"),l=t.dataBinding.page,c=parseInt(n.duration||t.dataBinding.duration,null);c||(c=0!==c&&"success"===o?3e3:0),i=t.dataBinding.content&&"page"===t.dataBinding.content&&l?e.toasterService.showCustom(l,{positionClass:s,timeOut:c,partialParams:t._binddataSet,context:t._context}):e.toasterService.show(o,a,r||null,{positionClass:s,timeOut:c,enableHtml:!0}),t.onClick&&i.onTap.subscribe(this.onToasterClick.bind(this,t)),t.onHide&&i.onHidden.subscribe(this.onToasterHide.bind(this,t))},n.prototype.notifyViaDialog=function(t,n){var i="Common"+_.capitalize(t.operation)+"Dialog",o=t.owner===d.OWNER.APP?i:"notification"+t.operation+"dialog";e.dialogService.open(o,t._context,{notification:{title:n.title||t.dataBinding.title,text:n.message||t.dataBinding.text,okButtonText:n.okButtonText||t.dataBinding.okButtonText||"OK",cancelButtonText:n.cancelButtonText||t.dataBinding.cancelButtonText||"CANCEL",alerttype:n.alerttype||t.dataBinding.alerttype||"information",onOk:function(){D("onOk",t,n.data),e.dialogService.close(o,t._context)},onCancel:function(){D("onCancel",t,n.data),e.dialogService.close(o,t._context)},onClose:function(){D("onClose",t,n.data)}}})},n.prototype.notify=function(e,t,n,i){t=t||{},"toast"===e.operation?this.notifyViaToaster(e,t):this.notifyViaDialog(e,t)},n.prototype.getMessage=function(e){return e.dataBinding.text},n.prototype.setMessage=function(e,t){return _.isString(t)&&(e.dataBinding.text=t),e.dataBinding.text},n.prototype.getOkButtonText=function(e){return e.dataBinding.okButtonText},n.prototype.setOkButtonText=function(e,t){return _.isString(t)&&(e.dataBinding.okButtonText=t),e.dataBinding.okButtonText},n.prototype.getToasterDuration=function(e){return e.dataBinding.duration},n.prototype.setToasterDuration=function(e,t){return e.dataBinding.duration=t,e.dataBinding.duration},n.prototype.getToasterClass=function(e){return e.dataBinding.class},n.prototype.setToasterClass=function(e,t){return _.isString(t)&&(e.dataBinding.class=t),e.dataBinding.class},n.prototype.getToasterPosition=function(e){return e.dataBinding.class},n.prototype.setToasterPosition=function(e,t){return _.isString(t)&&(e.dataBinding.position=t),e.dataBinding.position},n.prototype.getAlertType=function(e){return e.dataBinding.alerttype},n.prototype.setAlertType=function(e,t){return _.isString(t)&&(e.dataBinding.alerttype=t),e.dataBinding.alerttype},n.prototype.getCancelButtonText=function(e){return e.dataBinding.cancelButtonText},n.prototype.setCancelButtonText=function(e,t){return _.isString(t)&&(e.dataBinding.cancelButtonText=t),e.dataBinding.cancelButtonText},n}(ke),Be=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.validate=function(e){var t,n,i;for(n in["rememberme","remembermecheck"].forEach(function(t){_.isBoolean(e[t])&&(i=t)}),e[i=i||"j_rememberme"]=!!_.isBoolean(e[i])&&e[i],e)if(e.hasOwnProperty(n)&&(""===e[n]||void 0===e[n])){t="Please provide required credentials";break}return t},n.prototype.migrateOldParams=function(e){var t={},n={usernametext:"j_username",username:"j_username",passwordtext:"j_password",password:"j_password",remembermecheck:"j_rememberme",rememberme:"j_rememberme"};return _.each(e,function(e,i){n[i]?t[n[i]]=e:t[i]=e}),t},n.prototype.login=function(t,n,o,r){var a,s=this,l=(n=n||{}).loginInfo||n.input||t.dataBinding,c=this.validate(l);if(c)return i.triggerFn(r,c),void D("onError",t,c);var p=i.getClonedObject(l),m=D(d.EVENT.BEFORE_UPDATE,t,p);if(_.isObject(m))p=m;else if(!1===m)return void i.triggerFn(r);p=this.migrateOldParams(p);var h=_.get(e.securityService.get(),"userInfo.userName");this.notifyInflight(t,!0),t.promise=e.securityService.appLogin(p,function(n){e.dialogService.close("CommonLoginDialog"),e.appManager.reloadAppData().then(function(r){D(d.EVENT.RESULT,t,_.get(r,"userInfo")),(a=D(d.EVENT.PREPARE_SETDATA,t,_.get(r,"userInfo")))&&_.set(r,"userInfo",a),s.notifyInflight(t,!1,n),i.triggerFn(o),setTimeout(function(){if(D(d.EVENT.SUCCESS,t,_.get(r,"userInfo")),t.useDefaultSuccessHandler){var n=h===p.j_username;h&&!n||e.appManager.executeSessionFailureRequests();var i=e.securityService.getCurrentRouteQueryParam("redirectTo"),o=e.appManager.noRedirect(),a=e.securityService.getRedirectedRouteQueryParams();if(a.redirectTo&&delete a.redirectTo,e.appManager.noRedirect(!1),h)if(_.isEmpty(i)){var s=e.securityService.get(),l=_.get(s,"loginConfig.sessionTimeout.type")||"PAGE";n&&"DIALOG"===l||(e.routerService.navigate(["/"]),window.location.reload())}else h===p.j_username?e.routerService.navigate(["/"+i],{queryParams:a}):(e.routerService.navigate(["/"]),window.location.reload());else _.isEmpty(i)?o||e.routerService.navigate(["/"]):e.routerService.navigate(["/"+i],{queryParams:a})}D(d.EVENT.CAN_UPDATE,t,_.get(r,"userInfo"))})})},function(e){D(d.EVENT.RESULT,t,e),s.notifyInflight(t,!1,e);var n=e.error||"Invalid credentials.",o=e.details;u.isRunMode&&D("onError",t,n,o,!0),i.triggerFn(r,n,o),D(d.EVENT.CAN_UPDATE,t,e)})},n}(ke),Ge=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return b(n,t),n.prototype.logout=function(t,n,o,r){var a,s,l,c=this;a=function(e,n,o){u.isStudioMode||D("onError",t,e,o),i.triggerFn(r,e,o)},!1!==D(d.EVENT.BEFORE_UPDATE,t,null)?e.securityService.isAuthenticated(function(n){n?(c.notifyInflight(t,!0),t.promise=e.securityService.appLogout(function(n){var r=n.body;r=i.getValidJSON(r),e.appManager.reloadAppData().then(function(){c.notifyInflight(t,!1,r),D(d.EVENT.RESULT,t,r),(l=D(d.EVENT.PREPARE_SETDATA,t,r))&&(r=l),setTimeout(function(){D(d.EVENT.SUCCESS,t,r),D(d.EVENT.CAN_UPDATE,t,r)})}),r&&r.result?window.location.href=r.result:t.useDefaultSuccessHandler&&((s=t.redirectTo)&&"login.html"!==s&&"index.html"!==s||(s=""),e.routerService.navigate(["/"+s]),window.cordova||setTimeout(function(){window.location.reload()})),i.triggerFn(o)},a)):a("No authenticated user to logout.")},function(e){c.notifyInflight(t,!1,e),a(e)}):i.triggerFn(r)},n}(ke),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.trigger=function(e,t,n,o){if(!i.isDefined(e._promise)&&!u.isStudioMode){var r=e.repeating,a=e.delay||u.DEFAULT_TIMER_DELAY,s=function(){D("onTimerFire",e,{})};return e._promise=r?setInterval(s,a):setTimeout(function(){s(),e._promise=void 0},a),e._promise}},t.prototype.cancel=function(e){i.isDefined(e._promise)&&(e.repeating?clearInterval(e._promise):clearTimeout(e._promise),e._promise=void 0)},t}(ke),Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.serviceRegistry=new Map,t}return b(t,e),t.prototype.invoke=function(e,t){var n=this,i=this.serviceRegistry.get(e.service);return null==i?(D("onError",e,null),Promise.reject("Could not find service '"+i+"'")):(this.notifyInflight(e,!0),i.invoke(e,t).then(function(t){return n.notifyInflight(e,!1,t),t},function(t){return n.notifyInflight(e,!1,t),Promise.reject(t)}))},t.prototype.registerService=function(e){this.serviceRegistry.set(e.name,e)},t}(ge),$e=function(n){function o(){var e=null!==n&&n.apply(this,arguments)||this;return e.scope_var_socket_map=new Map,e.PROPERTY={SERVICE:"service",DATA_UPDATE_STRATEGY:"dataUpdateStrategy",DATA_LIMIT:"dataLimit"},e.DATA_UPDATE_STRATEGY={REFRESH:"refresh",PREPEND:"prepend",APPEND:"append"},e}return b(o,n),o.prototype.shouldAppendData=function(e){return(e=e||this)[this.PROPERTY.DATA_UPDATE_STRATEGY]!==this.DATA_UPDATE_STRATEGY.REFRESH},o.prototype.shouldAppendLast=function(e){return e[this.PROPERTY.DATA_UPDATE_STRATEGY]===this.DATA_UPDATE_STRATEGY.APPEND},o.prototype.getDataLimit=function(e){return e.dataLimit},o.prototype.getURL=function(t){var n,i=t.getPrefabName(),o=i?_.get(e.metadataService.getByOperationId(t.operationId,i),"wmServiceOperationInfo"):_.get(e.metadataService.getByOperationId(t.operationId),"wmServiceOperationInfo"),r=t.dataBinding;if(_.forEach(o.parameters,function(e){e.sampleValue=r[e.name]}),$.extend(o,{skipCloakHeaders:!0}),!(n=Re.constructRequestParams(t,o,r)).error||!n.error.message)return n.url;this._onSocketError(t,{data:n.error.message})},o.prototype._onSocketMessage=function(e,t){var n,o,r,a,s,l=_.get(t,"data");l=i.getValidJSON(l)||i.xmlToJson(l)||l,n=D(d.EVENT.MESSAGE_RECEIVE,e,l,t),l=i.isDefined(n)?n:l,this.shouldAppendData(e)?(e.dataSet=e.dataSet||[],o=e.dataSet.length,r=this.getDataLimit(e),a=this.shouldAppendLast(e),r&&o>=r&&(a?e.dataSet.shift():e.dataSet.pop()),s=a?o:0,e.dataSet.splice(s,0,l)):e.dataSet=i.isDefined(n)?n:l},o.prototype._onBeforeSend=function(e,t){return D(d.EVENT.BEFORE_SEND,e,t)},o.prototype._onBeforeSocketClose=function(e,t){return D(d.EVENT.BEFORE_CLOSE,e,_.get(t,"data"),t)},o.prototype._onBeforeSocketOpen=function(e,t){return D(d.EVENT.BEFORE_OPEN,e,_.get(t,"data"),t)},o.prototype._onSocketOpen=function(e,t){e._socketConnected=!0,D(d.EVENT.OPEN,e,_.get(t,"data"),t)},o.prototype.freeSocket=function(e){this.scope_var_socket_map.set(e,void 0)},o.prototype._onSocketClose=function(e,t){e._socketConnected=!1,this.freeSocket(e),D(d.EVENT.CLOSE,e,_.get(t,"data"),t)},o.prototype._onSocketError=function(e,t){e._socketConnected=!1,this.freeSocket(e),D(d.EVENT.ERROR,e,_.get(t,"data")||"Error while connecting with "+e.service,t)},o.prototype.getSocket=function(e){var n=this.getURL(e),o=this.scope_var_socket_map.get(e);return o||(u.hasCordova||!i.isInsecureContentRequest(n)?((o=new t.$WebSocket(n)).onOpen(this._onSocketOpen.bind(this,e)),o.onError(this._onSocketError.bind(this,e)),o.onMessage(this._onSocketMessage.bind(this,e)),o.onClose(this._onSocketClose.bind(this,e)),this.scope_var_socket_map.set(e,o),e._socket=o,o):void i.triggerFn(this._onSocketError.bind(this,e)))},o.prototype.open=function(e,t,n){var o;if(!1!==this._onBeforeSocketOpen(e))return o=this.getSocket(e),i.triggerFn(t),o;i.triggerFn(n)},o.prototype.close=function(e){var t=this._onBeforeSocketClose(e),n=this.getSocket(e);!1!==t&&n.close()},o.prototype.send=function(e,t){var n,o=this.getSocket(e);t=t||_.get(e,"dataBinding.RequestBody"),!1!==(n=this._onBeforeSend(e,t))&&(t=i.isDefined(n)?n:t,t=i.isObject(t)?JSON.stringify(t):t,o.send(t,0))},o}(ge),Ue=new Map,We={Variable:ge,Action:ke,"wm.Variable":ye,"wm.ServiceVariable":Te,"wm.LiveVariable":Me,"wm.NavigationVariable":Le,"wm.NotificationVariable":Fe,"wm.LoginVariable":Be,"wm.LogoutVariable":Ge,"wm.TimerVariable":je,"wm.DeviceVariable":Ve,"wm.WebSocketVariable":$e},qe=function(){function e(){}return e.get=function(e){return Ue.has(e)?Ue.get(e):Ue.set(e,new We[e]).get(e)},e}(),He=function(){function e(){}return e.prototype.invoke=function(e,t){var n=this.operations.find(function(t){return t.name===e.operation});if(null==n)return D(d.EVENT.ERROR,e,null),Promise.reject("Could not find operation '"+e.operation+"' in service '"+this.name+"'");if(i.hasCordova()){var o=new Map;return void 0!==e.dataBinding&&(Object.entries(e).forEach(function(e){o.set(e[0],e[1])}),Object.entries(e.dataBinding).forEach(function(e){o.set(e[0],e[1])})),n.invoke(e,t,o).then(function(t){return e.dataSet=t,i.$invokeWatchers(!0),D(d.EVENT.SUCCESS,e,t),t},function(t){return e.dataSet={},i.$invokeWatchers(!0),D(d.EVENT.ERROR,e,null),t})}return Promise.resolve().then(function(){return D(d.EVENT.SUCCESS,e,n.model),n.model})},e}(),ze=function(){function e(){}return e.isValidDataset=function(e,t){return!!e&&(!(t&&!_.isArray(e))&&e)},e.getValue=function(e,t,n,i){return n=n||0,i?e[n][t]:e[t]},e.setValue=function(e,t,n,i){return t&&!i&&(e[t]=n),e},e.getItem=function(e,t,n){return n?e[t]:e},e.getTargetNode=function(e,t){return e=void 0!==t.parentIndex?e[t.parentIndex]:e,_.get(e,t.path)},e.setItem=function(t,n,i,o){var r;if(_.isUndefined(n)||!o.isList)return t;if(r=_.isObject(n)?_.findIndex(t,n):n,o.path){var a=e.getTargetNode(t,o),s=_.findIndex(a,n);s>-1&&(a[s]=i)}else r>-1&&(t[r]=i);return t},e.addItem=function(t,n,i,o){if(_.isUndefined(n)||!o.isList)return t;if(o.path){var r=e.getTargetNode(t,o);r?(i=void 0!==i?i:r.length,r.splice(i,0,n)):void 0!==o.parentIndex?_.set(t[o.parentIndex],o.path,[n]):_.set(t,o.path,[n])}else i=void 0!==i?i:t.length,t.splice(i,0,n);return t},e.removeItem=function(t,n,i){var o,r;if(n=void 0!==n?n:t.length-1,_.isBoolean(i)&&(r=i),_.isObject(i)&&(r=i.exactMatch),_.isObject(n))if(i.path){var a=e.getTargetNode(t,i),s=_.findIndex(a,n);s>-1&&(!r||r&&_.isEqual(a[s],n))&&a.splice(s,1)}else(o=_.findIndex(t,n))>-1&&(!r||r&&_.isEqual(t[o],n))&&t.splice(o,1);else t.splice(n,1);return t},e.getValidDataset=function(e){return e?[]:{}},e.getCount=function(e,t){return t?e.length:Object.keys(e).length},e}(),Ye=function(){function e(){}return e.prototype.execute=function(e,t){var n;switch(e){case i.DataSource.Operation.GET_NAME:n=this.name;break;case i.DataSource.Operation.GET_UNIQUE_IDENTIFIER:n=this._id;break;case i.DataSource.Operation.GET_CONTEXT_IDENTIFIER:n=this._context;break;case i.DataSource.Operation.ADD_ITEM:n=this.addItem(t.item,_.omit(t,"item"));break;case i.DataSource.Operation.SET_ITEM:n=this.setItem(t.prevItem,t.item,_.omit(t,"prevItem","item"));break;case i.DataSource.Operation.REMOVE_ITEM:n=this.removeItem(t.item,_.omit(t,"item"))}return n},e.prototype.getData=function(){return this.dataSet},e.prototype.setData=function(e){return ze.isValidDataset(e,this.isList)&&(this.dataSet=e),this.dataSet},e.prototype.getValue=function(e,t){return ze.getValue(this.dataSet,e,t,this.isList)},e.prototype.setValue=function(e,t){return ze.setValue(this.dataSet,e,t,this.isList)},e.prototype.getItem=function(e){return ze.getItem(this.dataSet,e,this.isList)},e.prototype.setItem=function(e,t,n){return n=this.getChildDetails(n),ze.setItem(this.dataSet,e,t,n)},e.prototype.getChildDetails=function(e){var t,n,i=this.isList;if(e&&e.path){n=e.path;var o=void 0;i?(t=e.parentIndex||0,o=_.get(this.dataSet[t],e.path)):o=_.get(this.dataSet,e.path),i=!o||!!_.isArray(o)}return{path:n,isList:i,parentIndex:t}},e.prototype.addItem=function(e,t){var n;return _.isNumber(t)&&(n=t),_.isObject(t)&&(n=t.index),t=this.getChildDetails(t),ze.addItem(this.dataSet,e,n,t)},e.prototype.removeItem=function(e,t){var n,i;return t&&(_.isBoolean(t)&&(n=t),_.isObject(t)&&(n=t.exactMatch,this.isList&&(i=t.parentIndex||0))),ze.removeItem(this.dataSet,e,{exactMatch:n,path:_.get(t,"path"),parentIndex:i})},e.prototype.clearData=function(){return this.dataSet=ze.getValidDataset(this.isList),this.dataSet},e.prototype.getCount=function(){return ze.getCount(this.dataSet,this.isList)},e.prototype.getPrefabName=function(){return this._context&&"__self__"!==this._context.prefabName&&this._context.prefabName},e}(),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t}(Ye),Qe=function(){return qe.get(d.CATEGORY.DEVICE)},Xe=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.init=function(){Qe().initBinding(this)},t.prototype.invoke=function(e,t,n){Qe().invoke(this,e).then(t,n)},t}(Ke),Ze=function(){return qe.get(d.CATEGORY.LIVE)},Je=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.execute=function(t,n){var o=e.prototype.execute.call(this,t,n);if(i.isDefined(o))return o;switch(t){case i.DataSource.Operation.IS_API_AWARE:case i.DataSource.Operation.SUPPORTS_CRUD:case i.DataSource.Operation.SUPPORTS_DISTINCT_API:case i.DataSource.Operation.IS_PAGEABLE:case i.DataSource.Operation.SUPPORTS_SERVER_FILTER:o=!0;break;case i.DataSource.Operation.GET_OPERATION_TYPE:o=this.operation;break;case i.DataSource.Operation.GET_RELATED_PRIMARY_KEYS:o=this.getRelatedTablePrimaryKeys(n);break;case i.DataSource.Operation.GET_ENTITY_NAME:o=this.propertiesMap.entityName;break;case i.DataSource.Operation.LIST_RECORDS:o=this.listRecords(n);break;case i.DataSource.Operation.UPDATE_RECORD:o=this.updateRecord(n);break;case i.DataSource.Operation.INSERT_RECORD:o=this.insertRecord(n);break;case i.DataSource.Operation.DELETE_RECORD:o=this.deleteRecord(n);break;case i.DataSource.Operation.INVOKE:o=this.invoke(n);break;case i.DataSource.Operation.UPDATE:o=this.update(n);break;case i.DataSource.Operation.GET_RELATED_TABLE_DATA:o=this.getRelatedTableData(n.relatedField,n);break;case i.DataSource.Operation.GET_DISTINCT_DATA_BY_FIELDS:o=this.getDistinctDataByFields(n);break;case i.DataSource.Operation.GET_AGGREGATED_DATA:o=this.getAggregatedData(n);break;case i.DataSource.Operation.GET_MATCH_MODE:o=this.matchMode;break;case i.DataSource.Operation.DOWNLOAD:o=this.download(n);break;case i.DataSource.Operation.GET_PROPERTIES_MAP:o=this.propertiesMap;break;case i.DataSource.Operation.GET_PRIMARY_KEY:o=this.getPrimaryKey();break;case i.DataSource.Operation.GET_BLOB_URL:o="services/"+this.liveSource+"/"+this.type+"/"+n.primaryValue+"/content/"+n.columnName;break;case i.DataSource.Operation.GET_OPTIONS:o=this._options||{};break;case i.DataSource.Operation.SEARCH_RECORDS:o=this.searchRecords(n);break;case i.DataSource.Operation.GET_REQUEST_PARAMS:o=this.getRequestParams(n);break;case i.DataSource.Operation.GET_PAGING_OPTIONS:o=this.pagination;break;case i.DataSource.Operation.IS_UPDATE_REQUIRED:o=!0;break;case i.DataSource.Operation.IS_BOUND_TO_LOCALE:case i.DataSource.Operation.CANCEL:o=!1;break;default:o={}}return o},t.prototype.listRecords=function(e,t,n){return Ze().listRecords(this,e,t,n)},t.prototype.updateRecord=function(e,t,n){return Ze().updateRecord(this,e,t,n)},t.prototype.insertRecord=function(e,t,n){return Ze().insertRecord(this,e,t,n)},t.prototype.deleteRecord=function(e,t,n){return Ze().deleteRecord(this,e,t,n)},t.prototype.setInput=function(e,t,n){return Ze().setInput(this,e,t,n)},t.prototype.setFilter=function(e,t){return Ze().setFilter(this,e,t)},t.prototype.download=function(e,t,n){return Ze().download(this,e,t,n)},t.prototype.invoke=function(e,t,n){switch(this.operation){case"insert":return this.insertRecord(e,t,n);case"update":return this.updateRecord(e,t,n);case"delete":return this.deleteRecord(e,t,n);default:return this.listRecords(e,t,n)}},t.prototype.getRelatedTablePrimaryKeys=function(e){return Ze().getRelatedTablePrimaryKeys(this,e)},t.prototype.getRelatedTableData=function(e,t,n,i){return Ze().getRelatedTableData(this,e,t,n,i)},t.prototype.getDistinctDataByFields=function(e,t,n){return Ze().getDistinctDataByFields(this,e,t,n)},t.prototype.getAggregatedData=function(e,t,n){return Ze().getAggregatedData(this,e,t,n)},t.prototype.getPrimaryKey=function(){return Ze().getPrimaryKey(this)},t.prototype.searchRecords=function(e,t,n){return Ze().searchRecords(this,e,t,n)},t.prototype.getRequestParams=function(e){return Ze().prepareRequestParams(e)},t.prototype._downgradeInputData=function(e){return Ze().downgradeFilterExpressionsToInputData(this,e)},t.prototype._upgradeInputData=function(e,t){return Ze().upgradeInputDataToFilterExpressions(this,e,t)},t.prototype.setOrderBy=function(e){return this.orderBy=e,this.autoUpdate&&this.update(),this.orderBy},t.prototype.update=function(e,t,n){return this.invoke(e,t,n)},t.prototype.createRecord=function(e,t,n){return this.insertRecord(e,t,n)},t.prototype.init=function(){Ze().initBinding(this,"dataBinding","read"===this.operation?"filterFields":"inputFields"),"read"===this.operation&&Ze().initFilterExpressionBinding(this),Ze().defineFirstLastRecord(this)},t.prototype.cancel=function(e){return Ze().cancel(this,e)},t}(Ke),et=function(){function e(){}return e.prototype.execute=function(e,t){var n;switch(e){case i.DataSource.Operation.GET_NAME:n=this.name;break;case i.DataSource.Operation.GET_UNIQUE_IDENTIFIER:n=this._id;break;case i.DataSource.Operation.GET_CONTEXT_IDENTIFIER:n=this._context}return n},e.prototype.getData=function(){return this.dataSet},e.prototype.setData=function(e){return ze.isValidDataset(e)&&(this.dataSet=e),this.dataSet},e.prototype.getValue=function(e,t){return ze.getValue(this.dataSet,e,t)},e.prototype.setValue=function(e,t){return ze.setValue(this.dataSet,e,t)},e.prototype.getItem=function(e){return ze.getItem(this.dataSet,e)},e.prototype.setItem=function(e,t){return ze.setItem(this.dataSet,e,t)},e.prototype.addItem=function(e,t){return ze.addItem(this.dataSet,e,t)},e.prototype.removeItem=function(e,t){return ze.removeItem(this.dataSet,e,t)},e.prototype.clearData=function(){return this.dataSet=ze.getValidDataset(),this.dataSet},e.prototype.getCount=function(){return ze.getCount(this.dataSet)},e.prototype.init=function(){},e}(),tt=function(){return qe.get(d.CATEGORY.NAVIGATION)},nt=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.invoke=function(e){tt().invoke(this,e)},t.prototype.navigate=function(e){this.invoke(e)},t.prototype.init=function(){tt().initBinding(this,"dataBinding","dataBinding"),tt().initBinding(this,"dataSet","dataSet")},t}(et),it=function(){return qe.get(d.CATEGORY.MODEL)},ot=function(t){function n(e){var n=t.call(this)||this;return Object.assign(n,e),n}return b(n,t),n.prototype.init=function(){this.isList&&it().removeFirstEmptyObject(this),it().initBinding(this,"dataBinding","dataSet")},n.prototype.execute=function(e,n){var o=t.prototype.execute.call(this,e,n);if(i.isDefined(o))return o;switch(e){case i.DataSource.Operation.IS_API_AWARE:case i.DataSource.Operation.SUPPORTS_CRUD:case i.DataSource.Operation.SUPPORTS_DISTINCT_API:case i.DataSource.Operation.IS_PAGEABLE:case i.DataSource.Operation.SUPPORTS_SERVER_FILTER:o=!1;break;case i.DataSource.Operation.IS_BOUND_TO_LOCALE:o=this.isBoundToLocale();break;case i.DataSource.Operation.GET_DEFAULT_LOCALE:o=this.getDefaultLocale();break;default:o={}}return o},n.prototype.isBoundToLocale=function(){return"supportedLocale"===this.name},n.prototype.getDefaultLocale=function(){return e.appManager.getSelectedLocale()},n}(Ye),rt=function(){return qe.get(d.CATEGORY.SERVICE)},at=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.execute=function(t,n){var o=e.prototype.execute.call(this,t,n);if(i.isDefined(o))return o;switch(t){case i.DataSource.Operation.IS_API_AWARE:o=!0;break;case i.DataSource.Operation.SUPPORTS_CRUD:case i.DataSource.Operation.SUPPORTS_DISTINCT_API:o=!1;break;case i.DataSource.Operation.IS_PAGEABLE:o=this.controller===d.CONTROLLER_TYPE.QUERY||!_.isEmpty(this.pagination);break;case i.DataSource.Operation.SUPPORTS_SERVER_FILTER:o=!1;break;case i.DataSource.Operation.SET_INPUT:o=this.setInput(n);break;case i.DataSource.Operation.LIST_RECORDS:case i.DataSource.Operation.INVOKE:o=this.invoke(n);break;case i.DataSource.Operation.UPDATE:o=this.update(n);break;case i.DataSource.Operation.SEARCH_RECORDS:o=this.searchRecords(n);break;case i.DataSource.Operation.DOWNLOAD:o=this.download(n);break;case i.DataSource.Operation.GET_PAGING_OPTIONS:o=this.pagination;break;case i.DataSource.Operation.IS_UPDATE_REQUIRED:o=this.isUpdateRequired(n);break;case i.DataSource.Operation.IS_BOUND_TO_LOCALE:o=!1;break;case i.DataSource.Operation.CANCEL:o=this.cancel(n);break;default:o={}}return o},t.prototype.invoke=function(e,t,n){return rt().invoke(this,e,t,n)},t.prototype.update=function(e,t,n){return rt().invoke(this,e,t,n)},t.prototype.download=function(e,t,n){return rt().download(this,e,t,n)},t.prototype.setInput=function(e,t,n){return rt().setInput(this,e,t,n)},t.prototype.searchRecords=function(e,t,n){var i=this;return new Promise(function(t,n){rt().searchRecords(i,e,function(e,n){t({data:e.content||e,pagination:n})},n)})},t.prototype.isUpdateRequired=function(e){var t=rt().getInputParms(this);return!(!Re.excludePaginationParams(t).length&&e)},t.prototype.cancel=function(e){return rt().cancel(this,e)},t.prototype.init=function(){rt().initBinding(this),rt().defineFirstLastRecord(this)},t}(Ke),st=function(){return qe.get(d.CATEGORY.NOTIFICATION)},lt=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.execute=function(t,n){var o=this,r=e.prototype.execute.call(this,t,n);return i.isDefined(r)?r:new Promise(function(e,r){switch(t){case i.DataSource.Operation.INVOKE:o.invoke(n,e,r);break;case i.DataSource.Operation.NOTIFY:o.notify(n,e,r);break;default:r(t+" operation is not supported on this data source")}})},t.prototype.notify=function(e,t,n){st().notify(this,e,t,n)},t.prototype.invoke=function(e,t,n){this.notify(e,t,n)},t.prototype.getMessage=function(){return st().getMessage(this)},t.prototype.setMessage=function(e){return st().setMessage(this,e)},t.prototype.clearMessage=function(){return st().setMessage(this,"")},t.prototype.getOkButtonText=function(){return st().getOkButtonText(this)},t.prototype.setOkButtonText=function(e){return st().setOkButtonText(this,e)},t.prototype.getToasterDuration=function(){return st().getToasterDuration(this)},t.prototype.setToasterDuration=function(e){return st().setToasterDuration(this,e)},t.prototype.getToasterClass=function(){return st().getToasterClass(this)},t.prototype.setToasterClass=function(e){return st().setToasterClass(this,e)},t.prototype.getToasterPosition=function(){return st().getToasterPosition(this)},t.prototype.setToasterPosition=function(e){return st().setToasterPosition(this,e)},t.prototype.getAlertType=function(){return st().getAlertType(this)},t.prototype.setAlertType=function(e){return st().setAlertType(this,e)},t.prototype.getCancelButtonText=function(){return st().getCancelButtonText(this)},t.prototype.setCancelButtonText=function(e){return st().setCancelButtonText(this,e)},t.prototype.init=function(){st().initBinding(this,"dataBinding","dataBinding"),st().initBinding(this,"dataSet","dataSet")},t}(et),ct=function(){return qe.get(d.CATEGORY.LOGIN)},pt=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.login=function(e,t,n){return ct().login(this,e,t,n)},t.prototype.invoke=function(e,t,n){return this.login(e,t,n)},t.prototype.cancel=function(){},t.prototype.init=function(){ct().initBinding(this,"dataBinding","dataBinding")},t}(et),ut=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.logout=function(e,t,n){qe.get(d.CATEGORY.LOGOUT).logout(this,e,t,n)},t.prototype.invoke=function(e,t,n){this.logout(e,t,n)},t.prototype.cancel=function(){},t}(et),dt=function(){return qe.get(d.CATEGORY.TIMER)},mt=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.fire=function(e,t,n){return dt().trigger(this,e,t,n)},t.prototype.invoke=function(e,t,n){return this.fire(e,t,n)},t.prototype.cancel=function(){return dt().cancel(this)},t}(et),ht=function(){return qe.get(d.CATEGORY.WEBSOCKET)},ft=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return b(t,e),t.prototype.open=function(e,t){return ht().open(this,e,t)},t.prototype.close=function(){return ht().close(this)},t.prototype.update=function(){return ht().update(this)},t.prototype.send=function(e){return ht().send(this,e)},t.prototype.cancel=function(){return this.close()},t.prototype.invoke=function(e,t,n){this.open(t,n)},t.prototype.init=function(){ht().initBinding(this)},t}(Ke),gt=function(){function e(){}return e.create=function(e,t){var n;switch(e.category){case d.CATEGORY.MODEL:n=new ot(e);break;case d.CATEGORY.SERVICE:n=new at(e);break;case d.CATEGORY.LIVE:n=new Je(e);break;case d.CATEGORY.DEVICE:n=new Xe(e);break;case d.CATEGORY.NAVIGATION:n=new nt(e);break;case d.CATEGORY.NOTIFICATION:n=new lt(e);break;case d.CATEGORY.LOGIN:n=new pt(e);break;case d.CATEGORY.LOGOUT:n=new ut(e);break;case d.CATEGORY.TIMER:n=new mt(e);break;case d.CATEGORY.WEBSOCKET:n=new ft(e)}return n._context=t,n.__cloneable__=!1,n},e}(),vt=function(){function e(e){this.$http=e,this.CONTEXT_APP="app"}return e.prototype.isLoaded=function(){return!!this.metadataMap&&this.metadataMap.has(this.CONTEXT_APP)},e.prototype.load=function(e){var t,n=this;return t=i.hasCordova()&&!i.isSpotcues?"metadata/"+(e?"prefabs/"+e+"/":"app/")+"service-definitions.json":"./services/"+(e?"prefabs/"+e+"/":"")+"servicedefs",new Promise(function(i,o){n.$http.send({url:t,method:"GET"}).then(function(t){n.metadataMap=n.metadataMap||new Map,n.metadataMap.set(e||n.CONTEXT_APP,t.body),i(t.body)},o)})},e.prototype.getByOperationId=function(e,t){t=t||this.CONTEXT_APP;var n=this.metadataMap.get(t);return n&&n[e]},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:i.AbstractHttpService}]},e}(),yt=function(){function e(e,t,n,i,o,r,a,s){this.httpService=e,this.metadataService=t,this.navigationService=n,this.routerService=i,this.toasterService=o,this.oAuthService=r,this.securityService=a,this.dialogService=s,A("http",this.httpService),A("metadata",this.metadataService),A("navigationService",this.navigationService),A("router",this.routerService),A("toaster",this.toasterService),A("oAuth",this.oAuthService),A("security",this.securityService),A("dialog",this.dialogService)}return e.prototype.bulkCancel=function(e){Object.keys(e).forEach(function(t){var n=e[t];_.isFunction(n.cancel)&&n.cancel()})},e.prototype.triggerStartUpdate=function(e){return Promise.all(Object.keys(e).map(function(t){return e[t]}).filter(function(e){return e.startUpdate&&e.invoke}).map(function(e){return e.invoke()}))},e.prototype.register=function(e,t,n){var i,o=this,r={Variables:{},Actions:{},callback:this.triggerStartUpdate};for(var a in t)(i=gt.create(t[a],n)).init(),i instanceof et?r.Actions[a]=i:r.Variables[a]=i;return n.registerDestroyListener&&n.registerDestroyListener(function(){o.bulkCancel(r.Variables),o.bulkCancel(r.Actions)}),r},e.prototype.destroy=function(){},e.prototype.registerDependency=function(e,t){A(e,t)},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:i.AbstractHttpService},{type:vt},{type:i.AbstractNavigationService},{type:n.Router},{type:i.AbstractToasterService},{type:p.OAuthService},{type:c.SecurityService},{type:i.AbstractDialogService}]},e}(),bt=s.ToastrModule.forRoot({maxOpened:1,autoDismiss:!0}),wt=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[yt,vt,r.Location,{provide:r.LocationStrategy,useClass:r.HashLocationStrategy}]}},e.decorators=[{type:o.NgModule,args:[{imports:[r.CommonModule,bt,a.HttpClientModule,l.HttpServiceModule,p.OAuthModule,c.SecurityModule],declarations:[]}]}],e}();e.\u0275b=ke,e.\u0275h=Be,e.\u0275i=Ge,e.\u0275f=Le,e.\u0275g=Fe,e.\u0275j=je,e.\u0275a=ge,e.\u0275e=Me,e.\u0275c=ye,e.\u0275d=Te,e.\u0275k=$e,e.CONSTANTS=u,e.VARIABLE_CONSTANTS=d,e.WS_CONSTANTS=m,e.DB_CONSTANTS=h,e.SWAGGER_CONSTANTS=f,e.VARIABLE_URLS=g,e.$rootScope=v,e.VariableManagerFactory=qe,e.DeviceVariableManager=Ve,e.DeviceVariableService=He,e.VariablesService=yt,e.MetadataService=vt,e.parseConfig=Ce,e.generateConnectionParams=Ie,e.LVService=Ne,e.\u02750=De,e.LiveVariableUtils=Se,e.setDependency=A,e.initiateCallback=D,e.processBinding=oe,e.simulateFileDownload=re,e.setInput=ae,e.isFileUploadSupported=se,e.getEvaluatedOrderBy=le,e.formatExportExpression=ce,e.debounceVariableCall=pe,e.formatDate=fe,e.\u02751=I,e.\u02752=x,e.\u02753=k,e.\u02754=L,e.\u02755=B,e.\u02756=j,e.\u02757=U,e.\u02758=W,e.\u02759=q,e.\u027510=z,e.\u027511=K,e.\u027512=X,e.\u027513=J,e.\u027514=te,e.\u027515=ie,e.\u027516=de,e.\u027517=he,e.toastrModule=bt,e.VariablesModule=wt,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@wm/mobile/runtime",["exports","@angular/core"],t):t((e.wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.runtime={}),e.ng.core)}(this,function(e,t){"use strict";var n=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[]}},e.decorators=[{type:t.NgModule,args:[{}]}],e}();e.MobileRuntimeModule=n,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("@wm/mobile/runtime/dynamic",["exports","@angular/core"],t):t((e.wm=e.wm||{},e.wm.mobile=e.wm.mobile||{},e.wm.mobile.runtime=e.wm.mobile.runtime||{},e.wm.mobile.runtime.dynamic={}),e.ng.core)}(this,function(e,t){"use strict";var n=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{}]}],e}();e.MOBILE_COMPONENT_MODULES_FOR_ROOT=[],e.MobileRuntimeDynamicModule=n,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@wm/components/page"),require("@wm/components/dialogs"),require("@wm/components/dialogs/confirm-dialog"),require("@wm/components/dialogs/design-dialog"),require("@wm/mobile/runtime"),require("ngx-toastr"),require("@angular/common/http"),require("ngx-bootstrap/chronos"),require("ngx-bootstrap/datepicker"),require("@wm/security"),require("@angular/router"),require("ngx-bootstrap/utils"),require("@wm/oAuth"),require("@angular/common"),require("@wm/components/base"),require("rxjs"),require("rxjs/operators"),require("@wm/variables"),require("@wm/http"),require("@wm/components/prefab"),require("@wm/transpiler"),require("@wm/build-task"),require("@angular/core"),require("@wm/core")):"function"==typeof define&&define.amd?define("@wm/runtime/base",["exports","@wm/components/page","@wm/components/dialogs","@wm/components/dialogs/confirm-dialog","@wm/components/dialogs/design-dialog","@wm/mobile/runtime","ngx-toastr","@angular/common/http","ngx-bootstrap/chronos","ngx-bootstrap/datepicker","@wm/security","@angular/router","ngx-bootstrap/utils","@wm/oAuth","@angular/common","@wm/components/base","rxjs","rxjs/operators","@wm/variables","@wm/http","@wm/components/prefab","@wm/transpiler","@wm/build-task","@angular/core","@wm/core"],t):t((e.wm=e.wm||{},e.wm.runtime=e.wm.runtime||{},e.wm.runtime.base={}),e.wm.components.page,e.wm.components.dialogs,e.wm.components.dialogs.confirmdialog,e.wm.components.dialogs.designdialog,e.wm.mobile.runtime,e.ngxToastr,e.ng.common.http,e.ngxBootstrap,e.ngxBootstrap,e.wm.security,e.ng.router,e.ngxBootstrap,e.wm.oAuth,e.ng.common,e.wm.components.base,e.rxjs,e.rxjs.operators,e.wm.variables,e.wm.http,e.wm.components.prefab,e.wm.transpiler,e.wm.buildTask,e.ng.core,e.wm.core)}(this,function(e,t,n,i,o,r,a,s,l,c,p,u,d,m,h,f,g,v,y,b,w,P,O,R,E){"use strict";var T;(T=e.ComponentType||(e.ComponentType={}))[T.PAGE=0]="PAGE",T[T.PREFAB=1]="PREFAB",T[T.PARTIAL=2]="PARTIAL";var S,C=function(){function e(){}return e.prototype.clearComponentFactoryRefCache=function(){},e}(),I=function(){return function(){}}(),A=function(){return function(){}}(),D=function(){return function(){}}(),N=function(){return function(){}}();!function(e){e.HIDE_TEMPLATES_SHOW_CASE="hide-templates-show-case",e.SHOW_TEMPLATES_SHOW_CASE="show-templates-show-case",e.UPDATE_LOCATION="update-location-path",e.SELECT_TEMPLATE="select-template",e.TEMPLATEBUNDLE_CONFIG="template-bundle-config",e.ON_LOAD="on-load"}(S||(S={}));var x=function(){function e(e,t,n,i,o,r,a,s,l,c){var p=this;this.$http=e,this.$security=t,this.$dialog=n,this.$router=i,this.$app=o,this.$variables=r,this.$metadata=a,this.$spinner=s,this.$i18n=l,this.$datePipe=c,this.appVariablesLoaded=!1,this.appVariablesFired=!1,this._noRedirect=!1,this.$http.registerOnSessionTimeout(this.handle401.bind(this)),this.$variables.registerDependency("appManager",this),this.$app.subscribe("toggle-variable-state",function(e){var t=e.variable,n=e.active;if(!_.isEmpty(_.trim(t.spinnerContext)))if(n){t._spinnerId=t._spinnerId||[];var i=p.$spinner.show(t.spinnerMessage,t._id+"_"+Date.now(),t.spinnerclass,t.spinnerContext);t._spinnerId.push(i)}else p.$spinner.hide(t._spinnerId.shift())}),this.$app.subscribe("userLoggedIn",function(){return p.setLandingPage()}),this.$app.subscribe("userLoggedOut",function(){return p.setLandingPage().then(function(){window.cordova&&p.$router.navigate(["/"])})}),this.$app.subscribe("http401",function(e){return void 0===e&&(e={}),p.handle401(e.page,e.options)})}return e.prototype.showLoginDialog=function(){this.$spinner.hide("globalSpinner"),this.$dialog.open("CommonLoginDialog"),E.$appDigest()},e.prototype.loadAppJS=function(){},e.prototype.loadCommonPage=function(){},e.prototype.loadSecurityConfig=function(){var e=this;return this.$security.load().then(function(t){return e.$app.landingPageName||e.setLandingPage(),t})},e.prototype.loadMetadata=function(){return this.$metadata.load()},e.prototype.loadAppVariables=function(e){var t=this;if(this.appVariablesLoaded)return Promise.resolve();var n=function(e){var n=t.$variables.register("app",e,t.$app);_.extend(t.$app.Variables,n.Variables),_.extend(t.$app.Actions,n.Actions),t.updateLoggedInUserVariable(),t.updateSupportedLocaleVariable(),t.appVariablesLoaded=!0,t.appVariablesFired=!1};return E.isDefined(e)?(n(e),Promise.resolve()):this.$http.get("./app.variables.json").then(function(e){return n(e)})},e.prototype.isAppVariablesFired=function(e){return E.isDefined(e)&&(this.appVariablesFired=e),this.appVariablesFired},e.prototype.clearLoggedInUserVariable=function(e){e.isAuthenticated=!1,e.roles=[],e.name=void 0,e.id=void 0,e.tenantId=void 0},e.prototype.updateLoggedInUserVariable=function(){var e=this,t=_.get(this.$app,"Variables.loggedInUser.dataSet");if(t)return this.$security.load().then(function(){var n=e.$security.get();if(!(n&&n.securityEnabled&&n.authenticated))throw e.clearLoggedInUserVariable(t),t.isSecurityEnabled=n&&n.securityEnabled,null;return t.isAuthenticated=n.authenticated,t.roles=n.userInfo.userRoles,t.name=n.userInfo.userName,t.id=n.userInfo.userId,t.tenantId=n.userInfo.tenantId,n}).catch(function(e){t.isAuthenticated=!1,t.roles=[],t.name=void 0,t.id=void 0,t.tenantId=void 0})},e.prototype.updateSupportedLocaleVariable=function(){_.get(this.$app,"Variables.supportedLocale")},e.prototype.handleSSOLogin=function(e){var t,n,i=this;if(t=this.$security.getRedirectPage(e),y.CONSTANTS.hasCordova){var o=_.get(this.$security.get(),"userInfo.userName");this.$security.authInBrowser().then(function(){return i.reloadAppData()}).then(function(){var e=_.get(i.$security.get(),"userInfo.userName");e&&e===o?y.routerService.navigate([t]):y.routerService.navigate(["/"])})}else{t=t?"?redirectPage="+encodeURIComponent(t):"",n=(n=this.$security.getQueryString(this.$security.getRedirectedRouteQueryParams()))?"?"+n:"",document.body.textContent=_.get(this.getAppLocale(),["MESSAGE_LOGIN_REDIRECTION"])||"Redirecting to sso login...";var r=this.getDeployedURL()+"services/security/ssologin"+t+n;window.self!==window.top&&"WM_PREVIEW_WINDOW"===window.parent.name?(window.parent.location.href=window.self.location.href,window.parent.name=""):window.location.href=r}},e.prototype.handle401=function(e,t){var n,i,o="DIALOG",r="PAGE",a="SSO",s=this.$security.get(),l={};if(i=s.loginConfig,s.userInfo&&s.userInfo.userName){switch(s.authenticated=!1,(n=i.sessionTimeout||{type:o}).type.toUpperCase()){case o:this.showLoginDialog();break;case r:e||(e=this.$security.getCurrentRoutePage()),l.redirectTo=e,l=_.merge(l,this.$security.getRedirectedRouteQueryParams()),e!==n.pageName&&this.$router.navigate([n.pageName],{queryParams:l});break;case a:this.handleSSOLogin(s)}this.setLandingPage()}else switch(i.type.toUpperCase()){case o:this.noRedirect(!0),this.showLoginDialog();break;case r:e=this.$security.getRedirectPage(s),l.redirectTo=e,l=_.merge(l,this.$security.getRedirectedRouteQueryParams()),this.$router.navigate([i.pageName],{queryParams:l}),this.$app.landingPageName=i.pageName;break;case a:this.handleSSOLogin(s)}},e.prototype.reloadAppData=function(){var e=this;return this.loadSecurityConfig().then(function(){return e.loadMetadata().then(function(){return e.updateLoggedInUserVariable()})})},e.prototype.noRedirect=function(e){return _.isUndefined(e)?this._noRedirect:(this._noRedirect=e,this._noRedirect)},e.prototype.executeSessionFailureRequests=function(){this.$http.executeSessionFailureRequests()},e.prototype.pushToSessionFailureRequests=function(e){this.$http.pushToSessionFailureQueue(e)},e.prototype.getDeployedURL=function(){return this.$app.deployedUrl?this.$app.deployedUrl:y.$rootScope.project.deployedUrl},e.prototype.notify=function(e,t){this.$app.notify(e,t)},e.prototype.subscribe=function(e,t){return this.$app.subscribe(e,t)},e.prototype.getActivePage=function(){return this.$app.activePage},e.prototype.getAppLocale=function(){return this.$app.appLocale},e.prototype.getSelectedLocale=function(){return this.$i18n.getSelectedLocale()},e.prototype.notifyApp=function(e,t,n){this.$app.notifyApp(e,t,n)},e.prototype.appOnBeforeServiceCall=function(e){return E.triggerFn(this.$app.onBeforeServiceCall,e)},e.prototype.appOnServiceSuccess=function(e,t){return E.triggerFn(this.$app.onServiceSuccess,e,t)},e.prototype.appOnServiceError=function(e,t){return E.triggerFn(this.$app.onServiceError,e,t)},e.prototype.appVariablesReady=function(){E.triggerFn(this.$app.onAppVariablesReady)},e.prototype.getPipe=function(e){if("date"===e)return this.$datePipe},e.prototype.setLandingPage=function(){var e=this;return this.$security.getPageByLoggedInUser().then(function(t){return e.$app.landingPageName=t})},e.prototype.isPrefabType=function(){return this.$app.isPrefabType},e.prototype.isTemplateBundleType=function(){return this.$app.isTemplateBundleType},e.prototype.postMessage=function(e){window.top.postMessage(e,"*")},e.prototype.showTemplate=function(e){var t=this.templates[e];this.$router.navigate([t.id])},e.prototype.postTemplateBundleInfo=function(){var e=this;return window.onmessage=function(t){var n=t.data;if(_.isObject(n))switch(n.key){case S.HIDE_TEMPLATES_SHOW_CASE:break;case S.SELECT_TEMPLATE:e.showTemplate(n.templateIndex)}},setTimeout(function(){e.postMessage({key:S.ON_LOAD})}),E.fetchContent("json","./config.json",!0,function(t){e.templates=[],t.error||(e.templates=t.templates,e.postMessage({key:S.TEMPLATEBUNDLE_CONFIG,config:t}))})},e.prototype.postAppTypeInfo=function(){if(this.isTemplateBundleType())return this.postTemplateBundleInfo()},e.SERVICE_NAME="AppManagerService",e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:E.AbstractHttpService},{type:p.SecurityService},{type:E.AbstractDialogService},{type:u.Router},{type:E.App},{type:y.VariablesService},{type:y.MetadataService},{type:E.AbstractSpinnerService},{type:E.AbstractI18nService},{type:h.DatePipe}]},e}(),M=function(e){return"__self__"===e},k=function(e){return M(e)?".":"app/prefabs/"+e},L=new Set,F=new Map,B=new Set,G=function(e,t){var n=e;return E.stringStartsWith(e,"http://|https://|//")||(n=(t+n).replace("//","/")),n},j=G,V=function(){function e(e,t){this.$metadata=e,this.prefabConfigProvider=t}return e.prototype.getConfig=function(e){return this.prefabConfigProvider.getConfig(e)},e.prototype.loadServiceDefs=function(e){return M(e)?Promise.resolve():this.$metadata.load(e)},e.prototype.loadStyles=function(e,t){var n=(void 0===t?{resources:{styles:[]}}:t).resources.styles,i=k(e),o=n.map(function(e){if(!_.endsWith(e,"/pages/Main/Main.css"))return G(e,i)}).filter(function(e){return!!e});return E.loadStyleSheets(o),Promise.resolve()},e.prototype.loadScripts=function(e,t){var n=(void 0===t?{resources:{scripts:[]}}:t).resources.scripts,i=k(e),o=n.map(function(e){return G(e,i)});return E.loadScripts(o)},e.prototype.setInProgress=function(e){var t,n,i=new Promise(function(e,i){t=e,n=i});i.resolve=t,i.reject=n,F.set(e,i)},e.prototype.resolveInProgress=function(e){F.get(e)&&(F.get(e).resolve(),F.delete(e))},e.prototype.loadDependencies=function(e){var t=this;return B.has(e)?Promise.resolve():L.has(e)?Promise.reject(""):F.get(e)?F.get(e):(this.setInProgress(e),this.getConfig(e).then(function(n){return Promise.all([t.loadStyles(e,n),t.loadScripts(e,n),t.loadServiceDefs(e)]).then(function(){t.resolveInProgress(e),B.add(e)})}))},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:y.MetadataService},{type:I}]},e}(),U=function(e,t){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function W(e,t){function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var q=function(){return(q=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function H(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})}function z(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function Y(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function K(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(K(arguments[t]));return e}var X,Z=function(){function e(){this.fragments=0,this.fragmentsLoaded$=new g.Subject}return e.prototype.init=function(){var e=this;this.viewInit$.subscribe(E.noop,E.noop,function(){e.isViewInitialized=!0,e.isReady()})},e.prototype.registerFragment=function(){this.fragments++},e.prototype.resolveFragment=function(){this.fragments--,this.isReady()},e.prototype.isReady=function(){this.isViewInitialized&&!this.fragments&&(this.registerFragment=E.noop,this.resolveFragment=E.noop,this.fragmentsLoaded$.complete())},e}(),J={},ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.compileContent=!1,t.destroy$=new g.Subject,t.viewInit$=new g.Subject,t}return W(t,e),t.prototype.getContainerWidgetInjector=function(){return this.containerWidget.inj||this.containerWidget.injector},t.prototype.init=function(){var t=this;this.App=this.injector.get(E.App),this.containerWidget=this.injector.get(f.WidgetRef),this.i18nService=this.injector.get(E.AbstractI18nService),this.scriptLoaderService=this.injector.get(E.ScriptLoaderService),this.getContainerWidgetInjector().view.component.registerFragment&&this.getContainerWidgetInjector().view.component.registerFragment(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.activePageName=this.App.activePageName,this.registerPageParams(),this.defineI18nProps(),this.viewInit$.subscribe(E.noop,E.noop,function(){t.pageParams=t.containerWidget.partialParams}),e.prototype.init.call(this)},t.prototype.registerWidgets=function(){"Common"===this.partialName?this.Widgets=J:this.Widgets=Object.create(J),this.containerWidget.Widgets=this.Widgets},t.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(E.noop,E.noop,function(){return e()})},t.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(E.UtilsService))}catch(e){console.error("Error in evaluating partial ("+this.partialName+") script\n",e)}},t.prototype.initVariables=function(){var e=this,t=this.injector.get(y.VariablesService).register(this.partialName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),this.containerWidget.Variables=this.Variables,this.containerWidget.Actions=this.Actions,Object.entries(t.Variables).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Variables[i]=o}),Object.entries(t.Actions).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Actions[i]=o}),this.viewInit$.subscribe(E.noop,E.noop,function(){E.$invokeWatchers(!0,!0),t.callback(t.Variables).catch(E.noop),t.callback(t.Actions)})},t.prototype.registerPageParams=function(){this.pageParams=this.containerWidget.partialParams},t.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getAppLocale()},t.prototype.invokeOnReady=function(){this.onReady(),this.getContainerWidgetInjector().view.component.resolveFragment&&this.getContainerWidgetInjector().view.component.resolveFragment()},t.prototype.loadScripts=function(){var e=this;return new Promise(function(t){var n,i=e.partialDirective.$element.attr("scripts-to-load");i?(n=e.scriptLoaderService).load.apply(n,Q(i.split(","))).then(t):t()})},t.prototype.ngAfterViewInit=function(){var e=this;this.loadScripts().then(function(){e.compileContent=!0,setTimeout(function(){e.viewInit$.complete(),e.fragmentsLoaded$.subscribe(E.noop,E.noop,function(){return e.invokeOnReady()})},100)})},t.prototype.ngOnDestroy=function(){this.destroy$.complete()},t.prototype.onReady=function(){},t.propDecorators={partialDirective:[{type:R.ViewChild,args:[f.PartialDirective]}]},t}(Z),te=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.startupVariablesLoaded=!1,t.pageTransitionCompleted=!1,t.destroy$=new g.Subject,t.viewInit$=new g.Subject,t}return W(n,e),n.prototype.init=function(){E.muteWatchers(),this.App=this.injector.get(E.App),this.route=this.injector.get(u.ActivatedRoute),this.appManager=this.injector.get(x),this.navigationService=this.injector.get(E.AbstractNavigationService),this.scriptLoaderService=this.injector.get(E.ScriptLoaderService),this.i18nService=this.injector.get(E.AbstractI18nService),this.router=this.injector.get(u.Router),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.App.lastActivePageName=this.App.activePageName,this.App.activePageName=this.pageName,this.App.activePage=this,this.activePageName=this.pageName,this.registerPageParams(),this.defineI18nProps(),e.prototype.init.call(this)},n.prototype.registerWidgets=function(){this.Widgets=Object.create(J),this.App.Widgets=Object.create(this.Widgets)},n.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(E.UtilsService))}catch(e){console.error("Error in evaluating page ("+this.pageName+") script\n",e)}},n.prototype.registerPageParams=function(){var e=this,t=this.route.queryParams.subscribe(function(t){return e.pageParams=e.App.pageParams=t});this.registerDestroyListener(function(){return t.unsubscribe()})},n.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(E.noop,E.noop,function(){return e()})},n.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getAppLocale()},n.prototype.initVariables=function(){var e=this,t=this.injector.get(y.VariablesService).register(this.pageName,this.getVariables(),this);this.Variables=Object.create(this.App.Variables),this.Actions=Object.create(this.App.Actions),Object.entries(t.Variables).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Variables[i]=o}),Object.entries(t.Actions).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Actions[i]=o});var n=this.viewInit$.subscribe(E.noop,E.noop,function(){e.appManager.isAppVariablesFired()||(t.callback(e.App.Variables).catch(E.noop).then(function(){e.appManager.notify("app-variables-data-loaded",{pageName:e.pageName})}),t.callback(e.App.Actions),e.appManager.appVariablesReady(),e.appManager.isAppVariablesFired(!0)),t.callback(t.Variables).catch(E.noop).then(function(){e.appManager.notify("page-variables-data-loaded",{pageName:e.pageName}),e.startupVariablesLoaded=!0,setTimeout(function(){e.showPageContent=!0},100)}),t.callback(t.Actions),n.unsubscribe()})},n.prototype.runPageTransition=function(e){var t=this;return new Promise(function(n){var i=t.getPageTransitionTarget();if(e){var o=function(){n&&(i.off("animationend",o),i.removeClass(e),i.children().first().remove(),n(),n=null)};e="page-transition page-transition-"+e,i.addClass(e),i.on("animationend",o),setTimeout(o,1e3)}else n()})},n.prototype.invokeOnReady=function(){this.onReady(),(this.App.onPageReady||E.noop)(this.pageName,this),this.appManager.notify("pageReady",{name:this.pageName,instance:this})},n.prototype.loadScripts=function(){var e=this;return new Promise(function(t){var n,i=e.pageDirective&&e.pageDirective.$element.attr("scripts-to-load");i?(n=e.scriptLoaderService).load.apply(n,Q(i.split(","))).then(t):t()})},n.prototype.getPageTransitionTarget=function(){return $("app-page-outlet:first").length?$("app-page-outlet:first"):$('div[data-role="pageContainer"]:first').parent()},n.prototype.ngAfterViewInit=function(){var e=this;this.loadScripts().then(function(){var t=e.navigationService.getPageTransition();if(t){var n=e.getPageTransitionTarget();n.prepend(n.children().first().clone())}e.runPageTransition(t).then(function(){e.pageTransitionCompleted=!0,e.compilePageContent=!0}).then(function(){setTimeout(function(){E.unMuteWatchers(),e.viewInit$.complete(),e.onPageContentReady=function(){e.fragmentsLoaded$.subscribe(E.noop,E.noop,function(){e.invokeOnReady()}),e.onPageContentReady=E.noop}},300)})})},n.prototype.ngOnDestroy=function(){this.destroy$.complete()},n.prototype.onReady=function(){},n.prototype.onBeforePageLeave=function(){},n.prototype.onPageContentReady=function(){},n.propDecorators={pageDirective:[{type:R.ViewChild,args:[t.PageDirective]}]},n}(Z),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.compileContent=!1,t.destroy$=new g.Subject,t.viewInit$=new g.Subject,t}return W(t,e),t.prototype.getContainerWidgetInjector=function(){return this.containerWidget.inj||this.containerWidget.injector},t.prototype.init=function(){this.App=this.injector.get(E.App),this.containerWidget=this.injector.get(f.WidgetRef),this.prefabMngr=this.injector.get(V),this.i18nService=this.injector.get(E.AbstractI18nService),this.scriptLoaderService=this.injector.get(E.ScriptLoaderService),this.getContainerWidgetInjector().view.component.registerFragment&&this.getContainerWidgetInjector().view.component.registerFragment(),this.initUserScript(),this.registerWidgets(),this.initVariables(),this.registerProps(),this.defineI18nProps(),e.prototype.init.call(this)},t.prototype.registerWidgets=function(){this.Widgets={}},t.prototype.initUserScript=function(){try{this.evalUserScript(this,this.App,this.injector.get(E.UtilsService))}catch(e){console.error("Error in evaluating prefab ("+this.prefabName+") script\n",e)}},t.prototype.registerChangeListeners=function(){this.containerWidget.registerPropertyChangeListener(this.onPropertyChange),this.containerWidget.registerStyleChangeListener(this.onPropertyChange)},t.prototype.registerDestroyListener=function(e){this.destroy$.subscribe(E.noop,E.noop,function(){return e()})},t.prototype.defineI18nProps=function(){this.appLocale=this.i18nService.getPrefabLocaleBundle(this.prefabName)},t.prototype.registerProps=function(){var e=this;this.prefabMngr.getConfig(this.prefabName).then(function(t){t&&(e.displayName=t.displayName,Object.entries(t.properties||{}).forEach(function(t){var n,i=K(t,2),o=i[0],r=i[1],a=_.trim(r.value);_.startsWith(a,"bind:")&&(n=a.replace("bind:","")),Object.defineProperty(e,o,{get:function(){return e.containerWidget[o]},set:function(t){return e.containerWidget.widget[o]=t}}),n&&e.registerDestroyListener(E.$watch(n,e,{},function(t){return e.containerWidget.widget[o]=t}))}),Object.entries(t.events||{}).forEach(function(t){var n=K(t,2),i=n[0];n[1];e[i]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=i.substr(2).toLowerCase();e.containerWidget.invokeEventCallback(o,{$event:t[0],$data:t[1]})}}),Object.entries(t.methods||{}).forEach(function(t){var n=K(t,2),i=n[0];n[1];e.containerWidget[i]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{if(e[i])return e[i].apply(e,t)}catch(t){console.warn("error in executing prefab-"+e.prefabName+" method-"+i)}}})),e.containerWidget.setProps(t),E.isIE()&&(e.containerWidget.widget=e.containerWidget.createProxy())})},t.prototype.initVariables=function(){var e=this,t=this.injector.get(y.VariablesService).register(this.prefabName,this.getVariables(),this);this.Variables={},this.Actions={},Object.entries(t.Variables).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Variables[i]=o}),Object.entries(t.Actions).forEach(function(t){var n=K(t,2),i=n[0],o=n[1];return e.Actions[i]=o}),this.viewInit$.subscribe(E.noop,E.noop,function(){t.callback(t.Variables).catch(E.noop),t.callback(t.Actions)})},t.prototype.invokeOnReady=function(){E.$invokeWatchers(!0,!0),this.onReady(),this.getContainerWidgetInjector().view.component.resolveFragment&&this.getContainerWidgetInjector().view.component.resolveFragment(),this.containerWidget.invokeEventCallback("load")},t.prototype.loadScripts=function(){var e=this;return new Promise(function(t){var n,i=e.prefabContainerDirective.$element.attr("scripts-to-load");i?(n=e.scriptLoaderService).load.apply(n,Q(i.split(","))).then(t):t()})},t.prototype.ngAfterViewInit=function(){var e=this;this.loadScripts().then(function(){e.compileContent=!0,e.viewInit$.complete(),e.registerChangeListeners(),setTimeout(function(){e.fragmentsLoaded$.subscribe(E.noop,E.noop,function(){return e.invokeOnReady()})},100)})},t.prototype.ngOnDestroy=function(){this.containerWidget.invokeEventCallback("destroy"),this.destroy$.complete()},t.prototype.onPropertyChange=function(){},t.prototype.onReady=function(){},t.propDecorators={prefabContainerDirective:[{type:R.ViewChild,args:[w.PrefabContainerDirective]}]},t}(Z);!function(e){e.EVERYONE="Everyone",e.ANONYMOUS="Anonymous",e.AUTHENTICATED="Authenticated"}(X||(X={}));var ie=function(){function e(e,t,n){this.templateRef=e,this.viewContainerRef=t,this.securityService=n,this.processed=!1;var i=this.securityService.get();this.securityEnabled=_.get(i,"securityEnabled"),this.isUserAuthenticated=_.get(i,"authenticated"),this.userRoles=_.get(i,"userInfo.userRoles")}return e.prototype.getWidgetRolesArrayFromStr=function(e){var t=/&#44;/g;return""===(e=e||"")?[]:_.split(e,",").map(function(e){return _.trim(e).replace(t,",")})},e.prototype.matchRoles=function(e,t){return e.some(function(e){return _.includes(t,e)})},e.prototype.hasAccessToWidget=function(e,t){return!!_.includes(e,X.EVERYONE)||(!(!_.includes(e,X.ANONYMOUS)||this.isUserAuthenticated)||(!(!_.includes(e,X.AUTHENTICATED)||!this.isUserAuthenticated)||this.isUserAuthenticated&&this.matchRoles(e,t)))},Object.defineProperty(e.prototype,"accessroles",{set:function(e){if(!this.processed){this.processed=!0;var t=this.getWidgetRolesArrayFromStr(e);!this.securityEnabled||this.hasAccessToWidget(t,this.userRoles)?this.viewContainerRef.createEmbeddedView(this.templateRef):this.viewContainerRef.clear()}},enumerable:!0,configurable:!0}),e.decorators=[{type:R.Directive,args:[{selector:"[accessroles]"}]}],e.ctorParameters=function(){return[{type:R.TemplateRef},{type:R.ViewContainerRef},{type:p.SecurityService}]},e.propDecorators={accessroles:[{type:R.Input}]},e}(),oe=function(){function t(e,t,n,i,o,r,a,s,l){var c=this;this.componentInstance=e,this.vcRef=t,this.elRef=n,this.inj=i,this.app=o,this.resolver=a,this.componentRefProvider=s,this.partialRefProvider=l,this.contentInitialized=!1,this.renderPartial=_.debounce(this._renderPartial,200),e.registerPropertyChangeListener(function(t,n,i){"content"===t&&(e.$lazyLoad?e.$lazyLoad=function(){c.renderPartial(n),e.$lazyLoad=E.noop}:c.renderPartial(n))});var p=e.params$.pipe(v.filter(function(){return c.contentInitialized}),v.debounceTime(200)).subscribe(function(){return c.renderPartial(e.content)});e.registerDestroyListener(function(){return p.unsubscribe()})}return Object.defineProperty(t.prototype,"name",{get:function(){return this.componentInstance.name},enumerable:!0,configurable:!0}),t.prototype._renderPartial=function(t){return H(this,void 0,void 0,function(){var n,i,o=this;return z(this,function(r){switch(r.label){case 0:return this.vcRef.clear(),E.$invokeWatchers(!0),[4,this.partialRefProvider.getComponentFactoryRef(t,e.ComponentType.PARTIAL)];case 1:return(n=r.sent())&&(i=this.vcRef.createComponent(n,0,this.inj),this.$target||(this.$target=this.elRef.nativeElement.querySelector("[partial-container-target]")||this.elRef.nativeElement),this.$target.innerHTML="",this.$target.appendChild(i.location.nativeElement),this.contentInitialized=!0,setTimeout(function(){return o.onLoadSuccess()},200)),[2]}})})},t.prototype.onLoadSuccess=function(){this.componentInstance.invokeEventCallback("load"),this.app.notify("partialLoaded")},t.decorators=[{type:R.Directive,args:[{selector:"[partialContainer]"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:R.Self},{type:R.Inject,args:[f.WidgetRef]}]},{type:R.ViewContainerRef},{type:R.ElementRef},{type:R.Injector},{type:E.App},{type:String,decorators:[{type:R.Attribute,args:["content"]}]},{type:R.ComponentFactoryResolver},{type:C},{type:N}]},t}(),re=function(){function e(){}return e.decorators=[{type:R.Component,args:[{selector:"app-spinner",template:'\n        <div class="app-spinner" [ngClass]="classname" *ngIf="show">\n            <div class="spinner-message" aria-label="loading gif">\n                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                <div class="spinner-messages">\n                    <p *ngFor="let value of spinnermessages" [textContent]="value"></p>\n                </div>\n            </div>\n        </div>\n    '}]}],e.ctorParameters=function(){return[]},e.propDecorators={show:[{type:R.Input}],spinnermessages:[{type:R.Input}],classname:[{type:R.Input}]},e}(),ae=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.toastrService=t,i.toastPackage=n,i.watchers=[],i.params={},i.pagename=i.message||"",i.generateParams(),i}return W(t,e),t.prototype.generateParams=function(){var e=this;_.forEach(this.options.partialParams,function(t){_.isString(t.value)&&0===t.value.indexOf("bind:")?e.watchers.push(E.$watch(t.value.substr(5),e.options.context,{},function(n){e.params[t.name]=n,E.$appDigest()})):e.params[t.name]=t.value})},t.prototype.generateDynamicComponent=function(){return H(this,void 0,void 0,function(){var e;return z(this,function(t){return e=$(".parent-custom-toast"),this.customToastRef.clear(),e[0].appendChild(this.customToastRef.createEmbeddedView(this.customToastTmpl).rootNodes[0]),[2]})})},t.prototype.ngAfterViewInit=function(){this.generateDynamicComponent()},t.prototype.ngOnDestroy=function(){_.forEach(this.watchers,function(e){return e()})},t.decorators=[{type:R.Component,args:[{selector:"[custom-toaster-component]",template:'\n        <div class="parent-custom-toast"></div>\n        <ng-container #customToast></ng-container>\n        <ng-template #customToastTmpl>\n            <div wmContainer partialContainer content.bind="pagename">\n                <div *ngFor="let param of params | keyvalue" wmParam hidden\n                    [name]="param.key" [value]="param.value"></div>\n            </div>\n        </ng-template>',preserveWhitespaces:!1}]}],t.ctorParameters=function(){return[{type:a.ToastrService},{type:a.ToastPackage}]},t.propDecorators={customToastRef:[{type:R.ViewChild,args:["customToast",{read:R.ViewContainerRef}]}],customToastTmpl:[{type:R.ViewChild,args:["customToastTmpl"]}]},t}(a.Toast),se=function(){function e(e,t,n,i,o){this.route=e,this.securityService=t,this.router=n,this.app=i,this.appManger=o}return e.prototype.ngOnInit=function(){var e=this;this.app.isPrefabType?this.router.navigate(["prefab-preview"]):this.app.isApplicationType?this.securityService.getPageByLoggedInUser().then(function(t){e.router.navigate([t])}):(this.router.navigate([E.getWmProjectProperties().homePage]),this.appManger.postAppTypeInfo())},e.decorators=[{type:R.Component,args:[{selector:"app-empty-page",template:"<div></div>"}]}],e.ctorParameters=function(){return[{type:u.ActivatedRoute},{type:p.SecurityService},{type:u.Router},{type:E.App},{type:x}]},e}(),le=function(){function t(t,n,i,o,r,a,s){var l=this;this.componentInstance=t,this.vcRef=n,this.elRef=i,this.prefabMngr=o,this.resolver=r,this.injector=a,this.componentRefProvider=s;var c=this.componentInstance.prefabName;this.prefabMngr.loadDependencies(c).then(function(){return H(l,void 0,void 0,function(){var t,n;return z(this,function(i){switch(i.label){case 0:return[4,this.componentRefProvider.getComponentFactoryRef(c,e.ComponentType.PREFAB)];case 1:return(t=i.sent())&&(n=this.vcRef.createComponent(t,0,a),this.elRef.nativeElement.appendChild(n.location.nativeElement)),[2]}})})})}return t.decorators=[{type:R.Directive,args:[{selector:"[wmPrefab][prefabname]"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:R.Self},{type:R.Inject,args:[f.WidgetRef]}]},{type:R.ViewContainerRef},{type:R.ElementRef},{type:V},{type:R.ComponentFactoryResolver},{type:R.Injector},{type:C}]},t}(),ce={DialogService:E.AbstractDialogService,i18nService:E.AbstractI18nService,SpinnerService:E.AbstractSpinnerService,ToasterService:E.AbstractToasterService,Utils:E.UtilsService,CONSTANTS:E.ConstantService,FIELD_TYPE:E.FieldTypeService,FIELD_WIDGET:E.FieldWidgetService,DynamicComponentService:E.DynamicComponentRefProvider},pe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},ue=function(){function e(e,t,n,i){this.inj=e,this.i18nService=t,this.httpService=n,this.securityService=i,this.Variables={},this.Actions={},this.onAppVariablesReady=pe,this.onSessionTimeout=pe,this.onPageReady=pe,this.onBeforePageLeave=pe,this.onBeforeServiceCall=pe,this.onServiceSuccess=pe,this.onServiceError=pe,this.dynamicComponentContainerRef={},this.changeLocale=this.i18nService.setSelectedLocale.bind(this.i18nService),this.getSelectedLocale=this.i18nService.getSelectedLocale.bind(this.i18nService),this._eventNotifier=new E.EventNotifier,this.landingPageName=E.getWmProjectProperties().homePage;var o=E.getWmProjectProperties();this.projectName=o.name,this.isPrefabType="PREFAB"===o.type,this.isApplicationType="APPLICATION"===o.type,this.isTemplateBundleType="TEMPLATEBUNDLE"===o.type,this.httpService.registerOnSessionTimeout(this.on401.bind(this)),this.appLocale=this.i18nService.getAppLocale(),this.httpService.setLocale(this.appLocale)}return e.prototype.reload=function(){window.location.reload()},e.prototype.notify=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._eventNotifier.notify.apply(this._eventNotifier,arguments)},e.prototype.getDependency=function(e){if(E.isString(e)){if("HttpService"===e)return function(){var e=this.httpService,t=function(t,n){var i=Array.from(arguments).slice(1);return Promise.resolve(e[t].apply(e,i))},n=function(){return t.apply(void 0,Q(["send"],Array.from(arguments)))};return["get","post","head","put","delete","jsonp","patch"].forEach(function(e){return n[e]=t.bind(void 0,e)}),n}.call(this);var t=ce[e]&&this.inj.get(ce[e]);return!t&&this.inj._providers&&_.forEach(this.inj._providers,function(n){if(_.isObject(n)&&n.__proto__.constructor.SERVICE_NAME===e)return t=n,!1}),t}return this.inj.get(e)},e.prototype.on401=function(){var e=_.get(this.securityService.get(),"userInfo");_.isEmpty(e)||this.onSessionTimeout()},e.prototype.subscribe=function(e,t){return this._eventNotifier.subscribe(e,t)},e.prototype.notifyApp=function(e,t,n){var i=_.get(this,"Actions.appNotification");i?(t=t||"success",i.invoke({message:e,title:E.isDefined(n)?n:t.toUpperCase(),class:t,duration:"ERROR"===t.toUpperCase()?0:void 0})):console.warn('The default Action "appNotification" doesn\'t exist in the app.')},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:R.Injector},{type:E.AbstractI18nService},{type:E.AbstractHttpService},{type:p.SecurityService}]},e}(),de=function(e){function t(t){var n=e.call(this)||this;return n.toaster=t,n}return W(t,e),t.prototype._showToaster=function(e,t,n,i){if(_.isNumber(i)&&(i={timeOut:i}),(i=i||{}).timeOut=E.isDefined(i.timeOut)?i.timeOut:0,i.enableHtml=E.isDefined(i.enableHtml),i.positionClass=i.positionClass||"toast-bottom-right",i.toastClass="toast",t||n){!i.bodyOutputType&&_.isObject(n)&&(n=JSON.stringify(n));var o=this.toaster[e];if(o)return o.call(this.toaster,n,t,i)}},t.prototype.success=function(e,t){return this._showToaster("success",e,t,{timeOut:5e3})},t.prototype.error=function(e,t){return this._showToaster("error",e,t,{timeOut:0})},t.prototype.info=function(e,t){return this._showToaster("info",e,t,{timeOut:0})},t.prototype.warn=function(e,t){return this._showToaster("warning",e,t,{timeOut:0})},t.prototype.show=function(e,t,n,i){return this._showToaster(e,t,n,i)},t.prototype.hide=function(e){e?this.toaster.clear(e.toastId):this.toaster.clear()},t.prototype.showCustom=function(e,t){if(e)return(t=t||{}).toastComponent=ae,t.toastClass="custom-toaster",t.timeOut=E.isDefined(t.timeOut)?t.timeOut:0,t.enableHtml=E.isDefined(t.enableHtml),t.positionClass=t.positionClass||"toast-bottom-right",t.toastClass="toast",this.toaster.show(e,"",t)},t.decorators=[{type:R.Injectable}],t.ctorParameters=function(){return[{type:a.ToastrService}]},t}(E.AbstractToasterService),me=["ar","ar-001","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sd","ar-sy","ar-tn","ar-ye","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","pnb","ps","sd","ug","ur","yi"],he=function(e){function t(t,n,i){var o=e.call(this)||this;return o.$http=t,o.bsLocaleService=n,o.appDefaults=i,o.defaultSupportedLocale="en",o._isAngularLocaleLoaded=!1,o.appLocale={},o.prefabLocale=new Map,o}return W(t,e),t.prototype.updateLocaleDirection=function(){var e="ltr";me.includes(this.selectedLocale)&&(e="rtl"),E.setCSS(document.body,"direction",e)},t.prototype.init=function(){this.messages={},Object.setPrototypeOf(this.appLocale,this.messages)},t.prototype.getSelectedLocale=function(){return this.selectedLocale},t.prototype.getDefaultSupportedLocale=function(){return this.defaultSupportedLocale},t.prototype.getAppLocale=function(){return this.appLocale},t.prototype.getPrefabLocaleBundle=function(e){return this.prefabLocale.has(e)||this.prefabLocale.set(e,Object.create(this.appLocale)),this.prefabLocale.get(e)},t.prototype.extendPrefabMessages=function(e){var t=this;e.prefabMessages&&Object.keys(e.prefabMessages).forEach(function(n){var i=t.prefabLocale.get(n);i||(i=Object.create(t.appLocale),t.prefabLocale.set(n,i)),Object.assign(i,e.prefabMessages[n])})},t.prototype.extendMessages=function(e){Object.assign(this.messages,e)},t.prototype.loadResource=function(e){return this.$http.get(e).toPromise().catch(function(){console.warn("error loading locale resource from "+e)})},t.prototype.loadAppLocaleBundle=function(){var e=this;this.loadResource("resources/i18n/"+this.selectedLocale+".json").then(function(t){e.extendMessages(t.messages),e.extendPrefabMessages(t),e.appDefaults.setFormats(t.formats)})},t.prototype.loadMomentLocaleBundle=function(e){var t=this,n=E._WM_APP_PROJECT.cdnUrl||E._WM_APP_PROJECT.ngDest;if(this.selectedLocale!==this.defaultSupportedLocale){var i=n+"locales/moment/"+e+".js";this.$http.get(i,{responseType:"text"}).toPromise().then(function(e){var n,i=new Function(e);i(),moment.locale(t.selectedLocale),i.apply({moment:{defineLocale:function(e,t){return n=t}}}),l.defineLocale(t.selectedLocale,n),t.bsLocaleService.use(t.getSelectedLocale()||t.defaultSupportedLocale)})}else moment.locale(this.defaultSupportedLocale)},t.prototype.loadAngularLocaleBundle=function(e){var t=this;return new Promise(function(n){var i=E._WM_APP_PROJECT.cdnUrl||E._WM_APP_PROJECT.ngDest;if(t.selectedLocale!==t.defaultSupportedLocale){var o=i+"locales/angular/"+e+".js";t.$http.get(o,{responseType:"text"}).toPromise().then(function(e){var i={},o={};i.exports=o,new Function("module","exports",e)(i,o),h.registerLocaleData(o.default),t._isAngularLocaleLoaded=!0,n()},function(){return n()})}else n()})},t.prototype.loadCalendarLocaleBundle=function(e,t){void 0===t&&(t=!1);var n,i=E._WM_APP_PROJECT.cdnUrl||E._WM_APP_PROJECT.ngDest;if(!e)return Promise.resolve();n=i+"locales/fullcalendar/"+e+".js",(t||!E.isMobile()&&!E.isMobileApp()&&this.selectedLocale!==this.defaultSupportedLocale)&&this.$http.get(n,{responseType:"text"}).toPromise().then(function(e){new Function(e)()})},t.prototype.loadLocaleBundles=function(e){return e.moment&&this.loadMomentLocaleBundle(e.moment),e.fullCalendar&&window.FullCalendar&&this.loadCalendarLocaleBundle(e.fullCalendar),e.angular&&this.loadAppLocaleBundle(),this.loadAngularLocaleBundle(e.angular)},t.prototype.setSelectedLocale=function(e){var t=this;_.isObject(e)&&(e=e.datavalue);var n=E.getWmProjectProperties().supportedLanguages[e],i=Object.keys(E.getWmProjectProperties().supportedLanguages);return _.includes(i,e)&&e&&e!==this.selectedLocale?(E.setSessionStorageItem("selectedLocale",e),this.selectedLocale=e,this.init(),this.loadLocaleBundles(n).then(function(){return t.updateLocaleDirection()})):Promise.resolve()},t.prototype.loadDefaultLocale=function(){var e=this.getAcceptedLanguages();e.push(E.getWmProjectProperties().defaultLanguage);var t=Object.keys(E.getWmProjectProperties().supportedLanguages)||[this.defaultSupportedLocale],n=E.getSessionStorageItem("selectedLocale")||_.intersection(e,t)[0]||this.defaultSupportedLocale;t=t||[n];var i=n||t[0];return this.setSelectedLocale(i)},t.prototype.getLocalizedMessage=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return E.replace(this.appLocale[e],t)},t.prototype.getAcceptedLanguages=function(){var e;return e=y.CONSTANTS.hasCordova?navigator.languages||[navigator.language]:(e=E.getWmProjectProperties().preferredLanguage||"").split(",").map(function(e){return e.split(";")[0]}),_.map(e,_.toLower)},t.prototype.initCalendarLocale=function(){return"en"!==this.selectedLocale?this.loadCalendarLocaleBundle(this.selectedLocale,!0):Promise.resolve()},t.prototype.isAngularLocaleLoaded=function(){return this._isAngularLocaleLoaded},t.decorators=[{type:R.Injectable}],t.ctorParameters=function(){return[{type:s.HttpClient},{type:c.BsLocaleService},{type:E.AppDefaults}]},t}(E.AbstractI18nService),fe=function(e){function t(){var t=e.call(this)||this;return t.spinnerId=0,t.messageSource=new g.Subject,t.messagesByContext={},t}return W(t,e),t.prototype.getMessageSource=function(){return this.messageSource},t.prototype.showContextSpinner=function(e,t,n){var i=$('[name="'+e+'"]');if(this.messagesByContext[e]=this.messagesByContext[e]||{},0!==Object.keys(this.messagesByContext[e]).length)this.messagesByContext[e][n]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e].finalMessage+" "+this.messagesByContext[e][n],i.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage);else{var o=$('<div class="app-spinner">\n                            <div class="spinner-message" aria-label="loading gif">\n                                <i class="spinner-image animated infinite fa fa-circle-o-notch fa-spin"></i>\n                                <div class="spinner-messages">\n                                    <p class="spinner-messages-container"></p>\n                               </div>\n                            </div>\n                         </div>');this.messagesByContext[e][n]=t,this.messagesByContext[e].finalMessage=this.messagesByContext[e][n],o.find(".spinner-messages-container").html(this.messagesByContext[e].finalMessage),i.prepend(o)}return n},t.prototype.showAppSpinner=function(e,t){this.messagesByContext.page=this.messagesByContext.page||{},this.messagesByContext.page[t]=e,this.messageSource.next({show:!0,message:e,messages:_.values(this.messagesByContext.page)})},t.prototype.hideContextSpinner=function(e,t){delete this.messagesByContext[e][t],1===Object.keys(this.messagesByContext[e]).length&&(this.messagesByContext[e]={}),$('[name="'+e+'"]').find(".app-spinner").remove()},t.prototype.show=function(e,t,n,i,o){return t=t||++this.spinnerId,i&&"page"!==i?this.showContextSpinner(i,e,t):(this.showAppSpinner(e,t),t)},t.prototype.hide=function(e){var t=_.findKey(this.messagesByContext,function(t){return _.includes(_.keys(t),e)})||"page";if("page"===t)if(e){delete this.messagesByContext[t][e];var n=_.values(this.messagesByContext[t]);this.messageSource.next({show:!!n.length,messages:_.values(this.messagesByContext[t])})}else this.messagesByContext[t]={};else this.hideContextSpinner(t,e)},t.decorators=[{type:R.Injectable}],t.ctorParameters=function(){return[]},t}(E.AbstractSpinnerService),ge=function(){function e(e,t){var n=this;this.app=e,this.router=t,this.history=new ye,this.isPageAddedToHistory=!1,this.router.events.subscribe(function(e){if(e instanceof u.NavigationStart){var t=e.url,i={},o=void 0;n.isPageAddedToHistory||(n.isPageAddedToHistory=!1,t.indexOf("?")>0?(t.substr(t.indexOf("?")+1).split("&").forEach(function(e){var t=e.split("=");i[t[0]]=t[1]}),o=t.substr(0,t.indexOf("?"))):o=t,"/"===o[0]&&(o=o.substr(1)),o&&(delete i.name,n.history.push(new ve(o,i,n.transition))))}})}return e.prototype.getPageTransition=function(){return _.isEmpty(this.transition)||_.isEqual("none",this.transition)?null:this.transition},e.prototype.goToPage=function(e,t){if(this.transition=t.transition||"",this.history.getCurrentPage()&&(this.isPageAddedToHistory=!0),this.history.push(new ve(e,t.urlParams,this.transition)),!y.CONSTANTS.isWaveLens)return this.router.navigate(["/"+e],{queryParams:t.urlParams});var n=window.location,i=_.map(t.urlParams||[],function(e,t){return t+"="+e}),o=i.length>0?"?"+i.join("&"):"";n.href=n.origin+n.pathname+"#/"+e+o},e.prototype.goToPrevious=function(){this.history.getPagesCount()&&(this.transition=this.history.getCurrentPage().transition,_.isEmpty(this.transition)||(this.transition+="-exit"),this.history.pop(),this.isPageAddedToHistory=!0,window.history.back())},e.prototype.goToView=function(e,t,n){var i=this,o=(t=t||{}).pageName,r=t.transition||"",a=t.$event,s=this.app.activePage,l=n&&n._context&&n._context.prefabName;if(this.app.isPrefabType)this.goToElementView($("body:first >app-root:last").find('[name="'+e+'"]'),e,o,n);else if(o===s.activePageName||l)l&&this.isPrefabWithNameExists(l)?this.goToElementView($('[prefabName="'+l+'"]').find('[name="'+e+'"]'),e,o,n):o&&o!==s.activePageName?this.app.notifyApp(y.CONSTANTS.WIDGET_DOESNT_EXIST,"error"):this.goToElementView($("body:first >app-root:last").find('[name="'+e+'"]'),e,o,n);else if(this.isPartialWithNameExists(o))this.goToElementView($('[partialcontainer][content="'+o+'"]').find('[name="'+e+'"]'),e,o,n);else{this.goToPage(o,{viewName:e,$event:a,transition:r,urlParams:t.urlParams});var c=this.app.subscribe("pageReady",function(t){i.goToElementView($("body:first >app-root:last").find('[name="'+e+'"]'),e,o,n),c()})}},e.prototype.goToElementView=function(e,t,n,i){var o,r,a=this,s=this.app.activePage;if(e.length)switch(this.app.isPrefabType||n!==s.activePageName||(e=this.getViewElementInActivePage(e)),(o=e[0].widget).widgetType){case"wm-accordionpane":this.showAncestors(e,i),o.expand();break;case"wm-tabpane":this.showAncestors(e,i),o.select();break;case"wm-segment-content":this.showAncestors(e,i),o.navigate();break;case"wm-panel":o.expanded=!0}else r=this.showAncestorDialog(t),setTimeout(function(){r&&a.goToElementView($('[name="'+t+'"]'),t,n,i)})},e.prototype.getViewElementInActivePage=function(e){var t;return e.length>1&&(t=_.filter(e,function(e){if(_.isEmpty($(e).closest('[data-role = "partial"]'))&&_.isEmpty($(e).closest("[wmprefabcontainer]")))return e}))&&(e=$(t)),e},e.prototype.isPartialWithNameExists=function(e){return $('[partialcontainer][content="'+e+'"]').length},e.prototype.isPrefabWithNameExists=function(e){return $('[prefabName="'+e+'"]').length},e.prototype.showAncestors=function(e,t){e.parents('[wm-navigable-element="true"]').toArray().reverse().forEach(function(e){var t=e.widget;switch(t.widgetType){case"wm-accordionpane":t.expand();break;case"wm-tabpane":t.select();break;case"wm-segment-content":t.navigate();break;case"wm-panel":t.expanded=!0}})},e.prototype.showAncestorDialog=function(e){var t;return $("app-root [dialogtype]").each(function(){var n=$(this);if($(n.html()).find('[name="'+e+'"]').length)return t=n.attr("name"),!1}),t},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:E.App},{type:u.Router}]},e}(),ve=function(){function e(e,t,n){this.name=e,this.urlParams=t,this.transition=n,this.transition=_.isEmpty(this.transition)?null:this.transition}return e.prototype.isEqual=function(e){return e&&e.name===this.name&&_.isEqual(e.urlParams,this.urlParams)},e}(),ye=function(){function e(){this.stack=[]}return e.prototype.getCurrentPage=function(){return this.currentPage},e.prototype.getPagesCount=function(){return this.stack.length},e.prototype.isLastVisitedPage=function(e){return this.getLastPage().isEqual(e)},e.prototype.push=function(e){this.currentPage&&this.stack.push(this.currentPage),this.currentPage=e},e.prototype.pop=function(){return this.currentPage=this.stack.pop(),this.currentPage},e.prototype.getLastPage=function(){return this.stack.length>0?this.stack[this.stack.length-1]:void 0},e}(),be=function(){function e(){}return e.prototype.setFormats=function(e){var t=e.date,n=e.time,i=t&&n?t+" "+n:void 0;this.dateFormat=t,this.timeFormat=n,this.dateTimeFormat=i},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[]},e}(),we=!1,Pe=function(){function e(e,t){this.securityService=e,this.appManager=t}return e.prototype.loadSecurityConfig=function(){return we?Promise.resolve(!0):this.appManager.loadSecurityConfig().then(function(){return we=!0})},e.prototype.isAuthenticated=function(){var e=this;return this.loadSecurityConfig().then(function(){return new Promise(function(t,n){e.securityService.isAuthenticated(t,n)})})},e.prototype.canActivate=function(e){var t=this;return this.isAuthenticated().then(function(n){return n?Promise.resolve(!0):(t.appManager.handle401(e.routeConfig.path),Promise.resolve(!1))})},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:p.SecurityService},{type:x}]},e}(),_e=function(){function e(e,t,n,i,o){this.securityService=e,this.authGuard=t,this.toasterService=n,this.app=i,this.appManager=o}return e.prototype.canActivate=function(e){var t=this,n=e.data.allowedRoles;return this.authGuard.isAuthenticated().then(function(i){if(i){var o=t.securityService.get().userInfo.userRoles;return _.intersection(n,o).length>0?Promise.resolve(!0):(t.appManager.notifyApp(t.app.appLocale.LABEL_ACCESS_DENIED||"Access Denied","error"),Promise.resolve(!1))}return t.appManager.handle401(e.routeConfig.path),Promise.resolve(!1)})},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:p.SecurityService},{type:Pe},{type:E.AbstractToasterService},{type:E.App},{type:x}]},e}(),Oe=function(){function e(e,t){this.app=e,this.appManager=t}return e.prototype.canActivate=function(e){return this.appManager.notifyApp(this.app.appLocale.MESSAGE_PAGE_NOT_FOUND||"The page you are trying to reach is not available","error"),Promise.resolve(!1)},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:E.App},{type:x}]},e}(),Re=!1,Ee=function(){function e(e,t,n,i){this.inj=e,this.app=t,this.utilService=n,this.appJsProvider=i}return e.prototype.resolve=function(){return H(this,void 0,void 0,function(){var e;return z(this,function(t){switch(t.label){case 0:if(Re)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.appJsProvider.getAppScriptFn()];case 2:return t.sent()(this.app,this.utilService,this.inj),[3,4];case 3:return e=t.sent(),console.warn("Error in executing app.js",e),[3,4];case 4:return Re=!0,[2,!0]}})})},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:R.Injector},{type:E.App},{type:E.UtilsService},{type:A}]},e}(),Te=function(){function e(e){this.i18nService=e}return e.prototype.resolve=function(){return this.i18nService.loadDefaultLocale()},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:E.AbstractI18nService}]},e}(),Se=function(){function e(e,t){var n=this;this.compiler=e,this.injector=t,this._locale=E.getSessionStorageItem("selectedLocale")||"en",this.preparePipeMeta=function(e,t,n,i){return void 0===i&&(i=[]),{type:{reference:e,diDeps:i},name:t,pure:n}},this._pipeData=[this.preparePipeMeta(h.AsyncPipe,"async",!1,[R.ChangeDetectorRef]),this.preparePipeMeta(h.SlicePipe,"slice",!1),this.preparePipeMeta(h.PercentPipe,"percent",!0,[this._locale]),this.preparePipeMeta(h.I18nPluralPipe,"i18nPlural",!0,[h.NgLocalization]),this.preparePipeMeta(h.I18nSelectPipe,"i18nSelect",!0),this.preparePipeMeta(h.KeyValuePipe,"keyvalue",!1,[R.KeyValueDiffers]),this.preparePipeMeta(f.FileIconClassPipe,"fileIconClass",!0),this.preparePipeMeta(f.FileExtensionFromMimePipe,"fileExtensionFromMime",!0),this.preparePipeMeta(f.StateClassPipe,"stateClass",!0),this.preparePipeMeta(f.FileSizePipe,"filesize",!0),this.preparePipeMeta(f.FilterPipe,"filter",!0),this.preparePipeMeta(h.UpperCasePipe,"uppercase",!0),this.preparePipeMeta(h.LowerCasePipe,"lowercase",!0),this.preparePipeMeta(h.JsonPipe,"json",!1),this.preparePipeMeta(h.DecimalPipe,"number",!0,[this._locale]),this.preparePipeMeta(h.TitleCasePipe,"titlecase",!0),this.preparePipeMeta(h.CurrencyPipe,"currency",!0,[this._locale]),this.preparePipeMeta(h.DatePipe,"date",!0,[this._locale]),this.preparePipeMeta(f.ToDatePipe,"toDate",!0,[new h.DatePipe(this._locale)]),this.preparePipeMeta(f.ToNumberPipe,"toNumber",!0,[new h.DecimalPipe(this._locale)]),this.preparePipeMeta(f.ToCurrencyPipe,"toCurrency",!0,[new h.DecimalPipe(this._locale)]),this.preparePipeMeta(f.PrefixPipe,"prefix",!0),this.preparePipeMeta(f.SuffixPipe,"suffix",!0),this.preparePipeMeta(f.TimeFromNowPipe,"timeFromNow",!0),this.preparePipeMeta(f.NumberToStringPipe,"numberToString",!0,[new h.DecimalPipe(this._locale)]),this.preparePipeMeta(f.StringToNumberPipe,"stringToNumber",!0)],this._pipeMeta=new Map,this._pipeData.forEach(function(e){n._pipeMeta.set(e.name,e)})}return e.prototype.unknownPipe=function(e){throw Error("The pipe '"+e+"' could not be found")},e.prototype.meta=function(e){var t=this._pipeMeta.get(e);return t||this.unknownPipe(e),t},e.prototype.getPipeNameVsIsPureMap=function(){var e=new Map;return this._pipeMeta.forEach(function(t,n){e.set(n,t.pure)}),e},e.prototype.resolveDep=function(e){return this.injector.get(e.token.identifier.reference)},e.prototype.getInstance=function(e){var t,n,i=this.meta(e).type,o=i.reference,r=i.diDeps;if(o||this.unknownPipe(e),r.length){var a=[];try{for(var s=Y(r),l=s.next();!l.done;l=s.next()){var c=l.value;a.push(c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return new(o.bind.apply(o,Q([void 0],a)))}return new o},e.decorators=[{type:R.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:R.Compiler},{type:R.Injector}]},e.ngInjectableDef=R.defineInjectable({factory:function(){return new e(R.inject(R.Compiler),R.inject(R.INJECTOR))},token:e,providedIn:"root"}),e}(),Ce=function(){function e(e,t,n,i,o,r,a,s,l){var c,p=this;this.elRef=n,this.oAuthService=i,this.dialogService=o,this.spinnerService=r,this.router=s,this.app=l,this.startApp=!1,this.isApplicationType=!1,this.spinner={show:!1,messages:[]},this.isOAuthDialogOpen=!1,E.setPipeProvider(e),E.setNgZone(a),E.setAppRef(t),this.isApplicationType="APPLICATION"===E.getWmProjectProperties().type,i.getOAuthProvidersAsObservable().subscribe(function(e){p.providersConfig=e,e.length?p.showOAuthDialog():p.closeOAuthDialog()}),this.spinnerService.getMessageSource().asObservable().subscribe(function(e){setTimeout(function(){p.spinner.show=e.show,p.spinner.messages=e.messages})}),d.setTheme("bs3"),E.hasCordova()&&!window.wmDeviceReady?document.addEventListener("wmDeviceReady",function(){return p.startApp=!0}):this.startApp=!0,this.router.events.subscribe(function(e){if(e instanceof u.NavigationStart){c=p.spinnerService.show("","globalSpinner");var t=document.querySelector("app-page-outlet");t&&E.addClass(t,"page-load-in-progress")}else(e instanceof u.NavigationEnd||e instanceof u.NavigationCancel||e instanceof u.NavigationError)&&setTimeout(function(){p.spinnerService.hide(c);var e=document.querySelector("app-page-outlet");e&&E.removeClass(e,"page-load-in-progress")},1e3)})}return e.prototype.showOAuthDialog=function(){this.isOAuthDialogOpen||(this.isOAuthDialogOpen=!0,this.dialogService.open("oAuthLoginDialog",this))},e.prototype.closeOAuthDialog=function(){this.isOAuthDialogOpen&&(this.isOAuthDialogOpen=!1,this.dialogService.close("oAuthLoginDialog",this))},e.prototype.ngAfterViewInit=function(){this.app.dynamicComponentContainerRef=this.dynamicComponentContainerRef},e.prototype.ngDoCheck=function(){E.$invokeWatchers()},e.decorators=[{type:R.Component,args:[{selector:"app-root",template:'<ng-container *ngIf="startApp">\n    <router-outlet></router-outlet>\n    <div wmContainer partialContainer content="Common" hidden class="ng-hide" *ngIf="isApplicationType"></div>\n    <app-spinner name="globalspinner" classname="global-spinner" [show]="spinner.show" [spinnermessages]="spinner.messages"></app-spinner>\n    <div wmDialog name="oAuthLoginDialog" title.bind="\'Application is requesting you to sign in with\'"\n         close.event="closeOAuthDialog()">\n        <ng-template #dialogBody>\n            <ul class="list-items">\n                <li class="list-item" *ngFor="let provider of providersConfig">\n                    <button class="btn" (click)="provider.invoke()">{{provider.name}}</button>\n                </li>\n            </ul>\n        </ng-template>\n    </div>\n    <div wmConfirmDialog name="_app-confirm-dialog" title.bind="title" message.bind="message" oktext.bind="oktext"\n         canceltext.bind="canceltext" closable="false"\n         iconclass.bind="iconclass" ok.event="onOk()" cancel.event="onCancel()" close.event="onClose()" opened.event="onOpen()"></div>\n    <div wmAppExt></div>\n    <i id="wm-mobile-display"></i>\n</ng-container>\n\x3c!--Dummy container to create the component dynamically--\x3e\n<ng-container #dynamicComponent></ng-container>\n',encapsulation:R.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:Se},{type:R.ApplicationRef},{type:R.ElementRef},{type:m.OAuthService},{type:E.AbstractDialogService},{type:E.AbstractSpinnerService},{type:R.NgZone},{type:u.Router},{type:E.App}]},e.propDecorators={dynamicComponentContainerRef:[{type:R.ViewChild,args:["dynamicComponent",{read:R.ViewContainerRef}]}]},e}(),Ie=function(){function e(){this.wmHttpRequest=new b.WmHttpRequest,this.wmHttpResponse=new b.WmHttpResponse}return e.prototype.createSubject=function(){return new g.Subject},e.prototype.intercept=function(e,t){var n,i,o=this;if(y.appManager&&y.appManager.appOnBeforeServiceCall){var r=this.wmHttpRequest.angularToWmRequest(e);(n=y.appManager.appOnBeforeServiceCall(r))&&(n=this.wmHttpRequest.wmToAngularRequest(n),e=n)}return t.handle(e).pipe(v.tap(function(e){if(e&&4===e.type&&y.appManager&&y.appManager.appOnServiceSuccess){var t=o.wmHttpResponse.angularToWmResponse(e);(i=y.appManager.appOnServiceSuccess(t.body,t))&&(i=o.wmHttpResponse.wmToAngularResponse(i),_.extend(e,i))}},function(t){if(t._401Subscriber=o.createSubject(),y.httpService.isPlatformSessionTimeout(t)&&y.httpService.handleSessionTimeout(e,t._401Subscriber),y.appManager&&y.appManager.appOnServiceError){var n=o.wmHttpResponse.angularToWmResponse(t);(i=y.appManager.appOnServiceError(n.message,n))&&(i=o.wmHttpResponse.wmToAngularResponse(i),_.extend(t,i))}}))},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[]},e}(),Ae="PREFAB",De=function(){function e(e){var t=this;this.prefabManager=e,window.addEventListener("message",function(e){if((e.data&&e.data.context)===Ae){var n=e.data.action,i=e.data.payload;"init"===n?t.init():"set-property"===n?t.setProperty(i):"get-outbound-properties"===n?t.getOutboundProps():"invoke-script"===n&&t.invokeScript(i)}})}return e.prototype.postMessage=function(e,t){var n={context:Ae,action:e,payload:t};window.top.postMessage(n,"*")},e.prototype.setupEventListeners=function(){var e=this;this.prefabInstance.invokeEventCallback=function(t,n){void 0===n&&(n={}),e.postMessage("event-log",{name:t,data:n})}},e.prototype.init=function(){var e=this;this.previewMode=!0,this.prefabInstance.readyState.subscribe(function(){},function(){},function(){e.prefabManager.getConfig("__self__").then(function(t){e.config=t,e.postMessage("config",t),e.setupEventListeners()})})},e.prototype.setProperty=function(e){this.prefabInstance.widget[e.name]=e.value},e.prototype.isOutBoundProp=function(e){return"out-bound"===e.bindable||"in-out-bound"===e.bindable},e.prototype.getOutboundProps=function(){var e,t,n={};try{for(var i=Y(Object.entries(this.config.properties||{})),o=i.next();!o.done;o=i.next()){var r=K(o.value,2),a=r[0],s=r[1];this.isOutBoundProp(s)&&(n[a]=this.prefabInstance.widget[a])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.postMessage("outbound-properties",n)},e.prototype.invokeScript=function(e){var t="\n return "+e.script+";",n=new Function("Prefab",t)(this.prefabInstance);this.postMessage("method-output",{methodName:e.methodName,output:n})},e.prototype.ngAfterViewInit=function(){this.setupEventListeners(),this.postMessage("init")},e.decorators=[{type:R.Component,args:[{selector:"wm-prefab-preview",template:'\n        <div class="prefab-preview row">\n            <section wmPrefab name="prefab-preview" prefabname="__self__"></section>\n        </div>\n    '}]}],e.ctorParameters=function(){return[{type:V}]},e.propDecorators={prefabInstance:[{type:R.ViewChild,args:[w.PrefabDirective]}]},e}();O.initComponentsBuildTask();var Ne=new Map,xe=function(){function e(e,t,n){this.app=e,this.appManager=t,this.compiler=n,this.counter=1}return e.prototype.getComponentFactoryRef=function(e,t,n){return void 0===n&&(n={}),H(this,void 0,void 0,function(){var i,o,r;return z(this,function(a){var s;return i=Ne.get(e),t=n.transpile?P.transpile(t).markup:t,i&&!n.noCache||(o=function(e,t,n){void 0===n&&(n="");var i={template:t,styles:[n],encapsulation:R.ViewEncapsulation.None};return function(){function t(){}return t.decorators=[{type:R.Component,args:[q({},i,{selector:e})]}],t}()}(e,t,n.styles),s=o,r=function(){function e(){}return e.decorators=[{type:R.NgModule,args:[{declarations:[s],imports:[Ge],schemas:[R.CUSTOM_ELEMENTS_SCHEMA,R.NO_ERRORS_SCHEMA]}]}],e}(),i=this.compiler.compileModuleAndAllComponentsSync(r).componentFactories.filter(function(e){return e.componentType===o})[0],Ne.set(e,i)),[2,i]})})},e.prototype.addComponent=function(e,t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),H(this,void 0,void 0,function(){var o,r;return z(this,function(a){switch(a.label){case 0:return i.transpile=!E.isDefined(i.transpile)||i.transpile,i.noCache=!E.isDefined(i.noCache)||i.noCache,i.selector=E.isDefined(i.selector)?i.selector:"wm-dynamic-component-"+this.counter++,[4,this.getComponentFactoryRef(i.selector,t,i)];case 1:return o=a.sent(),r=this.app.dynamicComponentContainerRef.createComponent(o,0),E.extendProto(r.instance,n),e.appendChild(r.location.nativeElement),[2]}})})},e.decorators=[{type:R.Injectable}],e.ctorParameters=function(){return[{type:E.App},{type:x},{type:R.Compiler}]},e}(),Me=function(){function e(){}return e.prototype.canDeactivate=function(e,t,n){return!e.canDeactivate||e.canDeactivate()},e.decorators=[{type:R.Injectable}],e}();function ke(e){return function(){return E._WM_APP_PROJECT.id=location.href.split("/")[3],E._WM_APP_PROJECT.cdnUrl=document.querySelector('[name="cdnUrl"]')&&document.querySelector('[name="cdnUrl"]').getAttribute("content"),E._WM_APP_PROJECT.ngDest="ng-bundle/",e.loadDefaultLocale()}}function Le(e){return e.isAngularLocaleLoaded()?e.getSelectedLocale():e.getDefaultSupportedLocale()}var Fe=[ie,oe,re,ae,le,Ce,De,se],Be=[i.ConfirmDialogModule,o.DesignDialogModule,n.DialogModule];$.fn.swipeAnimation.expressionEvaluator=E.$parseExpr;var Ge=function(){function e(){e.addCustomEventPolyfill()}return e.addCustomEventPolyfill=function(){if("function"==typeof window.CustomEvent)return!1;var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};e.prototype=window.Event.prototype,window.CustomEvent=e},e.forRoot=function(){return{ngModule:e,providers:[{provide:E.App,useClass:ue},{provide:E.AbstractToasterService,useClass:de},{provide:E.AbstractI18nService,useClass:he},{provide:E.AbstractSpinnerService,useClass:fe},{provide:E.AbstractNavigationService,useClass:ge},{provide:E.AppDefaults,useClass:be},{provide:E.DynamicComponentRefProvider,useClass:xe},{provide:R.APP_INITIALIZER,useFactory:ke,deps:[E.AbstractI18nService],multi:!0},{provide:R.LOCALE_ID,useFactory:Le,deps:[E.AbstractI18nService]},{provide:s.HTTP_INTERCEPTORS,useClass:Ie,multi:!0},h.DecimalPipe,h.DatePipe,x,V,Pe,_e,Oe,Me,Ee,Te]}},e.decorators=[{type:R.NgModule,args:[{declarations:Fe,imports:[h.CommonModule,u.RouterModule,s.HttpClientModule,a.ToastrModule,f.WmComponentsModule,w.PrefabModule,r.MobileRuntimeModule,E.CoreModule,p.SecurityModule,m.OAuthModule,y.VariablesModule,b.HttpServiceModule,Be],exports:[Fe,h.CommonModule,f.WmComponentsModule,r.MobileRuntimeModule,E.CoreModule,p.SecurityModule,m.OAuthModule,y.VariablesModule,b.HttpServiceModule,Be],entryComponents:[ae]}]}],e.ctorParameters=function(){return[]},e}(),je=[f.WmComponentsModule.forRoot(),r.MobileRuntimeModule.forRoot(),E.CoreModule.forRoot(),p.SecurityModule.forRoot(),m.OAuthModule.forRoot(),y.VariablesModule.forRoot(),b.HttpServiceModule.forRoot(),Ge.forRoot()],Ve=!1,$e=function(){function e(e,t){this.appManager=e,this.appVariablesProvider=t}return e.prototype.resolve=function(){var e=this;return!!Ve||this.appVariablesProvider.getAppVariables().then(function(t){return e.appManager.loadAppVariables(t)}).then(function(){return Ve=!0})},e.decorators=[{type:R.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x},{type:D}]},e.ngInjectableDef=R.defineInjectable({factory:function(){return new e(R.inject(x),R.inject(D))},token:e,providedIn:"root"}),e}(),Ue=!1,We=function(){function e(e){this.appManager=e}return e.prototype.resolve=function(){return Ue||this.appManager.loadMetadata().then(function(){return Ue=!0})},e.decorators=[{type:R.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x}]},e.ngInjectableDef=R.defineInjectable({factory:function(){return new e(R.inject(x))},token:e,providedIn:"root"}),e}(),qe=function(){function e(e){this.appManager=e,this.loaded=this.appManager.isPrefabType()||this.appManager.isTemplateBundleType()||!E.getWmProjectProperties().securityEnabled}return e.prototype.resolve=function(){var e=this;return this.loaded||this.appManager.loadSecurityConfig().then(function(){e.loaded=!0})},e.decorators=[{type:R.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:x}]},e.ngInjectableDef=R.defineInjectable({factory:function(){return new e(R.inject(x))},token:e,providedIn:"root"}),e}();e.\u0275d=re,e.\u0275e=ae,e.\u0275b=ie,e.\u0275c=oe,e.\u0275f=le,e.\u0275m=be,e.\u0275h=ue,e.\u0275n=xe,e.\u0275o=Ie,e.\u0275j=he,e.\u0275l=ge,e.\u0275g=Se,e.\u0275k=fe,e.\u0275i=de,e.\u0275a=Z,e.ComponentRefProvider=C,e.PrefabConfigProvider=I,e.AppJSProvider=A,e.AppVariablesProvider=D,e.PartialRefProvider=N,e.AppManagerService=x,e.PrefabManagerService=V,e.\u02750=j,e.BasePageComponent=te,e.commonPartialWidgets=J,e.BasePartialComponent=ee,e.BasePrefabComponent=ne,e.InitializeApp=ke,e.setAngularLocale=Le,e.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS=Be,e.RuntimeBaseModule=Ge,e.WM_MODULES_FOR_ROOT=je,e.isPrefabInPreview=M,e.getPrefabBaseUrl=k,e.getPrefabConfigUrl=function(e){return k(e)+"/config.json"},e.getPrefabMinJsonUrl=function(e){return k(e)+"/pages/Main/page.min.json"},e.AuthGuard=Pe,e.RoleGuard=_e,e.PageNotFoundGaurd=Oe,e.AppComponent=Ce,e.EmptyPageComponent=se,e.PrefabPreviewComponent=De,e.AppJSResolve=Ee,e.AppVariablesResolve=$e,e.I18nResolve=Te,e.MetadataResolve=We,e.SecurityConfigResolve=qe,e.CanDeactivatePageGuard=Me,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser-dynamic"),require("@angular/platform-browser"),require("@angular/common"),require("@angular/forms"),require("ngx-bootstrap"),require("ng-circle-progress"),require("ngx-toastr"),require("@wm/components/basic"),require("@wm/components/basic/progress"),require("@wm/components/basic/rich-text-editor"),require("@wm/components/basic/search"),require("@wm/components/basic/tree"),require("@wm/components/input"),require("@wm/components/input/calendar"),require("@wm/components/input/chips"),require("@wm/components/input/color-picker"),require("@wm/components/input/currency"),require("@wm/components/input/epoch"),require("@wm/components/input/file-upload"),require("@wm/components/input/rating"),require("@wm/components/input/slider"),require("@wm/mobile/runtime/dynamic"),require("@wm/components/data/card"),require("@wm/components/data/form"),require("@wm/components/data/list"),require("@wm/components/data/live-table"),require("@wm/components/data/pagination"),require("@wm/components/data/table"),require("@wm/components/chart"),require("@wm/components/containers/accordion"),require("@wm/components/containers/layout-grid"),require("@wm/components/containers/panel"),require("@wm/components/containers/tabs"),require("@wm/components/containers/tile"),require("@wm/components/containers/wizard"),require("@wm/components/dialogs/alert-dialog"),require("@wm/components/dialogs/iframe-dialog"),require("@wm/components/dialogs/login-dialog"),require("@wm/components/dialogs/partial-dialog"),require("@wm/components/navigation/breadcrumb"),require("@wm/components/navigation/menu"),require("@wm/components/navigation/navbar"),require("@wm/components/navigation/popover"),require("@wm/components/advanced/carousel"),require("@wm/components/advanced/login"),require("@wm/components/advanced/marquee"),require("@wm/components/page"),require("@wm/components/page/footer"),require("@wm/components/page/header"),require("@wm/components/page/left-panel"),require("@wm/components/page/right-panel"),require("@wm/components/page/top-nav"),require("@wm/components/prefab"),require("@angular/router"),require("@wm/variables"),require("@wm/security"),require("@angular/common/http"),require("@wm/core"),require("@wm/transpiler"),require("@angular/core"),require("@wm/runtime/base")):"function"==typeof define&&define.amd?define("@wm/runtime/dynamic",["exports","@angular/platform-browser-dynamic","@angular/platform-browser","@angular/common","@angular/forms","ngx-bootstrap","ng-circle-progress","ngx-toastr","@wm/components/basic","@wm/components/basic/progress","@wm/components/basic/rich-text-editor","@wm/components/basic/search","@wm/components/basic/tree","@wm/components/input","@wm/components/input/calendar","@wm/components/input/chips","@wm/components/input/color-picker","@wm/components/input/currency","@wm/components/input/epoch","@wm/components/input/file-upload","@wm/components/input/rating","@wm/components/input/slider","@wm/mobile/runtime/dynamic","@wm/components/data/card","@wm/components/data/form","@wm/components/data/list","@wm/components/data/live-table","@wm/components/data/pagination","@wm/components/data/table","@wm/components/chart","@wm/components/containers/accordion","@wm/components/containers/layout-grid","@wm/components/containers/panel","@wm/components/containers/tabs","@wm/components/containers/tile","@wm/components/containers/wizard","@wm/components/dialogs/alert-dialog","@wm/components/dialogs/iframe-dialog","@wm/components/dialogs/login-dialog","@wm/components/dialogs/partial-dialog","@wm/components/navigation/breadcrumb","@wm/components/navigation/menu","@wm/components/navigation/navbar","@wm/components/navigation/popover","@wm/components/advanced/carousel","@wm/components/advanced/login","@wm/components/advanced/marquee","@wm/components/page","@wm/components/page/footer","@wm/components/page/header","@wm/components/page/left-panel","@wm/components/page/right-panel","@wm/components/page/top-nav","@wm/components/prefab","@angular/router","@wm/variables","@wm/security","@angular/common/http","@wm/core","@wm/transpiler","@angular/core","@wm/runtime/base"],t):t((e.wm=e.wm||{},e.wm.runtime=e.wm.runtime||{},e.wm.runtime.dynamic={}),e.ng.platformBrowserDynamic,e.ng.platformBrowser,e.ng.common,e.ng.forms,e.ngxBootstrap,e.ngCircleProgress,e.ngxToastr,e.wm.components.basic,e.wm.components.basic.progress,e.wm.components.basic.richtexteditor,e.wm.components.basic.search,e.wm.components.basic.tree,e.wm.components.input,e.wm.components.input.calendar,e.wm.components.input.chips,e.wm.components.input.colorpicker,e.wm.components.input.currency,e.wm.components.input.epoch,e.wm.components.input.fileupload,e.wm.components.input.rating,e.wm.components.input.slider,e.wm.mobile.runtime.dynamic,e.wm.components.data.card,e.wm.components.data.form,e.wm.components.data.list,e.wm.components.data.livetable,e.wm.components.data.pagination,e.wm.components.data.table,e.wm.components.chart,e.wm.components.containers.accordion,e.wm.components.containers.layoutgrid,e.wm.components.containers.panel,e.wm.components.containers.tabs,e.wm.components.containers.tile,e.wm.components.containers.wizard,e.wm.components.dialogs.alertdialog,e.wm.components.dialogs.iframedialog,e.wm.components.dialogs.logindialog,e.wm.components.dialogs.partialdialog,e.wm.components.navigation.breadcrumb,e.wm.components.navigation.menu,e.wm.components.navigation.navbar,e.wm.components.navigation.popover,e.wm.components.advanced.carousel,e.wm.components.advanced.login,e.wm.components.advanced.marquee,e.wm.components.page,e.wm.components.page.footer,e.wm.components.page.header,e.wm.components.page.leftpanel,e.wm.components.page.rightpanel,e.wm.components.page.topnav,e.wm.components.prefab,e.ng.router,e.wm.variables,e.wm.security,e.ng.common.http,e.wm.core,e.wm.transpiler,e.ng.core,e.wm.runtime.base)}(this,function(e,t,n,i,o,r,a,s,l,c,p,u,d,m,h,f,g,v,y,b,w,P,O,R,E,T,S,C,I,A,D,N,x,M,k,L,F,B,G,j,V,U,W,q,H,z,Y,K,Q,X,Z,J,ee,te,ne,ie,oe,re,ae,se,le,ce){"use strict";var pe=function(e,t){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ue(e,t){function n(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var de=function(){return(de=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function me(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{l(i.next(e))}catch(e){r(e)}}function s(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}l((i=i.apply(e,t||[])).next())})}function he(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}function fe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function ge(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(fe(arguments[t]));return e}var ve=function(){function e(e,t,n,i,o,r,a,s,l,c,p,u,d){this.injector=e,this.route=t,this.vcRef=n,this.appRef=i,this.metadataService=o,this.securityService=r,this.appManager=a,this.app=s,this.ngZone=l,this.elRef=c,this.spinnerService=p,this.componentRefProvider=u,this.router=d}return e.prototype.getTargetNode=function(){return this.elRef.nativeElement},e.prototype.resetViewContainer=function(){this.vcRef.clear(),this.getTargetNode().innerHTML=""},e.prototype.renderPage=function(e){var t=this,n=this.getTargetNode();this.appManager.loadAppVariables().then(function(){return me(t,void 0,void 0,function(){var t,i;return he(this,function(o){switch(o.label){case 0:return[4,this.componentRefProvider.getComponentFactoryRef(e,ce.ComponentType.PAGE)];case 1:return(t=o.sent())&&(i=this.vcRef.createComponent(t,0,this.injector),n.appendChild(i.location.nativeElement)),this.vcRef.length>1&&this.vcRef.remove(1),[2]}})})})},e.prototype.renderPrefabPreviewPage=function(){this.router.navigate(["prefab-preview"])},e.prototype.canDeactivate=function(){var e;return!1!==(e=this.app.activePage&&this.app.activePage.onBeforePageLeave())&&(e=(this.app.onBeforePageLeave||ae.noop)(this.app.activePageName,this.app.activePage)),void 0===e||e},e.prototype.loadPage=function(e){var t=this;this.ngZone.run(function(){e&&t.renderPage(e)})},e.prototype.ngOnInit=function(){var e=this;this.app.isPrefabType?this.renderPrefabPreviewPage():($(this.getTargetNode()).find(">div:first").remove(),this.subscription=this.route.params.subscribe(function(t){var n=t.pageName;e.loadPage(n)}),this.queryParamSubscription=this.route.queryParams.subscribe(function(t){e.app.activePageName===e.route.snapshot.paramMap.get("pageName")&&e.loadPage(e.app.activePageName)}))},e.prototype.ngOnDestroy=function(){this.vcRef.clear(),this.subscription&&this.subscription.unsubscribe(),this.queryParamSubscription&&this.queryParamSubscription.unsubscribe()},e.decorators=[{type:le.Component,args:[{selector:"app-page-outlet",template:"<div></div>"}]}],e.ctorParameters=function(){return[{type:le.Injector},{type:ne.ActivatedRoute},{type:le.ViewContainerRef},{type:le.ApplicationRef},{type:ie.MetadataService},{type:oe.SecurityService},{type:ce.AppManagerService},{type:ae.App},{type:le.NgZone},{type:le.ElementRef},{type:ae.AbstractSpinnerService},{type:ce.ComponentRefProvider},{type:ne.Router}]},e.propDecorators={canDeactivate:[{type:le.HostListener,args:["window:beforeunload"]}]},e}(),ye={securityConfig:ce.SecurityConfigResolve,metadata:ce.MetadataResolve,appJS:ce.AppJSResolve},be=[{path:"",pathMatch:"full",resolve:ye,component:ce.EmptyPageComponent},{path:"prefab-preview",pathMatch:"full",resolve:ye,component:ce.PrefabPreviewComponent},{path:":pageName",pathMatch:"full",resolve:ye,component:ve,canDeactivate:[ce.CanDeactivatePageGuard]}],we=function(e){function t(t){var n=e.call(this)||this;return n.$http=t,n}return ue(t,e),t.prototype.getAppScriptFn=function(){return this.$http.get("./app.js",{responseType:"text"}).toPromise().then(function(e){return new Function("App","Utils","Injector",e)})},t.decorators=[{type:le.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:re.HttpClient}]},t.ngInjectableDef=le.defineInjectable({factory:function(){return new t(le.inject(re.HttpClient))},token:t,providedIn:"root"}),t}(ce.AppJSProvider),Pe=new Map,_e=function(){function e(e){this.$http=e}return e.prototype.get=function(e,t){var n=Pe.get(e);return n?Promise.resolve(n):this.$http.get(e).then(function(n){return t&&Pe.set(e,n),n})},e.prototype.clearCache=function(){Pe.clear()},e.decorators=[{type:le.Injectable}],e.ctorParameters=function(){return[{type:ae.AbstractHttpService}]},e}(),Oe=function(e){function t(t){var n=e.call(this)||this;return n.resourceManager=t,n}return ue(t,e),t.prototype.getAppVariables=function(){return me(this,void 0,void 0,function(){return he(this,function(e){return[2,this.resourceManager.get("./app.variables.json")]})})},t.decorators=[{type:le.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:_e}]},t.ngInjectableDef=le.defineInjectable({factory:function(){return new t(le.inject(_e))},token:t,providedIn:"root"}),t}(ce.AppVariablesProvider),Re=new Map;window.resourceCache=Re;var Ee=new Map;Ee.set(ce.ComponentType.PAGE,new Map),Ee.set(ce.ComponentType.PARTIAL,new Map),Ee.set(ce.ComponentType.PREFAB,new Map);var Te=function(e){return decodeURIComponent(e.replace(/\+/g," "))},Se=new Map,Ce=function(){function e(){}return e.prototype.init=function(){},e}(),Ie=function(e,t,n,i,o,r){var a={template:n,styles:[i],encapsulation:le.ViewEncapsulation.None},s=Ce,l="",c="";switch(t){case ce.ComponentType.PAGE:s=ce.BasePageComponent,l="app-page-"+e,c="Page";break;case ce.ComponentType.PARTIAL:s=ce.BasePartialComponent,l="app-partial-"+e,c="Partial";break;case ce.ComponentType.PREFAB:s=ce.BasePrefabComponent,l="app-prefab-"+e,c="Prefab"}return function(n){function i(i){var o=n.call(this)||this;switch(o.injector=i,t){case ce.ComponentType.PAGE:o.pageName=e;break;case ce.ComponentType.PARTIAL:o.partialName=e;break;case ce.ComponentType.PREFAB:o.prefabName=e}return n.prototype.init.call(o),o}return ue(i,n),i.prototype.evalUserScript=function(e,t,n){!function(e,t,n,i,o,r){var a=Se.get(t);a||(a=new Function(n,"App","Utils",e),Se.set(t,a)),a(i,o,r)}(o,l,c,e,t,n)},i.prototype.getVariables=function(){return JSON.parse(r)},i.decorators=[{type:le.Component,args:[de({},a,{selector:l,providers:[{provide:ae.UserDefinedExecutionContext,useExisting:i}]})]}],i.ctorParameters=function(){return[{type:le.Injector}]},i}(s)},Ae=function(e){function t(t,n,i,o){var r=e.call(this)||this;return r.resouceMngr=t,r.app=n,r.appManager=i,r.compiler=o,r}return ue(t,e),t.prototype.loadResourcesOfFragment=function(e,t){var n,i,o=this,r=(n=e,(i=t)===ce.ComponentType.PAGE||i===ce.ComponentType.PARTIAL?"./pages/"+n+"/page.min.json":i===ce.ComponentType.PREFAB?ce.getPrefabMinJsonUrl(n):void 0),a=Re.get(r);return a?Promise.resolve(a):this.resouceMngr.get(r,!0).then(function(n){var i=n.markup,o=n.script,a=n.styles,s=n.variables,l={markup:se.transpile(Te(i)).markup,script:Te(o),styles:se.scopeComponentStyles(e,t,Te(a)),variables:ae.getValidJSON(Te(s))};return Re.set(r,l),l},function(e){var t=e.details.status,n={404:o.app.appLocale.MESSAGE_PAGE_NOT_FOUND||"The page you are trying to reach is not available",403:o.app.appLocale.LABEL_ACCESS_DENIED||"Access Denied"};return Promise.reject(n[t])})},t.prototype.getComponentFactoryRef=function(e,t){return me(this,void 0,void 0,function(){var n,i,o=this;return he(this,function(r){return(n=Ee.get(t))&&(i=n.get(e))?[2,i]:[2,this.loadResourcesOfFragment(e,t).then(function(n){var r,a=n.markup,s=n.script,l=n.styles,c=n.variables,p=Ie(e,t,a,l,s,JSON.stringify(c)),u=(r=p,function(){function e(){}return e.decorators=[{type:le.NgModule,args:[{declarations:[r],imports:[ce.RuntimeBaseModule],schemas:[le.CUSTOM_ELEMENTS_SCHEMA,le.NO_ERRORS_SCHEMA]}]}],e}());return i=o.compiler.compileModuleAndAllComponentsSync(u).componentFactories.filter(function(e){return e.componentType===p})[0],Ee.get(t).set(e,i),i},function(e){e&&o.appManager.notifyApp(e,"error")})]})})},t.prototype.clearComponentFactoryRefCache=function(){this.resouceMngr.clearCache(),Re.clear(),Ee.forEach(function(e){e.clear()})},t.decorators=[{type:le.Injectable}],t.ctorParameters=function(){return[{type:_e},{type:ae.App},{type:ce.AppManagerService},{type:le.Compiler}]},t}(ce.ComponentRefProvider),De=new Map,Ne=function(e){function t(t){var n=e.call(this)||this;return n.resourceMngr=t,n}return ue(t,e),t.prototype.getConfig=function(e){var t=De.get(e);return t?Promise.resolve(t):this.resourceMngr.get(ce.getPrefabConfigUrl(e)).then(function(t){return De.set(e,t),t})},t.decorators=[{type:le.Injectable}],t.ctorParameters=function(){return[{type:_e}]},t}(ce.PrefabConfigProvider),xe=ne.RouterModule.forRoot(be,{useHash:!0,scrollPositionRestoration:"top"}),Me=s.ToastNoAnimationModule.forRoot({maxOpened:1,autoDismiss:!0}),ke=re.HttpClientXsrfModule.withOptions({cookieName:"wm_xsrf_token",headerName:ae.getWmProjectProperties().xsrf_header_name}),Le=r.ModalModule.forRoot(),Fe=r.BsDatepickerModule.forRoot(),Be=r.DatepickerModule.forRoot(),Ge=r.TimepickerModule.forRoot(),je=r.BsDropdownModule.forRoot(),Ve=r.PaginationModule.forRoot(),$e=r.TypeaheadModule.forRoot(),Ue=r.ProgressbarModule.forRoot(),We=r.CarouselModule.forRoot(),qe=r.PopoverModule.forRoot(),He=a.NgCircleProgressModule.forRoot({}),ze=r.TooltipModule.forRoot(),Ye=[r.BsDatepickerModule,r.DatepickerModule,r.TimepickerModule,r.BsDropdownModule,r.PaginationModule,r.TypeaheadModule,r.ProgressbarModule,r.CarouselModule,r.PopoverModule,a.NgCircleProgressModule,r.TooltipModule,l.BasicModule,c.ProgressModule,p.RichTextEditorModule,u.SearchModule,d.TreeModule,h.CalendarModule,f.ChipsModule,g.ColorPickerModule,v.CurrencyModule,y.EpochModule,b.FileUploadModule,m.InputModule,w.RatingModule,P.SliderModule,R.CardModule,E.FormModule,T.ListModule,S.LiveTableModule,C.PaginationModule,I.TableModule,A.ChartModule,D.AccordionModule,N.LayoutGridModule,x.PanelModule,M.TabsModule,k.TileModule,L.WizardModule,F.AlertDialogModule,B.IframeDialogModule,G.LoginDialogModule,j.PartialDialogModule,V.BreadcrumbModule,U.MenuModule,W.NavbarModule,q.PopoverModule,H.CarouselModule,z.LoginModule,Y.MarqueeModule,K.PageModule,Q.FooterModule,X.HeaderModule,Z.LeftPanelModule,J.RightPanelModule,ee.TopNavModule,te.PrefabModule];ce.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push.apply(ce.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS,ge(Ye)),ce.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push.apply(ce.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS,ge(O.MOBILE_COMPONENT_MODULES_FOR_ROOT)),ce.REQUIRED_MODULES_FOR_DYNAMIC_COMPONENTS.push(o.FormsModule,o.ReactiveFormsModule);var Ke=function(){function e(e,t,n){this.app=e,this.inj=t,this.componentRefProvider=n,window.cordova&&this.app.subscribe("userLoggedOut",this.componentRefProvider.clearComponentFactoryRefCache.bind(this.componentRefProvider))}return e.decorators=[{type:le.NgModule,args:[{declarations:[ve],imports:[n.BrowserModule,i.CommonModule,ne.RouterModule,re.HttpClientModule,Le,Fe,Be,Ge,je,Ve,$e,ze,Ue,We,qe,He,xe,Me,ke,ce.WM_MODULES_FOR_ROOT],providers:[_e,{provide:ce.AppJSProvider,useClass:we},{provide:ce.AppVariablesProvider,useClass:Oe},{provide:ce.ComponentRefProvider,useClass:Ae},{provide:ce.PartialRefProvider,useClass:Ae},{provide:ce.PrefabConfigProvider,useClass:Ne}],bootstrap:[ce.AppComponent]}]}],e.ctorParameters=function(){return[{type:ae.App},{type:le.Injector},{type:ce.ComponentRefProvider}]},e}(),Qe=/Spotcues/i.test(window.navigator.userAgent);"true"!==sessionStorage.getItem("debugMode")&&le.enableProdMode(),console.time("bootstrap");var Xe=function(e,t){return new Promise(function(n,i){window.resolveLocalFileSystemURL(e,function(e){e.getDirectory(t,{create:!0,exclusive:!1},n,i)},i)})},Ze=Xe,Je=function(e,t){void 0===t&&(t="SHA-256");var n=(new window.TextEncoder).encode(e);return crypto.subtle.digest(t,n).then(function(e){return Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")})},et=Je,tt=function(){var e=window.cordova,t=location.href.substring(0,location.href.indexOf("?"));return Je(t).then(function(t){return Xe(e.file.dataDirectory,t).then(function(){return e.file.dataDirectory+=t+"/"}).then(function(){return Xe(e.file.cacheDirectory,t)}).then(function(){return e.file.cacheDirectory+=t+"/"})})},nt=tt;document.addEventListener("DOMContentLoaded",function(){new Promise(function(e){Qe?window.SPOTCUES_UTILS.loadCordova(function(){document.addEventListener("deviceready",function(){tt().then(e)})}):window.cordova?document.addEventListener("deviceready",e):e()}).then(function(){return t.platformBrowserDynamic().bootstrapModule(Ke)}).then(function(){return console.timeEnd("bootstrap")},function(e){return console.log(e)})}),window.debugMode=function(e){_.isEmpty(e)&&(e=!0);var t=e?"true":"false";sessionStorage.getItem("debugMode")!==t&&(sessionStorage.setItem("debugMode",t),window.location.reload())},e.\u0275a=be,e.\u0275b=ve,e.\u0275d=we,e.\u0275c=_e,e.\u0275e=Oe,e.\u0275f=Ae,e.\u0275g=Ne,e.\u02750=Ze,e.\u02751=et,e.\u02752=nt,e.routerModule=xe,e.toastrModule=Me,e.httpClientXsrfModule=ke,e.modalModule=Le,e.bsDatePickerModule=Fe,e.datepickerModule=Be,e.timepickerModule=Ge,e.bsDropdownModule=je,e.paginationModule=Ve,e.typeaheadModule=$e,e.progressbarModule=Ue,e.carouselModule=We,e.popoverModule=qe,e.ngCircleProgressModule=He,e.tooltipModule=ze,e.AppModule=Ke,Object.defineProperty(e,"__esModule",{value:!0})});